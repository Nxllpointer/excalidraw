function AK(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var _a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ll(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mL={exports:{}},L6={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MK=Symbol.for("react.transitional.element"),kK=Symbol.for("react.fragment");function pL(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:MK,type:e,key:i,ref:t!==void 0?t:null,props:n}}L6.Fragment=kK;L6.jsx=pL;L6.jsxs=pL;mL.exports=L6;var uv=mL.exports;const de=uv.Fragment,g=uv.jsx,O=uv.jsxs;var UL={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv=Symbol.for("react.transitional.element"),RK=Symbol.for("react.portal"),DK=Symbol.for("react.fragment"),LK=Symbol.for("react.strict_mode"),OK=Symbol.for("react.profiler"),NK=Symbol.for("react.consumer"),PK=Symbol.for("react.context"),FK=Symbol.for("react.forward_ref"),BK=Symbol.for("react.suspense"),zK=Symbol.for("react.memo"),bL=Symbol.for("react.lazy"),$S=Symbol.iterator;function HK(e){return e===null||typeof e!="object"?null:(e=$S&&e[$S]||e["@@iterator"],typeof e=="function"?e:null)}var yL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EL=Object.assign,vL={};function Fh(e,t,n){this.props=e,this.context=t,this.refs=vL,this.updater=n||yL}Fh.prototype.isReactComponent={};Fh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wL(){}wL.prototype=Fh.prototype;function fv(e,t,n){this.props=e,this.context=t,this.refs=vL,this.updater=n||yL}var hv=fv.prototype=new wL;hv.constructor=fv;EL(hv,Fh.prototype);hv.isPureReactComponent=!0;var GS=Array.isArray,on={H:null,A:null,T:null,S:null},_L=Object.prototype.hasOwnProperty;function gv(e,t,n,i,r,s){return n=s.ref,{$$typeof:dv,type:e,key:t,ref:n!==void 0?n:null,props:s}}function VK(e,t){return gv(e.type,t,void 0,void 0,void 0,e.props)}function mv(e){return typeof e=="object"&&e!==null&&e.$$typeof===dv}function $K(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var XS=/\/+/g;function Hy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$K(""+e.key):t.toString(36)}function jS(){}function GK(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(jS,jS):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Kd(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case dv:case RK:o=!0;break;case bL:return o=e._init,Kd(o(e._payload),t,n,i,r)}}if(o)return r=r(e),o=i===""?"."+Hy(e,0):i,GS(r)?(n="",o!=null&&(n=o.replace(XS,"$&/")+"/"),Kd(r,t,n,"",function(c){return c})):r!=null&&(mv(r)&&(r=VK(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(XS,"$&/")+"/")+o)),t.push(r)),1;o=0;var a=i===""?".":i+":";if(GS(e))for(var l=0;l<e.length;l++)i=e[l],s=a+Hy(i,l),o+=Kd(i,t,n,s,r);else if(l=HK(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,s=a+Hy(i,l++),o+=Kd(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return Kd(GK(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function Dp(e,t,n){if(e==null)return e;var i=[],r=0;return Kd(e,i,"","",function(s){return t.call(n,s,r++)}),i}function XK(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var YS=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function jK(){}ze.Children={map:Dp,forEach:function(e,t,n){Dp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Dp(e,function(){t++}),t},toArray:function(e){return Dp(e,function(t){return t})||[]},only:function(e){if(!mv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=Fh;ze.Fragment=DK;ze.Profiler=OK;ze.PureComponent=fv;ze.StrictMode=LK;ze.Suspense=BK;ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=on;ze.act=function(){throw Error("act(...) is not supported in production builds of React.")};ze.cache=function(e){return function(){return e.apply(null,arguments)}};ze.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=EL({},e.props),r=e.key,s=void 0;if(t!=null)for(o in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!_L.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(i[o]=t[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}return gv(e.type,r,void 0,void 0,s,i)};ze.createContext=function(e){return e={$$typeof:PK,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:NK,_context:e},e};ze.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)_L.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return gv(e,s,void 0,void 0,null,r)};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:FK,render:e}};ze.isValidElement=mv;ze.lazy=function(e){return{$$typeof:bL,_payload:{_status:-1,_result:e},_init:XK}};ze.memo=function(e,t){return{$$typeof:zK,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=on.T,n={};on.T=n;try{var i=e(),r=on.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(jK,YS)}catch(s){YS(s)}finally{on.T=t}};ze.unstable_useCacheRefresh=function(){return on.H.useCacheRefresh()};ze.use=function(e){return on.H.use(e)};ze.useActionState=function(e,t,n){return on.H.useActionState(e,t,n)};ze.useCallback=function(e,t){return on.H.useCallback(e,t)};ze.useContext=function(e){return on.H.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e,t){return on.H.useDeferredValue(e,t)};ze.useEffect=function(e,t){return on.H.useEffect(e,t)};ze.useId=function(){return on.H.useId()};ze.useImperativeHandle=function(e,t,n){return on.H.useImperativeHandle(e,t,n)};ze.useInsertionEffect=function(e,t){return on.H.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return on.H.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return on.H.useMemo(e,t)};ze.useOptimistic=function(e,t){return on.H.useOptimistic(e,t)};ze.useReducer=function(e,t,n){return on.H.useReducer(e,t,n)};ze.useRef=function(e){return on.H.useRef(e)};ze.useState=function(e){return on.H.useState(e)};ze.useSyncExternalStore=function(e,t,n){return on.H.useSyncExternalStore(e,t,n)};ze.useTransition=function(){return on.H.useTransition()};ze.version="19.0.0";UL.exports=ze;var D=UL.exports;const se=ll(D),YK=AK({__proto__:null,default:se},[D]);var TL={exports:{}},O6={},SL={exports:{}},IL={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,V){var $=z.length;z.push(V);e:for(;0<$;){var G=$-1>>>1,J=z[G];if(0<r(J,V))z[G]=V,z[$]=J,$=G;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var V=z[0],$=z.pop();if($!==V){z[0]=$;e:for(var G=0,J=z.length,Ae=J>>>1;G<Ae;){var ye=2*(G+1)-1,ke=z[ye],wt=ye+1,Ot=z[wt];if(0>r(ke,$))wt<J&&0>r(Ot,ke)?(z[G]=Ot,z[wt]=$,G=wt):(z[G]=ke,z[ye]=$,G=ye);else if(wt<J&&0>r(Ot,$))z[G]=Ot,z[wt]=$,G=wt;else break e}}return V}function r(z,V){var $=z.sortIndex-V.sortIndex;return $!==0?$:z.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function v(z){for(var V=n(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=z)i(c),V.sortIndex=V.expirationTime,t(l,V);else break;V=n(c)}}function w(z){if(p=!1,v(z),!m)if(n(l)!==null)m=!0,K();else{var V=n(c);V!==null&&H(w,V.startTime-z)}}var S=!1,k=-1,_=5,T=-1;function A(){return!(e.unstable_now()-T<_)}function C(){if(S){var z=e.unstable_now();T=z;var V=!0;try{e:{m=!1,p&&(p=!1,b(k),k=-1),h=!0;var $=f;try{t:{for(v(z),d=n(l);d!==null&&!(d.expirationTime>z&&A());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var J=G(d.expirationTime<=z);if(z=e.unstable_now(),typeof J=="function"){d.callback=J,v(z),V=!0;break t}d===n(l)&&i(l),v(z)}else i(l);d=n(l)}if(d!==null)V=!0;else{var Ae=n(c);Ae!==null&&H(w,Ae.startTime-z),V=!1}}break e}finally{d=null,f=$,h=!1}V=void 0}}finally{V?R():S=!1}}}var R;if(typeof E=="function")R=function(){E(C)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,N=P.port2;P.port1.onmessage=C,R=function(){N.postMessage(null)}}else R=function(){y(C,0)};function K(){S||(S=!0,R())}function H(z,V){k=y(function(){z(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,K())},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(z){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var $=f;f=V;try{return z()}finally{f=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=f;f=z;try{return V()}finally{f=$}},e.unstable_scheduleCallback=function(z,V,$){var G=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?G+$:G):$=G,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=$+J,z={id:u++,callback:V,priorityLevel:z,startTime:$,expirationTime:J,sortIndex:-1},$>G?(z.sortIndex=$,t(c,z),n(l)===null&&z===n(c)&&(p?(b(k),k=-1):p=!0,H(w,$-G))):(z.sortIndex=J,t(l,z),m||h||(m=!0,K())),z},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(z){var V=f;return function(){var $=f;f=V;try{return z.apply(this,arguments)}finally{f=$}}}})(IL);SL.exports=IL;var WK=SL.exports,xL={exports:{}},rr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KK=D;function CL(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ul(){}var Qi={d:{f:Ul,r:function(){throw Error(CL(522))},D:Ul,C:Ul,L:Ul,m:Ul,X:Ul,S:Ul,M:Ul},p:0,findDOMNode:null},ZK=Symbol.for("react.portal");function qK(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ZK,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var k1=KK.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function N6(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}rr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Qi;rr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(CL(299));return qK(e,t,null,n)};rr.flushSync=function(e){var t=k1.T,n=Qi.p;try{if(k1.T=null,Qi.p=2,e)return e()}finally{k1.T=t,Qi.p=n,Qi.d.f()}};rr.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Qi.d.C(e,t))};rr.prefetchDNS=function(e){typeof e=="string"&&Qi.d.D(e)};rr.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=N6(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Qi.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Qi.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};rr.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=N6(t.as,t.crossOrigin);Qi.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Qi.d.M(e)};rr.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=N6(n,t.crossOrigin);Qi.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};rr.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=N6(t.as,t.crossOrigin);Qi.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Qi.d.m(e)};rr.requestFormReset=function(e){Qi.d.r(e)};rr.unstable_batchedUpdates=function(e,t){return e(t)};rr.useFormState=function(e,t,n){return k1.H.useFormState(e,t,n)};rr.useFormStatus=function(){return k1.H.useHostTransitionStatus()};rr.version="19.0.0";function AL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AL)}catch(e){console.error(e)}}AL(),xL.exports=rr;var vn=xL.exports;const QK=ll(vn);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn=WK,ML=D,JK=vn;function te(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function kL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var eZ=Symbol.for("react.element"),Lp=Symbol.for("react.transitional.element"),i1=Symbol.for("react.portal"),cf=Symbol.for("react.fragment"),RL=Symbol.for("react.strict_mode"),o3=Symbol.for("react.profiler"),tZ=Symbol.for("react.provider"),DL=Symbol.for("react.consumer"),Ta=Symbol.for("react.context"),pv=Symbol.for("react.forward_ref"),a3=Symbol.for("react.suspense"),l3=Symbol.for("react.suspense_list"),Uv=Symbol.for("react.memo"),Ml=Symbol.for("react.lazy"),LL=Symbol.for("react.offscreen"),nZ=Symbol.for("react.memo_cache_sentinel"),WS=Symbol.iterator;function Ig(e){return e===null||typeof e!="object"?null:(e=WS&&e[WS]||e["@@iterator"],typeof e=="function"?e:null)}var iZ=Symbol.for("react.client.reference");function c3(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===iZ?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cf:return"Fragment";case i1:return"Portal";case o3:return"Profiler";case RL:return"StrictMode";case a3:return"Suspense";case l3:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ta:return(e.displayName||"Context")+".Provider";case DL:return(e._context.displayName||"Context")+".Consumer";case pv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uv:return t=e.displayName||null,t!==null?t:c3(e.type)||"Memo";case Ml:t=e._payload,e=e._init;try{return c3(e(t))}catch{}}return null}var Fe=ML.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Yt=Object.assign,Vy,KS;function r1(e){if(Vy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vy=t&&t[1]||"",KS=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vy+e+KS}var $y=!1;function Gy(e,t){if(!e||$y)return"";$y=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var f=h}Reflect.construct(e,[],d)}else{try{d.call()}catch(h){f=h}e.call(d.prototype)}}else{try{throw Error()}catch(h){f=h}(d=e())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&f&&typeof h.stack=="string")return[h.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split(`
`),c=a.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=r);break}}}finally{$y=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?r1(n):""}function rZ(e){switch(e.tag){case 26:case 27:case 5:return r1(e.type);case 16:return r1("Lazy");case 13:return r1("Suspense");case 19:return r1("SuspenseList");case 0:case 15:return e=Gy(e.type,!1),e;case 11:return e=Gy(e.type.render,!1),e;case 1:return e=Gy(e.type,!0),e;default:return""}}function ZS(e){try{var t="";do t+=rZ(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Bh(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function OL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qS(e){if(Bh(e)!==e)throw Error(te(188))}function sZ(e){var t=e.alternate;if(!t){if(t=Bh(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return qS(r),e;if(s===i)return qS(r),t;s=s.sibling}throw Error(te(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==i)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function NL(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=NL(e),t!==null)return t;e=e.sibling}return null}var s1=Array.isArray,jt=JK.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Su={pending:!1,data:null,method:null,action:null},u3=[],uf=-1;function Wo(e){return{current:e}}function ui(e){0>uf||(e.current=u3[uf],u3[uf]=null,uf--)}function Jt(e,t){uf++,u3[uf]=e.current,e.current=t}var Co=Wo(null),v0=Wo(null),Ql=Wo(null),A2=Wo(null);function M2(e,t){switch(Jt(Ql,t),Jt(v0,e),Jt(Co,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?QI(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=QI(e),t=WN(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ui(Co),Jt(Co,t)}function Zf(){ui(Co),ui(v0),ui(Ql)}function d3(e){e.memoizedState!==null&&Jt(A2,e);var t=Co.current,n=WN(t,e.type);t!==n&&(Jt(v0,e),Jt(Co,n))}function k2(e){v0.current===e&&(ui(Co),ui(v0)),A2.current===e&&(ui(A2),R0._currentValue=Su)}var f3=Object.prototype.hasOwnProperty,bv=Qn.unstable_scheduleCallback,Xy=Qn.unstable_cancelCallback,oZ=Qn.unstable_shouldYield,aZ=Qn.unstable_requestPaint,Ao=Qn.unstable_now,lZ=Qn.unstable_getCurrentPriorityLevel,PL=Qn.unstable_ImmediatePriority,FL=Qn.unstable_UserBlockingPriority,R2=Qn.unstable_NormalPriority,cZ=Qn.unstable_LowPriority,BL=Qn.unstable_IdlePriority,uZ=Qn.log,dZ=Qn.unstable_setDisableYieldValue,Im=null,Fr=null;function fZ(e){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Im,e,void 0,(e.current.flags&128)===128)}catch{}}function $l(e){if(typeof uZ=="function"&&dZ(e),Fr&&typeof Fr.setStrictMode=="function")try{Fr.setStrictMode(Im,e)}catch{}}var Br=Math.clz32?Math.clz32:mZ,hZ=Math.log,gZ=Math.LN2;function mZ(e){return e>>>=0,e===0?32:31-(hZ(e)/gZ|0)|0}var Op=128,Np=4194304;function nu(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function P6(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=e.warmLanes;e=e.finishedLanes!==0;var a=n&134217727;return a!==0?(n=a&~r,n!==0?i=nu(n):(s&=a,s!==0?i=nu(s):e||(o=a&~o,o!==0&&(i=nu(o))))):(a=n&~r,a!==0?i=nu(a):s!==0?i=nu(s):e||(o=n&~o,o!==0&&(i=nu(o)))),i===0?0:t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===32&&(o&4194176)!==0)?t:i}function xm(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function pZ(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zL(){var e=Op;return Op<<=1,!(Op&4194176)&&(Op=128),e}function HL(){var e=Np;return Np<<=1,!(Np&62914560)&&(Np=4194304),e}function jy(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Cm(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function UZ(e,t,n,i,r,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Br(n),d=1<<u;a[u]=0,l[u]=-1;var f=c[u];if(f!==null)for(c[u]=null,u=0;u<f.length;u++){var h=f[u];h!==null&&(h.lane&=-536870913)}n&=~d}i!==0&&VL(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(o&~t))}function VL(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Br(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194218}function $L(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Br(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function GL(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function XL(){var e=jt.p;return e!==0?e:(e=window.event,e===void 0?32:rP(e.type))}function bZ(e,t){var n=jt.p;try{return jt.p=e,t()}finally{jt.p=n}}var Bc=Math.random().toString(36).slice(2),Pi="__reactFiber$"+Bc,br="__reactProps$"+Bc,zh="__reactContainer$"+Bc,h3="__reactEvents$"+Bc,yZ="__reactListeners$"+Bc,EZ="__reactHandles$"+Bc,QS="__reactResources$"+Bc,w0="__reactMarker$"+Bc;function yv(e){delete e[Pi],delete e[br],delete e[h3],delete e[yZ],delete e[EZ]}function hu(e){var t=e[Pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zh]||n[Pi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ex(e);e!==null;){if(n=e[Pi])return n;e=ex(e)}return t}e=n,n=e.parentNode}return null}function Hh(e){if(e=e[Pi]||e[zh]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function o1(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(te(33))}function Af(e){var t=e[QS];return t||(t=e[QS]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function oi(e){e[w0]=!0}var jL=new Set,YL={};function hd(e,t){qf(e,t),qf(e+"Capture",t)}function qf(e,t){for(YL[e]=t,e=0;e<t.length;e++)jL.add(t[e])}var $a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vZ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),JS={},eI={};function wZ(e){return f3.call(eI,e)?!0:f3.call(JS,e)?!1:vZ.test(e)?eI[e]=!0:(JS[e]=!0,!1)}function FU(e,t,n){if(wZ(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Pp(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function na(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function ts(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function WL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _Z(e){var t=WL(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function D2(e){e._valueTracker||(e._valueTracker=_Z(e))}function KL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=WL(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function L2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var TZ=/[\n"\\]/g;function rs(e){return e.replace(TZ,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function g3(e,t,n,i,r,s,o,a){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ts(t)):e.value!==""+ts(t)&&(e.value=""+ts(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?m3(e,o,ts(t)):n!=null?m3(e,o,ts(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+ts(a):e.removeAttribute("name")}function ZL(e,t,n,i,r,s,o,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+ts(n):"",t=t!=null?""+ts(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function m3(e,t,n){t==="number"&&L2(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Mf(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ts(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function qL(e,t,n){if(t!=null&&(t=""+ts(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ts(n):""}function QL(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(te(92));if(s1(i)){if(1<i.length)throw Error(te(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=ts(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Qf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var SZ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tI(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||SZ.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function JL(e,t,n){if(t!=null&&typeof t!="object")throw Error(te(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&tI(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&tI(e,s,t[s])}function Ev(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IZ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xZ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function BU(e){return xZ.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var p3=null;function vv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var df=null,kf=null;function nI(e){var t=Hh(e);if(t&&(e=t.stateNode)){var n=e[br]||null;e:switch(e=t.stateNode,t.type){case"input":if(g3(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+rs(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[br]||null;if(!r)throw Error(te(90));g3(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&KL(i)}break e;case"textarea":qL(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Mf(e,!!n.multiple,t,!1)}}}var Yy=!1;function eO(e,t,n){if(Yy)return e(t,n);Yy=!0;try{var i=e(t);return i}finally{if(Yy=!1,(df!==null||kf!==null)&&(Y6(),df&&(t=df,e=kf,kf=df=null,nI(t),e)))for(t=0;t<e.length;t++)nI(e[t])}}function _0(e,t){var n=e.stateNode;if(n===null)return null;var i=n[br]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var U3=!1;if($a)try{var xg={};Object.defineProperty(xg,"passive",{get:function(){U3=!0}}),window.addEventListener("test",xg,xg),window.removeEventListener("test",xg,xg)}catch{U3=!1}var Gl=null,wv=null,zU=null;function tO(){if(zU)return zU;var e,t=wv,n=t.length,i,r="value"in Gl?Gl.value:Gl.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===r[s-i];i++);return zU=r.slice(e,1<i?1-i:void 0)}function HU(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fp(){return!0}function iI(){return!1}function vr(e){function t(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fp:iI,this.isPropagationStopped=iI,this}return Yt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fp)},persist:function(){},isPersistent:Fp}),t}var gd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F6=vr(gd),Am=Yt({},gd,{view:0,detail:0}),CZ=vr(Am),Wy,Ky,Cg,B6=Yt({},Am,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_v,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cg&&(Cg&&e.type==="mousemove"?(Wy=e.screenX-Cg.screenX,Ky=e.screenY-Cg.screenY):Ky=Wy=0,Cg=e),Wy)},movementY:function(e){return"movementY"in e?e.movementY:Ky}}),rI=vr(B6),AZ=Yt({},B6,{dataTransfer:0}),MZ=vr(AZ),kZ=Yt({},Am,{relatedTarget:0}),Zy=vr(kZ),RZ=Yt({},gd,{animationName:0,elapsedTime:0,pseudoElement:0}),DZ=vr(RZ),LZ=Yt({},gd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),OZ=vr(LZ),NZ=Yt({},gd,{data:0}),sI=vr(NZ),PZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zZ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=BZ[e])?!!t[e]:!1}function _v(){return zZ}var HZ=Yt({},Am,{key:function(e){if(e.key){var t=PZ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=HU(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?FZ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_v,charCode:function(e){return e.type==="keypress"?HU(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?HU(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),VZ=vr(HZ),$Z=Yt({},B6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oI=vr($Z),GZ=Yt({},Am,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_v}),XZ=vr(GZ),jZ=Yt({},gd,{propertyName:0,elapsedTime:0,pseudoElement:0}),YZ=vr(jZ),WZ=Yt({},B6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),KZ=vr(WZ),ZZ=Yt({},gd,{newState:0,oldState:0}),qZ=vr(ZZ),QZ=[9,13,27,32],Tv=$a&&"CompositionEvent"in window,R1=null;$a&&"documentMode"in document&&(R1=document.documentMode);var JZ=$a&&"TextEvent"in window&&!R1,nO=$a&&(!Tv||R1&&8<R1&&11>=R1),aI=" ",lI=!1;function iO(e,t){switch(e){case"keyup":return QZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ff=!1;function eq(e,t){switch(e){case"compositionend":return rO(t);case"keypress":return t.which!==32?null:(lI=!0,aI);case"textInput":return e=t.data,e===aI&&lI?null:e;default:return null}}function tq(e,t){if(ff)return e==="compositionend"||!Tv&&iO(e,t)?(e=tO(),zU=wv=Gl=null,ff=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nO&&t.locale!=="ko"?null:t.data;default:return null}}var nq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nq[e.type]:t==="textarea"}function sO(e,t,n,i){df?kf?kf.push(i):kf=[i]:df=i,t=Z2(t,"onChange"),0<t.length&&(n=new F6("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var D1=null,T0=null;function iq(e){XN(e,0)}function z6(e){var t=o1(e);if(KL(t))return e}function uI(e,t){if(e==="change")return t}var oO=!1;if($a){var qy;if($a){var Qy="oninput"in document;if(!Qy){var dI=document.createElement("div");dI.setAttribute("oninput","return;"),Qy=typeof dI.oninput=="function"}qy=Qy}else qy=!1;oO=qy&&(!document.documentMode||9<document.documentMode)}function fI(){D1&&(D1.detachEvent("onpropertychange",aO),T0=D1=null)}function aO(e){if(e.propertyName==="value"&&z6(T0)){var t=[];sO(t,T0,e,vv(e)),eO(iq,t)}}function rq(e,t,n){e==="focusin"?(fI(),D1=t,T0=n,D1.attachEvent("onpropertychange",aO)):e==="focusout"&&fI()}function sq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return z6(T0)}function oq(e,t){if(e==="click")return z6(t)}function aq(e,t){if(e==="input"||e==="change")return z6(t)}function lq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $r=typeof Object.is=="function"?Object.is:lq;function S0(e,t){if($r(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!f3.call(t,r)||!$r(e[r],t[r]))return!1}return!0}function hI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gI(e,t){var n=hI(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hI(n)}}function lO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cO(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=L2(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=L2(e.document)}return t}function Sv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cq(e,t){var n=cO(t);t=e.focusedElem;var i=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&lO(t.ownerDocument.documentElement,t)){if(i!==null&&Sv(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=gI(t,s);var o=gI(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var uq=$a&&"documentMode"in document&&11>=document.documentMode,hf=null,b3=null,L1=null,y3=!1;function mI(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;y3||hf==null||hf!==L2(i)||(i=hf,"selectionStart"in i&&Sv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),L1&&S0(L1,i)||(L1=i,i=Z2(b3,"onSelect"),0<i.length&&(t=new F6("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=hf)))}function Qc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gf={animationend:Qc("Animation","AnimationEnd"),animationiteration:Qc("Animation","AnimationIteration"),animationstart:Qc("Animation","AnimationStart"),transitionrun:Qc("Transition","TransitionRun"),transitionstart:Qc("Transition","TransitionStart"),transitioncancel:Qc("Transition","TransitionCancel"),transitionend:Qc("Transition","TransitionEnd")},Jy={},uO={};$a&&(uO=document.createElement("div").style,"AnimationEvent"in window||(delete gf.animationend.animation,delete gf.animationiteration.animation,delete gf.animationstart.animation),"TransitionEvent"in window||delete gf.transitionend.transition);function md(e){if(Jy[e])return Jy[e];if(!gf[e])return e;var t=gf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uO)return Jy[e]=t[n];return e}var dO=md("animationend"),fO=md("animationiteration"),hO=md("animationstart"),dq=md("transitionrun"),fq=md("transitionstart"),hq=md("transitioncancel"),gO=md("transitionend"),mO=new Map,pI="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function io(e,t){mO.set(e,t),hd(t,[e])}var Qr=[],mf=0,Iv=0;function H6(){for(var e=mf,t=Iv=mf=0;t<e;){var n=Qr[t];Qr[t++]=null;var i=Qr[t];Qr[t++]=null;var r=Qr[t];Qr[t++]=null;var s=Qr[t];if(Qr[t++]=null,i!==null&&r!==null){var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}s!==0&&pO(n,r,s)}}function V6(e,t,n,i){Qr[mf++]=e,Qr[mf++]=t,Qr[mf++]=n,Qr[mf++]=i,Iv|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function xv(e,t,n,i){return V6(e,t,n,i),O2(e)}function Uc(e,t){return V6(e,null,null,t),O2(e)}function pO(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;r&&t!==null&&e.tag===3&&(s=e.stateNode,r=31-Br(n),s=s.hiddenUpdates,e=s[r],e===null?s[r]=[t]:e.push(t),t.lane=n|536870912)}function O2(e){if(50<j1)throw j1=0,H3=null,Error(te(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var pf={},UI=new WeakMap;function ss(e,t){if(typeof e=="object"&&e!==null){var n=UI.get(e);return n!==void 0?n:(t={value:e,source:t,stack:ZS(t)},UI.set(e,t),t)}return{value:e,source:t,stack:ZS(t)}}var Uf=[],bf=0,N2=null,P2=0,ns=[],is=0,Iu=null,Sa=1,Ia="";function iu(e,t){Uf[bf++]=P2,Uf[bf++]=N2,N2=e,P2=t}function UO(e,t,n){ns[is++]=Sa,ns[is++]=Ia,ns[is++]=Iu,Iu=e;var i=Sa;e=Ia;var r=32-Br(i)-1;i&=~(1<<r),n+=1;var s=32-Br(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Sa=1<<32-Br(t)+r|n<<r|i,Ia=s+e}else Sa=1<<s|n<<r|i,Ia=e}function Cv(e){e.return!==null&&(iu(e,1),UO(e,1,0))}function Av(e){for(;e===N2;)N2=Uf[--bf],Uf[bf]=null,P2=Uf[--bf],Uf[bf]=null;for(;e===Iu;)Iu=ns[--is],ns[is]=null,Ia=ns[--is],ns[is]=null,Sa=ns[--is],ns[is]=null}var Zi=null,bi=null,bt=!1,Ps=null,Eo=!1,E3=Error(te(519));function zu(e){var t=Error(te(418,""));throw I0(ss(t,e)),E3}function bI(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Pi]=e,t[br]=i,n){case"dialog":Je("cancel",t),Je("close",t);break;case"iframe":case"object":case"embed":Je("load",t);break;case"video":case"audio":for(n=0;n<A0.length;n++)Je(A0[n],t);break;case"source":Je("error",t);break;case"img":case"image":case"link":Je("error",t),Je("load",t);break;case"details":Je("toggle",t);break;case"input":Je("invalid",t),ZL(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),D2(t);break;case"select":Je("invalid",t);break;case"textarea":Je("invalid",t),QL(t,i.value,i.defaultValue,i.children),D2(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||YN(t.textContent,n)?(i.popover!=null&&(Je("beforetoggle",t),Je("toggle",t)),i.onScroll!=null&&Je("scroll",t),i.onScrollEnd!=null&&Je("scrollend",t),i.onClick!=null&&(t.onclick=K6),t=!0):t=!1,t||zu(e)}function yI(e){for(Zi=e.return;Zi;)switch(Zi.tag){case 3:case 27:Eo=!0;return;case 5:case 13:Eo=!1;return;default:Zi=Zi.return}}function Ag(e){if(e!==Zi)return!1;if(!bt)return yI(e),bt=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||W3(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&bi&&zu(e),yI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){bi=$s(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}bi=null}}else bi=Zi?$s(e.stateNode.nextSibling):null;return!0}function Mm(){bi=Zi=null,bt=!1}function I0(e){Ps===null?Ps=[e]:Ps.push(e)}var O1=Error(te(460)),bO=Error(te(474)),v3={then:function(){}};function EI(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Bp(){}function yO(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Bp,Bp),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===O1?Error(te(483)):e;default:if(typeof t.status=="string")t.then(Bp,Bp);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(te(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===O1?Error(te(483)):e}throw N1=t,O1}}var N1=null;function vI(){if(N1===null)throw Error(te(459));var e=N1;return N1=null,e}var Rf=null,x0=0;function zp(e){var t=x0;return x0+=1,Rf===null&&(Rf=[]),yO(Rf,e,t)}function Mg(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Hp(e,t){throw t.$$typeof===eZ?Error(te(525)):(e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function wI(e){var t=e._init;return t(e._payload)}function EO(e){function t(b,E){if(e){var v=b.deletions;v===null?(b.deletions=[E],b.flags|=16):v.push(E)}}function n(b,E){if(!e)return null;for(;E!==null;)t(b,E),E=E.sibling;return null}function i(b){for(var E=new Map;b!==null;)b.key!==null?E.set(b.key,b):E.set(b.index,b),b=b.sibling;return E}function r(b,E){return b=tc(b,E),b.index=0,b.sibling=null,b}function s(b,E,v){return b.index=v,e?(v=b.alternate,v!==null?(v=v.index,v<E?(b.flags|=33554434,E):v):(b.flags|=33554434,E)):(b.flags|=1048576,E)}function o(b){return e&&b.alternate===null&&(b.flags|=33554434),b}function a(b,E,v,w){return E===null||E.tag!==6?(E=d8(v,b.mode,w),E.return=b,E):(E=r(E,v),E.return=b,E)}function l(b,E,v,w){var S=v.type;return S===cf?u(b,E,v.props.children,w,v.key):E!==null&&(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ml&&wI(S)===E.type)?(E=r(E,v.props),Mg(E,v),E.return=b,E):(E=jU(v.type,v.key,v.props,null,b.mode,w),Mg(E,v),E.return=b,E)}function c(b,E,v,w){return E===null||E.tag!==4||E.stateNode.containerInfo!==v.containerInfo||E.stateNode.implementation!==v.implementation?(E=f8(v,b.mode,w),E.return=b,E):(E=r(E,v.children||[]),E.return=b,E)}function u(b,E,v,w,S){return E===null||E.tag!==7?(E=Cu(v,b.mode,w,S),E.return=b,E):(E=r(E,v),E.return=b,E)}function d(b,E,v){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=d8(""+E,b.mode,v),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Lp:return v=jU(E.type,E.key,E.props,null,b.mode,v),Mg(v,E),v.return=b,v;case i1:return E=f8(E,b.mode,v),E.return=b,E;case Ml:var w=E._init;return E=w(E._payload),d(b,E,v)}if(s1(E)||Ig(E))return E=Cu(E,b.mode,v,null),E.return=b,E;if(typeof E.then=="function")return d(b,zp(E),v);if(E.$$typeof===Ta)return d(b,Vp(b,E),v);Hp(b,E)}return null}function f(b,E,v,w){var S=E!==null?E.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return S!==null?null:a(b,E,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lp:return v.key===S?l(b,E,v,w):null;case i1:return v.key===S?c(b,E,v,w):null;case Ml:return S=v._init,v=S(v._payload),f(b,E,v,w)}if(s1(v)||Ig(v))return S!==null?null:u(b,E,v,w,null);if(typeof v.then=="function")return f(b,E,zp(v),w);if(v.$$typeof===Ta)return f(b,E,Vp(b,v),w);Hp(b,v)}return null}function h(b,E,v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return b=b.get(v)||null,a(E,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lp:return b=b.get(w.key===null?v:w.key)||null,l(E,b,w,S);case i1:return b=b.get(w.key===null?v:w.key)||null,c(E,b,w,S);case Ml:var k=w._init;return w=k(w._payload),h(b,E,v,w,S)}if(s1(w)||Ig(w))return b=b.get(v)||null,u(E,b,w,S,null);if(typeof w.then=="function")return h(b,E,v,zp(w),S);if(w.$$typeof===Ta)return h(b,E,v,Vp(E,w),S);Hp(E,w)}return null}function m(b,E,v,w){for(var S=null,k=null,_=E,T=E=0,A=null;_!==null&&T<v.length;T++){_.index>T?(A=_,_=null):A=_.sibling;var C=f(b,_,v[T],w);if(C===null){_===null&&(_=A);break}e&&_&&C.alternate===null&&t(b,_),E=s(C,E,T),k===null?S=C:k.sibling=C,k=C,_=A}if(T===v.length)return n(b,_),bt&&iu(b,T),S;if(_===null){for(;T<v.length;T++)_=d(b,v[T],w),_!==null&&(E=s(_,E,T),k===null?S=_:k.sibling=_,k=_);return bt&&iu(b,T),S}for(_=i(_);T<v.length;T++)A=h(_,b,T,v[T],w),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?T:A.key),E=s(A,E,T),k===null?S=A:k.sibling=A,k=A);return e&&_.forEach(function(R){return t(b,R)}),bt&&iu(b,T),S}function p(b,E,v,w){if(v==null)throw Error(te(151));for(var S=null,k=null,_=E,T=E=0,A=null,C=v.next();_!==null&&!C.done;T++,C=v.next()){_.index>T?(A=_,_=null):A=_.sibling;var R=f(b,_,C.value,w);if(R===null){_===null&&(_=A);break}e&&_&&R.alternate===null&&t(b,_),E=s(R,E,T),k===null?S=R:k.sibling=R,k=R,_=A}if(C.done)return n(b,_),bt&&iu(b,T),S;if(_===null){for(;!C.done;T++,C=v.next())C=d(b,C.value,w),C!==null&&(E=s(C,E,T),k===null?S=C:k.sibling=C,k=C);return bt&&iu(b,T),S}for(_=i(_);!C.done;T++,C=v.next())C=h(_,b,T,C.value,w),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?T:C.key),E=s(C,E,T),k===null?S=C:k.sibling=C,k=C);return e&&_.forEach(function(P){return t(b,P)}),bt&&iu(b,T),S}function y(b,E,v,w){if(typeof v=="object"&&v!==null&&v.type===cf&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Lp:e:{for(var S=v.key;E!==null;){if(E.key===S){if(S=v.type,S===cf){if(E.tag===7){n(b,E.sibling),w=r(E,v.props.children),w.return=b,b=w;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ml&&wI(S)===E.type){n(b,E.sibling),w=r(E,v.props),Mg(w,v),w.return=b,b=w;break e}n(b,E);break}else t(b,E);E=E.sibling}v.type===cf?(w=Cu(v.props.children,b.mode,w,v.key),w.return=b,b=w):(w=jU(v.type,v.key,v.props,null,b.mode,w),Mg(w,v),w.return=b,b=w)}return o(b);case i1:e:{for(S=v.key;E!==null;){if(E.key===S)if(E.tag===4&&E.stateNode.containerInfo===v.containerInfo&&E.stateNode.implementation===v.implementation){n(b,E.sibling),w=r(E,v.children||[]),w.return=b,b=w;break e}else{n(b,E);break}else t(b,E);E=E.sibling}w=f8(v,b.mode,w),w.return=b,b=w}return o(b);case Ml:return S=v._init,v=S(v._payload),y(b,E,v,w)}if(s1(v))return m(b,E,v,w);if(Ig(v)){if(S=Ig(v),typeof S!="function")throw Error(te(150));return v=S.call(v),p(b,E,v,w)}if(typeof v.then=="function")return y(b,E,zp(v),w);if(v.$$typeof===Ta)return y(b,E,Vp(b,v),w);Hp(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,E!==null&&E.tag===6?(n(b,E.sibling),w=r(E,v),w.return=b,b=w):(n(b,E),w=d8(v,b.mode,w),w.return=b,b=w),o(b)):n(b,E)}return function(b,E,v,w){try{x0=0;var S=y(b,E,v,w);return Rf=null,S}catch(_){if(_===O1)throw _;var k=cs(29,_,null,b.mode);return k.lanes=w,k.return=b,k}finally{}}}var Hu=EO(!0),vO=EO(!1),Jf=Wo(null),F2=Wo(0);function _I(e,t){e=ja,Jt(F2,e),Jt(Jf,t),ja=e|t.baseLanes}function w3(){Jt(F2,ja),Jt(Jf,Jf.current)}function Mv(){ja=F2.current,ui(Jf),ui(F2)}var Es=Wo(null),Mo=null;function Nl(e){var t=e.alternate;Jt(Wn,Wn.current&1),Jt(Es,e),Mo===null&&(t===null||Jf.current!==null||t.memoizedState!==null)&&(Mo=e)}function wO(e){if(e.tag===22){if(Jt(Wn,Wn.current),Jt(Es,e),Mo===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Mo=e)}}else Pl()}function Pl(){Jt(Wn,Wn.current),Jt(Es,Es.current)}function xa(e){ui(Es),Mo===e&&(Mo=null),ui(Wn)}var Wn=Wo(0);function B2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gq=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},mq=Qn.unstable_scheduleCallback,pq=Qn.unstable_NormalPriority,Yn={$$typeof:Ta,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kv(){return{controller:new gq,data:new Map,refCount:0}}function km(e){e.refCount--,e.refCount===0&&mq(pq,function(){e.controller.abort()})}var P1=null,_3=0,eh=0,Df=null;function Uq(e,t){if(P1===null){var n=P1=[];_3=0,eh=ew(),Df={status:"pending",value:void 0,then:function(i){n.push(i)}}}return _3++,t.then(TI,TI),t}function TI(){if(--_3===0&&P1!==null){Df!==null&&(Df.status="fulfilled");var e=P1;P1=null,eh=0,Df=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function bq(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var SI=Fe.S;Fe.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Uq(e,t),SI!==null&&SI(e,t)};var xu=Wo(null);function Rv(){var e=xu.current;return e!==null?e:Vt.pooledCache}function VU(e,t){t===null?Jt(xu,xu.current):Jt(xu,t.pool)}function _O(){var e=Rv();return e===null?null:{parent:Yn._currentValue,pool:e}}var bc=0,$e=null,kt=null,Dn=null,z2=!1,Lf=!1,Vu=!1,H2=0,C0=0,Of=null,yq=0;function yn(){throw Error(te(321))}function Dv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$r(e[n],t[n]))return!1;return!0}function Lv(e,t,n,i,r,s){return bc=s,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fe.H=e===null||e.memoizedState===null?pd:zc,Vu=!1,s=n(i,r),Vu=!1,Lf&&(s=SO(t,n,i,r)),TO(e),s}function TO(e){Fe.H=Lo;var t=kt!==null&&kt.next!==null;if(bc=0,Dn=kt=$e=null,z2=!1,C0=0,Of=null,t)throw Error(te(300));e===null||li||(e=e.dependencies,e!==null&&G2(e)&&(li=!0))}function SO(e,t,n,i){$e=e;var r=0;do{if(Lf&&(Of=null),C0=0,Lf=!1,25<=r)throw Error(te(301));if(r+=1,Dn=kt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Fe.H=Ud,s=t(n,i)}while(Lf);return s}function Eq(){var e=Fe.H,t=e.useState()[0];return t=typeof t.then=="function"?Rm(t):t,e=e.useState()[0],(kt!==null?kt.memoizedState:null)!==e&&($e.flags|=1024),t}function Ov(){var e=H2!==0;return H2=0,e}function Nv(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Pv(e){if(z2){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}z2=!1}bc=0,Dn=kt=$e=null,Lf=!1,C0=H2=0,Of=null}function cr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?$e.memoizedState=Dn=e:Dn=Dn.next=e,Dn}function Fn(){if(kt===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=kt.next;var t=Dn===null?$e.memoizedState:Dn.next;if(t!==null)Dn=t,kt=e;else{if(e===null)throw $e.alternate===null?Error(te(467)):Error(te(310));kt=e,e={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Dn===null?$e.memoizedState=Dn=e:Dn=Dn.next=e}return Dn}var $6;$6=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Rm(e){var t=C0;return C0+=1,Of===null&&(Of=[]),e=yO(Of,e,t),t=$e,(Dn===null?t.memoizedState:Dn.next)===null&&(t=t.alternate,Fe.H=t===null||t.memoizedState===null?pd:zc),e}function G6(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Rm(e);if(e.$$typeof===Ta)return Fi(e)}throw Error(te(438,String(e)))}function Fv(e){var t=null,n=$e.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=$e.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=$6(),$e.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=nZ;return t.index++,n}function Ga(e,t){return typeof t=="function"?t(e):t}function $U(e){var t=Fn();return Bv(t,kt,e)}function Bv(e,t,n){var i=e.queue;if(i===null)throw Error(te(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var a=o=null,l=null,c=t,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(st&d)===d:(bc&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===eh&&(u=!0);else if((bc&f)===f){c=c.next,f===eh&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=d,o=s):l=l.next=d,$e.lanes|=f,Ec|=f;d=c.action,Vu&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=f,o=s):l=l.next=f,$e.lanes|=d,Ec|=d;c=c.next}while(c!==null&&c!==t);if(l===null?o=s:l.next=a,!$r(s,e.memoizedState)&&(li=!0,u&&(n=Df,n!==null)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function e8(e){var t=Fn(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);$r(s,t.memoizedState)||(li=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function IO(e,t,n){var i=$e,r=Fn(),s=bt;if(s){if(n===void 0)throw Error(te(407));n=n()}else n=t();var o=!$r((kt||r).memoizedState,n);if(o&&(r.memoizedState=n,li=!0),r=r.queue,zv(AO.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||Dn!==null&&Dn.memoizedState.tag&1){if(i.flags|=2048,th(9,CO.bind(null,i,r,n,t),{destroy:void 0},null),Vt===null)throw Error(te(349));s||bc&60||xO(i,t,n)}return n}function xO(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=$e.updateQueue,t===null?(t=$6(),$e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function CO(e,t,n,i){t.value=n,t.getSnapshot=i,MO(t)&&kO(e)}function AO(e,t,n){return n(function(){MO(t)&&kO(e)})}function MO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$r(e,n)}catch{return!0}}function kO(e){var t=Uc(e,2);t!==null&&er(t,e,2)}function T3(e){var t=cr();if(typeof e=="function"){var n=e;if(e=n(),Vu){$l(!0);try{n()}finally{$l(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:e},t}function RO(e,t,n,i){return e.baseState=n,Bv(e,kt,typeof i=="function"?i:Ga)}function vq(e,t,n,i,r){if(j6(e))throw Error(te(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};Fe.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,DO(t,s)):(s.next=n.next,t.pending=n.next=s)}}function DO(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=Fe.T,o={};Fe.T=o;try{var a=n(r,i),l=Fe.S;l!==null&&l(o,a),II(e,t,a)}catch(c){S3(e,t,c)}finally{Fe.T=s}}else try{s=n(r,i),II(e,t,s)}catch(c){S3(e,t,c)}}function II(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){xI(e,t,i)},function(i){return S3(e,t,i)}):xI(e,t,n)}function xI(e,t,n){t.status="fulfilled",t.value=n,LO(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,DO(e,n)))}function S3(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,LO(t),t=t.next;while(t!==i)}e.action=null}function LO(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function OO(e,t){return t}function NO(e,t){if(bt){var n=Vt.formState;if(n!==null){e:{var i=$e;if(bt){if(bi){t:{for(var r=bi,s=Eo;r.nodeType!==8;){if(!s){r=null;break t}if(r=$s(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){bi=$s(r.nextSibling),i=r.data==="F!";break e}}zu(i)}i=!1}i&&(t=n[0])}}return n=cr(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:OO,lastRenderedState:t},n.queue=i,n=JO.bind(null,$e,i),i.dispatch=n,i=T3(!1),s=Gv.bind(null,$e,!1,i.queue),i=cr(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=vq.bind(null,$e,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function PO(e){var t=Fn();return FO(t,kt,e)}function FO(e,t,n){t=Bv(e,t,OO)[0],e=$U(Ga)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?Rm(t):t;var i=Fn(),r=i.queue,s=r.dispatch;return n!==i.memoizedState&&($e.flags|=2048,th(9,wq.bind(null,r,n),{destroy:void 0},null)),[t,s,e]}function wq(e,t){e.action=t}function BO(e){var t=Fn(),n=kt;if(n!==null)return FO(t,n,e);Fn(),t=t.memoizedState,n=Fn();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function th(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},t=$e.updateQueue,t===null&&(t=$6(),$e.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function zO(){return Fn().memoizedState}function GU(e,t,n,i){var r=cr();$e.flags|=e,r.memoizedState=th(1|t,n,{destroy:void 0},i===void 0?null:i)}function X6(e,t,n,i){var r=Fn();i=i===void 0?null:i;var s=r.memoizedState.inst;kt!==null&&i!==null&&Dv(i,kt.memoizedState.deps)?r.memoizedState=th(t,n,s,i):($e.flags|=e,r.memoizedState=th(1|t,n,s,i))}function CI(e,t){GU(8390656,8,e,t)}function zv(e,t){X6(2048,8,e,t)}function HO(e,t){return X6(4,2,e,t)}function VO(e,t){return X6(4,4,e,t)}function $O(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function GO(e,t,n){n=n!=null?n.concat([e]):null,X6(4,4,$O.bind(null,t,e),n)}function Hv(){}function XO(e,t){var n=Fn();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Dv(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function jO(e,t){var n=Fn();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Dv(t,i[1]))return i[0];if(i=e(),Vu){$l(!0);try{e()}finally{$l(!1)}}return n.memoizedState=[i,t],i}function Vv(e,t,n){return n===void 0||bc&1073741824?e.memoizedState=t:(e.memoizedState=n,e=LN(),$e.lanes|=e,Ec|=e,n)}function YO(e,t,n,i){return $r(n,t)?n:Jf.current!==null?(e=Vv(e,n,i),$r(e,t)||(li=!0),e):bc&42?(e=LN(),$e.lanes|=e,Ec|=e,t):(li=!0,e.memoizedState=n)}function WO(e,t,n,i,r){var s=jt.p;jt.p=s!==0&&8>s?s:8;var o=Fe.T,a={};Fe.T=a,Gv(e,!1,t,n);try{var l=r(),c=Fe.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=bq(l,i);F1(e,t,u,zr(e))}else F1(e,t,i,zr(e))}catch(d){F1(e,t,{then:function(){},status:"rejected",reason:d},zr())}finally{jt.p=s,Fe.T=o}}function _q(){}function I3(e,t,n,i){if(e.tag!==5)throw Error(te(476));var r=KO(e).queue;WO(e,r,t,Su,n===null?_q:function(){return ZO(e),n(i)})}function KO(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Su,baseState:Su,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:Su},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ZO(e){var t=KO(e).next.queue;F1(e,t,{},zr())}function $v(){return Fi(R0)}function qO(){return Fn().memoizedState}function QO(){return Fn().memoizedState}function Tq(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=zr();e=Jl(n);var i=ec(t,e,n);i!==null&&(er(i,t,n),z1(i,t,n)),t={cache:kv()},e.payload=t;return}t=t.return}}function Sq(e,t,n){var i=zr();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},j6(e)?eN(t,n):(n=xv(e,t,n,i),n!==null&&(er(n,e,i),tN(n,t,i)))}function JO(e,t,n){var i=zr();F1(e,t,n,i)}function F1(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(j6(e))eN(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,$r(a,o))return V6(e,t,r,0),Vt===null&&H6(),!1}catch{}finally{}if(n=xv(e,t,r,i),n!==null)return er(n,e,i),tN(n,t,i),!0}return!1}function Gv(e,t,n,i){if(i={lane:2,revertLane:ew(),action:i,hasEagerState:!1,eagerState:null,next:null},j6(e)){if(t)throw Error(te(479))}else t=xv(e,n,i,2),t!==null&&er(t,e,2)}function j6(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function eN(e,t){Lf=z2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tN(e,t,n){if(n&4194176){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,$L(e,n)}}var Lo={readContext:Fi,use:G6,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn};Lo.useCacheRefresh=yn;Lo.useMemoCache=yn;Lo.useHostTransitionStatus=yn;Lo.useFormState=yn;Lo.useActionState=yn;Lo.useOptimistic=yn;var pd={readContext:Fi,use:G6,useCallback:function(e,t){return cr().memoizedState=[e,t===void 0?null:t],e},useContext:Fi,useEffect:CI,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,GU(4194308,4,$O.bind(null,t,e),n)},useLayoutEffect:function(e,t){return GU(4194308,4,e,t)},useInsertionEffect:function(e,t){GU(4,2,e,t)},useMemo:function(e,t){var n=cr();t=t===void 0?null:t;var i=e();if(Vu){$l(!0);try{e()}finally{$l(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=cr();if(n!==void 0){var r=n(t);if(Vu){$l(!0);try{n(t)}finally{$l(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Sq.bind(null,$e,e),[i.memoizedState,e]},useRef:function(e){var t=cr();return e={current:e},t.memoizedState=e},useState:function(e){e=T3(e);var t=e.queue,n=JO.bind(null,$e,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Hv,useDeferredValue:function(e,t){var n=cr();return Vv(n,e,t)},useTransition:function(){var e=T3(!1);return e=WO.bind(null,$e,e.queue,!0,!1),cr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=$e,r=cr();if(bt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),Vt===null)throw Error(te(349));st&60||xO(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,CI(AO.bind(null,i,s,e),[e]),i.flags|=2048,th(9,CO.bind(null,i,s,n,t),{destroy:void 0},null),n},useId:function(){var e=cr(),t=Vt.identifierPrefix;if(bt){var n=Ia,i=Sa;n=(i&~(1<<32-Br(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=H2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yq++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return cr().memoizedState=Tq.bind(null,$e)}};pd.useMemoCache=Fv;pd.useHostTransitionStatus=$v;pd.useFormState=NO;pd.useActionState=NO;pd.useOptimistic=function(e){var t=cr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Gv.bind(null,$e,!0,n),n.dispatch=t,[e,t]};var zc={readContext:Fi,use:G6,useCallback:XO,useContext:Fi,useEffect:zv,useImperativeHandle:GO,useInsertionEffect:HO,useLayoutEffect:VO,useMemo:jO,useReducer:$U,useRef:zO,useState:function(){return $U(Ga)},useDebugValue:Hv,useDeferredValue:function(e,t){var n=Fn();return YO(n,kt.memoizedState,e,t)},useTransition:function(){var e=$U(Ga)[0],t=Fn().memoizedState;return[typeof e=="boolean"?e:Rm(e),t]},useSyncExternalStore:IO,useId:qO};zc.useCacheRefresh=QO;zc.useMemoCache=Fv;zc.useHostTransitionStatus=$v;zc.useFormState=PO;zc.useActionState=PO;zc.useOptimistic=function(e,t){var n=Fn();return RO(n,kt,e,t)};var Ud={readContext:Fi,use:G6,useCallback:XO,useContext:Fi,useEffect:zv,useImperativeHandle:GO,useInsertionEffect:HO,useLayoutEffect:VO,useMemo:jO,useReducer:e8,useRef:zO,useState:function(){return e8(Ga)},useDebugValue:Hv,useDeferredValue:function(e,t){var n=Fn();return kt===null?Vv(n,e,t):YO(n,kt.memoizedState,e,t)},useTransition:function(){var e=e8(Ga)[0],t=Fn().memoizedState;return[typeof e=="boolean"?e:Rm(e),t]},useSyncExternalStore:IO,useId:qO};Ud.useCacheRefresh=QO;Ud.useMemoCache=Fv;Ud.useHostTransitionStatus=$v;Ud.useFormState=BO;Ud.useActionState=BO;Ud.useOptimistic=function(e,t){var n=Fn();return kt!==null?RO(n,kt,e,t):(n.baseState=e,[e,n.queue.dispatch])};function t8(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Yt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var x3={isMounted:function(e){return(e=e._reactInternals)?Bh(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=zr(),r=Jl(i);r.payload=t,n!=null&&(r.callback=n),t=ec(e,r,i),t!==null&&(er(t,e,i),z1(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=zr(),r=Jl(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=ec(e,r,i),t!==null&&(er(t,e,i),z1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zr(),i=Jl(n);i.tag=2,t!=null&&(i.callback=t),t=ec(e,i,n),t!==null&&(er(t,e,n),z1(t,e,n))}};function AI(e,t,n,i,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!S0(n,i)||!S0(r,s):!0}function MI(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&x3.enqueueReplaceState(t,t.state,null)}function $u(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Yt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var V2=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function nN(e){V2(e)}function iN(e){console.error(e)}function rN(e){V2(e)}function $2(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function kI(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function C3(e,t,n){return n=Jl(n),n.tag=3,n.payload={element:null},n.callback=function(){$2(e,t)},n}function sN(e){return e=Jl(e),e.tag=3,e}function oN(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){kI(t,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){kI(t,n,i),typeof r!="function"&&(nc===null?nc=new Set([this]):nc.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function Iq(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Dm(t,n,r,!0),n=Es.current,n!==null){switch(n.tag){case 13:return Mo===null?$3():n.alternate===null&&pn===0&&(pn=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===v3?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),g8(e,i,r)),!1;case 22:return n.flags|=65536,i===v3?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),g8(e,i,r)),!1}throw Error(te(435,n.tag))}return g8(e,i,r),$3(),!1}if(bt)return t=Es.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==E3&&(e=Error(te(422),{cause:i}),I0(ss(e,n)))):(i!==E3&&(t=Error(te(423),{cause:i}),I0(ss(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=ss(i,n),r=C3(e.stateNode,i,r),a8(e,r),pn!==4&&(pn=2)),!1;var s=Error(te(520),{cause:i});if(s=ss(s,n),G1===null?G1=[s]:G1.push(s),pn!==4&&(pn=2),t===null)return!0;i=ss(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=C3(n.stateNode,i,e),a8(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(nc===null||!nc.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=sN(r),oN(r,e,n,i),a8(n,r),!1}n=n.return}while(n!==null);return!1}var aN=Error(te(461)),li=!1;function pi(e,t,n,i){t.child=e===null?vO(t,null,n,i):Hu(t,e.child,n,i)}function RI(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return Gu(t),i=Lv(e,t,n,o,s,r),a=Ov(),e!==null&&!li?(Nv(e,t,r),Xa(e,t,r)):(bt&&a&&Cv(t),t.flags|=1,pi(e,t,i,r),t.child)}function DI(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Kv(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,lN(e,t,s,i,r)):(e=jU(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Xv(e,r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:S0,n(o,i)&&e.ref===t.ref)return Xa(e,t,r)}return t.flags|=1,e=tc(s,i),e.ref=t.ref,e.return=t,t.child=e}function lN(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(S0(s,i)&&e.ref===t.ref)if(li=!1,t.pendingProps=i=s,Xv(e,r))e.flags&131072&&(li=!0);else return t.lanes=e.lanes,Xa(e,t,r)}return A3(e,t,n,i,r)}function cN(e,t,n){var i=t.pendingProps,r=i.children,s=(t.stateNode._pendingVisibility&2)!==0,o=e!==null?e.memoizedState:null;if(B1(e,t),i.mode==="hidden"||s){if(t.flags&128){if(i=o!==null?o.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return LI(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&VU(t,o!==null?o.cachePool:null),o!==null?_I(t,o):w3(),wO(t);else return t.lanes=t.childLanes=536870912,LI(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(VU(t,o.cachePool),_I(t,o),Pl(),t.memoizedState=null):(e!==null&&VU(t,null),w3(),Pl());return pi(e,t,r,n),t.child}function LI(e,t,n,i){var r=Rv();return r=r===null?null:{parent:Yn._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&VU(t,null),w3(),wO(t),e!==null&&Dm(e,t,i,!0),null}function B1(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(te(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function A3(e,t,n,i,r){return Gu(t),n=Lv(e,t,n,i,void 0,r),i=Ov(),e!==null&&!li?(Nv(e,t,r),Xa(e,t,r)):(bt&&i&&Cv(t),t.flags|=1,pi(e,t,n,r),t.child)}function OI(e,t,n,i,r,s){return Gu(t),t.updateQueue=null,n=SO(t,i,n,r),TO(e),i=Ov(),e!==null&&!li?(Nv(e,t,s),Xa(e,t,s)):(bt&&i&&Cv(t),t.flags|=1,pi(e,t,n,s),t.child)}function NI(e,t,n,i,r){if(Gu(t),t.stateNode===null){var s=pf,o=n.contextType;typeof o=="object"&&o!==null&&(s=Fi(o)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=x3,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},jv(t),o=n.contextType,s.context=typeof o=="object"&&o!==null?Fi(o):pf,s.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(t8(t,n,o,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&x3.enqueueReplaceState(s,s.state,null),V1(t,i,s,r),H1(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var a=t.memoizedProps,l=$u(n,a);s.props=l;var c=s.context,u=n.contextType;o=pf,typeof u=="object"&&u!==null&&(o=Fi(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,u||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||c!==o)&&MI(t,s,i,o),kl=!1;var f=t.memoizedState;s.state=f,V1(t,i,s,r),H1(),c=t.memoizedState,a||f!==c||kl?(typeof d=="function"&&(t8(t,n,d,i),c=t.memoizedState),(l=kl||AI(t,n,l,i,f,c,o))?(u||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=o,i=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,O3(e,t),o=t.memoizedProps,u=$u(n,o),s.props=u,d=t.pendingProps,f=s.context,c=n.contextType,l=pf,typeof c=="object"&&c!==null&&(l=Fi(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&MI(t,s,i,l),kl=!1,f=t.memoizedState,s.state=f,V1(t,i,s,r),H1();var h=t.memoizedState;o!==d||f!==h||kl||e!==null&&e.dependencies!==null&&G2(e.dependencies)?(typeof a=="function"&&(t8(t,n,a,i),h=t.memoizedState),(u=kl||AI(t,n,u,i,f,h,l)||e!==null&&e.dependencies!==null&&G2(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,h,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,B1(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Hu(t,e.child,null,r),t.child=Hu(t,null,n,r)):pi(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Xa(e,t,r),e}function PI(e,t,n,i){return Mm(),t.flags|=256,pi(e,t,n,i),t.child}var n8={dehydrated:null,treeContext:null,retryLane:0};function i8(e){return{baseLanes:e,cachePool:_O()}}function r8(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=us),e}function uN(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(Wn.current&2)!==0),o&&(r=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(bt){if(r?Nl(t):Pl(),bt){var a=bi,l;if(l=a){e:{for(l=a,a=Eo;l.nodeType!==8;){if(!a){a=null;break e}if(l=$s(l.nextSibling),l===null){a=null;break e}}a=l}a!==null?(t.memoizedState={dehydrated:a,treeContext:Iu!==null?{id:Sa,overflow:Ia}:null,retryLane:536870912},l=cs(18,null,null,0),l.stateNode=a,l.return=t,t.child=l,Zi=t,bi=null,l=!0):l=!1}l||zu(t)}if(a=t.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return a.data==="$!"?t.lanes=16:t.lanes=536870912,null;xa(t)}return a=i.children,i=i.fallback,r?(Pl(),r=t.mode,a=k3({mode:"hidden",children:a},r),i=Cu(i,r,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,r=t.child,r.memoizedState=i8(n),r.childLanes=r8(e,o,n),t.memoizedState=n8,i):(Nl(t),M3(t,a))}if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null)){if(s)t.flags&256?(Nl(t),t.flags&=-257,t=s8(e,t,n)):t.memoizedState!==null?(Pl(),t.child=e.child,t.flags|=128,t=null):(Pl(),r=i.fallback,a=t.mode,i=k3({mode:"visible",children:i.children},a),r=Cu(r,a,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Hu(t,e.child,null,n),i=t.child,i.memoizedState=i8(n),i.childLanes=r8(e,o,n),t.memoizedState=n8,t=r);else if(Nl(t),a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var c=o.dgst;o=c,i=Error(te(419)),i.stack="",i.digest=o,I0({value:i,source:null,stack:null}),t=s8(e,t,n)}else if(li||Dm(e,t,n,!1),o=(n&e.childLanes)!==0,li||o){if(o=Vt,o!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(o.suspendedLanes|n)?0:i,i!==0&&i!==l.retryLane)throw l.retryLane=i,Uc(e,i),er(o,e,i),aN}a.data==="$?"||$3(),t=s8(e,t,n)}else a.data==="$?"?(t.flags|=128,t.child=e.child,t=Hq.bind(null,e),a._reactRetry=t,t=null):(e=l.treeContext,bi=$s(a.nextSibling),Zi=t,bt=!0,Ps=null,Eo=!1,e!==null&&(ns[is++]=Sa,ns[is++]=Ia,ns[is++]=Iu,Sa=e.id,Ia=e.overflow,Iu=t),t=M3(t,i.children),t.flags|=4096);return t}return r?(Pl(),r=i.fallback,a=t.mode,l=e.child,c=l.sibling,i=tc(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&31457280,c!==null?r=tc(c,r):(r=Cu(r,a,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,a=e.child.memoizedState,a===null?a=i8(n):(l=a.cachePool,l!==null?(c=Yn._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=_O(),a={baseLanes:a.baseLanes|n,cachePool:l}),r.memoizedState=a,r.childLanes=r8(e,o,n),t.memoizedState=n8,i):(Nl(t),n=e.child,e=n.sibling,n=tc(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function M3(e,t){return t=k3({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function k3(e,t){return RN(e,t,0,null)}function s8(e,t,n){return Hu(t,e.child,null,n),e=M3(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function FI(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),D3(e.return,t,n)}function o8(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function dN(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(pi(e,t,i.children,n),i=Wn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&FI(e,n,t);else if(e.tag===19)FI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Jt(Wn,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&B2(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),o8(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&B2(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}o8(t,!0,n,null,s);break;case"together":o8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ec|=t.lanes,!(n&t.childLanes))if(e!==null){if(Dm(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=tc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=tc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Xv(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&G2(e)))}function xq(e,t,n){switch(t.tag){case 3:M2(t,t.stateNode.containerInfo),Fl(t,Yn,e.memoizedState.cache),Mm();break;case 27:case 5:d3(t);break;case 4:M2(t,t.stateNode.containerInfo);break;case 10:Fl(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Nl(t),t.flags|=128,null):n&t.child.childLanes?uN(e,t,n):(Nl(t),e=Xa(e,t,n),e!==null?e.sibling:null);Nl(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Dm(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return dN(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Jt(Wn,Wn.current),i)break;return null;case 22:case 23:return t.lanes=0,cN(e,t,n);case 24:Fl(t,Yn,e.memoizedState.cache)}return Xa(e,t,n)}function fN(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)li=!0;else{if(!Xv(e,n)&&!(t.flags&128))return li=!1,xq(e,t,n);li=!!(e.flags&131072)}else li=!1,bt&&t.flags&1048576&&UO(t,P2,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Kv(i)?(e=$u(i,e),t.tag=1,t=NI(null,t,i,e,n)):(t.tag=0,t=A3(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===pv){t.tag=11,t=RI(null,t,i,e,n);break e}else if(r===Uv){t.tag=14,t=DI(null,t,i,e,n);break e}}throw t=c3(i)||i,Error(te(306,t,""))}}return t;case 0:return A3(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=$u(i,t.pendingProps),NI(e,t,i,r,n);case 3:e:{if(M2(t,t.stateNode.containerInfo),e===null)throw Error(te(387));var s=t.pendingProps;r=t.memoizedState,i=r.element,O3(e,t),V1(t,s,null,n);var o=t.memoizedState;if(s=o.cache,Fl(t,Yn,s),s!==r.cache&&L3(t,[Yn],n,!0),H1(),s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=PI(e,t,s,n);break e}else if(s!==i){i=ss(Error(te(424)),t),I0(i),t=PI(e,t,s,n);break e}else for(bi=$s(t.stateNode.containerInfo.firstChild),Zi=t,bt=!0,Ps=null,Eo=!0,n=vO(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mm(),s===i){t=Xa(e,t,n);break e}pi(e,t,s,n)}t=t.child}return t;case 26:return B1(e,t),e===null?(n=nx(t.type,null,t.pendingProps,null))?t.memoizedState=n:bt||(n=t.type,e=t.pendingProps,i=q2(Ql.current).createElement(n),i[Pi]=t,i[br]=e,yi(i,n,e),oi(i),t.stateNode=i):t.memoizedState=nx(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return d3(t),e===null&&bt&&(i=t.stateNode=ZN(t.type,t.pendingProps,Ql.current),Zi=t,Eo=!0,bi=$s(i.firstChild)),i=t.pendingProps.children,e!==null||bt?pi(e,t,i,n):t.child=Hu(t,null,i,n),B1(e,t),t.child;case 5:return e===null&&bt&&((r=i=bi)&&(i=iQ(i,t.type,t.pendingProps,Eo),i!==null?(t.stateNode=i,Zi=t,bi=$s(i.firstChild),Eo=!1,r=!0):r=!1),r||zu(t)),d3(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,W3(r,s)?i=null:o!==null&&W3(r,o)&&(t.flags|=32),t.memoizedState!==null&&(r=Lv(e,t,Eq,null,null,n),R0._currentValue=r),B1(e,t),pi(e,t,i,n),t.child;case 6:return e===null&&bt&&((e=n=bi)&&(n=rQ(n,t.pendingProps,Eo),n!==null?(t.stateNode=n,Zi=t,bi=null,e=!0):e=!1),e||zu(t)),null;case 13:return uN(e,t,n);case 4:return M2(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Hu(t,null,i,n):pi(e,t,i,n),t.child;case 11:return RI(e,t,t.type,t.pendingProps,n);case 7:return pi(e,t,t.pendingProps,n),t.child;case 8:return pi(e,t,t.pendingProps.children,n),t.child;case 12:return pi(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Fl(t,t.type,i.value),pi(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Gu(t),r=Fi(r),i=i(r),t.flags|=1,pi(e,t,i,n),t.child;case 14:return DI(e,t,t.type,t.pendingProps,n);case 15:return lN(e,t,t.type,t.pendingProps,n);case 19:return dN(e,t,n);case 22:return cN(e,t,n);case 24:return Gu(t),i=Fi(Yn),e===null?(r=Rv(),r===null&&(r=Vt,s=kv(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},jv(t),Fl(t,Yn,r)):(e.lanes&n&&(O3(e,t),V1(t,null,null,n),H1()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Fl(t,Yn,i)):(i=s.cache,Fl(t,Yn,i),i!==r.cache&&L3(t,[Yn],n,!0))),pi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(te(156,t.tag))}var R3=Wo(null),bd=null,Ca=null;function Fl(e,t,n){Jt(R3,t._currentValue),t._currentValue=n}function Da(e){e._currentValue=R3.current,ui(R3)}function D3(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function L3(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var o=r.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=r;for(var l=0;l<t.length;l++)if(a.context===t[l]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),D3(s.return,n,e),i||(o=null);break e}s=a.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(te(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),D3(o,n,e),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function Dm(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(te(387));if(o=o.memoizedProps,o!==null){var a=r.type;$r(r.pendingProps.value,o.value)||(e!==null?e.push(a):e=[a])}}else if(r===A2.current){if(o=r.alternate,o===null)throw Error(te(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(R0):e=[R0])}r=r.return}e!==null&&L3(t,e,n,i),t.flags|=262144}function G2(e){for(e=e.firstContext;e!==null;){if(!$r(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Gu(e){bd=e,Ca=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Fi(e){return hN(bd,e)}function Vp(e,t){return bd===null&&Gu(e),hN(e,t)}function hN(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ca===null){if(e===null)throw Error(te(308));Ca=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ca=Ca.next=t;return n}var kl=!1;function jv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function O3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Jl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ec(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,an&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=O2(e),pO(e,null,n),t}return V6(e,i,t,n),O2(e)}function z1(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,$L(e,n)}}function a8(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var N3=!1;function H1(){if(N3){var e=Df;if(e!==null)throw e}}function V1(e,t,n,i){N3=!1;var r=e.updateQueue;kl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane&-536870913,h=f!==a.lane;if(h?(st&f)===f:(i&f)===f){f!==0&&f===eh&&(N3=!0),u!==null&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,p=a;f=t;var y=n;switch(p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(y,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(y,d,f):m,f==null)break e;d=Yt({},d,f);break e;case 2:kl=!0}}f=a.callback,f!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[f]:h.push(f))}else h={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,s===null&&(r.shared.lanes=0),Ec|=o,e.lanes=o,e.memoizedState=d}}function gN(e,t){if(typeof e!="function")throw Error(te(191,e));e.call(t)}function mN(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)gN(n[e],t)}function Lm(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,o=n.inst;i=s(),o.destroy=i}n=n.next}while(n!==r)}}catch(a){Pt(t,t.return,a)}}function yc(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,r=t;var l=n;try{a()}catch(c){Pt(r,l,c)}}}i=i.next}while(i!==s)}}catch(c){Pt(t,t.return,c)}}function pN(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{mN(t,n)}catch(i){Pt(e,e.return,i)}}}function UN(e,t,n){n.props=$u(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Pt(e,t,i)}}function gu(e,t){try{var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var r=i;break;default:r=i}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(s){Pt(e,t,s)}}function kr(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Pt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Pt(e,t,r)}else n.current=null}function bN(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Pt(e,e.return,r)}}function BI(e,t,n){try{var i=e.stateNode;Qq(i,e.type,n,t),i[br]=t}catch(r){Pt(e,e.return,r)}}function yN(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function l8(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function P3(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=K6));else if(i!==4&&i!==27&&(e=e.child,e!==null))for(P3(e,t,n),e=e.sibling;e!==null;)P3(e,t,n),e=e.sibling}function X2(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&i!==27&&(e=e.child,e!==null))for(X2(e,t,n),e=e.sibling;e!==null;)X2(e,t,n),e=e.sibling}var ba=!1,mn=!1,c8=!1,zI=typeof WeakSet=="function"?WeakSet:Set,si=null,HI=!1;function Cq(e,t){if(e=e.containerInfo,j3=tb,e=cO(e),Sv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Y3={focusedElem:e,selectionRange:n},tb=!1,si=t;si!==null;)if(t=si,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,si=e;else for(;si!==null;){switch(t=si,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var m=$u(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(m,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(p){Pt(n,n.return,p)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)K3(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":K3(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(te(163))}if(e=t.sibling,e!==null){e.return=t.return,si=e;break}si=t.return}return m=HI,HI=!1,m}function EN(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ra(e,n),i&4&&Lm(5,n);break;case 1:if(ra(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Pt(n,n.return,a)}else{var r=$u(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Pt(n,n.return,a)}}i&64&&pN(n),i&512&&gu(n,n.return);break;case 3:if(ra(e,n),i&64&&(i=n.updateQueue,i!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{mN(i,e)}catch(a){Pt(n,n.return,a)}}break;case 26:ra(e,n),i&512&&gu(n,n.return);break;case 27:case 5:ra(e,n),t===null&&i&4&&bN(n),i&512&&gu(n,n.return);break;case 12:ra(e,n);break;case 13:ra(e,n),i&4&&_N(e,n);break;case 22:if(r=n.memoizedState!==null||ba,!r){t=t!==null&&t.memoizedState!==null||mn;var s=ba,o=mn;ba=r,(mn=t)&&!o?Sl(e,n,(n.subtreeFlags&8772)!==0):ra(e,n),ba=s,mn=o}i&512&&(n.memoizedProps.mode==="manual"?gu(n,n.return):kr(n,n.return));break;default:ra(e,n)}}function vN(e){var t=e.alternate;t!==null&&(e.alternate=null,vN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&yv(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kn=null,Sr=!1;function ia(e,t,n){for(n=n.child;n!==null;)wN(e,t,n),n=n.sibling}function wN(e,t,n){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Im,n)}catch{}switch(n.tag){case 26:mn||kr(n,t),ia(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:mn||kr(n,t);var i=kn,r=Sr;for(kn=n.stateNode,ia(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);yv(n),kn=i,Sr=r;break;case 5:mn||kr(n,t);case 6:r=kn;var s=Sr;if(kn=null,ia(e,t,n),kn=r,Sr=s,kn!==null)if(Sr)try{e=kn,i=n.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)}catch(o){Pt(n,t,o)}else try{kn.removeChild(n.stateNode)}catch(o){Pt(n,t,o)}break;case 18:kn!==null&&(Sr?(t=kn,n=n.stateNode,t.nodeType===8?v8(t.parentNode,n):t.nodeType===1&&v8(t,n),O0(t)):v8(kn,n.stateNode));break;case 4:i=kn,r=Sr,kn=n.stateNode.containerInfo,Sr=!0,ia(e,t,n),kn=i,Sr=r;break;case 0:case 11:case 14:case 15:mn||yc(2,n,t),mn||yc(4,n,t),ia(e,t,n);break;case 1:mn||(kr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&UN(n,t,i)),ia(e,t,n);break;case 21:ia(e,t,n);break;case 22:mn||kr(n,t),mn=(i=mn)||n.memoizedState!==null,ia(e,t,n),mn=i;break;default:ia(e,t,n)}}function _N(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{O0(e)}catch(n){Pt(t,t.return,n)}}function Aq(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new zI),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new zI),t;default:throw Error(te(435,e.tag))}}function u8(e,t){var n=Aq(e);t.forEach(function(i){var r=Vq.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Yr(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 27:case 5:kn=a.stateNode,Sr=!1;break e;case 3:kn=a.stateNode.containerInfo,Sr=!0;break e;case 4:kn=a.stateNode.containerInfo,Sr=!0;break e}a=a.return}if(kn===null)throw Error(te(160));wN(s,o,r),kn=null,Sr=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)TN(t,e),t=t.sibling}var Os=null;function TN(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Yr(t,e),Wr(e),i&4&&(yc(3,e,e.return),Lm(3,e),yc(5,e,e.return));break;case 1:Yr(t,e),Wr(e),i&512&&(mn||n===null||kr(n,n.return)),i&64&&ba&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Os;if(Yr(t,e),Wr(e),i&512&&(mn||n===null||kr(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[w0]||s[Pi]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),yi(s,i,n),s[Pi]=e,oi(s),i=s;break e;case"link":var o=rx("link","href",r).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(s=o[a],s.getAttribute("href")===(n.href==null?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}s=r.createElement(i),yi(s,i,n),r.head.appendChild(s);break;case"meta":if(o=rx("meta","content",r).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(s=o[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}s=r.createElement(i),yi(s,i,n),r.head.appendChild(s);break;default:throw Error(te(468,i))}s[Pi]=e,oi(s),i=s}e.stateNode=i}else sx(r,e.type,e.stateNode);else e.stateNode=ix(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?sx(r,e.type,e.stateNode):ix(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&BI(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&e.alternate===null){r=e.stateNode,s=e.memoizedProps;try{for(var l=r.firstChild;l;){var c=l.nextSibling,u=l.nodeName;l[w0]||u==="HEAD"||u==="BODY"||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&l.rel.toLowerCase()==="stylesheet"||r.removeChild(l),l=c}for(var d=e.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);yi(r,d,s),r[Pi]=e,r[br]=s}catch(m){Pt(e,e.return,m)}}case 5:if(Yr(t,e),Wr(e),i&512&&(mn||n===null||kr(n,n.return)),e.flags&32){r=e.stateNode;try{Qf(r,"")}catch(m){Pt(e,e.return,m)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,BI(e,r,n!==null?n.memoizedProps:r)),i&1024&&(c8=!0);break;case 6:if(Yr(t,e),Wr(e),i&4){if(e.stateNode===null)throw Error(te(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){Pt(e,e.return,m)}}break;case 3:if(WU=null,r=Os,Os=Q2(t.containerInfo),Yr(t,e),Os=r,Wr(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{O0(t.containerInfo)}catch(m){Pt(e,e.return,m)}c8&&(c8=!1,SN(e));break;case 4:i=Os,Os=Q2(e.stateNode.containerInfo),Yr(t,e),Wr(e),Os=i;break;case 12:Yr(t,e),Wr(e);break;case 13:Yr(t,e),Wr(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Qv=Ao()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,u8(e,i)));break;case 22:if(i&512&&(mn||n===null||kr(n,n.return)),l=e.memoizedState!==null,c=n!==null&&n.memoizedState!==null,u=ba,d=mn,ba=u||l,mn=d||c,Yr(t,e),mn=d,ba=u,Wr(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=l?t._visibility&-2:t._visibility|1,l&&(t=ba||mn,n===null||c||t||Zd(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){c=n=t;try{if(r=c.stateNode,l)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=c.stateNode,a=c.memoizedProps.style;var h=a!=null&&a.hasOwnProperty("display")?a.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){Pt(c,c.return,m)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(m){Pt(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,u8(e,n))));break;case 19:Yr(t,e),Wr(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,u8(e,i)));break;case 21:break;default:Yr(t,e),Wr(e)}}function Wr(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(yN(n)){var i=n;break e}n=n.return}throw Error(te(160))}switch(i.tag){case 27:var r=i.stateNode,s=l8(e);X2(e,s,r);break;case 5:var o=i.stateNode;i.flags&32&&(Qf(o,""),i.flags&=-33);var a=l8(e);X2(e,a,o);break;case 3:case 4:var l=i.stateNode.containerInfo,c=l8(e);P3(e,c,l);break;default:throw Error(te(161))}}}catch(u){Pt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function SN(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;SN(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ra(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)EN(e,t.alternate,t),t=t.sibling}function Zd(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yc(4,t,t.return),Zd(t);break;case 1:kr(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&UN(t,t.return,n),Zd(t);break;case 26:case 27:case 5:kr(t,t.return),Zd(t);break;case 22:kr(t,t.return),t.memoizedState===null&&Zd(t);break;default:Zd(t)}e=e.sibling}}function Sl(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Sl(r,s,n),Lm(4,s);break;case 1:if(Sl(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Pt(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)gN(l[r],a)}catch(c){Pt(i,i.return,c)}}n&&o&64&&pN(s),gu(s,s.return);break;case 26:case 27:case 5:Sl(r,s,n),n&&i===null&&o&4&&bN(s),gu(s,s.return);break;case 12:Sl(r,s,n);break;case 13:Sl(r,s,n),n&&o&4&&_N(r,s);break;case 22:s.memoizedState===null&&Sl(r,s,n),gu(s,s.return);break;default:Sl(r,s,n)}t=t.sibling}}function Yv(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&km(n))}function Wv(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&km(e))}function bl(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)IN(e,t,n,i),t=t.sibling}function IN(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:bl(e,t,n,i),r&2048&&Lm(9,t);break;case 3:bl(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&km(e)));break;case 12:if(r&2048){bl(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;typeof a=="function"&&a(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Pt(t,t.return,l)}}else bl(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,t.memoizedState!==null?s._visibility&4?bl(e,t,n,i):$1(e,t):s._visibility&4?bl(e,t,n,i):(s._visibility|=4,qd(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Yv(t.alternate,t);break;case 24:bl(e,t,n,i),r&2048&&Wv(t.alternate,t);break;default:bl(e,t,n,i)}}function qd(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,o=t,a=n,l=i,c=o.flags;switch(o.tag){case 0:case 11:case 15:qd(s,o,a,l,r),Lm(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState!==null?u._visibility&4?qd(s,o,a,l,r):$1(s,o):(u._visibility|=4,qd(s,o,a,l,r)),r&&c&2048&&Yv(o.alternate,o);break;case 24:qd(s,o,a,l,r),r&&c&2048&&Wv(o.alternate,o);break;default:qd(s,o,a,l,r)}t=t.sibling}}function $1(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:$1(n,i),r&2048&&Yv(i.alternate,i);break;case 24:$1(n,i),r&2048&&Wv(i.alternate,i);break;default:$1(n,i)}t=t.sibling}}var a1=8192;function Nd(e){if(e.subtreeFlags&a1)for(e=e.child;e!==null;)xN(e),e=e.sibling}function xN(e){switch(e.tag){case 26:Nd(e),e.flags&a1&&e.memoizedState!==null&&UQ(Os,e.memoizedState,e.memoizedProps);break;case 5:Nd(e);break;case 3:case 4:var t=Os;Os=Q2(e.stateNode.containerInfo),Nd(e),Os=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=a1,a1=16777216,Nd(e),a1=t):Nd(e));break;default:Nd(e)}}function CN(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function kg(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];si=i,MN(i,e)}CN(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)AN(e),e=e.sibling}function AN(e){switch(e.tag){case 0:case 11:case 15:kg(e),e.flags&2048&&yc(9,e,e.return);break;case 3:kg(e);break;case 12:kg(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,XU(e)):kg(e);break;default:kg(e)}}function XU(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];si=i,MN(i,e)}CN(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:yc(8,t,t.return),XU(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,XU(t));break;default:XU(t)}e=e.sibling}}function MN(e,t){for(;si!==null;){var n=si;switch(n.tag){case 0:case 11:case 15:yc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:km(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,si=i;else e:for(n=e;si!==null;){i=si;var r=i.sibling,s=i.return;if(vN(i),i===n){si=null;break e}if(r!==null){r.return=s,si=r;break e}si=s}}}function Mq(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(e,t,n,i){return new Mq(e,t,n,i)}function Kv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tc(e,t){var n=e.alternate;return n===null?(n=cs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function kN(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jU(e,t,n,i,r,s){var o=0;if(i=e,typeof e=="function")Kv(e)&&(o=1);else if(typeof e=="string")o=mQ(e,n,Co.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case cf:return Cu(n.children,r,s,t);case RL:o=8,r|=24;break;case o3:return e=cs(12,n,t,r|2),e.elementType=o3,e.lanes=s,e;case a3:return e=cs(13,n,t,r),e.elementType=a3,e.lanes=s,e;case l3:return e=cs(19,n,t,r),e.elementType=l3,e.lanes=s,e;case LL:return RN(n,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tZ:case Ta:o=10;break e;case DL:o=9;break e;case pv:o=11;break e;case Uv:o=14;break e;case Ml:o=16,i=null;break e}o=29,n=Error(te(130,e===null?"null":typeof e,"")),i=null}return t=cs(o,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Cu(e,t,n,i){return e=cs(7,e,i,t),e.lanes=n,e}function RN(e,t,n,i){e=cs(22,e,i,t),e.elementType=LL,e.lanes=n;var r={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var s=r._current;if(s===null)throw Error(te(456));if(!(r._pendingVisibility&2)){var o=Uc(s,2);o!==null&&(r._pendingVisibility|=2,er(o,s,2))}},attach:function(){var s=r._current;if(s===null)throw Error(te(456));if(r._pendingVisibility&2){var o=Uc(s,2);o!==null&&(r._pendingVisibility&=-3,er(o,s,2))}}};return e.stateNode=r,e}function d8(e,t,n){return e=cs(6,e,null,t),e.lanes=n,e}function f8(e,t,n){return t=cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sa(e){e.flags|=4}function VI(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!JN(t)){if(t=Es.current,t!==null&&((st&4194176)===st?Mo!==null:(st&62914560)!==st&&!(st&536870912)||t!==Mo))throw N1=v3,bO;e.flags|=8192}}function $p(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?HL():536870912,e.lanes|=t,nh|=t)}function Rg(e,t){if(!bt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function tn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&31457280,i|=r.flags&31457280,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function kq(e,t,n){var i=t.pendingProps;switch(Av(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(t),null;case 1:return tn(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Da(Yn),Zf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ag(t)?sa(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ps!==null&&(V3(Ps),Ps=null))),tn(t),null;case 26:return n=t.memoizedState,e===null?(sa(t),n!==null?(tn(t),VI(t,n)):(tn(t),t.flags&=-16777217)):n?n!==e.memoizedState?(sa(t),tn(t),VI(t,n)):(tn(t),t.flags&=-16777217):(e.memoizedProps!==i&&sa(t),tn(t),t.flags&=-16777217),null;case 27:k2(t),n=Ql.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&sa(t);else{if(!i){if(t.stateNode===null)throw Error(te(166));return tn(t),null}e=Co.current,Ag(t)?bI(t):(e=ZN(r,i,n),t.stateNode=e,sa(t))}return tn(t),null;case 5:if(k2(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&sa(t);else{if(!i){if(t.stateNode===null)throw Error(te(166));return tn(t),null}if(e=Co.current,Ag(t))bI(t);else{switch(r=q2(Ql.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Pi]=t,e[br]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(yi(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&sa(t)}}return tn(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&sa(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(te(166));if(e=Ql.current,Ag(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Zi,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Pi]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||YN(e.nodeValue,n)),e||zu(t)}else e=q2(e).createTextNode(i),e[Pi]=t,t.stateNode=e}return tn(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Ag(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(te(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(te(317));r[Pi]=t}else Mm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tn(t),r=!1}else Ps!==null&&(V3(Ps),Ps=null),r=!0;if(!r)return t.flags&256?(xa(t),t):(xa(t),null)}if(xa(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),$p(t,t.updateQueue),tn(t),null;case 4:return Zf(),e===null&&tw(t.stateNode.containerInfo),tn(t),null;case 10:return Da(t.type),tn(t),null;case 19:if(ui(Wn),r=t.memoizedState,r===null)return tn(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Rg(r,!1);else{if(pn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=B2(e),s!==null){for(t.flags|=128,Rg(r,!1),e=s.updateQueue,t.updateQueue=e,$p(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)kN(n,e),n=n.sibling;return Jt(Wn,Wn.current&1|2),t.child}e=e.sibling}r.tail!==null&&Ao()>j2&&(t.flags|=128,i=!0,Rg(r,!1),t.lanes=4194304)}else{if(!i)if(e=B2(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,$p(t,e),Rg(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!bt)return tn(t),null}else 2*Ao()-r.renderingStartTime>j2&&n!==536870912&&(t.flags|=128,i=!0,Rg(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ao(),t.sibling=null,e=Wn.current,Jt(Wn,i?e&1|2:e&1),t):(tn(t),null);case 22:case 23:return xa(t),Mv(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(tn(t),t.subtreeFlags&6&&(t.flags|=8192)):tn(t),n=t.updateQueue,n!==null&&$p(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ui(xu),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Da(Yn),tn(t),null;case 25:return null}throw Error(te(156,t.tag))}function Rq(e,t){switch(Av(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Da(Yn),Zf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return k2(t),null;case 13:if(xa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));Mm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ui(Wn),null;case 4:return Zf(),null;case 10:return Da(t.type),null;case 22:case 23:return xa(t),Mv(),e!==null&&ui(xu),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Da(Yn),null;case 25:return null;default:return null}}function DN(e,t){switch(Av(t),t.tag){case 3:Da(Yn),Zf();break;case 26:case 27:case 5:k2(t);break;case 4:Zf();break;case 13:xa(t);break;case 19:ui(Wn);break;case 10:Da(t.type);break;case 22:case 23:xa(t),Mv(),e!==null&&ui(xu);break;case 24:Da(Yn)}}var Dq={getCacheForType:function(e){var t=Fi(Yn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Lq=typeof WeakMap=="function"?WeakMap:Map,an=0,Vt=null,je=null,st=0,Ht=0,Ir=null,ya=!1,Vh=!1,Zv=!1,ja=0,pn=0,Ec=0,Au=0,qv=0,us=0,nh=0,G1=null,vo=null,F3=!1,Qv=0,j2=1/0,Y2=null,nc=null,Gp=!1,lu=null,X1=0,B3=0,z3=null,j1=0,H3=null;function zr(){if(an&2&&st!==0)return st&-st;if(Fe.T!==null){var e=eh;return e!==0?e:ew()}return XL()}function LN(){us===0&&(us=!(st&536870912)||bt?zL():536870912);var e=Es.current;return e!==null&&(e.flags|=32),us}function er(e,t,n){(e===Vt&&Ht===2||e.cancelPendingCommit!==null)&&(ih(e,0),Ea(e,st,us,!1)),Cm(e,n),(!(an&2)||e!==Vt)&&(e===Vt&&(!(an&2)&&(Au|=n),pn===4&&Ea(e,st,us,!1)),Ko(e))}function ON(e,t,n){if(an&6)throw Error(te(327));var i=!n&&(t&60)===0&&(t&e.expiredLanes)===0||xm(e,t),r=i?Pq(e,t):h8(e,t,!0),s=i;do{if(r===0){Vh&&!i&&Ea(e,t,0,!1);break}else if(r===6)Ea(e,t,0,!ya);else{if(n=e.current.alternate,s&&!Oq(n)){r=h8(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var a=e;r=G1;var l=a.current.memoizedState.isDehydrated;if(l&&(ih(a,o).flags|=256),o=h8(a,o,!1),o!==2){if(Zv&&!l){a.errorRecoveryDisabledLanes|=s,Au|=s,r=4;break e}s=vo,vo=r,s!==null&&V3(s)}r=o}if(s=!1,r!==2)continue}}if(r===1){ih(e,0),Ea(e,t,0,!0);break}e:{switch(i=e,r){case 0:case 1:throw Error(te(345));case 4:if((t&4194176)===t){Ea(i,t,us,!ya);break e}break;case 2:vo=null;break;case 3:case 5:break;default:throw Error(te(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(s=Qv+300-Ao(),10<s)){if(Ea(i,t,us,!ya),P6(i,0)!==0)break e;i.timeoutHandle=KN($I.bind(null,i,n,vo,Y2,F3,t,us,Au,nh,ya,2,-0,0),s);break e}$I(i,n,vo,Y2,F3,t,us,Au,nh,ya,0,-0,0)}}break}while(!0);Ko(e)}function V3(e){vo===null?vo=e:vo.push.apply(vo,e)}function $I(e,t,n,i,r,s,o,a,l,c,u,d,f){var h=t.subtreeFlags;if((h&8192||(h&16785408)===16785408)&&(k0={stylesheets:null,count:0,unsuspend:pQ},xN(t),t=bQ(),t!==null)){e.cancelPendingCommit=t(XI.bind(null,e,n,i,r,o,a,l,1,d,f)),Ea(e,s,o,!c);return}XI(e,n,i,r,o,a,l,u,d,f)}function Oq(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!$r(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ea(e,t,n,i){t&=~qv,t&=~Au,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Br(r),o=1<<s;i[s]=-1,r&=~o}n!==0&&VL(e,n,t)}function Y6(){return an&6?!0:(Om(0),!1)}function Jv(){if(je!==null){if(Ht===0)var e=je.return;else e=je,Ca=bd=null,Pv(e),Rf=null,x0=0,e=je;for(;e!==null;)DN(e.alternate,e),e=e.return;je=null}}function ih(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,eQ(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Jv(),Vt=e,je=n=tc(e.current,null),st=t,Ht=0,Ir=null,ya=!1,Vh=xm(e,t),Zv=!1,nh=us=qv=Au=Ec=pn=0,vo=G1=null,F3=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Br(i),s=1<<r;t|=e[r],i&=~s}return ja=t,H6(),n}function NN(e,t){$e=null,Fe.H=Lo,t===O1?(t=vI(),Ht=3):t===bO?(t=vI(),Ht=4):Ht=t===aN?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ir=t,je===null&&(pn=1,$2(e,ss(t,e.current)))}function PN(){var e=Fe.H;return Fe.H=Lo,e===null?Lo:e}function FN(){var e=Fe.A;return Fe.A=Dq,e}function $3(){pn=4,ya||(st&4194176)!==st&&Es.current!==null||(Vh=!0),!(Ec&134217727)&&!(Au&134217727)||Vt===null||Ea(Vt,st,us,!1)}function h8(e,t,n){var i=an;an|=2;var r=PN(),s=FN();(Vt!==e||st!==t)&&(Y2=null,ih(e,t)),t=!1;var o=pn;e:do try{if(Ht!==0&&je!==null){var a=je,l=Ir;switch(Ht){case 8:Jv(),o=6;break e;case 3:case 2:case 6:Es.current===null&&(t=!0);var c=Ht;if(Ht=0,Ir=null,yf(e,a,l,c),n&&Vh){o=0;break e}break;default:c=Ht,Ht=0,Ir=null,yf(e,a,l,c)}}Nq(),o=pn;break}catch(u){NN(e,u)}while(!0);return t&&e.shellSuspendCounter++,Ca=bd=null,an=i,Fe.H=r,Fe.A=s,je===null&&(Vt=null,st=0,H6()),o}function Nq(){for(;je!==null;)BN(je)}function Pq(e,t){var n=an;an|=2;var i=PN(),r=FN();Vt!==e||st!==t?(Y2=null,j2=Ao()+500,ih(e,t)):Vh=xm(e,t);e:do try{if(Ht!==0&&je!==null){t=je;var s=Ir;t:switch(Ht){case 1:Ht=0,Ir=null,yf(e,t,s,1);break;case 2:if(EI(s)){Ht=0,Ir=null,GI(t);break}t=function(){Ht===2&&Vt===e&&(Ht=7),Ko(e)},s.then(t,t);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:EI(s)?(Ht=0,Ir=null,GI(t)):(Ht=0,Ir=null,yf(e,t,s,7));break;case 5:var o=null;switch(je.tag){case 26:o=je.memoizedState;case 5:case 27:var a=je;if(!o||JN(o)){Ht=0,Ir=null;var l=a.sibling;if(l!==null)je=l;else{var c=a.return;c!==null?(je=c,W6(c)):je=null}break t}}Ht=0,Ir=null,yf(e,t,s,5);break;case 6:Ht=0,Ir=null,yf(e,t,s,6);break;case 8:Jv(),pn=6;break e;default:throw Error(te(462))}}Fq();break}catch(u){NN(e,u)}while(!0);return Ca=bd=null,Fe.H=i,Fe.A=r,an=n,je!==null?0:(Vt=null,st=0,H6(),pn)}function Fq(){for(;je!==null&&!oZ();)BN(je)}function BN(e){var t=fN(e.alternate,e,ja);e.memoizedProps=e.pendingProps,t===null?W6(e):je=t}function GI(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=OI(n,t,t.pendingProps,t.type,void 0,st);break;case 11:t=OI(n,t,t.pendingProps,t.type.render,t.ref,st);break;case 5:Pv(t);default:DN(n,t),t=je=kN(t,ja),t=fN(n,t,ja)}e.memoizedProps=e.pendingProps,t===null?W6(e):je=t}function yf(e,t,n,i){Ca=bd=null,Pv(t),Rf=null,x0=0;var r=t.return;try{if(Iq(e,r,t,n,st)){pn=1,$2(e,ss(n,e.current)),je=null;return}}catch(s){if(r!==null)throw je=r,s;pn=1,$2(e,ss(n,e.current)),je=null;return}t.flags&32768?(bt||i===1?e=!0:Vh||st&536870912?e=!1:(ya=e=!0,(i===2||i===3||i===6)&&(i=Es.current,i!==null&&i.tag===13&&(i.flags|=16384))),zN(t,e)):W6(t)}function W6(e){var t=e;do{if(t.flags&32768){zN(t,ya);return}e=t.return;var n=kq(t.alternate,t,ja);if(n!==null){je=n;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);pn===0&&(pn=5)}function zN(e,t){do{var n=Rq(e.alternate,e);if(n!==null){n.flags&=32767,je=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=n}while(e!==null);pn=6,je=null}function XI(e,t,n,i,r,s,o,a,l,c){var u=Fe.T,d=jt.p;try{jt.p=2,Fe.T=null,Bq(e,t,n,i,d,r,s,o,a,l,c)}finally{Fe.T=u,jt.p=d}}function Bq(e,t,n,i,r,s,o,a){do Nf();while(lu!==null);if(an&6)throw Error(te(327));var l=e.finishedWork;if(i=e.finishedLanes,l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=l.lanes|l.childLanes;if(c|=Iv,UZ(e,i,c,s,o,a),e===Vt&&(je=Vt=null,st=0),!(l.subtreeFlags&10256)&&!(l.flags&10256)||Gp||(Gp=!0,B3=c,z3=n,$q(R2,function(){return Nf(),null})),n=(l.flags&15990)!==0,l.subtreeFlags&15990||n?(n=Fe.T,Fe.T=null,s=jt.p,jt.p=2,o=an,an|=4,Cq(e,l),TN(l,e),cq(Y3,e.containerInfo),tb=!!j3,Y3=j3=null,e.current=l,EN(e,l.alternate,l),aZ(),an=o,jt.p=s,Fe.T=n):e.current=l,Gp?(Gp=!1,lu=e,X1=i):HN(e,c),c=e.pendingLanes,c===0&&(nc=null),fZ(l.stateNode),Ko(e),t!==null)for(r=e.onRecoverableError,l=0;l<t.length;l++)c=t[l],r(c.value,{componentStack:c.stack});return X1&3&&Nf(),c=e.pendingLanes,i&4194218&&c&42?e===H3?j1++:(j1=0,H3=e):j1=0,Om(0),null}function HN(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,km(t)))}function Nf(){if(lu!==null){var e=lu,t=B3;B3=0;var n=GL(X1),i=Fe.T,r=jt.p;try{if(jt.p=32>n?32:n,Fe.T=null,lu===null)var s=!1;else{n=z3,z3=null;var o=lu,a=X1;if(lu=null,X1=0,an&6)throw Error(te(331));var l=an;if(an|=4,AN(o.current),IN(o,o.current,a,n),an=l,Om(0,!1),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Im,o)}catch{}s=!0}return s}finally{jt.p=r,Fe.T=i,HN(e,t)}}return!1}function jI(e,t,n){t=ss(n,t),t=C3(e.stateNode,t,2),e=ec(e,t,2),e!==null&&(Cm(e,2),Ko(e))}function Pt(e,t,n){if(e.tag===3)jI(e,e,n);else for(;t!==null;){if(t.tag===3){jI(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(nc===null||!nc.has(i))){e=ss(n,e),n=sN(2),i=ec(t,n,2),i!==null&&(oN(n,i,t,e),Cm(i,2),Ko(i));break}}t=t.return}}function g8(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Lq;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Zv=!0,r.add(n),e=zq.bind(null,e,t,n),t.then(e,e))}function zq(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Vt===e&&(st&n)===n&&(pn===4||pn===3&&(st&62914560)===st&&300>Ao()-Qv?!(an&2)&&ih(e,0):qv|=n,nh===st&&(nh=0)),Ko(e)}function VN(e,t){t===0&&(t=HL()),e=Uc(e,t),e!==null&&(Cm(e,t),Ko(e))}function Hq(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),VN(e,n)}function Vq(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(te(314))}i!==null&&i.delete(t),VN(e,n)}function $q(e,t){return bv(e,t)}var W2=null,Qd=null,G3=!1,K2=!1,m8=!1,Mu=0;function Ko(e){e!==Qd&&e.next===null&&(Qd===null?W2=Qd=e:Qd=Qd.next=e),K2=!0,G3||(G3=!0,Xq(Gq))}function Om(e,t){if(!m8&&K2){m8=!0;do for(var n=!1,i=W2;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var o=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-Br(42|e)+1)-1,s&=r&~(o&~a),s=s&201326677?s&201326677|1:s?s|2:0}s!==0&&(n=!0,YI(i,s))}else s=st,s=P6(i,i===Vt?s:0),!(s&3)||xm(i,s)||(n=!0,YI(i,s));i=i.next}while(n);m8=!1}}function Gq(){K2=G3=!1;var e=0;Mu!==0&&(Jq()&&(e=Mu),Mu=0);for(var t=Ao(),n=null,i=W2;i!==null;){var r=i.next,s=$N(i,t);s===0?(i.next=null,n===null?W2=r:n.next=r,r===null&&(Qd=n)):(n=i,(e!==0||s&3)&&(K2=!0)),i=r}Om(e)}function $N(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var o=31-Br(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=pZ(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(t=Vt,n=st,n=P6(e,e===t?n:0),i=e.callbackNode,n===0||e===t&&Ht===2||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Xy(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||xm(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Xy(i),GL(n)){case 2:case 8:n=FL;break;case 32:n=R2;break;case 268435456:n=BL;break;default:n=R2}return i=GN.bind(null,e),n=bv(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Xy(i),e.callbackPriority=2,e.callbackNode=null,2}function GN(e,t){var n=e.callbackNode;if(Nf()&&e.callbackNode!==n)return null;var i=st;return i=P6(e,e===Vt?i:0),i===0?null:(ON(e,i,t),$N(e,Ao()),e.callbackNode!=null&&e.callbackNode===n?GN.bind(null,e):null)}function YI(e,t){if(Nf())return null;ON(e,t,!0)}function Xq(e){tQ(function(){an&6?bv(PL,e):e()})}function ew(){return Mu===0&&(Mu=zL()),Mu}function WI(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:BU(""+e)}function KI(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function jq(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=WI((r[br]||null).action),o=i.submitter;o&&(t=(t=o[br]||null)?WI(t.formAction):o.getAttribute("formAction"),t!==null&&(s=t,o=null));var a=new F6("action","action",null,i,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Mu!==0){var l=o?KI(r,o):new FormData(r);I3(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(a.preventDefault(),l=o?KI(r,o):new FormData(r),I3(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var p8=0;p8<pI.length;p8++){var U8=pI[p8],Yq=U8.toLowerCase(),Wq=U8[0].toUpperCase()+U8.slice(1);io(Yq,"on"+Wq)}io(dO,"onAnimationEnd");io(fO,"onAnimationIteration");io(hO,"onAnimationStart");io("dblclick","onDoubleClick");io("focusin","onFocus");io("focusout","onBlur");io(dq,"onTransitionRun");io(fq,"onTransitionStart");io(hq,"onTransitionCancel");io(gO,"onTransitionEnd");qf("onMouseEnter",["mouseout","mouseover"]);qf("onMouseLeave",["mouseout","mouseover"]);qf("onPointerEnter",["pointerout","pointerover"]);qf("onPointerLeave",["pointerout","pointerover"]);hd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hd("onBeforeInput",["compositionend","keypress","textInput","paste"]);hd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var A0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(A0));function XN(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){V2(u)}r.currentTarget=null,s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){V2(u)}r.currentTarget=null,s=l}}}}function Je(e,t){var n=t[h3];n===void 0&&(n=t[h3]=new Set);var i=e+"__bubble";n.has(i)||(jN(t,e,2,!1),n.add(i))}function b8(e,t,n){var i=0;t&&(i|=4),jN(n,e,i,t)}var Xp="_reactListening"+Math.random().toString(36).slice(2);function tw(e){if(!e[Xp]){e[Xp]=!0,jL.forEach(function(n){n!=="selectionchange"&&(Kq.has(n)||b8(n,!1,e),b8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xp]||(t[Xp]=!0,b8("selectionchange",!1,t))}}function jN(e,t,n,i){switch(rP(t)){case 2:var r=vQ;break;case 8:r=wQ;break;default:r=sw}n=r.bind(null,t,n,e),r=void 0,!U3||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function y8(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=hu(a),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){i=s=o;continue e}a=a.parentNode}}i=i.return}eO(function(){var c=s,u=vv(n),d=[];e:{var f=mO.get(e);if(f!==void 0){var h=F6,m=e;switch(e){case"keypress":if(HU(n)===0)break e;case"keydown":case"keyup":h=VZ;break;case"focusin":m="focus",h=Zy;break;case"focusout":m="blur",h=Zy;break;case"beforeblur":case"afterblur":h=Zy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=rI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=MZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=XZ;break;case dO:case fO:case hO:h=DZ;break;case gO:h=YZ;break;case"scroll":case"scrollend":h=CZ;break;case"wheel":h=KZ;break;case"copy":case"cut":case"paste":h=OZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=oI;break;case"toggle":case"beforetoggle":h=qZ}var p=(t&4)!==0,y=!p&&(e==="scroll"||e==="scrollend"),b=p?f!==null?f+"Capture":null:f;p=[];for(var E=c,v;E!==null;){var w=E;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||b===null||(w=_0(E,b),w!=null&&p.push(M0(E,w,v))),y)break;E=E.return}0<p.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==p3&&(m=n.relatedTarget||n.fromElement)&&(hu(m)||m[zh]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?hu(m):null,m!==null&&(y=Bh(m),p=m.tag,m!==y||p!==5&&p!==27&&p!==6)&&(m=null)):(h=null,m=c),h!==m)){if(p=rI,w="onMouseLeave",b="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(p=oI,w="onPointerLeave",b="onPointerEnter",E="pointer"),y=h==null?f:o1(h),v=m==null?f:o1(m),f=new p(w,E+"leave",h,n,u),f.target=y,f.relatedTarget=v,w=null,hu(u)===c&&(p=new p(b,E+"enter",m,n,u),p.target=v,p.relatedTarget=y,w=p),y=w,h&&m)t:{for(p=h,b=m,E=0,v=p;v;v=Pd(v))E++;for(v=0,w=b;w;w=Pd(w))v++;for(;0<E-v;)p=Pd(p),E--;for(;0<v-E;)b=Pd(b),v--;for(;E--;){if(p===b||b!==null&&p===b.alternate)break t;p=Pd(p),b=Pd(b)}p=null}else p=null;h!==null&&ZI(d,f,h,p,!1),m!==null&&y!==null&&ZI(d,y,m,p,!0)}}e:{if(f=c?o1(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var S=uI;else if(cI(f))if(oO)S=aq;else{S=sq;var k=rq}else h=f.nodeName,!h||h.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&Ev(c.elementType)&&(S=uI):S=oq;if(S&&(S=S(e,c))){sO(d,S,n,u);break e}k&&k(e,f,c),e==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&m3(f,"number",f.value)}switch(k=c?o1(c):window,e){case"focusin":(cI(k)||k.contentEditable==="true")&&(hf=k,b3=c,L1=null);break;case"focusout":L1=b3=hf=null;break;case"mousedown":y3=!0;break;case"contextmenu":case"mouseup":case"dragend":y3=!1,mI(d,n,u);break;case"selectionchange":if(uq)break;case"keydown":case"keyup":mI(d,n,u)}var _;if(Tv)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ff?iO(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(nO&&n.locale!=="ko"&&(ff||T!=="onCompositionStart"?T==="onCompositionEnd"&&ff&&(_=tO()):(Gl=u,wv="value"in Gl?Gl.value:Gl.textContent,ff=!0)),k=Z2(c,T),0<k.length&&(T=new sI(T,e,null,n,u),d.push({event:T,listeners:k}),_?T.data=_:(_=rO(n),_!==null&&(T.data=_)))),(_=JZ?eq(e,n):tq(e,n))&&(T=Z2(c,"onBeforeInput"),0<T.length&&(k=new sI("onBeforeInput","beforeinput",null,n,u),d.push({event:k,listeners:T}),k.data=_)),jq(d,e,c,n,u)}XN(d,t)})}function M0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Z2(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=_0(e,n),r!=null&&i.unshift(M0(e,r,s)),r=_0(e,t),r!=null&&i.push(M0(e,r,s))),e=e.return}return i}function Pd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ZI(e,t,n,i,r){for(var s=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,r?(c=_0(n,s),c!=null&&o.unshift(M0(n,c,l))):r||(c=_0(n,s),c!=null&&o.push(M0(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Zq=/\r\n?/g,qq=/\u0000|\uFFFD/g;function qI(e){return(typeof e=="string"?e:""+e).replace(Zq,`
`).replace(qq,"")}function YN(e,t){return t=qI(t),qI(e)===t}function K6(){}function Mt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Qf(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Qf(e,""+i);break;case"className":Pp(e,"class",i);break;case"tabIndex":Pp(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Pp(e,n,i);break;case"style":JL(e,i,s);break;case"data":if(t!=="object"){Pp(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=BU(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Mt(e,t,"name",r.name,r,null),Mt(e,t,"formEncType",r.formEncType,r,null),Mt(e,t,"formMethod",r.formMethod,r,null),Mt(e,t,"formTarget",r.formTarget,r,null)):(Mt(e,t,"encType",r.encType,r,null),Mt(e,t,"method",r.method,r,null),Mt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=BU(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=K6);break;case"onScroll":i!=null&&Je("scroll",e);break;case"onScrollEnd":i!=null&&Je("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(te(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(te(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=BU(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Je("beforetoggle",e),Je("toggle",e),FU(e,"popover",i);break;case"xlinkActuate":na(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":na(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":na(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":na(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":na(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":na(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":na(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":na(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":na(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":FU(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=IZ.get(n)||n,FU(e,n,i))}}function X3(e,t,n,i,r,s){switch(n){case"style":JL(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(te(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(te(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Qf(e,i):(typeof i=="number"||typeof i=="bigint")&&Qf(e,""+i);break;case"onScroll":i!=null&&Je("scroll",e);break;case"onScrollEnd":i!=null&&Je("scrollend",e);break;case"onClick":i!=null&&(e.onclick=K6);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!YL.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[br]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):FU(e,n,i)}}}function yi(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",e),Je("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(o!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(te(137,t));default:Mt(e,t,s,o,n,null)}}r&&Mt(e,t,"srcSet",n.srcSet,n,null),i&&Mt(e,t,"src",n.src,n,null);return;case"input":Je("invalid",e);var a=s=o=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":r=u;break;case"type":o=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":s=u;break;case"defaultValue":a=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(te(137,t));break;default:Mt(e,t,i,u,n,null)}}ZL(e,s,a,l,c,o,r,!1),D2(e);return;case"select":Je("invalid",e),i=o=s=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":s=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:Mt(e,t,r,a,n,null)}t=s,n=o,e.multiple=!!i,t!=null?Mf(e,!!i,t,!1):n!=null&&Mf(e,!!i,n,!0);return;case"textarea":Je("invalid",e),s=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":r=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(te(91));break;default:Mt(e,t,o,a,n,null)}QL(e,i,r,s),D2(e);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Mt(e,t,l,i,n,null)}return;case"dialog":Je("cancel",e),Je("close",e);break;case"iframe":case"object":Je("load",e);break;case"video":case"audio":for(i=0;i<A0.length;i++)Je(A0[i],e);break;case"image":Je("error",e),Je("load",e);break;case"details":Je("toggle",e);break;case"embed":case"source":case"link":Je("error",e),Je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(te(137,t));default:Mt(e,t,c,i,n,null)}return;default:if(Ev(t)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&X3(e,t,u,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Mt(e,t,a,i,n,null))}function Qq(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,a=null,l=null,c=null,u=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(h)||Mt(e,t,h,null,i,d)}}for(var f in i){var h=i[f];if(d=n[f],i.hasOwnProperty(f)&&(h!=null||d!=null))switch(f){case"type":s=h;break;case"name":r=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":o=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(te(137,t));break;default:h!==d&&Mt(e,t,f,h,i,d)}}g3(e,o,a,l,c,u,s,r);return;case"select":h=o=a=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(s)||Mt(e,t,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":a=s;break;case"multiple":o=s;default:s!==l&&Mt(e,t,r,s,i,l)}t=a,n=o,i=h,f!=null?Mf(e,!!n,f,!1):!!i!=!!n&&(t!=null?Mf(e,!!n,t,!0):Mf(e,!!n,n?[]:"",!1));return;case"textarea":h=f=null;for(a in n)if(r=n[a],n.hasOwnProperty(a)&&r!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Mt(e,t,a,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(r!=null||s!=null))switch(o){case"value":f=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(te(91));break;default:r!==s&&Mt(e,t,o,r,i,s)}qL(e,f,h);return;case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&f!=null&&!i.hasOwnProperty(m))switch(m){case"selected":e.selected=!1;break;default:Mt(e,t,m,null,i,f)}for(l in i)if(f=i[l],h=n[l],i.hasOwnProperty(l)&&f!==h&&(f!=null||h!=null))switch(l){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Mt(e,t,l,f,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in n)f=n[p],n.hasOwnProperty(p)&&f!=null&&!i.hasOwnProperty(p)&&Mt(e,t,p,null,i,f);for(c in i)if(f=i[c],h=n[c],i.hasOwnProperty(c)&&f!==h&&(f!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(te(137,t));break;default:Mt(e,t,c,f,i,h)}return;default:if(Ev(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&f!==void 0&&!i.hasOwnProperty(y)&&X3(e,t,y,void 0,i,f);for(u in i)f=i[u],h=n[u],!i.hasOwnProperty(u)||f===h||f===void 0&&h===void 0||X3(e,t,u,f,i,h);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&f!=null&&!i.hasOwnProperty(b)&&Mt(e,t,b,null,i,f);for(d in i)f=i[d],h=n[d],!i.hasOwnProperty(d)||f===h||f==null&&h==null||Mt(e,t,d,f,i,h)}var j3=null,Y3=null;function q2(e){return e.nodeType===9?e:e.ownerDocument}function QI(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WN(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function W3(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var E8=null;function Jq(){var e=window.event;return e&&e.type==="popstate"?e===E8?!1:(E8=e,!0):(E8=null,!1)}var KN=typeof setTimeout=="function"?setTimeout:void 0,eQ=typeof clearTimeout=="function"?clearTimeout:void 0,JI=typeof Promise=="function"?Promise:void 0,tQ=typeof queueMicrotask=="function"?queueMicrotask:typeof JI<"u"?function(e){return JI.resolve(null).then(e).catch(nQ)}:KN;function nQ(e){setTimeout(function(){throw e})}function v8(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),O0(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);O0(t)}function K3(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":K3(n),yv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function iQ(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[w0])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=$s(e.nextSibling),e===null)break}return null}function rQ(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=$s(e.nextSibling),e===null))return null;return e}function $s(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function ex(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function ZN(e,t,n){switch(t=q2(n),e){case"html":if(e=t.documentElement,!e)throw Error(te(452));return e;case"head":if(e=t.head,!e)throw Error(te(453));return e;case"body":if(e=t.body,!e)throw Error(te(454));return e;default:throw Error(te(451))}}var vs=new Map,tx=new Set;function Q2(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var cl=jt.d;jt.d={f:sQ,r:oQ,D:aQ,C:lQ,L:cQ,m:uQ,X:fQ,S:dQ,M:hQ};function sQ(){var e=cl.f(),t=Y6();return e||t}function oQ(e){var t=Hh(e);t!==null&&t.tag===5&&t.type==="form"?ZO(t):cl.r(e)}var $h=typeof document>"u"?null:document;function qN(e,t,n){var i=$h;if(i&&typeof t=="string"&&t){var r=rs(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),tx.has(r)||(tx.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),yi(t,"link",e),oi(t),i.head.appendChild(t)))}}function aQ(e){cl.D(e),qN("dns-prefetch",e,null)}function lQ(e,t){cl.C(e,t),qN("preconnect",e,t)}function cQ(e,t,n){cl.L(e,t,n);var i=$h;if(i&&e&&t){var r='link[rel="preload"][as="'+rs(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+rs(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+rs(n.imageSizes)+'"]')):r+='[href="'+rs(e)+'"]';var s=r;switch(t){case"style":s=rh(e);break;case"script":s=Gh(e)}vs.has(s)||(e=Yt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),vs.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Nm(s))||t==="script"&&i.querySelector(Pm(s))||(t=i.createElement("link"),yi(t,"link",e),oi(t),i.head.appendChild(t)))}}function uQ(e,t){cl.m(e,t);var n=$h;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+rs(i)+'"][href="'+rs(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Gh(e)}if(!vs.has(s)&&(e=Yt({rel:"modulepreload",href:e},t),vs.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Pm(s)))return}i=n.createElement("link"),yi(i,"link",e),oi(i),n.head.appendChild(i)}}}function dQ(e,t,n){cl.S(e,t,n);var i=$h;if(i&&e){var r=Af(i).hoistableStyles,s=rh(e);t=t||"default";var o=r.get(s);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Nm(s)))a.loading=5;else{e=Yt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=vs.get(s))&&nw(e,n);var l=o=i.createElement("link");oi(l),yi(l,"link",e),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,YU(o,t,i)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(s,o)}}}function fQ(e,t){cl.X(e,t);var n=$h;if(n&&e){var i=Af(n).hoistableScripts,r=Gh(e),s=i.get(r);s||(s=n.querySelector(Pm(r)),s||(e=Yt({src:e,async:!0},t),(t=vs.get(r))&&iw(e,t),s=n.createElement("script"),oi(s),yi(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function hQ(e,t){cl.M(e,t);var n=$h;if(n&&e){var i=Af(n).hoistableScripts,r=Gh(e),s=i.get(r);s||(s=n.querySelector(Pm(r)),s||(e=Yt({src:e,async:!0,type:"module"},t),(t=vs.get(r))&&iw(e,t),s=n.createElement("script"),oi(s),yi(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function nx(e,t,n,i){var r=(r=Ql.current)?Q2(r):null;if(!r)throw Error(te(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=rh(n.href),n=Af(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=rh(n.href);var s=Af(r).hoistableStyles,o=s.get(e);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,o),(s=r.querySelector(Nm(e)))&&!s._p&&(o.instance=s,o.state.loading=5),vs.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},vs.set(e,n),s||gQ(r,e,n,o.state))),t&&i===null)throw Error(te(528,""));return o}if(t&&i!==null)throw Error(te(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Gh(n),n=Af(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(te(444,e))}}function rh(e){return'href="'+rs(e)+'"'}function Nm(e){return'link[rel="stylesheet"]['+e+"]"}function QN(e){return Yt({},e,{"data-precedence":e.precedence,precedence:null})}function gQ(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),yi(t,"link",n),oi(t),e.head.appendChild(t))}function Gh(e){return'[src="'+rs(e)+'"]'}function Pm(e){return"script[async]"+e}function ix(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+rs(n.href)+'"]');if(i)return t.instance=i,oi(i),i;var r=Yt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),oi(i),yi(i,"style",r),YU(i,n.precedence,e),t.instance=i;case"stylesheet":r=rh(n.href);var s=e.querySelector(Nm(r));if(s)return t.state.loading|=4,t.instance=s,oi(s),s;i=QN(n),(r=vs.get(r))&&nw(i,r),s=(e.ownerDocument||e).createElement("link"),oi(s);var o=s;return o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),yi(s,"link",i),t.state.loading|=4,YU(s,n.precedence,e),t.instance=s;case"script":return s=Gh(n.src),(r=e.querySelector(Pm(s)))?(t.instance=r,oi(r),r):(i=n,(r=vs.get(s))&&(i=Yt({},n),iw(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),oi(r),yi(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(te(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,YU(i,n.precedence,e));return t.instance}function YU(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===t)s=a;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function nw(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function iw(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var WU=null;function rx(e,t,n){if(WU===null){var i=new Map,r=WU=new Map;r.set(n,i)}else r=WU,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[w0]||s[Pi]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(t)||"";o=e+o;var a=i.get(o);a?a.push(s):i.set(o,[s])}}return i}function sx(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function mQ(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function JN(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var k0=null;function pQ(){}function UQ(e,t,n){if(k0===null)throw Error(te(475));var i=k0;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=rh(n.href),s=e.querySelector(Nm(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=J2.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,oi(s);return}s=e.ownerDocument||e,n=QN(n),(r=vs.get(r))&&nw(n,r),s=s.createElement("link"),oi(s);var o=s;o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),yi(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=J2.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function bQ(){if(k0===null)throw Error(te(475));var e=k0;return e.stylesheets&&e.count===0&&Z3(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Z3(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function J2(){if(this.count--,this.count===0){if(this.stylesheets)Z3(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var eb=null;function Z3(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,eb=new Map,t.forEach(yQ,e),eb=null,J2.call(e))}function yQ(e,t){if(!(t.state.loading&4)){var n=eb.get(e);if(n)var i=n.get(null);else{n=new Map,eb.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var o=r[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}r=t.instance,o=r.getAttribute("data-precedence"),s=n.get(o)||i,s===i&&n.set(null,r),n.set(o,r),this.count++,i=J2.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var R0={$$typeof:Ta,Provider:null,Consumer:null,_currentValue:Su,_currentValue2:Su,_threadCount:0};function EQ(e,t,n,i,r,s,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jy(0),this.hiddenUpdates=jy(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function eP(e,t,n,i,r,s,o,a,l,c,u,d){return e=new EQ(e,t,n,o,a,l,c,d),t=1,s===!0&&(t|=24),s=cs(3,null,null,t),e.current=s,s.stateNode=e,t=kv(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},jv(s),e}function tP(e){return e?(e=pf,e):pf}function nP(e,t,n,i,r,s){r=tP(r),i.context===null?i.context=r:i.pendingContext=r,i=Jl(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=ec(e,i,t),n!==null&&(er(n,e,t),z1(n,e,t))}function ox(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function rw(e,t){ox(e,t),(e=e.alternate)&&ox(e,t)}function iP(e){if(e.tag===13){var t=Uc(e,67108864);t!==null&&er(t,e,67108864),rw(e,67108864)}}var tb=!0;function vQ(e,t,n,i){var r=Fe.T;Fe.T=null;var s=jt.p;try{jt.p=2,sw(e,t,n,i)}finally{jt.p=s,Fe.T=r}}function wQ(e,t,n,i){var r=Fe.T;Fe.T=null;var s=jt.p;try{jt.p=8,sw(e,t,n,i)}finally{jt.p=s,Fe.T=r}}function sw(e,t,n,i){if(tb){var r=q3(i);if(r===null)y8(e,t,i,nb,n),ax(e,i);else if(TQ(r,e,t,n,i))i.stopPropagation();else if(ax(e,i),t&4&&-1<_Q.indexOf(e)){for(;r!==null;){var s=Hh(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=nu(s.pendingLanes);if(o!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-Br(o);a.entanglements[1]|=l,o&=~l}Ko(s),!(an&6)&&(j2=Ao()+500,Om(0))}}break;case 13:a=Uc(s,2),a!==null&&er(a,s,2),Y6(),rw(s,2)}if(s=q3(i),s===null&&y8(e,t,i,nb,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else y8(e,t,i,null,n)}}function q3(e){return e=vv(e),ow(e)}var nb=null;function ow(e){if(nb=null,e=hu(e),e!==null){var t=Bh(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=OL(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return nb=e,null}function rP(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lZ()){case PL:return 2;case FL:return 8;case R2:case cZ:return 32;case BL:return 268435456;default:return 32}default:return 32}}var Q3=!1,ic=null,rc=null,sc=null,D0=new Map,L0=new Map,Bl=[],_Q="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ax(e,t){switch(e){case"focusin":case"focusout":ic=null;break;case"dragenter":case"dragleave":rc=null;break;case"mouseover":case"mouseout":sc=null;break;case"pointerover":case"pointerout":D0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":L0.delete(t.pointerId)}}function Dg(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Hh(t),t!==null&&iP(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function TQ(e,t,n,i,r){switch(t){case"focusin":return ic=Dg(ic,e,t,n,i,r),!0;case"dragenter":return rc=Dg(rc,e,t,n,i,r),!0;case"mouseover":return sc=Dg(sc,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return D0.set(s,Dg(D0.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,L0.set(s,Dg(L0.get(s)||null,e,t,n,i,r)),!0}return!1}function sP(e){var t=hu(e.target);if(t!==null){var n=Bh(t);if(n!==null){if(t=n.tag,t===13){if(t=OL(n),t!==null){e.blockedOn=t,bZ(e.priority,function(){if(n.tag===13){var i=zr(),r=Uc(n,i);r!==null&&er(r,n,i),rw(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function KU(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=q3(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);p3=i,n.target.dispatchEvent(i),p3=null}else return t=Hh(n),t!==null&&iP(t),e.blockedOn=n,!1;t.shift()}return!0}function lx(e,t,n){KU(e)&&n.delete(t)}function SQ(){Q3=!1,ic!==null&&KU(ic)&&(ic=null),rc!==null&&KU(rc)&&(rc=null),sc!==null&&KU(sc)&&(sc=null),D0.forEach(lx),L0.forEach(lx)}function jp(e,t){e.blockedOn===t&&(e.blockedOn=null,Q3||(Q3=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,SQ)))}var Yp=null;function cx(e){Yp!==e&&(Yp=e,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,function(){Yp===e&&(Yp=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(ow(i||n)===null)continue;break}var s=Hh(n);s!==null&&(e.splice(t,3),t-=3,I3(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function O0(e){function t(l){return jp(l,e)}ic!==null&&jp(ic,e),rc!==null&&jp(rc,e),sc!==null&&jp(sc,e),D0.forEach(t),L0.forEach(t);for(var n=0;n<Bl.length;n++){var i=Bl[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Bl.length&&(n=Bl[0],n.blockedOn===null);)sP(n),n.blockedOn===null&&Bl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],o=r[br]||null;if(typeof s=="function")o||cx(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(r=s,o=s[br]||null)a=o.formAction;else if(ow(r)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),cx(n)}}}function aw(e){this._internalRoot=e}Z6.prototype.render=aw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));var n=t.current,i=zr();nP(n,i,e,t,null,null)};Z6.prototype.unmount=aw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&Nf(),nP(e.current,2,null,e,null,null),Y6(),t[zh]=null}};function Z6(e){this._internalRoot=e}Z6.prototype.unstable_scheduleHydration=function(e){if(e){var t=XL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bl.length&&t!==0&&t<Bl[n].priority;n++);Bl.splice(n,0,e),n===0&&sP(e)}};var ux=ML.version;if(ux!=="19.0.0")throw Error(te(527,ux,"19.0.0"));jt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=sZ(t),e=e!==null?NL(e):null,e=e===null?null:e.stateNode,e};var IQ={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:Fe,findFiberByHostInstance:hu,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wp.isDisabled&&Wp.supportsFiber)try{Im=Wp.inject(IQ),Fr=Wp}catch{}}O6.createRoot=function(e,t){if(!kL(e))throw Error(te(299));var n=!1,i="",r=nN,s=iN,o=rN,a=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(a=t.unstable_transitionCallbacks)),t=eP(e,1,!1,null,null,n,i,r,s,o,a,null),e[zh]=t.current,tw(e.nodeType===8?e.parentNode:e),new aw(t)};O6.hydrateRoot=function(e,t,n){if(!kL(e))throw Error(te(299));var i=!1,r="",s=nN,o=iN,a=rN,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),t=eP(e,1,!0,t,n??null,i,r,s,o,a,l,c),t.context=tP(null),n=t.current,i=zr(),r=Jl(i),r.callback=null,ec(n,r,i),t.current.lanes=i,Cm(t,i),Ko(t),e[zh]=t.current,tw(e),new Z6(t)};O6.version="19.0.0";function oP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oP)}catch(e){console.error(e)}}oP(),TL.exports=O6;var xQ=TL.exports;const CQ="modulepreload",AQ=function(e){return"/excalidraw/"+e},dx={},ge=function(t,n,i){let r=Promise.resolve();return n&&n.length>0&&(document.getElementsByTagName("link"),r=Promise.all(n.map(s=>{if(s=AQ(s),s in dx)return;dx[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":CQ,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((c,u)=>{l.addEventListener("load",c),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})}))),r.then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function MQ(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=e;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await ge(()=>import("./workbox-window.prod.es5-B9K5rw8f.js"),__vite__mapDeps([])).then(({Workbox:d})=>new d("/excalidraw/sw.js",{scope:"/excalidraw/",type:"classic"})).catch(d=>{o?.(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i?.()}),a.register({immediate:t}).then(d=>{s?s("/excalidraw/sw.js",d):r?.(d)}).catch(d=>{o?.(d)})}}return l=u(),c}const Ct=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Dt=globalThis,yd=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ku="9.0.1";function q6(){return Q6(Dt),Dt}function Q6(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ku,t[ku]=t[ku]||{}}function J6(e,t,n=Dt){const i=n.__SENTRY__=n.__SENTRY__||{},r=i[ku]=i[ku]||{};return r[e]||(r[e]=t())}const kQ="Sentry Logger ",ib=["debug","info","warn","error","log","assert","trace"],rb={};function Xh(e){if(!("console"in Dt))return e();const t=Dt.console,n={},i=Object.keys(rb);i.forEach(r=>{const s=rb[r];n[r]=t[r],t[r]=s});try{return e()}finally{i.forEach(r=>{t[r]=n[r]})}}function RQ(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return yd?ib.forEach(n=>{t[n]=(...i)=>{e&&Xh(()=>{Dt.console[n](`${kQ}[${n}]:`,...i)})}}):ib.forEach(n=>{t[n]=()=>{}}),t}const Oe=J6("logger",RQ),aP=50,Xu="?",fx=/\(error: (.*)\)/,hx=/captureMessage|captureException/;function lP(...e){const t=e.sort((n,i)=>n[0]-i[0]).map(n=>n[1]);return(n,i=0,r=0)=>{const s=[],o=n.split(`
`);for(let a=i;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=fx.test(l)?l.replace(fx,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){s.push(d);break}}if(s.length>=aP+r)break}}return LQ(s.slice(r))}}function DQ(e){return Array.isArray(e)?lP(...e):e}function LQ(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Kp(t).function||"")&&t.pop(),t.reverse(),hx.test(Kp(t).function||"")&&(t.pop(),hx.test(Kp(t).function||"")&&t.pop()),t.slice(0,aP).map(n=>({...n,filename:n.filename||Kp(t).filename,function:n.function||Xu}))}function Kp(e){return e[e.length-1]||{}}const w8="<anonymous>";function vc(e){try{return!e||typeof e!="function"?w8:e.name||w8}catch{return w8}}function gx(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(i=>{i.stacktrace.frames&&n.push(...i.stacktrace.frames)}),n}catch{return}}}const ZU={},mx={};function Ed(e,t){ZU[e]=ZU[e]||[],ZU[e].push(t)}function vd(e,t){if(!mx[e]){mx[e]=!0;try{t()}catch(n){yd&&Oe.error(`Error while instrumenting ${e}`,n)}}}function Gs(e,t){const n=e&&ZU[e];if(n)for(const i of n)try{i(t)}catch(r){yd&&Oe.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${vc(i)}
Error:`,r)}}let _8=null;function OQ(e){const t="error";Ed(t,e),vd(t,NQ)}function NQ(){_8=Dt.onerror,Dt.onerror=function(e,t,n,i,r){return Gs("error",{column:i,error:r,line:n,msg:e,url:t}),_8?_8.apply(this,arguments):!1},Dt.onerror.__SENTRY_INSTRUMENTED__=!0}let T8=null;function PQ(e){const t="unhandledrejection";Ed(t,e),vd(t,FQ)}function FQ(){T8=Dt.onunhandledrejection,Dt.onunhandledrejection=function(e){return Gs("unhandledrejection",e),T8?T8.apply(this,arguments):!0},Dt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const cP=Object.prototype.toString;function lw(e){switch(cP.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ju(e,Error)}}function jh(e,t){return cP.call(e)===`[object ${t}]`}function uP(e){return jh(e,"ErrorEvent")}function px(e){return jh(e,"DOMError")}function BQ(e){return jh(e,"DOMException")}function La(e){return jh(e,"String")}function cw(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function uw(e){return e===null||cw(e)||typeof e!="object"&&typeof e!="function"}function sh(e){return jh(e,"Object")}function e5(e){return typeof Event<"u"&&ju(e,Event)}function zQ(e){return typeof Element<"u"&&ju(e,Element)}function HQ(e){return jh(e,"RegExp")}function t5(e){return!!(e?.then&&typeof e.then=="function")}function VQ(e){return sh(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function ju(e,t){try{return e instanceof t}catch{return!1}}function dP(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const dw=Dt,$Q=80;function fP(e,t={}){if(!e)return"<unknown>";try{let n=e;const i=5,r=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||$Q;for(;n&&s++<i&&(c=GQ(n,u),!(c==="html"||s>1&&o+r.length*l+c.length>=d));)r.push(c),o+=c.length,n=n.parentNode;return r.reverse().join(a)}catch{return"<unknown>"}}function GQ(e,t){const n=e,i=[];if(!n?.tagName)return"";if(dw.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}i.push(n.tagName.toLowerCase());const r=t?.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(r?.length)r.forEach(o=>{i.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&i.push(`#${n.id}`);const o=n.className;if(o&&La(o)){const a=o.split(/\s+/);for(const l of a)i.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&i.push(`[${o}="${a}"]`)}return i.join("")}function fw(){try{return dw.document.location.href}catch{return""}}function XQ(e){if(!dw.HTMLElement)return null;let t=e;const n=5;for(let i=0;i<n;i++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Pf(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function sb(e,t){if(!Array.isArray(e))return"";const n=[];for(let i=0;i<e.length;i++){const r=e[i];try{dP(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function jQ(e,t,n=!1){return La(e)?HQ(t)?t.test(e):La(t)?n?e===t:e.includes(t):!1:!1}function n5(e,t=[],n=!1){return t.some(i=>jQ(e,i,n))}function Dr(e,t,n){if(!(t in e))return;const i=e[t],r=n(i);typeof r=="function"&&hP(r,i);try{e[t]=r}catch{yd&&Oe.log(`Failed to replace method "${t}" in object`,e)}}function Yu(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{yd&&Oe.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function hP(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Yu(e,"__sentry_original__",t)}catch{}}function hw(e){return e.__sentry_original__}function gP(e){if(lw(e))return{message:e.message,name:e.name,stack:e.stack,...bx(e)};if(e5(e)){const t={type:e.type,target:Ux(e.target),currentTarget:Ux(e.currentTarget),...bx(e)};return typeof CustomEvent<"u"&&ju(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Ux(e){try{return zQ(e)?fP(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function bx(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function YQ(e,t=40){const n=Object.keys(gP(e));n.sort();const i=n[0];if(!i)return"[object has no keys]";if(i.length>=t)return Pf(i,t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:Pf(s,t)}return""}function Lr(e){return J3(e,new Map)}function J3(e,t){if(WQ(e)){const n=t.get(e);if(n!==void 0)return n;const i={};t.set(e,i);for(const r of Object.getOwnPropertyNames(e))typeof e[r]<"u"&&(i[r]=J3(e[r],t));return i}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const i=[];return t.set(e,i),e.forEach(r=>{i.push(J3(r,t))}),i}return e}function WQ(e){if(!sh(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const mP=1e3;function Fm(){return Date.now()/mP}function KQ(){const{performance:e}=Dt;if(!e?.now)return Fm;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/mP}const Oa=KQ();function gs(){const e=Dt,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"");t?.getRandomValues&&(n=()=>{const i=new Uint8Array(1);return t.getRandomValues(i),i[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function pP(e){return e.exception?.values?.[0]}function Rl(e){const{message:t,event_id:n}=e;if(t)return t;const i=pP(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function e7(e,t,n){const i=e.exception=e.exception||{},r=i.values=i.values||[],s=r[0]=r[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function Wu(e,t){const n=pP(e);if(!n)return;const i={type:"generic",handled:!0},r=n.mechanism;if(n.mechanism={...i,...r,...t},t&&"data"in t){const s={...r?.data,...t.data};n.mechanism.data=s}}function yx(e){if(ZQ(e))return!0;try{Yu(e,"__sentry_captured__",!0)}catch{}return!1}function ZQ(e){try{return e.__sentry_captured__}catch{}}var ca;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const i=2;e[e.REJECTED=i]="REJECTED"})(ca||(ca={}));function Ku(e){return new wc(t=>{t(e)})}function ob(e){return new wc((t,n)=>{n(e)})}class wc{constructor(t){this._state=ca.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new wc((i,r)=>{this._handlers.push([!1,s=>{if(!t)i(s);else try{i(t(s))}catch(o){r(o)}},s=>{if(!n)r(s);else try{i(n(s))}catch(o){r(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new wc((n,i)=>{let r,s;return this.then(o=>{s=!1,r=o,t&&t()},o=>{s=!0,r=o,t&&t()}).then(()=>{if(s){i(r);return}n(r)})})}_executeHandlers(){if(this._state===ca.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===ca.RESOLVED&&n[1](this._value),this._state===ca.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(s,o)=>{if(this._state===ca.PENDING){if(t5(o)){o.then(i,r);return}this._state=s,this._value=o,this._executeHandlers()}},i=s=>{n(ca.RESOLVED,s)},r=s=>{n(ca.REJECTED,s)};try{t(i,r)}catch(s){r(s)}}}function qQ(e){const t=Oa(),n={sid:gs(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>JQ(n)};return e&&oh(n,e),n}function oh(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Oa(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:gs()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function QQ(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),oh(e,n)}function JQ(e){return Lr({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function Ex(){return gs()}function UP(){return gs().substring(16)}function Bm(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const i={...e};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=Bm(i[r],t[r],n-1));return i}const t7="_sentrySpan";function vx(e,t){t?Yu(e,t7,t):delete e[t7]}function wx(e){return e[t7]}const eJ=100;class Oo{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Ex(),sampleRand:Math.random()}}clone(){const t=new Oo;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,vx(t,wx(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&oh(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,i=n instanceof Oo?n.getScopeData():sh(n)?t:void 0,{tags:r,extra:s,user:o,contexts:a,level:l,fingerprint:c=[],propagationContext:u}=i||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,vx(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Ex(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const i=typeof n=="number"?n:eJ;if(i<=0)return this;const r={timestamp:Fm(),...t};return this._breadcrumbs.push(r),this._breadcrumbs.length>i&&(this._breadcrumbs=this._breadcrumbs.slice(-i),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:wx(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Bm(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const i=n?.event_id||gs();if(!this._client)return Oe.warn("No client configured on scope - will not capture exception!"),i;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...n,event_id:i},this),i}captureMessage(t,n,i){const r=i?.event_id||gs();if(!this._client)return Oe.warn("No client configured on scope - will not capture message!"),r;const s=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...i,event_id:r},this),r}captureEvent(t,n){const i=n?.event_id||gs();return this._client?(this._client.captureEvent(t,{...n,event_id:i},this),i):(Oe.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function tJ(){return J6("defaultCurrentScope",()=>new Oo)}function nJ(){return J6("defaultIsolationScope",()=>new Oo)}class iJ{constructor(t,n){let i;t?i=t:i=new Oo;let r;n?r=n:r=new Oo,this._stack=[{scope:i}],this._isolationScope=r}withScope(t){const n=this._pushScope();let i;try{i=t(n)}catch(r){throw this._popScope(),r}return t5(i)?i.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function ah(){const e=q6(),t=Q6(e);return t.stack=t.stack||new iJ(tJ(),nJ())}function rJ(e){return ah().withScope(e)}function sJ(e,t){const n=ah();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function _x(e){return ah().withScope(()=>e(ah().getIsolationScope()))}function oJ(){return{withIsolationScope:_x,withScope:rJ,withSetScope:sJ,withSetIsolationScope:(e,t)=>_x(t),getCurrentScope:()=>ah().getScope(),getIsolationScope:()=>ah().getIsolationScope()}}function gw(e){const t=Q6(e);return t.acs?t.acs:oJ()}function ul(){const e=q6();return gw(e).getCurrentScope()}function zm(){const e=q6();return gw(e).getIsolationScope()}function aJ(){return J6("globalScope",()=>new Oo)}function mw(...e){const t=q6(),n=gw(t);if(e.length===2){const[i,r]=e;return i?n.withSetScope(i,r):n.withScope(r)}return n.withScope(e[0])}function Vi(){return ul().getClient()}function lJ(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:i,propagationSpanId:r}=t;return Lr({trace_id:n,span_id:r||UP(),parent_span_id:i})}const cJ="sentry.source",uJ="sentry.sample_rate",dJ="sentry.op",fJ="sentry.origin",bP="sentry.profile_id",yP="sentry.exclusive_time",hJ=0,gJ=1,mJ="_sentryScope",pJ="_sentryIsolationScope";function EP(e){return{scope:e[mJ],isolationScope:e[pJ]}}function UJ(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const bJ="sentry-",yJ=/^sentry-/;function EJ(e){const t=vJ(e);if(!t)return;const n=Object.entries(t).reduce((i,[r,s])=>{if(r.match(yJ)){const o=r.slice(bJ.length);i[o]=s}return i},{});if(Object.keys(n).length>0)return n}function vJ(e){if(!(!e||!La(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const i=Tx(n);return Object.entries(i).forEach(([r,s])=>{t[r]=s}),t},{}):Tx(e)}function Tx(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,i])=>(n&&i&&(t[n]=i),t),{})}const wJ=1;let Sx=!1;function _J(e){const{spanId:t,traceId:n,isRemote:i}=e.spanContext(),r=i?t:pw(e).parent_span_id,s=EP(e).scope,o=i?s?.getPropagationContext().propagationSpanId||UP():t;return Lr({parent_span_id:r,span_id:o,trace_id:n})}function Ix(e){return typeof e=="number"?xx(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?xx(e.getTime()):Oa()}function xx(e){return e>9999999999?e/1e3:e}function pw(e){if(SJ(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(TJ(e)){const{attributes:i,startTime:r,name:s,endTime:o,parentSpanId:a,status:l}=e;return Lr({span_id:t,trace_id:n,data:i,description:s,parent_span_id:a,start_timestamp:Ix(r),timestamp:Ix(o)||void 0,status:xJ(l),op:i[dJ],origin:i[fJ]})}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function TJ(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function SJ(e){return typeof e.getSpanJSON=="function"}function IJ(e){const{traceFlags:t}=e.spanContext();return t===wJ}function xJ(e){if(!(!e||e.code===hJ))return e.code===gJ?"ok":e.message||"unknown_error"}const CJ="_sentryRootSpan";function vP(e){return e[CJ]||e}function Cx(){Sx||(Xh(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Sx=!0)}function AJ(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||Vi()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const Uw="production",MJ="_frozenDsc";function wP(e,t){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},r=Lr({environment:n.environment||Uw,release:n.release,public_key:i,trace_id:e});return t.emit("createDsc",r),r}function kJ(e,t){const n=t.getPropagationContext();return n.dsc||wP(n.traceId,e)}function RJ(e){const t=Vi();if(!t)return{};const n=vP(e),i=pw(n),r=i.data,s=n.spanContext().traceState,o=s?.get("sentry.sample_rate")??r[uJ];function a(m){return(typeof o=="number"||typeof o=="string")&&(m.sample_rate=`${o}`),m}const l=n[MJ];if(l)return a(l);const c=s?.get("sentry.dsc"),u=c&&EJ(c);if(u)return a(u);const d=wP(e.spanContext().traceId,t),f=r[cJ],h=i.description;return f!=="url"&&h&&(d.transaction=h),AJ()&&(d.sampled=String(IJ(n)),d.sample_rand=s?.get("sentry.sample_rand")??EP(n).scope?.getPropagationContext().sampleRand.toString()),a(d),t.emit("createDsc",d,n),d}const DJ=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function LJ(e){return e==="http"||e==="https"}function bw(e,t=!1){const{host:n,path:i,pass:r,port:s,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&r?`:${r}`:""}@${n}${s?`:${s}`:""}/${i&&`${i}/`}${o}`}function OJ(e){const t=DJ.exec(e);if(!t){Xh(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,i,r="",s="",o="",a=""]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return _P({host:s,pass:r,path:l,projectId:c,port:o,protocol:n,publicKey:i})}function _P(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function NJ(e){if(!yd)return!0;const{port:t,projectId:n,protocol:i}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(Oe.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?LJ(i)?t&&isNaN(parseInt(t,10))?(Oe.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(Oe.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),!1):(Oe.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function PJ(e){const t=typeof e=="string"?OJ(e):_P(e);if(!(!t||!NJ(t)))return t}function ua(e,t=100,n=1/0){try{return n7("",e,t,n)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function TP(e,t=3,n=100*1024){const i=ua(e,t);return HJ(i)>n?TP(e,t-1,n):i}function n7(e,t,n=1/0,i=1/0,r=VJ()){const[s,o]=r;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=FJ(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const h=c.toJSON();return n7("",h,l-1,i,r)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const f=gP(t);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(d>=i){u[h]="[MaxProperties ~]";break}const m=f[h];u[h]=n7(h,m,l-1,i,r),d++}return o(t),u}function FJ(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(dP(t))return"[VueViewModel]";if(VQ(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${vc(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=BJ(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function BJ(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function zJ(e){return~-encodeURI(e).split(/%..|./).length}function HJ(e){return zJ(JSON.stringify(e))}function VJ(){const e=new WeakSet;function t(i){return e.has(i)?!0:(e.add(i),!1)}function n(i){e.delete(i)}return[t,n]}function i5(e,t=[]){return[e,t]}function $J(e,t){const[n,i]=e;return[n,[...i,t]]}function Ax(e,t){const n=e[1];for(const i of n){const r=i[0].type;if(t(i,r))return!0}return!1}function i7(e){const t=Q6(Dt);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function GJ(e){const[t,n]=e;let i=JSON.stringify(t);function r(s){typeof i=="string"?i=typeof s=="string"?i+s:[i7(i),s]:i.push(typeof s=="string"?i7(s):s)}for(const s of n){const[o,a]=s;if(r(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)r(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(ua(a))}r(l)}}return typeof i=="string"?i:XJ(i)}function XJ(e){const t=e.reduce((r,s)=>r+s.length,0),n=new Uint8Array(t);let i=0;for(const r of e)n.set(r,i),i+=r.length;return n}function jJ(e){const t=typeof e.data=="string"?i7(e.data):e.data;return[Lr({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const YJ={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security"};function Mx(e){return YJ[e]}function SP(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function WJ(e,t,n,i){const r=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&i&&{dsn:bw(i)},...r&&{trace:Lr({...r})}}}function KJ(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function ZJ(e,t,n,i){const r=SP(n),s={sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&t&&{dsn:bw(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return i5(s,[o])}function qJ(e,t,n,i){const r=SP(n),s=e.type&&e.type!=="replay_event"?e.type:"event";KJ(e,n?.sdk);const o=WJ(e,r,i,t);return delete e.sdkProcessingMetadata,i5(o,[[{type:s},e]])}function r7(e,t,n,i=0){return new wc((r,s)=>{const o=e[i];if(t===null||typeof o!="function")r(t);else{const a=o({...t},n);Ct&&o.id&&a===null&&Oe.log(`Event processor "${o.id}" dropped event`),t5(a)?a.then(l=>r7(e,l,n,i+1).then(r)).then(null,s):r7(e,a,n,i+1).then(r).then(null,s)}})}let Zp,kx,qp;function QJ(e){const t=Dt._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return qp&&n.length===kx||(kx=n.length,qp=n.reduce((i,r)=>{Zp||(Zp={});const s=Zp[r];if(s)i[s[0]]=s[1];else{const o=e(r);for(let a=o.length-1;a>=0;a--){const c=o[a]?.filename,u=t[r];if(c&&u){i[c]=u,Zp[r]=[c,u];break}}}return i},{})),qp}function JJ(e,t){const{fingerprint:n,span:i,breadcrumbs:r,sdkProcessingMetadata:s}=t;eee(e,t),i&&iee(e,i),ree(e,n),tee(e,r),nee(e,s)}function Rx(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:f,transactionName:h,span:m}=t;Qp(e,"extra",n),Qp(e,"tags",i),Qp(e,"user",r),Qp(e,"contexts",s),e.sdkProcessingMetadata=Bm(e.sdkProcessingMetadata,a,2),o&&(e.level=o),h&&(e.transactionName=h),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function Qp(e,t,n){e[t]=Bm(e[t],n,1)}function eee(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,transactionName:a}=t,l=Lr(n);Object.keys(l).length&&(e.extra={...l,...e.extra});const c=Lr(i);Object.keys(c).length&&(e.tags={...c,...e.tags});const u=Lr(r);Object.keys(u).length&&(e.user={...u,...e.user});const d=Lr(s);Object.keys(d).length&&(e.contexts={...d,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function tee(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function nee(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function iee(e,t){e.contexts={trace:_J(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:RJ(t),...e.sdkProcessingMetadata};const n=vP(t),i=pw(n).description;i&&!e.transaction&&e.type==="transaction"&&(e.transaction=i)}function ree(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function see(e,t,n,i,r,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||gs(),timestamp:t.timestamp||Fm()},c=n.integrations||e.integrations.map(y=>y.name);oee(l,e),cee(l,c),r&&r.emit("applyFrameMetadata",t),t.type===void 0&&aee(l,e.stackParser);const u=dee(i,n.captureContext);n.mechanism&&Wu(l,n.mechanism);const d=r?r.getEventProcessors():[],f=aJ().getScopeData();if(s){const y=s.getScopeData();Rx(f,y)}if(u){const y=u.getScopeData();Rx(f,y)}const h=[...n.attachments||[],...f.attachments];h.length&&(n.attachments=h),JJ(l,f);const m=[...d,...f.eventProcessors];return r7(m,l,n).then(y=>(y&&lee(y),typeof o=="number"&&o>0?uee(y,o,a):y))}function oee(e,t){const{environment:n,release:i,dist:r,maxValueLength:s=250}=t;e.environment=e.environment||n||Uw,!e.release&&i&&(e.release=i),!e.dist&&r&&(e.dist=r),e.message&&(e.message=Pf(e.message,s));const o=e.exception?.values?.[0];o?.value&&(o.value=Pf(o.value,s));const a=e.request;a?.url&&(a.url=Pf(a.url,s))}function aee(e,t){const n=QJ(t);e.exception?.values?.forEach(i=>{i.stacktrace?.frames?.forEach(r=>{r.filename&&(r.debug_id=n[r.filename])})})}function lee(e){const t={};if(e.exception?.values?.forEach(i=>{i.stacktrace?.frames?.forEach(r=>{r.debug_id&&(r.abs_path?t[r.abs_path]=r.debug_id:r.filename&&(t[r.filename]=r.debug_id),delete r.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([i,r])=>{n.push({type:"sourcemap",code_file:i,debug_id:r})})}function cee(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function uee(e,t,n){if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(r=>({...r,...r.data&&{data:ua(r.data,t,n)}}))},...e.user&&{user:ua(e.user,t,n)},...e.contexts&&{contexts:ua(e.contexts,t,n)},...e.extra&&{extra:ua(e.extra,t,n)}};return e.contexts?.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=ua(e.contexts.trace.data,t,n))),e.spans&&(i.spans=e.spans.map(r=>({...r,...r.data&&{data:ua(r.data,t,n)}}))),e.contexts?.flags&&i.contexts&&(i.contexts.flags=ua(e.contexts.flags,3,n)),i}function dee(e,t){if(!t)return e;const n=e?e.clone():new Oo;return n.update(t),n}function fee(e){if(e)return hee(e)?{captureContext:e}:mee(e)?{captureContext:e}:e}function hee(e){return e instanceof Oo||typeof e=="function"}const gee=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function mee(e){return Object.keys(e).some(t=>gee.includes(t))}function yw(e,t){return ul().captureException(e,fee(t))}function Dx(e,t){const n=typeof t=="string"?t:void 0,i=typeof t!="string"?{captureContext:t}:void 0;return ul().captureMessage(e,n,i)}function IP(e,t){return ul().captureEvent(e,t)}function Lx(e){const t=zm(),n=ul(),{userAgent:i}=Dt.navigator||{},r=qQ({user:n.getUser()||t.getUser(),...i&&{userAgent:i},...e}),s=t.getSession();return s?.status==="ok"&&oh(s,{status:"exited"}),xP(),t.setSession(r),r}function xP(){const e=zm(),n=ul().getSession()||e.getSession();n&&QQ(n),CP(),e.setSession()}function CP(){const e=zm(),t=Vi(),n=e.getSession();n&&t&&t.captureSession(n)}function Ox(e=!1){if(e){xP();return}CP()}const pee="7";function Uee(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function bee(e){return`${Uee(e)}${e.projectId}/envelope/`}function yee(e,t){const n={sentry_version:pee};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function Eee(e,t,n){return t||`${bee(e)}?${yee(e,n)}`}const Nx=[];function vee(e){const t={};return e.forEach(n=>{const{name:i}=n,r=t[i];r&&!r.isDefaultInstance&&n.isDefaultInstance||(t[i]=n)}),Object.values(t)}function wee(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(r=>{r.isDefaultInstance=!0});let i;if(Array.isArray(n))i=[...t,...n];else if(typeof n=="function"){const r=n(t);i=Array.isArray(r)?r:[r]}else i=t;return vee(i)}function _ee(e,t){const n={};return t.forEach(i=>{i&&AP(e,i,n)}),n}function Px(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function AP(e,t,n){if(n[t.name]){Ct&&Oe.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,Nx.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Nx.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const i=t.preprocessEvent.bind(t);e.on("preprocessEvent",(r,s)=>i(r,s,e))}if(typeof t.processEvent=="function"){const i=t.processEvent.bind(t),r=Object.assign((s,o)=>i(s,o,e),{id:t.name});e.addEventProcessor(r)}Ct&&Oe.log(`Integration installed: ${t.name}`)}function Tee(e,t,n){const i=[{type:"client_report"},{timestamp:Fm(),discarded_events:e}];return i5(t?{dsn:t}:{},[i])}class Fs extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}function MP(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function See(e){const{trace_id:t,parent_span_id:n,span_id:i,status:r,origin:s,data:o,op:a}=e.contexts?.trace??{};return Lr({data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:i??"",start_timestamp:e.start_timestamp??0,status:r,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:o?.[bP],exclusive_time:o?.[yP],measurements:e.measurements,is_segment:!0})}function Iee(e){const t={type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[bP]:e.profile_id},...e.exclusive_time&&{[yP]:e.exclusive_time}}}},measurements:e.measurements};return Lr(t)}const Fx="Not capturing exception because it's already been captured.",Bx="Discarded session because of missing or non-string release";class xee{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=PJ(t.dsn):Ct&&Oe.warn("No DSN provided, client will not send events."),this._dsn){const n=Eee(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,i){const r=gs();if(yx(t))return Ct&&Oe.log(Fx),r;const s={event_id:r,...n};return this._process(this.eventFromException(t,s).then(o=>this._captureEvent(o,s,i))),s.event_id}captureMessage(t,n,i,r){const s={event_id:gs(),...i},o=cw(t)?t:String(t),a=uw(t)?this.eventFromMessage(o,n,s):this.eventFromException(t,s);return this._process(a.then(l=>this._captureEvent(l,s,r))),s.event_id}captureEvent(t,n,i){const r=gs();if(n?.originalException&&yx(n.originalException))return Ct&&Oe.log(Fx),r;const s={event_id:r,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,s,a||i,l)),s.event_id}captureSession(t){this.sendSession(t),oh(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(i=>n.flush(t).then(r=>i&&r))):Ku(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];AP(this,t,this._integrations),n||Px(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let i=qJ(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])i=$J(i,jJ(s));const r=this.sendEnvelope(i);r&&r.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){const{release:n,environment:i=Uw}=this._options;if("aggregates"in t){const s=t.attrs||{};if(!s.release&&!n){Ct&&Oe.warn(Bx);return}s.release=s.release||n,s.environment=s.environment||i,t.attrs=s}else{if(!t.release&&!n){Ct&&Oe.warn(Bx);return}t.release=t.release||n,t.environment=t.environment||i}this.emit("beforeSendSession",t);const r=ZJ(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(t,n,i=1){if(this._options.sendClientReports){const r=`${t}:${n}`;Ct&&Oe.log(`Recording outcome: "${r}"${i>1?` (${i} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+i}}on(t,n){const i=this._hooks[t]=this._hooks[t]||[];return i.push(n),()=>{const r=i.indexOf(n);r>-1&&i.splice(r,1)}}emit(t,...n){const i=this._hooks[t];i&&i.forEach(r=>r(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(Ct&&Oe.error("Error while sending envelope:",n),n)):(Ct&&Oe.error("Transport disabled"),Ku({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=_ee(this,t),Px(this,t)}_updateSessionFromEvent(t,n){let i=n.level==="fatal",r=!1;const s=n.exception?.values;if(s){r=!0;for(const l of s)if(l.mechanism?.handled===!1){i=!0;break}}const o=t.status==="ok";(o&&t.errors===0||o&&i)&&(oh(t,{...i&&{status:"crashed"},errors:t.errors||Number(r||i)}),this.captureSession(t))}_isClientDoneProcessing(t){return new wc(n=>{let i=0;const r=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(i+=r,t&&i>=t&&(clearInterval(s),n(!1)))},r)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,i,r){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o?.length&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||r.setLastEventId(t.event_id||n.event_id),see(s,t,n,i,this,r).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:lJ(i),...a.contexts};const l=kJ(this,i);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},i=ul(),r=zm()){return Ct&&s7(t)&&Oe.log(`Captured error event \`${MP(t)[0]||"<unknown>"}\``),this._processEvent(t,n,i,r).then(s=>s.event_id,s=>{Ct&&(s instanceof Fs&&s.logLevel==="log"?Oe.log(s.message):Oe.warn(s))})}_processEvent(t,n,i,r){const s=this.getOptions(),{sampleRate:o}=s,a=kP(t),l=s7(t),c=t.type||"error",u=`before send for type \`${c}\``,d=typeof o>"u"?void 0:UJ(o);if(l&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),ob(new Fs(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const f=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,i,r).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",f),new Fs("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return h;const p=Aee(this,s,h,n);return Cee(p,u)}).then(h=>{if(h===null){if(this.recordDroppedEvent("before_send",f),a){const b=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",b)}throw new Fs(`${u} returned \`null\`, will not send event.`,"log")}const m=i.getSession()||r.getSession();if(l&&m&&this._updateSessionFromEvent(m,h),a){const y=h.sdkProcessingMetadata?.spanCountBeforeProcessing||0,b=h.spans?h.spans.length:0,E=y-b;E>0&&this.recordDroppedEvent("before_send","span",E)}const p=h.transaction_info;if(a&&p&&h.transaction!==t.transaction){const y="custom";h.transaction_info={...p,source:y}}return this.sendEvent(h,n),h}).then(null,h=>{throw h instanceof Fs?h:(this.captureException(h,{data:{__sentry__:!0},originalException:h}),new Fs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,i])=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:i}})}_flushOutcomes(){Ct&&Oe.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Ct&&Oe.log("No outcomes to send");return}if(!this._dsn){Ct&&Oe.log("No dsn provided, will not send outcomes");return}Ct&&Oe.log("Sending outcomes:",t);const n=Tee(t,this._options.tunnel&&bw(this._dsn));this.sendEnvelope(n)}}function Cee(e,t){const n=`${t} must return \`null\` or a valid event.`;if(t5(e))return e.then(i=>{if(!sh(i)&&i!==null)throw new Fs(n);return i},i=>{throw new Fs(`${t} rejected with ${i}`)});if(!sh(e)&&e!==null)throw new Fs(n);return e}function Aee(e,t,n,i){const{beforeSend:r,beforeSendTransaction:s,beforeSendSpan:o}=t;let a=n;if(s7(a)&&r)return r(a,i);if(kP(a)){if(o){const l=o(See(a));if(l?a=Bm(n,Iee(l)):Cx(),a.spans){const c=[];for(const u of a.spans){const d=o(u);d?c.push(d):(Cx(),c.push(u))}a.spans=c}}if(s){if(a.spans){const l=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return s(a,i)}}return a}function s7(e){return e.type===void 0}function kP(e){return e.type==="transaction"}function Mee(e,t){t.debug===!0&&(Ct?Oe.enable():Xh(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ul().update(t.initialScope);const i=new e(t);return kee(i),i.init(),i}function kee(e){ul().setClient(e)}function Ree(e){const t=[];function n(){return e===void 0||t.length<e}function i(o){return t.splice(t.indexOf(o),1)[0]||Promise.resolve(void 0)}function r(o){if(!n())return ob(new Fs("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>i(a)).then(null,()=>i(a).then(null,()=>{})),a}function s(o){return new wc((a,l)=>{let c=t.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{Ku(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:r,drain:s}}const Dee=60*1e3;function Lee(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const i=Date.parse(`${e}`);return isNaN(i)?Dee:i-t}function Oee(e,t){return e[t]||e.all||0}function Nee(e,t,n=Date.now()){return Oee(e,t)>n}function Pee(e,{statusCode:t,headers:n},i=Date.now()){const r={...e},s=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),f=(isNaN(d)?60:d)*1e3;if(!c)r.all=i+f;else for(const h of c.split(";"))h==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(r[h]=i+f):r[h]=i+f}else o?r.all=i+Lee(o,i):t===429&&(r.all=i+60*1e3);return r}const Fee=64;function Bee(e,t,n=Ree(e.bufferSize||Fee)){let i={};const r=o=>n.drain(o);function s(o){const a=[];if(Ax(o,(d,f)=>{const h=Mx(f);Nee(i,h)?e.recordDroppedEvent("ratelimit_backoff",h):a.push(d)}),a.length===0)return Ku({});const l=i5(o[0],a),c=d=>{Ax(l,(f,h)=>{e.recordDroppedEvent(d,Mx(h))})},u=()=>t({body:GJ(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Ct&&Oe.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),i=Pee(i,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof Fs)return Ct&&Oe.error("Skipped sending event because buffer is full."),c("queue_overflow"),Ku({});throw d})}return{send:s,flush:r}}function zee(e){e.user?.ip_address===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function Hee(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Vee(e,t,n=[t],i="npm"){const r=e._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${i}:@sentry/${s}`,version:ku})),version:ku}),e._metadata=r}const $ee=100;function Zu(e,t){const n=Vi(),i=zm();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:s=$ee}=n.getOptions();if(s<=0)return;const a={timestamp:Fm(),...e},l=r?Xh(()=>r(a,t)):a;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),i.addBreadcrumb(l,s))}let zx;const Gee="FunctionToString",Hx=new WeakMap,Xee=()=>({name:Gee,setupOnce(){zx=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=hw(this),n=Hx.has(Vi())&&t!==void 0?t:this;return zx.apply(n,e)}}catch{}},setup(e){Hx.set(e,!0)}}),jee=Xee,Yee=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],Wee="InboundFilters",Kee=(e={})=>({name:Wee,processEvent(t,n,i){const r=i.getOptions(),s=qee(e,r);return Qee(t,s)?null:t}}),Zee=Kee;function qee(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Yee],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function Qee(e,t){return t.ignoreInternal&&ite(e)?(Ct&&Oe.warn(`Event dropped due to being internal Sentry Error.
Event: ${Rl(e)}`),!0):Jee(e,t.ignoreErrors)?(Ct&&Oe.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Rl(e)}`),!0):ste(e)?(Ct&&Oe.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Rl(e)}`),!0):ete(e,t.ignoreTransactions)?(Ct&&Oe.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Rl(e)}`),!0):tte(e,t.denyUrls)?(Ct&&Oe.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Rl(e)}.
Url: ${ab(e)}`),!0):nte(e,t.allowUrls)?!1:(Ct&&Oe.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Rl(e)}.
Url: ${ab(e)}`),!0)}function Jee(e,t){return e.type||!t||!t.length?!1:MP(e).some(n=>n5(n,t))}function ete(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?n5(n,t):!1}function tte(e,t){if(!t?.length)return!1;const n=ab(e);return n?n5(n,t):!1}function nte(e,t){if(!t?.length)return!0;const n=ab(e);return n?n5(n,t):!0}function ite(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function rte(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function ab(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?rte(t):null}catch{return Ct&&Oe.error(`Cannot extract url for event ${Rl(e)}`),null}}function ste(e){return e.type||!e.exception?.values?.length?!1:!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value)}function ote(e,t,n=250,i,r,s,o){if(!s.exception?.values||!o||!ju(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=ate(o7(e,t,r,o.originalException,i,s.exception.values,a,0),n))}function o7(e,t,n,i,r,s,o,a){if(s.length>=n+1)return s;let l=[...s];if(ju(i[r],Error)){Vx(o,a);const c=e(t,i[r]),u=l.length;$x(c,r,u,a),l=o7(e,t,n,i[r],r,[c,...l],c,u)}return Array.isArray(i.errors)&&i.errors.forEach((c,u)=>{if(ju(c,Error)){Vx(o,a);const d=e(t,c),f=l.length;$x(d,`errors[${u}]`,f,a),l=o7(e,t,n,c,r,[d,...l],d,f)}}),l}function Vx(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function $x(e,t,n,i){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:i}}function ate(e,t){return e.map(n=>(n.value&&(n.value=Pf(n.value,t)),n))}function RP(e){const t="console";Ed(t,e),vd(t,lte)}function lte(){"console"in Dt&&ib.forEach(function(e){e in Dt.console&&Dr(Dt.console,e,function(t){return rb[e]=t,function(...n){Gs("console",{args:n,level:e}),rb[e]?.apply(Dt.console,n)}})})}function DP(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const cte="CaptureConsole",ute=(e={})=>{const t=e.levels||ib,n=e.handled??!0;return{name:cte,setup(i){"console"in Dt&&RP(({args:r,level:s})=>{Vi()!==i||!t.includes(s)||fte(r,s,n)})}}},dte=ute;function fte(e,t,n){const i={level:DP(t),extra:{arguments:e}};mw(r=>{if(r.addEventProcessor(a=>(a.logger="console",Wu(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${sb(e.slice(1)," ")||"console.assert"}`;r.setExtra("arguments",e.slice(1)),Dx(a,i)}return}const s=e.find(a=>a instanceof Error);if(s){yw(s,i);return}const o=sb(e," ");Dx(o,i)})}const hte="Dedupe",gte=()=>{let e;return{name:hte,processEvent(t){if(t.type)return t;try{if(pte(t,e))return Ct&&Oe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},mte=gte;function pte(e,t){return t?!!(Ute(e,t)||bte(e,t)):!1}function Ute(e,t){const n=e.message,i=t.message;return!(!n&&!i||n&&!i||!n&&i||n!==i||!OP(e,t)||!LP(e,t))}function bte(e,t){const n=Gx(t),i=Gx(e);return!(!n||!i||n.type!==i.type||n.value!==i.value||!OP(e,t)||!LP(e,t))}function LP(e,t){let n=gx(e),i=gx(t);if(!n&&!i)return!0;if(n&&!i||!n&&i||(n=n,i=i,i.length!==n.length))return!1;for(let r=0;r<i.length;r++){const s=i[r],o=n[r];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function OP(e,t){let n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return n.join("")===i.join("")}catch{return!1}}function Gx(e){return e.exception?.values&&e.exception.values[0]}function S8(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:i,relative:t[5]+n+i}}function NP(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const lb=Dt;function yte(){return"history"in lb}function PP(){if(!("fetch"in lb))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function a7(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ete(){if(typeof EdgeRuntime=="string")return!0;if(!PP())return!1;if(a7(lb.fetch))return!0;let e=!1;const t=lb.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=a7(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){yd&&Oe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function vte(e,t){const n="fetch";Ed(n,e),vd(n,()=>wte(void 0,t))}function wte(e,t=!1){t&&!Ete()||Dr(Dt,"fetch",function(n){return function(...i){const r=new Error,{method:s,url:o}=_te(i),a={args:i,fetchData:{method:s,url:o},startTimestamp:Oa()*1e3,virtualError:r};return Gs("fetch",{...a}),n.apply(Dt,i).then(async l=>(Gs("fetch",{...a,endTimestamp:Oa()*1e3,response:l}),l),l=>{throw Gs("fetch",{...a,endTimestamp:Oa()*1e3,error:l}),lw(l)&&l.stack===void 0&&(l.stack=r.stack,Yu(l,"framesToPop",1)),l})}})}function l7(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Xx(e){return typeof e=="string"?e:e?l7(e,"url")?e.url:e.toString?e.toString():"":""}function _te(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,i]=e;return{url:Xx(n),method:l7(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:Xx(t),method:l7(t,"method")?String(t.method).toUpperCase():"GET"}}function Tte(){return"npm"}const _n=Dt;let c7=0;function FP(){return c7>0}function Ste(){c7++,setTimeout(()=>{c7--})}function lh(e,t={}){function n(r){return typeof r=="function"}if(!n(e))return e;try{const r=e.__sentry_wrapped__;if(r)return typeof r=="function"?r:e;if(hw(e))return e}catch{return e}const i=function(...r){try{const s=r.map(o=>lh(o,t));return e.apply(this,s)}catch(s){throw Ste(),mw(o=>{o.addEventProcessor(a=>(t.mechanism&&(e7(a,void 0),Wu(a,t.mechanism)),a.extra={...a.extra,arguments:r},a)),yw(s)}),s}};try{for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}catch{}hP(i,e),Yu(e,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get(){return e.name}})}catch{}return i}function Ew(e,t){const n=vw(e,t),i={type:Mte(t),value:kte(t)};return n.length&&(i.stacktrace={frames:n}),i.type===void 0&&i.value===""&&(i.value="Unrecoverable error caught"),i}function Ite(e,t,n,i){const s=Vi()?.getOptions().normalizeDepth,o=Nte(t),a={__serialized__:TP(t,s)};if(o)return{exception:{values:[Ew(e,o)]},extra:a};const l={exception:{values:[{type:e5(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:Lte(t,{isUnhandledRejection:i})}]},extra:a};if(n){const c=vw(e,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function I8(e,t){return{exception:{values:[Ew(e,t)]}}}function vw(e,t){const n=t.stacktrace||t.stack||"",i=Cte(t),r=Ate(t);try{return e(n,i,r)}catch{}return[]}const xte=/Minified React error #\d+;/i;function Cte(e){return e&&xte.test(e.message)?1:0}function Ate(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function BP(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Mte(e){const t=e?.name;return!t&&BP(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function kte(e){const t=e?.message;return BP(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Rte(e,t,n,i){const r=n?.syntheticException||void 0,s=ww(e,t,r,i);return Wu(s),s.level="error",n?.event_id&&(s.event_id=n.event_id),Ku(s)}function Dte(e,t,n="info",i,r){const s=i?.syntheticException||void 0,o=u7(e,t,s,r);return o.level=n,i?.event_id&&(o.event_id=i.event_id),Ku(o)}function ww(e,t,n,i,r){let s;if(uP(t)&&t.error)return I8(e,t.error);if(px(t)||BQ(t)){const o=t;if("stack"in t)s=I8(e,t);else{const a=o.name||(px(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=u7(e,l,n,i),e7(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return lw(t)?I8(e,t):sh(t)||e5(t)?(s=Ite(e,t,n,r),Wu(s,{synthetic:!0}),s):(s=u7(e,t,n,i),e7(s,`${t}`),Wu(s,{synthetic:!0}),s)}function u7(e,t,n,i){const r={};if(i&&n){const s=vw(e,n);s.length&&(r.exception={values:[{value:t,stacktrace:{frames:s}}]}),Wu(r,{synthetic:!0})}if(cw(t)){const{__sentry_template_string__:s,__sentry_template_values__:o}=t;return r.logentry={message:s,params:o},r}return r.message=t,r}function Lte(e,{isUnhandledRejection:t}){const n=YQ(e),i=t?"promise rejection":"exception";return uP(e)?`Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\``:e5(e)?`Event \`${Ote(e)}\` (type=${e.type}) captured as ${i}`:`Object captured as ${i} with keys: ${n}`}function Ote(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Nte(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class Pte extends xee{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},i=_n.SENTRY_SDK_SOURCE||Tte();Vee(n,"browser",["browser"],i),super(n),n.sendClientReports&&_n.document&&_n.document.addEventListener("visibilitychange",()=>{_n.document.visibilityState==="hidden"&&this._flushOutcomes()}),this._options.sendDefaultPii&&(this.on("postprocessEvent",zee),this.on("beforeSendSession",Hee))}eventFromException(t,n){return Rte(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",i){return Dte(this._options.stackParser,t,n,i,this._options.attachStacktrace)}_prepareEvent(t,n,i,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,i,r)}}const Fte=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,hr=Dt,Bte=1e3;let jx,d7,f7;function zte(e){const t="dom";Ed(t,e),vd(t,Hte)}function Hte(){if(!hr.document)return;const e=Gs.bind(null,"dom"),t=Yx(e,!0);hr.document.addEventListener("click",t,!1),hr.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=hr[n]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(Dr(r,"addEventListener",function(s){return function(o,a,l){if(o==="click"||o=="keypress")try{const c=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},u=c[o]=c[o]||{refCount:0};if(!u.handler){const d=Yx(e);u.handler=d,s.call(this,o,d,l)}u.refCount++}catch{}return s.call(this,o,a,l)}}),Dr(r,"removeEventListener",function(s){return function(o,a,l){if(o==="click"||o=="keypress")try{const c=this.__sentry_instrumentation_handlers__||{},u=c[o];u&&(u.refCount--,u.refCount<=0&&(s.call(this,o,u.handler,l),u.handler=void 0,delete c[o]),Object.keys(c).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return s.call(this,o,a,l)}}))})}function Vte(e){if(e.type!==d7)return!1;try{if(!e.target||e.target._sentryId!==f7)return!1}catch{}return!0}function $te(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Yx(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const i=Gte(n);if($te(n.type,i))return;Yu(n,"_sentryCaptured",!0),i&&!i._sentryId&&Yu(i,"_sentryId",gs());const r=n.type==="keypress"?"input":n.type;Vte(n)||(e({event:n,name:r,global:t}),d7=n.type,f7=i?i._sentryId:void 0),clearTimeout(jx),jx=hr.setTimeout(()=>{f7=void 0,d7=void 0},Bte)}}function Gte(e){try{return e.target}catch{return null}}let Jp;function zP(e){const t="history";Ed(t,e),vd(t,Xte)}function Xte(){if(hr.addEventListener("popstate",()=>{const t=hr.location.href,n=Jp;if(Jp=t,n===t)return;Gs("history",{from:n,to:t})}),!yte())return;function e(t){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const r=Jp,s=String(i);if(Jp=s,r===s)return;Gs("history",{from:r,to:s})}return t.apply(this,n)}}Dr(hr.history,"pushState",e),Dr(hr.history,"replaceState",e)}const qU={};function jte(e){const t=qU[e];if(t)return t;let n=hr[e];if(a7(n))return qU[e]=n.bind(hr);const i=hr.document;if(i&&typeof i.createElement=="function")try{const r=i.createElement("iframe");r.hidden=!0,i.head.appendChild(r);const s=r.contentWindow;s?.[e]&&(n=s[e]),i.head.removeChild(r)}catch(r){Fte&&Oe.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,r)}return n&&(qU[e]=n.bind(hr))}function Wx(e){qU[e]=void 0}const l1="__sentry_xhr_v3__";function Yte(e){const t="xhr";Ed(t,e),vd(t,Wte)}function Wte(){if(!hr.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,i){const r=new Error,s=Oa()*1e3,o=La(i[0])?i[0].toUpperCase():void 0,a=Kte(i[1]);if(!o||!a)return t.apply(n,i);n[l1]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[l1];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const u={endTimestamp:Oa()*1e3,startTimestamp:s,xhr:n,virtualError:r};Gs("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,d){return l(),c.apply(u,d)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,d){const[f,h]=d,m=u[l1];return m&&La(f)&&La(h)&&(m.request_headers[f.toLowerCase()]=h),c.apply(u,d)}}),t.apply(n,i)}}),e.send=new Proxy(e.send,{apply(t,n,i){const r=n[l1];if(!r)return t.apply(n,i);i[0]!==void 0&&(r.body=i[0]);const s={startTimestamp:Oa()*1e3,xhr:n};return Gs("xhr",s),t.apply(n,i)}})}function Kte(e){if(La(e))return e;try{return e.toString()}catch{}}function Zte(e,t=jte("fetch")){let n=0,i=0;function r(s){const o=s.body.length;n+=o,i++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&i<15,...e.fetchOptions};if(!t)return Wx("fetch"),ob("No fetch implementation available");try{return t(e.url,a).then(l=>(n-=o,i--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return Wx("fetch"),n-=o,i--,ob(l)}}return Bee(e,r)}const qte=30,Qte=50;function h7(e,t,n,i){const r={filename:e,function:t==="<anonymous>"?Xu:t,in_app:!0};return n!==void 0&&(r.lineno=n),i!==void 0&&(r.colno=i),r}const Jte=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ene=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,tne=/\((\S*)(?::(\d+))(?::(\d+))\)/,nne=e=>{const t=Jte.exec(e);if(t){const[,i,r,s]=t;return h7(i,Xu,+r,+s)}const n=ene.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=tne.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[r,s]=HP(n[1]||Xu,n[2]);return h7(s,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},ine=[qte,nne],rne=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,sne=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,one=e=>{const t=rne.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=sne.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let i=t[3],r=t[1]||Xu;return[r,i]=HP(r,i),h7(i,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},ane=[Qte,one],lne=[ine,ane],cne=lP(...lne),HP=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,i=e.indexOf("safari-web-extension")!==-1;return n||i?[e.indexOf("@")!==-1?e.split("@")[0]:Xu,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},N0=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,eU=1024,une="Breadcrumbs",dne=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:une,setup(n){t.console&&RP(mne(n)),t.dom&&zte(gne(n,t.dom)),t.xhr&&Yte(pne(n)),t.fetch&&vte(Une(n)),t.history&&zP(bne(n)),t.sentry&&n.on("beforeSendEvent",hne(n))}}},fne=dne;function hne(e){return function(n){Vi()===e&&Zu({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Rl(n)},{event:n})}}function gne(e,t){return function(i){if(Vi()!==e)return;let r,s,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>eU&&(N0&&Oe.warn(`\`dom.maxStringLength\` cannot exceed ${eU}, but a value of ${a} was configured. Sentry will use ${eU} instead.`),a=eU),typeof o=="string"&&(o=[o]);try{const c=i.event,u=yne(c)?c.target:c;r=fP(u,{keyAttrs:o,maxStringLength:a}),s=XQ(u)}catch{r="<unknown>"}if(r.length===0)return;const l={category:`ui.${i.name}`,message:r};s&&(l.data={"ui.component_name":s}),Zu(l,{event:i.event,name:i.name,global:i.global})}}function mne(e){return function(n){if(Vi()!==e)return;const i={category:"console",data:{arguments:n.args,logger:"console"},level:DP(n.level),message:sb(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)i.message=`Assertion failed: ${sb(n.args.slice(1)," ")||"console.assert"}`,i.data.arguments=n.args.slice(1);else return;Zu(i,{input:n.args,level:n.level})}}function pne(e){return function(n){if(Vi()!==e)return;const{startTimestamp:i,endTimestamp:r}=n,s=n.xhr[l1];if(!i||!r||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:i,endTimestamp:r},f=NP(l);Zu({category:"xhr",data:u,type:"http",level:f},d)}}function Une(e){return function(n){if(Vi()!==e)return;const{startTimestamp:i,endTimestamp:r}=n;if(!r||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST")return;const s={method:n.fetchData.method,url:n.fetchData.url};if(n.error){const o={data:n.error,input:n.args,startTimestamp:i,endTimestamp:r};Zu({category:"fetch",data:s,level:"error",type:"http"},o)}else{const o=n.response;s.request_body_size=n.fetchData.request_body_size,s.response_body_size=n.fetchData.response_body_size,s.status_code=o?.status;const a={input:n.args,response:o,startTimestamp:i,endTimestamp:r},l=NP(s.status_code);Zu({category:"fetch",data:s,type:"http",level:l},a)}}}function bne(e){return function(n){if(Vi()!==e)return;let i=n.from,r=n.to;const s=S8(_n.location.href);let o=i?S8(i):void 0;const a=S8(r);o?.path||(o=s),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),Zu({category:"navigation",data:{from:i,to:r}})}}function yne(e){return!!e&&!!e.target}const Ene=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],vne="BrowserApiErrors",wne=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:vne,setupOnce(){t.setTimeout&&Dr(_n,"setTimeout",Kx),t.setInterval&&Dr(_n,"setInterval",Kx),t.requestAnimationFrame&&Dr(_n,"requestAnimationFrame",Tne),t.XMLHttpRequest&&"XMLHttpRequest"in _n&&Dr(XMLHttpRequest.prototype,"send",Sne);const n=t.eventTarget;n&&(Array.isArray(n)?n:Ene).forEach(Ine)}}},_ne=wne;function Kx(e){return function(...t){const n=t[0];return t[0]=lh(n,{mechanism:{data:{function:vc(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Tne(e){return function(t){return e.apply(this,[lh(t,{mechanism:{data:{function:"requestAnimationFrame",handler:vc(e)},handled:!1,type:"instrument"}})])}}function Sne(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&Dr(n,r,function(s){const o={mechanism:{data:{function:r,handler:vc(s)},handled:!1,type:"instrument"}},a=hw(s);return a&&(o.mechanism.data.handler=vc(a)),lh(s,o)})}),e.apply(this,t)}}function Ine(e){const n=_n[e]?.prototype;n?.hasOwnProperty?.("addEventListener")&&(Dr(n,"addEventListener",function(i){return function(r,s,o){try{xne(s)&&(s.handleEvent=lh(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:vc(s),target:e},handled:!1,type:"instrument"}}))}catch{}return i.apply(this,[r,lh(s,{mechanism:{data:{function:"addEventListener",handler:vc(s),target:e},handled:!1,type:"instrument"}}),o])}}),Dr(n,"removeEventListener",function(i){return function(r,s,o){try{const a=s.__sentry_wrapped__;a&&i.call(this,r,a,o)}catch{}return i.call(this,r,s,o)}}))}function xne(e){return typeof e.handleEvent=="function"}const Cne=()=>({name:"BrowserSession",setupOnce(){if(typeof _n.document>"u"){N0&&Oe.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Lx({ignoreDuration:!0}),Ox(),zP(({from:e,to:t})=>{e!==void 0&&e!==t&&(Lx({ignoreDuration:!0}),Ox())})}}),Ane="GlobalHandlers",Mne=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Ane,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Rne(n),Zx("onerror")),t.onunhandledrejection&&(Dne(n),Zx("onunhandledrejection"))}}},kne=Mne;function Rne(e){OQ(t=>{const{stackParser:n,attachStacktrace:i}=VP();if(Vi()!==e||FP())return;const{msg:r,url:s,line:o,column:a,error:l}=t,c=Nne(ww(n,l||r,void 0,i,!1),s,o,a);c.level="error",IP(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function Dne(e){PQ(t=>{const{stackParser:n,attachStacktrace:i}=VP();if(Vi()!==e||FP())return;const r=Lne(t),s=uw(r)?One(r):ww(n,r,void 0,i,!0);s.level="error",IP(s,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Lne(e){if(uw(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function One(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Nne(e,t,n,i){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=i,u=n,d=La(t)&&t.length>0?t:fw();return l.length===0&&l.push({colno:c,filename:d,function:Xu,in_app:!0,lineno:u}),e}function Zx(e){N0&&Oe.log(`Global Handler attached: ${e}`)}function VP(){return Vi()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Pne=()=>({name:"HttpContext",preprocessEvent(e){if(!_n.navigator&&!_n.location&&!_n.document)return;const t=e.request?.url||fw(),{referrer:n}=_n.document||{},{userAgent:i}=_n.navigator||{},r={...e.request?.headers,...n&&{Referer:n},...i&&{"User-Agent":i}},s={...e.request,...t&&{url:t},headers:r};e.request=s}}),Fne="cause",Bne=5,zne="LinkedErrors",Hne=(e={})=>{const t=e.limit||Bne,n=e.key||Fne;return{name:zne,preprocessEvent(i,r,s){const o=s.getOptions();ote(Ew,o.stackParser,o.maxValueLength,n,t,i,r)}}},Vne=Hne;function $ne(e){return[Zee(),jee(),_ne(),fne(),kne(),Vne(),mte(),Pne(),Cne()]}function Gne(e={}){return{...{defaultIntegrations:$ne(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:_n.SENTRY_RELEASE?.id,sendClientReports:!0},...Xne(e)}}function Xne(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const i=n;e[i]!==void 0&&(t[i]=e[i])}return t}function jne(){const e=typeof _n.window<"u"&&_n;if(!e)return!1;const t=e.chrome?"chrome":"browser",i=e[t]?.runtime?.id,r=fw()||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],o=!!i&&_n===_n.top&&s.some(l=>r.startsWith(`${l}//`)),a=typeof e.nw<"u";return!!i&&!o&&!a}function Yne(e={}){const t=Gne(e);if(!t.skipBrowserExtensionCheck&&jne()){N0&&Xh(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}N0&&!PP()&&Oe.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:DQ(t.stackParser||cne),integrations:wee(t),transport:t.transport||Zte};return Mee(Pte,n)}function Wne(){const e=Error.prepareStackTrace;try{let t=[];return Error.prepareStackTrace=(n,i)=>{const r=i.slice(1);return t=r,r},new Error().stack,t}finally{Error.prepareStackTrace=e}}var Kne={};const $P={"excalidraw.com":"production","staging.excalidraw.com":"staging","vercel.app":"staging"},Zne=Kne.VITE_APP_DISABLE_SENTRY==="true",x8=!Zne&&Object.keys($P).find(e=>window.location.hostname.indexOf(e)>=0);Yne({dsn:x8?"https://7bfc596a5bf945eda6b660d3015a5460@sentry.io/5179260":void 0,environment:x8?$P[x8]:void 0,release:"",ignoreErrors:["undefined is not an object (evaluating 'window.__pad.performLoop')","InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.",/(Failed to fetch|(fetch|loading) dynamically imported module)/i,/QuotaExceededError: (The quota has been exceeded|.*setItem.*Storage)/i,"Internal error opening backing store for indexedDB.open"],integrations:[dte({levels:["error"]})],beforeSend(e){return e.request?.url&&(e.request.url=e.request.url.replace(/#.*$/,"")),e.exception||(e.exception={values:[{type:"ConsoleError",value:e.message??"Unknown error",stacktrace:{frames:Wne().slice(1).filter(t=>t.getFileName()&&!t.getFileName()?.includes("@sentry_browser.js")).map(t=>({filename:t.getFileName()??void 0,function:t.getFunctionName()??void 0,in_app:!(t.getFileName()?.includes("node_modules")??!1),lineno:t.getLineNumber()??void 0,colno:t.getColumnNumber()??void 0}))},mechanism:{type:"instrument",handled:!0,data:{function:"console.error",handler:"Sentry.beforeSend"}}}]}),e}});class qne{constructor(t){this.scoreFunction=t}content=[];sinkDown(t){const n=this.content[t];for(;t>0;){const i=(t+1>>1)-1,r=this.content[i];if(this.scoreFunction(n)<this.scoreFunction(r))this.content[i]=n,this.content[t]=r,t=i;else break}}bubbleUp(t){const n=this.content.length,i=this.content[t],r=this.scoreFunction(i);for(;;){const s=t+1<<1,o=s-1;let a=null,l=0;if(o<n){const c=this.content[o];l=this.scoreFunction(c),l<r&&(a=o)}if(s<n){const c=this.content[s];this.scoreFunction(c)<(a===null?r:l)&&(a=s)}if(a!==null)this.content[t]=this.content[a],this.content[a]=i,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;const t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;const n=this.content.indexOf(t),i=this.content.pop();n<this.content.length&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}}const Qne="#ffffff",Jne="#000000",eie=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],tie=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],nie=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],iie=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],rie=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],sie=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],oie=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],aie=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],lie=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],cie=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],uie=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],die=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],fie=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],ci={white:Qne,black:Jne,gray:eie,red:tie,pink:nie,grape:iie,violet:rie,indigo:sie,blue:oie,cyan:aie,teal:lie,green:cie,lime:uie,yellow:die,orange:fie},GP=240,hie=(e,t)=>t.reduce((n,i)=>(i in e&&(n[i]=e[i]),n),{}),gie=5,Jd=5,mie=4,c1=4,u1=1,Ms=[0,2,4,6,8],ks=(e,t)=>t.map(n=>ci[e][n]),Pe={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:ks("gray",Ms),red:ks("red",Ms),pink:ks("pink",Ms),grape:ks("grape",Ms),violet:ks("violet",Ms),blue:ks("blue",Ms),cyan:ks("cyan",Ms),teal:ks("teal",Ms),green:ks("green",Ms),yellow:ks("yellow",Ms),orange:ks("orange",Ms),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},XP=hie(Pe,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),jP=[Pe.black,Pe.red[c1],Pe.green[c1],Pe.blue[c1],Pe.yellow[c1]],YP=[Pe.transparent,Pe.red[u1],Pe.green[u1],Pe.blue[u1],Pe.yellow[u1]],WP=[Pe.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],pie={transparent:Pe.transparent,white:Pe.white,gray:Pe.gray,black:Pe.black,bronze:Pe.bronze,...XP},Uie={transparent:Pe.transparent,white:Pe.white,gray:Pe.gray,black:Pe.black,bronze:Pe.bronze,...XP},bie=e=>[Pe.cyan[e],Pe.blue[e],Pe.violet[e],Pe.grape[e],Pe.pink[e],Pe.green[e],Pe.teal[e],Pe.yellow[e],Pe.orange[e],Pe.red[e]],yie=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,No=/Mac|iPod|iPhone|iPad/.test(navigator.platform),KP=/^Win/.test(navigator.platform),Eie=/\b(android)\b/i.test(navigator.userAgent),P0=typeof window<"u"&&"netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,vie=navigator.userAgent.indexOf("Chrome")!==-1,wie=!vie&&navigator.userAgent.indexOf("Safari")!==-1,ZP=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,_ie=()=>navigator.brave?.isBrave?.name==="isBrave",g7=typeof window<"u"&&"ResizeObserver"in window,Na="Excalidraw",Tie=36,m7=10,QU=8,Sie=5,qx=1,Iie=30,Ar=Math.PI/12,xie="red",vt={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},Il={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},ru={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"};var ee=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.EXCALIDRAW_LINK="excalidraw-link",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(ee||{});const tU={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},qP={TEST:"test",DEVELOPMENT:"development"},_c={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper",CONVERT_ELEMENT_TYPE_POPUP:"ConvertElementTypePopup"},Ef="Xiaolai",F0="Segoe UI Emoji",Ye={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9,Assistant:10},QP="sans-serif",JP="monospace",Cie={[QP]:998,[JP]:999},vf={[Ef]:100,...Cie,[F0]:1e3};function Aie(e){switch(e){case Ye.Cascadia:case Ye["Comic Shanns"]:return JP;default:return QP}}const eF=e=>{const t=Aie(e);switch(e){case Ye.Excalifont:return[Ef,t,F0];default:return[t,F0]}},Te={LIGHT:"light",DARK:"dark"},Rt={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},_w=1,dl=20,Hc=Ye.Excalifont,Hm="left",cb="top",tF="{version}",qu=2,ub=2*qu,Mie=1e-5,Qx=2*ub-Mie,nU="#ffffff",kie="#1e1e1e",Rie="#a2f1a6",db=20,nF=5,ch={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif",pdf:"application/pdf"},Ue={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...ch},Die=[Ue.text,Ue.html,...Object.values(ch)],C8={png:"png",svg:"svg",clipboard:"clipboard"},ms={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},Tw=()=>window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,Lie=500,Oie=300,Nie=500,Pie=1e4,Fie=3e4,Bie=100,r5=.1,Sw=.1,Iw=30,zie=300,Jx=6e4,eC=3e3,xw="invert(93%) hue-rotate(180deg)",p7={addLibrary:"addLibrary"},U7={addLibrary:"addLibrary"},tC={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0}},Hie=730,Vie=1e3,$ie=500,Gie=1229,Lg=2,Cw=[1,2,3],Yh=10,Xie=1440,nC=4*1024*1024,qe="http://www.w3.org/2000/svg",jie=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`,iF=128,s5={excalidraw:2,excalidrawLibrary:2},Nn=5,Yie=.7,Wie=11,Or={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},B0={LEFT:"left",CENTER:"center",RIGHT:"right"},Kie=20,A8=.25,Zie=32,ln={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},rF={artist:1,cartoonist:2},M8={thin:1,bold:2,extraBold:4},nn={strokeColor:Pe.black,backgroundColor:Pe.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:rF.artist,opacity:100,locked:!1},fb="library",Ru="search",ps={name:"default",defaultTab:fb},sF=new Set(["iframe","embeddable","image"]),Xn={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",text:"text",image:"image",eraser:"eraser",frame:"frame",magicframe:"magicframe",laser:"laser"},Y1={MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},oF="Untitled",wf={generalStats:1,elementProperties:2},Jr=1,ii={sharp:"sharp",round:"round",elbow:"elbow"},aF=.3,hb="element";var mu=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(mu||{});const qie=20,uh={[Ye.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25}},[Ye.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.25}},[Ye["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15}},[Ye["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25}},[Ye.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},deprecated:!0},[Ye.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},deprecated:!0,local:!0},[Ye.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},deprecated:!0},[Ye["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},private:!0},[Ye.Assistant]:{metrics:{unitsPerEm:2048,ascender:1021,descender:-287,lineHeight:1.25},private:!0},[vf.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.25},fallback:!0},[vf["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},cu={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},Aw="local:",lF=(e,t,n)=>{const{unitsPerEm:i,ascender:r,descender:s}=uh[e]?.metrics||uh[Ye.Excalifont].metrics,o=t/i,a=(n-o*r+o*s)/2;return o*r+a},Tc=e=>{const{lineHeight:t}=uh[e]?.metrics||uh[Ye.Excalifont].metrics;return t};class Qie{jobs=[];running=!1;tick(){if(this.running)return;const t=this.jobs.shift();t?(this.running=!0,t.promise.resolve(Sc(t.jobFactory,...t.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(t,...n){const i=c5();return this.jobs.push({jobFactory:t,promise:i,args:n}),this.tick(),i}}const Ke={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},B={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:No?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SLASH:"/",A:"a",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},Jie=new Map([[B.Z,Ke.Z],[B.Y,Ke.Y]]),ere=e=>/^[a-z]$/.test(e.toLowerCase()),b7=(e,t)=>{if(t===e.key.toLowerCase())return!0;const n=Jie.get(t);return!!(n&&!ere(e.key)&&e.code===n)},d1=e=>e===B.ARROW_LEFT||e===B.ARROW_RIGHT||e===B.ARROW_DOWN||e===B.ARROW_UP,iC=e=>e.altKey,Og=e=>e.shiftKey,W1=e=>e.shiftKey,Vm=1e-4,Ve=(e,t,n)=>Math.min(Math.max(e,t),n),Pa=(e,t,n="round")=>{const i=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*i)/i},tre=(e,t,n="round")=>{const i=1/t;return Math[n](e*i)/i},iU=(e,t)=>(e+t)/2,K1=e=>typeof e=="number"&&Number.isFinite(e),rC=(e,t,n=Vm)=>Math.abs(e-t)<n,Xs=e=>e<0?e%(2*Math.PI)+2*Math.PI:e%(2*Math.PI);function Du(e){return e*Math.PI/180}function o5(e){return e*180/Math.PI}function nre(e){return Math.abs(Math.sin(2*e))<Vm}function ire(e,t,n){return e=Xs(e),t=Xs(t),n=Xs(n),t<n?e>=t&&e<=n:e>=t||e<=n}function rre(e,t){e=Xs(e),t=Xs(t);let n=e-t;return n<-Math.PI?n=n+2*Math.PI:n>Math.PI&&(n=n-2*Math.PI),Math.abs(n)}function rn(e,t,n=0,i=0){return[e-n,t-i]}function ae(e,t=[0,0],n,i=[0,1]){const r=rn(e[0]-t[0],e[1]-t[1]);return n&&cF(r)<n*n?i:r}function ut(e,t){return e[0]*t[1]-t[0]*e[1]}function Z1(e,t){return e[0]*t[0]+e[1]*t[1]}function _f(e,t){return[e[0]+t[0],e[1]+t[1]]}function gb(e,t){return[e[0]-t[0],e[1]-t[1]]}function Sn(e,t){return rn(e[0]*t,e[1]*t)}function cF(e){return e[0]*e[0]+e[1]*e[1]}function sre(e){return Math.sqrt(cF(e))}const ws=e=>{const t=sre(e);return t===0?rn(0,0):rn(e[0]/t,e[1]/t)},uF=e=>rn(e[1],-e[0]);function I(e,t){return[e,t]}function a5(e){return e.length===2?I(e[0],e[1]):void 0}function Ei(e,t=I(0,0)){return I(t[0]+e[0],t[1]+e[1])}function Tf(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function _s(e,t,n=Vm){const i=Math.abs;return i(e[0]-t[0])<n&&i(e[1]-t[1])<n}function W([e,t],[n,i],r){return I((e-n)*Math.cos(r)-(t-i)*Math.sin(r)+n,(e-n)*Math.sin(r)+(t-i)*Math.cos(r)+i)}function mb(e,t=[0,0]){return I(e[0]+t[0],e[1]+t[1])}function pb(e,t){return I((e[0]+t[0])/2,(e[1]+t[1])/2)}function dt(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function Xl(e,t){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}const f1=(e,t,n)=>mb(t,Sn(ae(e,t),n)),z0=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]),dF=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],fF=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872];function Ln(e,t,n,i){return[e,t,n,i]}function sC(e,t,n,i=1e-6){return[(e(t+i,n)-e(t-i,n))/(2*i),(e(t,n+i)-e(t,n-i))/(2*i)]}function ore(e,t,n,i=.001,r=10){let s=1/0,o=0;for(;s>=i;){if(o>=r)return null;const a=e(t,n),l=[sC((p,y)=>e(p,y)[0],t,n),sC((p,y)=>e(p,y)[1],t,n)],c=[[-a[0]],[-a[1]]],u=l[0][0]*l[1][1]-l[0][1]*l[1][0];if(u===0)return null;const d=[[l[1][1]/u,-l[0][1]/u],[-l[1][0]/u,l[0][0]/u]],f=[[d[0][0]*c[0][0]+d[0][1]*c[1][0]],[d[1][0]*c[0][0]+d[1][1]*c[1][0]]];t=t+f[0][0],n=n+f[1][0];const[h,m]=e(t,n);s=Math.max(Math.abs(h),Math.abs(m)),o+=1}return[t,n]}const Lu=(e,t)=>I((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function hF(e,t){const n=o=>I(t[0][0]+o*(t[1][0]-t[0][0]),t[0][1]+o*(t[1][1]-t[0][1])),i=[[.5,0],[.2,0],[.8,0]],r=([o,a])=>{const l=ore((d,f)=>{const h=Lu(e,d),m=n(f);return[h[0]-m[0],h[1]-m[1]]},o,a);if(!l)return null;const[c,u]=l;return c<0||c>1||u<0||u>1?null:Lu(e,c)};let s=r(i[0]);return s?[s]:(s=r(i[1]),s?[s]:(s=r(i[2]),s?[s]:[]))}function are(e,t,n=.001){const i=(c,u,d,f=n)=>{let h=c,m=u,p;for(;m-h>f;)p=(m+h)/2,d(p-f)<d(p+f)?m=p:h=p;return p};let s=0;for(let c=1/0,u=0;u<30;u++){const d=dt(t,Lu(e,u/30));d<c&&(c=d,s=u)}const o=Math.max((s-1)/30,0),a=Math.min((s+1)/30,1),l=i(o,a,c=>dt(t,Lu(e,c)));return l?Lu(e,l):null}function Mw(e,t){const n=are(e,t);return n?dt(t,n):0}function lre(e){return Array.isArray(e)&&e.length===4&&Tf(e[0])&&Tf(e[1])&&Tf(e[2])&&Tf(e[3])}function kw([e,t,n,i],r){return rn(-3*(1-r)*(1-r)*e[0]+3*(1-r)*(1-r)*t[0]-6*r*(1-r)*t[0]-3*r*r*n[0]+6*r*(1-r)*n[0]+3*r*r*i[0],-3*(1-r)*(1-r)*e[1]+3*(1-r)*(1-r)*t[1]-6*r*(1-r)*t[1]-3*r*r*n[1]+6*r*(1-r)*n[1]+3*r*r*i[1])}function cre(e,t=.5){if(e.length<2)return;const n=[];for(let i=0;i<e.length-1;i++){const r=e[i-1<0?0:i-1],s=e[i],o=e[i+1>=e.length?e.length-1:i+1],a=s[0]+(o[0]-r[0])*t/2,l=s[1]+(o[1]-r[1])*t/2;n.push([I(a,l),I(o[0],o[1])])}return n}function Rw(e,t=.5){if(e.length<2)return;const n=[];for(let i=0;i<e.length-1;i++){const r=e[i-1<0?0:i-1],s=e[i],o=e[i+1>=e.length?e.length-1:i+1],a=e[i+2>=e.length?e.length-1:i+2],l=[(o[0]-r[0])*t,(o[1]-r[1])*t],c=[(a[0]-s[0])*t,(a[1]-s[1])*t],u=s[0]+l[0]/3,d=s[1]+l[1]/3,f=o[0]-c[0]/3,h=o[1]-c[1]/3;n.push(Ln(I(s[0],s[1]),I(u,d),I(f,h),I(o[0],o[1])))}return n}function uo([e,t,n,i],r,s=50){const o=[];for(let a=0;a<=s;a++){const l=a/s,c=Ln(e,t,n,i),u=Lu(c,l),d=ws(kw(c,l)),f=uF(d);o.push(Ei(Sn(f,r),u))}return o}function yl(e,t,n,i,r=50){const s=[];for(let o=0;o<=r;o++){const a=o/r,l=1-a,c=I(l*l*e[0]+2*l*a*t[0]+a*a*n[0],l*l*e[1]+2*l*a*t[1]+a*a*n[1]),u=2*(1-a)*(t[0]-e[0])+2*a*(n[0]-t[0]),d=2*(1-a)*(t[1]-e[1])+2*a*(n[1]-t[1]),f=ws(rn(u,d)),h=uF(f);s.push(Ei(Sn(h,i),c))}return s}function Dw(e){let n=0;for(let i=0;i<24;i++){const r=.5*dF[i]+.5,s=kw(e,r),o=Math.sqrt(s[0]*s[0]+s[1]*s[1]);n+=fF[i]*o}return .5*n}function ure(e,t){if(t<=0)return 0;if(t>=1)return Dw(e);const n=t/2,i=t/2;let r=0;for(let s=0;s<24;s++){const o=n*dF[s]+i,a=kw(e,o),l=Math.sqrt(a[0]*a[0]+a[1]*a[1]);r+=fF[s]*l}return n*r}function dre(e,t){const n=Dw(e),i=n*t;let r=0,s=1,o=t,a=0;const l=n*1e-4,c=20;for(let u=0;u<c&&(a=ure(e,o),!(Math.abs(a-i)<l));u++)a<i?r=o:s=o,o=(r+s)/2;return Lu(e,o)}function gF(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}const fre=(e,t)=>{const{halfWidth:n,halfHeight:i,center:r}=t,s=n,o=i,a=_f(ae(e),Sn(ae(r),-1)),l=Math.abs(a[0]),c=Math.abs(a[1]);let u=.707,d=.707;for(let m=0;m<3;m++){const p=s*u,y=o*d,b=(s*s-o*o)*u**3/s,E=(o*o-s*s)*d**3/o,v=p-b,w=y-E,S=l-b,k=c-E,_=Math.hypot(w,v),T=Math.hypot(k,S);u=Math.min(1,Math.max(0,(S*_/T+b)/s)),d=Math.min(1,Math.max(0,(k*_/T+E)/o));const A=Math.hypot(d,u);u/=A,d/=A}const[f,h]=[s*u*Math.sign(a[0]),o*d*Math.sign(a[1])];return dt(Ei(a),I(f,h))};function hre(e,t){const n=e.halfWidth,i=e.halfHeight,r=ae(t[1],t[0]),s=rn(t[0][0]-e.center[0],t[0][1]-e.center[1]),o=rn(r[0]/(n*n),r[1]/(i*i)),a=rn(s[0]/(n*n),s[1]/(i*i)),l=Z1(r,o),c=Z1(r,a),u=Z1(s,a)-1,d=c*c-l*u,f=[];if(d>0){const h=(-c-Math.sqrt(d))/l,m=(-c+Math.sqrt(d))/l;0<=h&&h<=1&&f.push(I(t[0][0]+(t[1][0]-t[0][0])*h,t[0][1]+(t[1][1]-t[0][1])*h)),0<=m&&m<=1&&f.push(I(t[0][0]+(t[1][0]-t[0][0])*m,t[0][1]+(t[1][1]-t[0][1])*m))}else if(d===0){const h=-c/l;0<=h&&h<=1&&f.push(I(t[0][0]+(t[1][0]-t[0][0])*h,t[0][1]+(t[1][1]-t[0][1])*h))}return f}function oC(e,t){return[e,t]}function gre(e,t){const n=e[1][1]-e[0][1],i=e[0][0]-e[1][0],r=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=n*s-r*i;if(o!==0){const a=n*e[0][0]+i*e[0][1],l=r*t[0][0]+s*t[0][1];return I((a*s-l*i)/o,(n*l-r*a)/o)}return null}function Se(e,t){return[e,t]}const mre=e=>Array.isArray(e)&&e.length===2&&Tf(e[0])&&Tf(e[0]),Ub=(e,t,n=Vm)=>{const i=l5(e,t);return i===0?!0:i<n},l5=(e,t)=>{const[n,i]=e,[[r,s],[o,a]]=t,l=n-r,c=i-s,u=o-r,d=a-s,f=l*u+c*d,h=u*u+d*d;let m=-1;h!==0&&(m=f/h);let p,y;m<0?(p=r,y=s):m>1?(p=o,y=a):(p=r+m*u,y=s+m*d);const b=n-p,E=i-y;return Math.sqrt(b*b+E*E)};function bb(e,t,n){const i=gre(oC(e[0],e[1]),oC(t[0],t[1]));return!i||!Ub(i,t,n)||!Ub(i,e,n)?null:i}function aC(...e){return mF(e)}function yb(e){return mF(e)}const pre=(e,t)=>{const[n,i]=e;let r=0;for(let s=0;s<t.length;s++){const o=(s+1)%t.length,[a,l]=t[s],[c,u]=t[o];l<=i?u>i&&(c-a)*(i-l)-(n-a)*(u-l)>0&&r++:u<=i&&(c-a)*(i-l)-(n-a)*(u-l)<0&&r--}return r!==0};function mF(e){return Ure(e)?e:[...e,e[0]]}function Ure(e){return _s(e[0],e[e.length-1])}function ki(e,t){return Fo([e,t])}const Eb=([e,t],[n,i])=>e<=n?t>=n:e>=n?i>=e:!1,vb=([e,t],[n,i])=>{const r=Math.max(e,n),s=Math.min(t,i);return r<=s?Fo([r,s]):null},rU=(e,[t,n])=>e>=t&&e<=n;function bre(e,t){return[e,t]}function k8([e,t,n],i){const r=(u,d,f)=>(u[0]-f[0])*(d[1]-f[1])-(d[0]-f[0])*(u[1]-f[1]),s=r(i,e,t),o=r(i,t,n),a=r(i,n,e),l=s<0||o<0||a<0,c=s>0||o>0||a>0;return!(l&&c)}const dh=e=>{const t=e.map(i=>i[0]),n=e.map(i=>i[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},wb=(e,t,n,i)=>{const r=n.map(h=>h[e]),s=Math.max(...r),o=Math.min(...r),a=s-o,l=a===0?1:t/a;let c=1/0;const u=n.map(h=>{const m=h[e]*l,p=[...h];return p[e]=m,m<c&&(c=m),p});if(!i||u.length===2)return u;const d=o-c;return u.map(h=>h.map((m,p)=>p===e?m+d:m))},An=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t];var pF={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(_a,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(c,u){this._listeners[c]=this._listeners[c]||[],this._listeners[c].indexOf(u)<0&&this._listeners[c].push(u)},n.prototype.removeEventListener=function(c,u){if(this._listeners[c]){var d=this._listeners[c].indexOf(u);d>=0&&this._listeners[c].splice(d,1)}},n.prototype.dispatchEvent=function(c){if(this._listeners[c.type]&&this._listeners[c.type].length)for(var u=this._listeners[c.type].slice(),d=0,f=u.length;d<f;++d)u[d].call(this,c)};var i=function(c){return typeof c.constructor=="function"&&c.constructor.name==="GeneratorFunction"},r=function(c){return{next:function(){var u=c();return u?{value:u}:{done:!0}}}},s=function(c){var u=!1;return{next:function(){return u?{done:!0}:(u=!0,{value:c})}}},o=function(c,u){var d=typeof c;if(d==="object"){if(typeof c.next=="function")return c;if(typeof c.then=="function")return s(c)}return d==="function"?i(c)?c():r(c):s(u.resolve(c))},a=function(c,u,d){this.target=c,this.type=u,this.data=d},l=function(c,u,d){if(n.call(this),typeof u!="number"||Math.floor(u)!==u||u<1)throw new Error("Invalid concurrency");this._concurrency=u,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(c,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(c){return typeof c<"u"&&(this._concurrency=c,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var c=this,u=this._options.promise;return this._promise=new u(function(d,f){c._callbacks={reject:f,resolve:d},c._proceed()}),this._promise},l.prototype._fireEvent=function(c,u){this.dispatchEvent(new a(this,c,u))},l.prototype._settle=function(c){c?this._callbacks.reject(c):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(c,u){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:c,result:u}),this._proceed())},l.prototype._onPooledPromiseRejected=function(c,u){this._size--,this.active()&&(this._fireEvent("rejected",{promise:c,error:u}),this._settle(u||new Error("Unknown error")))},l.prototype._trackPromise=function(c){var u=this;c.then(function(d){u._onPooledPromiseFulfilled(c,d)},function(d){u._onPooledPromiseRejected(c,d)}).catch(function(d){u._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var c={done:!1};this._size<this._concurrency&&!(c=this._iterator.next()).done;)this._size++,this._trackPromise(c.value);this._done=c===null||!!c.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})})(pF);var yre=pF.exports;const Ere=ll(yre);class lC{pool;entries={};constructor(t,n){this.pool=new Ere(t,n)}all(){const t=n=>{if(n.data.result){const[i,r]=n.data.result;this.entries[i]=r}};return this.pool.addEventListener("fulfilled",t),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",t)}),Object.values(this.entries)))}}let UF=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function vre(){return Math.floor(Math.random()*2**31)}class bF{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const cC=()=>{const e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),i=`${e.getDate()}`.padStart(2,"0"),r=`${e.getHours()}`.padStart(2,"0"),s=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${i}-${r}${s}`},q1=e=>e.charAt(0).toUpperCase()+e.slice(1),wre=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),y7=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,_re=e=>y7(e)||e instanceof Element&&!!e.closest("label, button"),uu=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),$m=({fontFamily:e})=>{for(const[t,n]of Object.entries(Ye))if(n===e)return`${t}${eF(n).map(i=>`, ${i}`).join("")}`;return F0},ot=({fontSize:e,fontFamily:t})=>`${e}px ${$m({fontFamily:t})}`,Ya=(e,t)=>{let n=0,i=null;const r=(...s)=>{i=s,clearTimeout(n),n=window.setTimeout(()=>{i=null,e(...s)},t)};return r.flush=()=>{if(clearTimeout(n),i){const s=i;i=null,e(...s)}},r.cancel=()=>{i=null,clearTimeout(n)},r},Wh=(e,t)=>{let n=null,i=null,r=null;const s=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),i=null,r&&(i=r,r=null,s(i))})},o=(...a)=>{i=a,n===null?s(i):t?.trailing&&(r=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),i&&(e(...r||i),i=r=null)},o.cancel=()=>{i=r=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},Wa=e=>1-Math.pow(1-e,4),uC=(e,t,n)=>(t-e)*Wa(n)+e,Tre=({fromValues:e,toValues:t,onStep:n,duration:i=250,interpolateValue:r,onStart:s,onEnd:o,onCancel:a})=>{let l=!1,c=0,u;function d(f){if(l)return;u===void 0&&(u=f,s?.());const h=Math.min(f-u,i),m=Wa(h/i),p={};if(Object.keys(e).forEach(y=>{const b=y,E=(t[b]-e[b])*m+e[b];p[b]=E}),n(p),h<i){const y=h/i,b={};Object.keys(e).forEach(E=>{const v=E,w=e[v],S=t[v];let k;k=r?r(w,S,y,v):uC(w,S,y),k==null&&(k=uC(w,S,y)),b[v]=k}),n(b),c=window.requestAnimationFrame(d)}else n(t),o?.()}return c=window.requestAnimationFrame(d),()=>{a?.(),l=!0,window.cancelAnimationFrame(c)}},Sre=(e,t)=>{if(!e.length||t<1)return[];let n=0,i=0;const r=Array(Math.ceil(e.length/t));for(;n<e.length;)r[i++]=e.slice(n,n+=t);return r},Li=(e,t)=>Math.abs(e-t),Xt=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked,fromSelection:t.fromSelection??!1},q=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),No?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),Tt=({clientX:e,clientY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e-i)/n.value-s,l=(t-r)/n.value-o;return{x:a,y:l}},Nr=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e+s)*n.value+i,l=(t+o)*n.value+r;return{x:a,y:l}},sU=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),Ire="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿",xre="֑-߿יִ-﷽ﹰ-ﻼ",Cre=new RegExp(`^[^${Ire}]*[${xre}]`),yF=e=>Cre.test(e),Fa=e=>{const[t,n]=e;return{x:t,y:n}},EF=e=>{if(e?.name==="AbortError"){console.warn(e);return}throw e},vF=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let i=n-1;for(;++i<e.length;)if(t(e[i],i,e))return i;return-1},du=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let i=n+1;for(;--i>-1;)if(t(e[i],i,e))return i;return-1},Are=(e,t)=>{for(let n=0;n<e.length;n++){const i=t(e[n],n);if(i!=null)return i}},ds=e=>{const t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===Pe.transparent},JU=e=>e.fillStyle!=="solid"||ds(e.backgroundColor),c5=()=>{let e,t;const n=new Promise((i,r)=>{e=i,t=r});return n.resolve=e,n.reject=t,n},dC=(e,t)=>{const n=[{value:1,symbol:"b"},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"}],i=/\.0+$|(\.[0-9]*[1-9])0+$/;let r;for(r=n.length-1;r>0&&!(e>=n[r].value);r--);return(e/n[r].value).toFixed(t).replace(i,"$1")+n[r].symbol},E7=()=>document.querySelector('meta[name="version"]')?.content||tF,Mre=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;const{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},kre=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},Lw=e=>{e.preventDefault(),e.returnValue=""},wF=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),Kh=()=>Date.now(),be=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),Rre=e=>e.reduce((t,n,i)=>(t.set(n.id,[n,i]),t),new Map),oa=(e,t)=>e.reduce((n,i,r)=>(n[t?t(i):r]=i,n),{}),Dre=e=>e.reduce((t,n,i)=>{const r={...n,prev:null,next:null};if(i!==0){const s=t[i-1];if(r.prev=s,s.next=r,i===e.length-1){const o=t[0];r.next=o,o.prev=r}}return t.push(r),t},[]),Dl=e=>Array.isArray(e)?e:e.values(),Lre=e=>Array.isArray(e)?e:Array.from(Dl(e)),Ore=()=>qP.TEST==="production",Ow=()=>qP.DEVELOPMENT==="production",Nre=()=>typeof process<"u"&&!0,_F=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),e2=(e,t)=>{let n=!1;for(const i in t){const r=t[i];if(typeof r<"u"){if(e[i]===r&&(typeof r!="object"||r===null))continue;n=!0}}return n?{...e,...t}:e},Gm=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Pre=()=>Gm()==="iframe",Xm=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,v7=e=>{const t=e?.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},fC=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,Bi=(e,t,n,i=!1)=>{const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return i&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(const o of n)if(!(e[o]===t[o]||fC(e[o],t[o])))return i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return r.every(o=>{const a=n?.[o],l=a?a(e[o],t[o]):e[o]===t[o]||fC(e[o],t[o]);return!l&&i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},u5=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e?.(r),!n||!r?.defaultPrevented)return t?.(r)},Po=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function jn(e,t){if(!e)throw new Error(t)}const Fre=e=>{let t,n;const i=function(r){const s=Object.entries(r);if(t){let a=!0;for(const[l,c]of s)if(t.get(l)!==c){a=!1;break}if(a)return n}const o=e(r);return t=new Map(s),n=o,o};return i.clear=()=>{t=void 0,n=void 0},i},TF=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),Ba=e=>JSON.parse(JSON.stringify(e)),Ng=(e,t)=>Bi(e,t)?e:t;function Kt(e,t,n,i){return e?(e?.addEventListener?.(t,n,i),()=>{e?.removeEventListener?.(t,n,i)}):()=>{}}function Bre(e,t=!0){const n=e.length;if(n<4)return"";let i=e[0],r=e[1];const s=e[2];let o=`M${i[0].toFixed(2)},${i[1].toFixed(2)} Q${r[0].toFixed(2)},${r[1].toFixed(2)} ${iU(r[0],s[0]).toFixed(2)},${iU(r[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)i=e[a],r=e[a+1],o+=`${iU(i[0],r[0]).toFixed(2)},${iU(i[1],r[1]).toFixed(2)} `;return t&&(o+="Z"),o}const SF=e=>e.replace(/\r?\n|\r/g,`
`),Fo=e=>e,Sc=async(e,...t)=>new Promise(n=>{n(e(...t))}),zre=(...e)=>Math.max(...e.map(t=>t?1:0))>0,Hre=e=>{try{return JSON.parse(e)}catch{return null}},t2=e=>e.replace(/"/g,"&quot;"),R8=e=>Array.isArray(e)?e:[e],Vre=e=>Array.isArray(e),IF=e=>Vre(e)?e.length:e instanceof Map||e instanceof Set?e.size:Object.keys(e).length,xF=(e,t)=>{if(IF(e)===0)return null;const n=t||(r=>r);let i=null;for(const r of e){const s=n(r);if((i===null||i===s)&&s!=null)i=s;else return null}return i};let $re=new bF(Date.now());const Ts=()=>Math.floor($re.next()*2**31),tr=()=>UF();var Nw={};Object.defineProperty(Nw,"__esModule",{value:!0});var CF=Nw.sanitizeUrl=void 0,Gre=/^([^\w]*)(javascript|data|vbscript)/im,Xre=/&#(\w+)(^\w|;)?/g,jre=/&(newline|tab);/gi,Yre=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Wre=/^.+(:|&colon;)/gim,Kre=[".","/"];function Zre(e){return Kre.indexOf(e[0])>-1}function qre(e){return e.replace(Xre,function(t,n){return String.fromCharCode(n)})}function Qre(e){var t=qre(e||"").replace(jre,"").replace(Yre,"").trim();if(!t)return"about:blank";if(Zre(t))return t;var n=t.match(Wre);if(!n)return t;var i=n[0];return Gre.test(i)?"about:blank":t}CF=Nw.sanitizeUrl=Qre;const Hr=e=>(e=e.trim(),e&&CF(t2(e))),AF=e=>!!(e?.includes(location.origin)||e?.startsWith("/")),Pw=e=>{if(e=Hr(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};class Ns{subscribers=[];on(...t){const n=t.flat().filter(i=>typeof i=="function");return this.subscribers.push(...n),()=>this.off(n)}once(...t){const n=t.flat().filter(r=>typeof r=="function");n.push(()=>i());const i=this.on(...n);return i}off(...t){const n=t.flat();this.subscribers=this.subscribers.filter(i=>!n.includes(i))}trigger(...t){for(const n of this.subscribers)n(...t);return this}clear(){this.subscribers=[]}}function MF(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=MF(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function he(){for(var e=0,t,n,i="";e<arguments.length;)(t=arguments[e++])&&(n=MF(t))&&(i&&(i+=" "),i+=n);return i}var kF="Expected a function",hC=NaN,Jre="[object Symbol]",ese=/^\s+|\s+$/g,tse=/^[-+]0x[0-9a-f]+$/i,nse=/^0b[01]+$/i,ise=/^0o[0-7]+$/i,rse=parseInt,sse=typeof _a=="object"&&_a&&_a.Object===Object&&_a,ose=typeof self=="object"&&self&&self.Object===Object&&self,ase=sse||ose||Function("return this")(),lse=Object.prototype,cse=lse.toString,use=Math.max,dse=Math.min,D8=function(){return ase.Date.now()};function fse(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(kF);t=gC(t)||0,_b(n)&&(u=!!n.leading,d="maxWait"in n,s=d?use(gC(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(k){var _=i,T=r;return i=r=void 0,c=k,o=e.apply(T,_),o}function m(k){return c=k,a=setTimeout(b,t),u?h(k):o}function p(k){var _=k-l,T=k-c,A=t-_;return d?dse(A,s-T):A}function y(k){var _=k-l,T=k-c;return l===void 0||_>=t||_<0||d&&T>=s}function b(){var k=D8();if(y(k))return E(k);a=setTimeout(b,p(k))}function E(k){return a=void 0,f&&i?h(k):(i=r=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function w(){return a===void 0?o:E(D8())}function S(){var k=D8(),_=y(k);if(i=arguments,r=this,l=k,_){if(a===void 0)return m(l);if(d)return a=setTimeout(b,t),h(l)}return a===void 0&&(a=setTimeout(b,t)),o}return S.cancel=v,S.flush=w,S}function hse(e,t,n){var i=!0,r=!0;if(typeof e!="function")throw new TypeError(kF);return _b(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),fse(e,t,{leading:i,maxWait:t,trailing:r})}function _b(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function gse(e){return!!e&&typeof e=="object"}function mse(e){return typeof e=="symbol"||gse(e)&&cse.call(e)==Jre}function gC(e){if(typeof e=="number")return e;if(mse(e))return hC;if(_b(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=_b(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(ese,"");var n=nse.test(e);return n||ise.test(e)?rse(e.slice(2),n?2:8):tse.test(e)?hC:+e}var pse=hse;const So=ll(pse);function w7(e,t,n){if(e&&e.length){const[i,r]=t,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[c,u]=l;l[0]=(c-i)*o-(u-r)*a+i,l[1]=(c-i)*a+(u-r)*o+r}}}function Use(e,t,n){const i=[];e.forEach(r=>i.push(...r)),w7(i,t,n)}function bse(e,t){return e[0]===t[0]&&e[1]===t[1]}function yse(e,t,n,i=1){const r=n,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(r)for(const c of o)w7(c,a,r);const l=Ese(o,s,i);if(r){for(const c of o)w7(c,a,-r);Use(l,a,-r)}return l}function Ese(e,t,n){const i=[];for(const c of e){const u=[...c];bse(u[0],u[u.length-1])||u.push([u[0][0],u[0][1]]),u.length>2&&i.push(u)}const r=[];t=Math.max(t,.1);const s=[];for(const c of i)for(let u=0;u<c.length-1;u++){const d=c[u],f=c[u+1];if(d[1]!==f[1]){const h=Math.min(d[1],f[1]);s.push({ymin:h,ymax:Math.max(d[1],f[1]),x:h===d[1]?d[0]:f[0],islope:(f[0]-d[0])/(f[1]-d[1])})}}if(s.sort((c,u)=>c.ymin<u.ymin?-1:c.ymin>u.ymin?1:c.x<u.x?-1:c.x>u.x?1:c.ymax===u.ymax?0:(c.ymax-u.ymax)/Math.abs(c.ymax-u.ymax)),!s.length)return r;let o=[],a=s[0].ymin,l=0;for(;o.length||s.length;){if(s.length){let c=-1;for(let d=0;d<s.length&&!(s[d].ymin>a);d++)c=d;s.splice(0,c+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(c=>!(c.edge.ymax<=a)),o.sort((c,u)=>c.edge.x===u.edge.x?0:(c.edge.x-u.edge.x)/Math.abs(c.edge.x-u.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let c=0;c<o.length;c=c+2){const u=c+1;if(u>=o.length)break;const d=o[c].edge,f=o[u].edge;r.push([[Math.round(d.x),a],[Math.round(f.x),a]])}a+=n,o.forEach(c=>{c.edge.x=c.edge.x+n*c.edge.islope}),l++}return r}function jm(e,t){var n;const i=t.hachureAngle+90;let r=t.hachureGap;r<0&&(r=t.strokeWidth*4),r=Math.max(r,.1);let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=r),yse(e,r,i,s||1)}class Fw{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const i=jm(t,n);return{type:"fillSketch",ops:this.renderLines(i,n)}}renderLines(t,n){const i=[];for(const r of t)i.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],n));return i}}function d5(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class vse extends Fw{fillPolygons(t,n){let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);const r=Object.assign({},n,{hachureGap:i}),s=jm(t,r),o=Math.PI/180*n.hachureAngle,a=[],l=i*.5*Math.cos(o),c=i*.5*Math.sin(o);for(const[d,f]of s)d5([d,f])&&a.push([[d[0]-l,d[1]+c],[...f]],[[d[0]+l,d[1]-c],[...f]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class wse extends Fw{fillPolygons(t,n){const i=this._fillPolygons(t,n),r=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,r);return i.ops=i.ops.concat(s.ops),i}}class _se{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const i=jm(t,n);return this.dotsOnLines(i,n)}dotsOnLines(t,n){const i=[];let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=r/4;for(const a of t){const l=d5(a),c=l/r,u=Math.ceil(c)-1,d=l-u*r,f=(a[0][0]+a[1][0])/2-r/4,h=Math.min(a[0][1],a[1][1]);for(let m=0;m<u;m++){const p=h+d+m*r,y=f-o+Math.random()*2*o,b=p-o+Math.random()*2*o,E=this.helper.ellipse(y,b,s,s,n);i.push(...E.ops)}}return{type:"fillSketch",ops:i}}}class Tse{constructor(t){this.helper=t}fillPolygons(t,n){const i=jm(t,n);return{type:"fillSketch",ops:this.dashedLine(i,n)}}dashedLine(t,n){const i=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,r=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,s=[];return t.forEach(o=>{const a=d5(o),l=Math.floor(a/(i+r)),c=(a+r-l*(i+r))/2;let u=o[0],d=o[1];u[0]>d[0]&&(u=o[1],d=o[0]);const f=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let h=0;h<l;h++){const m=h*(i+r),p=m+i,y=[u[0]+m*Math.cos(f)+c*Math.cos(f),u[1]+m*Math.sin(f)+c*Math.sin(f)],b=[u[0]+p*Math.cos(f)+c*Math.cos(f),u[1]+p*Math.sin(f)+c*Math.sin(f)];s.push(...this.helper.doubleLineOps(y[0],y[1],b[0],b[1],n))}}),s}}class Sse{constructor(t){this.helper=t}fillPolygons(t,n){const i=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,r=n.zigzagOffset<0?i:n.zigzagOffset;n=Object.assign({},n,{hachureGap:i+r});const s=jm(t,n);return{type:"fillSketch",ops:this.zigzagLines(s,r,n)}}zigzagLines(t,n,i){const r=[];return t.forEach(s=>{const o=d5(s),a=Math.round(o/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<a;d++){const f=d*2*n,h=(d+1)*2*n,m=Math.sqrt(2*Math.pow(n,2)),p=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],y=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],b=[p[0]+m*Math.cos(u+Math.PI/4),p[1]+m*Math.sin(u+Math.PI/4)];r.push(...this.helper.doubleLineOps(p[0],p[1],b[0],b[1],i),...this.helper.doubleLineOps(b[0],b[1],y[0],y[1],i))}}),r}}const lr={};function Ise(e,t){let n=e.fillStyle||"hachure";if(!lr[n])switch(n){case"zigzag":lr[n]||(lr[n]=new vse(t));break;case"cross-hatch":lr[n]||(lr[n]=new wse(t));break;case"dots":lr[n]||(lr[n]=new _se(t));break;case"dashed":lr[n]||(lr[n]=new Tse(t));break;case"zigzag-line":lr[n]||(lr[n]=new Sse(t));break;case"hachure":default:n="hachure",lr[n]||(lr[n]=new Fw(t));break}return lr[n]}const xse=0,_7=1,RF=2,oU={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Cse(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:xse,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:_7,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:RF,text:""},t}function L8(e,t){return e.type===t}function Bw(e){const t=[],n=Cse(e);let i="BOD",r=0,s=n[r];for(;!L8(s,RF);){let o=0;const a=[];if(i==="BOD")if(s.text==="M"||s.text==="m")r++,o=oU[s.text],i=s.text;else return Bw("M0,0"+e);else L8(s,_7)?o=oU[i]:(r++,o=oU[s.text],i=s.text);if(r+o<n.length){for(let l=r;l<r+o;l++){const c=n[l];if(L8(c,_7))a[a.length]=+c.text;else throw new Error("Param not a number: "+i+","+c.text)}if(typeof oU[i]=="number"){const l={key:i,data:a};t.push(l),r+=o,s=n[r],i==="M"&&(i="L"),i==="m"&&(i="l")}else throw new Error("Bad segment: "+i)}else throw new Error("Path data ended short")}return t}function DF(e){let t=0,n=0,i=0,r=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[i,r]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),i=t,r=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=i,n=r;break}return s}function LF(e){const t=[];let n="",i=0,r=0,s=0,o=0,a=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[i,r]=u,[s,o]=u;break;case"C":t.push({key:"C",data:[...u]}),i=u[4],r=u[5],a=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[i,r]=u;break;case"H":i=u[0],t.push({key:"L",data:[i,r]});break;case"V":r=u[0],t.push({key:"L",data:[i,r]});break;case"S":{let d=0,f=0;n==="C"||n==="S"?(d=i+(i-a),f=r+(r-l)):(d=i,f=r),t.push({key:"C",data:[d,f,...u]}),a=u[0],l=u[1],i=u[2],r=u[3];break}case"T":{const[d,f]=u;let h=0,m=0;n==="Q"||n==="T"?(h=i+(i-a),m=r+(r-l)):(h=i,m=r);const p=i+2*(h-i)/3,y=r+2*(m-r)/3,b=d+2*(h-d)/3,E=f+2*(m-f)/3;t.push({key:"C",data:[p,y,b,E,d,f]}),a=h,l=m,i=d,r=f;break}case"Q":{const[d,f,h,m]=u,p=i+2*(d-i)/3,y=r+2*(f-r)/3,b=h+2*(d-h)/3,E=m+2*(f-m)/3;t.push({key:"C",data:[p,y,b,E,h,m]}),a=d,l=f,i=h,r=m;break}case"A":{const d=Math.abs(u[0]),f=Math.abs(u[1]),h=u[2],m=u[3],p=u[4],y=u[5],b=u[6];d===0||f===0?(t.push({key:"C",data:[i,r,y,b,y,b]}),i=y,r=b):(i!==y||r!==b)&&(OF(i,r,y,b,d,f,h,m,p).forEach(function(v){t.push({key:"C",data:v})}),i=y,r=b);break}case"Z":t.push({key:"Z",data:[]}),i=s,r=o;break}n=c}return t}function Ase(e){return Math.PI*e/180}function Pg(e,t,n){const i=e*Math.cos(n)-t*Math.sin(n),r=e*Math.sin(n)+t*Math.cos(n);return[i,r]}function OF(e,t,n,i,r,s,o,a,l,c){const u=Ase(o);let d=[],f=0,h=0,m=0,p=0;if(c)[f,h,m,p]=c;else{[e,t]=Pg(e,t,-u),[n,i]=Pg(n,i,-u);const P=(e-n)/2,N=(t-i)/2;let K=P*P/(r*r)+N*N/(s*s);K>1&&(K=Math.sqrt(K),r=K*r,s=K*s);const H=a===l?-1:1,z=r*r,V=s*s,$=z*V-z*N*N-V*P*P,G=z*N*N+V*P*P,J=H*Math.sqrt(Math.abs($/G));m=J*r*N/s+(e+n)/2,p=J*-s*P/r+(t+i)/2,f=Math.asin(parseFloat(((t-p)/s).toFixed(9))),h=Math.asin(parseFloat(((i-p)/s).toFixed(9))),e<m&&(f=Math.PI-f),n<m&&(h=Math.PI-h),f<0&&(f=Math.PI*2+f),h<0&&(h=Math.PI*2+h),l&&f>h&&(f=f-Math.PI*2),!l&&h>f&&(h=h-Math.PI*2)}let y=h-f;if(Math.abs(y)>Math.PI*120/180){const P=h,N=n,K=i;l&&h>f?h=f+Math.PI*120/180*1:h=f+Math.PI*120/180*-1,n=m+r*Math.cos(h),i=p+s*Math.sin(h),d=OF(n,i,N,K,r,s,o,0,l,[h,P,m,p])}y=h-f;const b=Math.cos(f),E=Math.sin(f),v=Math.cos(h),w=Math.sin(h),S=Math.tan(y/4),k=4/3*r*S,_=4/3*s*S,T=[e,t],A=[e+k*E,t-_*b],C=[n+k*w,i-_*v],R=[n,i];if(A[0]=2*T[0]-A[0],A[1]=2*T[1]-A[1],c)return[A,C,R].concat(d);{d=[A,C,R].concat(d);const P=[];for(let N=0;N<d.length;N+=3){const K=Pg(d[N][0],d[N][1],u),H=Pg(d[N+1][0],d[N+1][1],u),z=Pg(d[N+2][0],d[N+2][1],u);P.push([K[0],K[1],H[0],H[1],z[0],z[1]])}return P}}const Mse={randOffset:Ose,randOffsetWithRange:Nse,ellipse:Dse,doubleLineOps:Pse};function NF(e,t,n,i,r){return{type:"path",ops:Ka(e,t,n,i,r)}}function n2(e,t,n){const i=(e||[]).length;if(i>2){const r=[];for(let s=0;s<i-1;s++)r.push(...Ka(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&r.push(...Ka(e[i-1][0],e[i-1][1],e[0][0],e[0][1],n)),{type:"path",ops:r}}else if(i===2)return NF(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function kse(e,t){return n2(e,!0,t)}function Rse(e,t,n,i,r){const s=[[e,t],[e+n,t],[e+n,t+i],[e,t+i]];return kse(s,r)}function mC(e,t){let n=yC(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const i=yC(e,1.5*(1+t.roughness*.22),Fse(t));n=n.concat(i)}return{type:"path",ops:n}}function Dse(e,t,n,i,r){const s=PF(n,i,r);return T7(e,t,r,s).opset}function PF(e,t,n){const i=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),r=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*i)),s=Math.PI*2/r;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=Me(o*l,n),a+=Me(a*l,n),{increment:s,rx:o,ry:a}}function T7(e,t,n,i){const[r,s]=EC(i.increment,e,t,i.rx,i.ry,1,i.increment*Tb(.1,Tb(.4,1,n),n),n);let o=Sb(r,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=EC(i.increment,e,t,i.rx,i.ry,1.5,0,n),l=Sb(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function pC(e,t,n,i,r,s,o,a,l){const c=e,u=t;let d=Math.abs(n/2),f=Math.abs(i/2);d+=Me(d*.01,l),f+=Me(f*.01,l);let h=r,m=s;for(;h<0;)h+=Math.PI*2,m+=Math.PI*2;m-h>Math.PI*2&&(h=0,m=Math.PI*2);const p=Math.PI*2/l.curveStepCount,y=Math.min(p/2,(m-h)/2),b=vC(y,c,u,d,f,h,m,1,l);if(!l.disableMultiStroke){const E=vC(y,c,u,d,f,h,m,1.5,l);b.push(...E)}return o&&(a?b.push(...Ka(c,u,c+d*Math.cos(h),u+f*Math.sin(h),l),...Ka(c,u,c+d*Math.cos(m),u+f*Math.sin(m),l)):b.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(h),u+f*Math.sin(h)]})),{type:"path",ops:b}}function UC(e,t){const n=LF(DF(Bw(e))),i=[];let r=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{s=[a[0],a[1]],r=[a[0],a[1]];break}case"L":i.push(...Ka(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,c,u,d,f,h]=a;i.push(...Bse(l,c,u,d,f,h,s,t)),s=[f,h];break}case"Z":i.push(...Ka(s[0],s[1],r[0],r[1],t)),s=[r[0],r[1]];break}return{type:"path",ops:i}}function O8(e,t){const n=[];for(const i of e)if(i.length){const r=t.maxRandomnessOffset||0,s=i.length;if(s>2){n.push({op:"move",data:[i[0][0]+Me(r,t),i[0][1]+Me(r,t)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[i[o][0]+Me(r,t),i[o][1]+Me(r,t)]})}}return{type:"fillPath",ops:n}}function ef(e,t){return Ise(t,Mse).fillPolygons(e,t)}function Lse(e,t,n,i,r,s,o){const a=e,l=t;let c=Math.abs(n/2),u=Math.abs(i/2);c+=Me(c*.01,o),u+=Me(u*.01,o);let d=r,f=s;for(;d<0;)d+=Math.PI*2,f+=Math.PI*2;f-d>Math.PI*2&&(d=0,f=Math.PI*2);const h=(f-d)/o.curveStepCount,m=[];for(let p=d;p<=f;p=p+h)m.push([a+c*Math.cos(p),l+u*Math.sin(p)]);return m.push([a+c*Math.cos(f),l+u*Math.sin(f)]),m.push([a,l]),ef([m],o)}function Ose(e,t){return Me(e,t)}function Nse(e,t,n){return Tb(e,t,n)}function Pse(e,t,n,i,r){return Ka(e,t,n,i,r,!0)}function Fse(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function FF(e){return e.randomizer||(e.randomizer=new bF(e.seed||0)),e.randomizer.next()}function Tb(e,t,n,i=1){return n.roughness*i*(FF(n)*(t-e)+e)}function Me(e,t,n=1){return Tb(-e,e,t,n)}function Ka(e,t,n,i,r,s=!1){const o=s?r.disableMultiStrokeFill:r.disableMultiStroke,a=bC(e,t,n,i,r,!0,!1);if(o)return a;const l=bC(e,t,n,i,r,!0,!0);return a.concat(l)}function bC(e,t,n,i,r,s,o){const a=Math.pow(e-n,2)+Math.pow(t-i,2),l=Math.sqrt(a);let c=1;l<200?c=1:l>500?c=.4:c=-.0016668*l+1.233334;let u=r.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const d=u/2,f=.2+FF(r)*.2;let h=r.bowing*r.maxRandomnessOffset*(i-t)/200,m=r.bowing*r.maxRandomnessOffset*(e-n)/200;h=Me(h,r,c),m=Me(m,r,c);const p=[],y=()=>Me(d,r,c),b=()=>Me(u,r,c),E=r.preserveVertices;return o?p.push({op:"move",data:[e+(E?0:y()),t+(E?0:y())]}):p.push({op:"move",data:[e+(E?0:Me(u,r,c)),t+(E?0:Me(u,r,c))]}),o?p.push({op:"bcurveTo",data:[h+e+(n-e)*f+y(),m+t+(i-t)*f+y(),h+e+2*(n-e)*f+y(),m+t+2*(i-t)*f+y(),n+(E?0:y()),i+(E?0:y())]}):p.push({op:"bcurveTo",data:[h+e+(n-e)*f+b(),m+t+(i-t)*f+b(),h+e+2*(n-e)*f+b(),m+t+2*(i-t)*f+b(),n+(E?0:b()),i+(E?0:b())]}),p}function yC(e,t,n){const i=[];i.push([e[0][0]+Me(t,n),e[0][1]+Me(t,n)]),i.push([e[0][0]+Me(t,n),e[0][1]+Me(t,n)]);for(let r=1;r<e.length;r++)i.push([e[r][0]+Me(t,n),e[r][1]+Me(t,n)]),r===e.length-1&&i.push([e[r][0]+Me(t,n),e[r][1]+Me(t,n)]);return Sb(i,null,n)}function Sb(e,t,n){const i=e.length,r=[];if(i>3){const s=[],o=1-n.curveTightness;r.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<i;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(r.push({op:"move",data:[e[1][0],e[1][1]]}),r.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&r.push(...Ka(e[0][0],e[0][1],e[1][0],e[1][1],n));return r}function EC(e,t,n,i,r,s,o,a){const l=a.roughness===0,c=[],u=[];if(l){e=e/4,u.push([t+i*Math.cos(-e),n+r*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const f=[t+i*Math.cos(d),n+r*Math.sin(d)];c.push(f),u.push(f)}u.push([t+i*Math.cos(0),n+r*Math.sin(0)]),u.push([t+i*Math.cos(e),n+r*Math.sin(e)])}else{const d=Me(.5,a)-Math.PI/2;u.push([Me(s,a)+t+.9*i*Math.cos(d-e),Me(s,a)+n+.9*r*Math.sin(d-e)]);const f=Math.PI*2+d-.01;for(let h=d;h<f;h=h+e){const m=[Me(s,a)+t+i*Math.cos(h),Me(s,a)+n+r*Math.sin(h)];c.push(m),u.push(m)}u.push([Me(s,a)+t+i*Math.cos(d+Math.PI*2+o*.5),Me(s,a)+n+r*Math.sin(d+Math.PI*2+o*.5)]),u.push([Me(s,a)+t+.98*i*Math.cos(d+o),Me(s,a)+n+.98*r*Math.sin(d+o)]),u.push([Me(s,a)+t+.9*i*Math.cos(d+o*.5),Me(s,a)+n+.9*r*Math.sin(d+o*.5)])}return[u,c]}function vC(e,t,n,i,r,s,o,a,l){const c=s+Me(.1,l),u=[];u.push([Me(a,l)+t+.9*i*Math.cos(c-e),Me(a,l)+n+.9*r*Math.sin(c-e)]);for(let d=c;d<=o;d=d+e)u.push([Me(a,l)+t+i*Math.cos(d),Me(a,l)+n+r*Math.sin(d)]);return u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),Sb(u,null,l)}function Bse(e,t,n,i,r,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const d=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(f?0:Me(c[0],a)),o[1]+(f?0:Me(c[0],a))]}),u=f?[r,s]:[r+Me(c[h],a),s+Me(c[h],a)],l.push({op:"bcurveTo",data:[e+Me(c[h],a),t+Me(c[h],a),n+Me(c[h],a),i+Me(c[h],a),u[0],u[1]]});return l}function Fg(e){return[...e]}function zse(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const i=[];if(n===3)i.push(Fg(e[0]),Fg(e[1]),Fg(e[2]),Fg(e[2]));else{const r=[];r.push(e[0],e[0]);for(let a=1;a<e.length;a++)r.push(e[a]),a===e.length-1&&r.push(e[a]);const s=[],o=1-t;i.push(Fg(r[0]));for(let a=1;a+2<r.length;a++){const l=r[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*r[a+1][0]-o*r[a-1][0])/6,l[1]+(o*r[a+1][1]-o*r[a-1][1])/6],s[2]=[r[a+1][0]+(o*r[a][0]-o*r[a+2][0])/6,r[a+1][1]+(o*r[a][1]-o*r[a+2][1])/6],s[3]=[r[a+1][0],r[a+1][1]],i.push(s[1],s[2],s[3])}}return i}function Hse(e,t){return Math.sqrt(i2(e,t))}function i2(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Vse(e,t,n){const i=i2(t,n);if(i===0)return i2(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),i2(e,su(t,n,r))}function su(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function $se(e,t){const n=e[t+0],i=e[t+1],r=e[t+2],s=e[t+3];let o=3*i[0]-2*n[0]-s[0];o*=o;let a=3*i[1]-2*n[1]-s[1];a*=a;let l=3*r[0]-2*s[0]-n[0];l*=l;let c=3*r[1]-2*s[1]-n[1];return c*=c,o<l&&(o=l),a<c&&(a=c),o+a}function S7(e,t,n,i){const r=i||[];if($se(e,t)<n){const s=e[t+0];r.length?Hse(r[r.length-1],s)>1&&r.push(s):r.push(s),r.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=su(o,a,.5),d=su(a,l,.5),f=su(l,c,.5),h=su(u,d,.5),m=su(d,f,.5),p=su(h,m,.5);S7([o,u,h,p],0,n,r),S7([p,m,f,c],0,n,r)}return r}function zw(e,t){return Ib(e,0,e.length,t)}function Ib(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=Vse(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(Ib(e,t,c+1,i,s),Ib(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}function Ym(e,t=.15,n){const i=[],r=(e.length-1)/3;for(let s=0;s<r;s++){const o=s*3;S7(e,o,t,i)}return n&&n>0?Ib(i,0,i.length,n):i}function Gse(e,t,n){const i=Bw(e),r=LF(DF(i)),s=[];let o=[],a=[0,0],l=[];const c=()=>{l.length>=4&&o.push(...Ym(l,t)),l=[]},u=()=>{c(),o.length&&(s.push(o),o=[])};for(const{key:f,data:h}of r)switch(f){case"M":u(),a=[h[0],h[1]],o.push(a);break;case"L":c(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const m=o.length?o[o.length-1]:a;l.push([m[0],m[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":c(),o.push([a[0],a[1]]);break}if(u(),!n)return s;const d=[];for(const f of s){const h=zw(f,n);h.length&&d.push(h)}return d}const Tr="none";class fh{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return vre()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,i){return{shape:t,sets:n||[],options:i||this.defaultOptions}}line(t,n,i,r,s){const o=this._o(s);return this._d("line",[NF(t,n,i,r,o)],o)}rectangle(t,n,i,r,s){const o=this._o(s),a=[],l=Rse(t,n,i,r,o);if(o.fill){const c=[[t,n],[t+i,n],[t+i,n+r],[t,n+r]];o.fillStyle==="solid"?a.push(O8([c],o)):a.push(ef([c],o))}return o.stroke!==Tr&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,i,r,s){const o=this._o(s),a=[],l=PF(i,r,o),c=T7(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const u=T7(t,n,o,l).opset;u.type="fillPath",a.push(u)}else a.push(ef([c.estimatedPoints],o));return o.stroke!==Tr&&a.push(c.opset),this._d("ellipse",a,o)}circle(t,n,i,r){const s=this.ellipse(t,n,i,i,r);return s.shape="circle",s}linearPath(t,n){const i=this._o(n);return this._d("linearPath",[n2(t,!1,i)],i)}arc(t,n,i,r,s,o,a=!1,l){const c=this._o(l),u=[],d=pC(t,n,i,r,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const h=pC(t,n,i,r,s,o,!0,!1,f);h.type="fillPath",u.push(h)}else u.push(Lse(t,n,i,r,s,o,c));return c.stroke!==Tr&&u.push(d),this._d("arc",u,c)}curve(t,n){const i=this._o(n),r=[],s=mC(t,i);if(i.fill&&i.fill!==Tr&&t.length>=3)if(i.fillStyle==="solid"){const o=mC(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=zse(t),a=Ym(o,10,(1+i.roughness)/2);r.push(ef([a],i))}return i.stroke!==Tr&&r.push(s),this._d("curve",r,i)}polygon(t,n){const i=this._o(n),r=[],s=n2(t,!0,i);return i.fill&&(i.fillStyle==="solid"?r.push(O8([t],i)):r.push(ef([t],i))),i.stroke!==Tr&&r.push(s),this._d("polygon",r,i)}path(t,n){const i=this._o(n),r=[];if(!t)return this._d("path",r,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==Tr,o=i.stroke!==Tr,a=!!(i.simplification&&i.simplification<1),l=a?4-4*(i.simplification||1):(1+i.roughness)/2,c=Gse(t,1,l),u=UC(t,i);if(s)if(i.fillStyle==="solid")if(c.length===1){const d=UC(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else r.push(O8(c,i));else r.push(ef(c,i));return o&&(a?c.forEach(d=>{r.push(n2(d,!1,i))}):r.push(u)),this._d("path",r,i)}opsToPath(t,n){let i="";for(const r of t.ops){const s=typeof n=="number"&&n>=0?r.data.map(o=>+o.toFixed(n)):r.data;switch(r.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `;break}}return i.trim()}toPaths(t){const n=t.sets||[],i=t.options||this.defaultOptions,r=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:Tr};break;case"fillPath":o={d:this.opsToPath(s),stroke:Tr,strokeWidth:0,fill:i.fill||Tr};break;case"fillSketch":o=this.fillSketch(s,i);break}o&&r.push(o)}return r}fillSketch(t,n){let i=n.fillWeight;return i<0&&(i=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Tr,strokeWidth:i,fill:Tr}}_mergedShape(t){return t.filter((n,i)=>i===0?!0:n.op!=="move")}}class Xse{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new fh(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":r.save(),r.strokeStyle=i.stroke==="none"?"transparent":i.stroke,r.lineWidth=i.strokeWidth,i.strokeLineDash&&r.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(r.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(r,o,s),r.restore();break;case"fillPath":{r.save(),r.fillStyle=i.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(r,o,s,a),r.restore();break}case"fillSketch":this.fillSketch(r,o,i);break}}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=r,this._drawToContext(t,n,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,i,r="nonzero"){t.beginPath();for(const s of n.ops){const o=typeof i=="number"&&i>=0?s.data.map(a=>+a.toFixed(i)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(r):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o),o}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o),o}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o),o}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s),s}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i),i}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i),i}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c),c}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i),i}path(t,n){const i=this.gen.path(t,n);return this.draw(i),i}}const aU="http://www.w3.org/2000/svg";class jse{constructor(t,n){this.svg=t,this.gen=new fh(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,s=r.createElementNS(aU,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=r.createElementNS(aU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break}case"fillPath":{l=r.createElementNS(aU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(r,a,i);break}}l&&s.appendChild(l)}return s}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2);const s=t.createElementNS(aU,"path");return s.setAttribute("d",this.opsToPath(n,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",r+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o)}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o)}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o)}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s)}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i)}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i)}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c)}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i)}path(t,n){const i=this.gen.path(t,n);return this.draw(i)}}const Vc={canvas(e,t){return new Xse(e,t)},svg(e,t){return new jse(e,t)},generator(e){return new fh(e)},newSeed(){return fh.newSeed()}};let BF=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const Yse=e=>{const{angle:t,width:n,height:i,x:r,y:s}=e,o=r+n/2,a=s+i/2,l=I(o,a);let c;return e.type==="diamond"?c=aC(W(I(o,s),l,t),W(I(r+n,a),l,t),W(I(o,s+i),l,t),W(I(r,a),l,t)):c=aC(W(I(r,s),l,t),W(I(r+n,s),l,t),W(I(r+n,s+i),l,t),W(I(r,s+i),l,t)),{type:"polygon",data:c}},Wse=e=>{const{width:t,height:n,angle:i,x:r,y:s}=e;return{type:"ellipse",data:{center:I(r+t/2,s+n/2),angle:i,halfWidth:t/2,halfHeight:n/2}}},wd=e=>{if(!e)return[];for(const t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},Kse=(e,t=I(0,0),n,i)=>{const r=l=>W(I(l[0]+t[0],l[1]+t[1]),i,n),s=wd(e),o=[];let a=I(0,0);for(const l of s){if(l.op==="move"){const c=a5(l.data);jn(c!=null,"Ops data is not a point"),a=r(c)}if(l.op==="bcurveTo"){const c=r(I(l.data[0],l.data[1])),u=r(I(l.data[2],l.data[3])),d=r(I(l.data[4],l.data[5]));o.push(Ln(a,c,u,d)),a=d}}return{type:"polycurve",data:o}},Zse=e=>{let t=e[0];const n=[];for(let i=1;i<e.length;i++){const r=e[i];n.push(Se(t,r)),t=r}return n},qse=(e,t,n=!1)=>{const i=s=>W(Ei(_f(ae(s),rn(e.x,e.y))),t,e.angle),r=Zse(e.points.map(s=>i(s)));return n?{type:"polygon",data:yb(r.flat())}:{type:"polyline",data:r}},Qse=(e,t,n=I(0,0),i,r)=>{const s=u=>W(I(u[0]+n[0],u[1]+n[1]),r,i);if(e.roundness===null)return{type:"polygon",data:yb(e.points.map(u=>s(u)))};const o=wd(t),a=[];let l=!1;for(const u of o)u.op==="move"?(l=!l,l&&a.push(I(u.data[0],u.data[1]))):u.op==="bcurveTo"?l&&(a.push(I(u.data[0],u.data[1])),a.push(I(u.data[2],u.data[3])),a.push(I(u.data[4],u.data[5]))):u.op==="lineTo"&&l&&a.push(I(u.data[0],u.data[1]));const c=Ym(a,10,5).map(u=>s(u));return{type:"polygon",data:yb(c)}};function wC(e,t,n,i=r=>r){return e*i(.5-t*(.5-n))}function Jse(e){return[-e[0],-e[1]]}function Ls(e,t){return[e[0]+t[0],e[1]+t[1]]}function qr(e,t){return[e[0]-t[0],e[1]-t[1]]}function Ds(e,t){return[e[0]*t,e[1]*t]}function eoe(e,t){return[e[0]/t,e[1]/t]}function Bg(e){return[e[1],-e[0]]}function _C(e,t){return e[0]*t[0]+e[1]*t[1]}function toe(e,t){return e[0]===t[0]&&e[1]===t[1]}function noe(e){return Math.hypot(e[0],e[1])}function ioe(e){return e[0]*e[0]+e[1]*e[1]}function TC(e,t){return ioe(qr(e,t))}function zF(e){return eoe(e,noe(e))}function roe(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function zg(e,t,n){let i=Math.sin(n),r=Math.cos(n),s=e[0]-t[0],o=e[1]-t[1],a=s*r-o*i,l=s*i+o*r;return[a+t[0],l+t[1]]}function I7(e,t,n){return Ls(e,Ds(qr(t,e),n))}function SC(e,t,n){return Ls(e,Ds(t,n))}var{min:Fd,PI:soe}=Math,IC=.275,Hg=soe+1e-4;function ooe(e,t={}){let{size:n=16,smoothing:i=.5,thinning:r=.5,simulatePressure:s=!0,easing:o=V=>V,start:a={},end:l={},last:c=!1}=t,{cap:u=!0,easing:d=V=>V*(2-V)}=a,{cap:f=!0,easing:h=V=>--V*V*V+1}=l;if(e.length===0||n<=0)return[];let m=e[e.length-1].runningLength,p=a.taper===!1?0:a.taper===!0?Math.max(n,m):a.taper,y=l.taper===!1?0:l.taper===!0?Math.max(n,m):l.taper,b=Math.pow(n*i,2),E=[],v=[],w=e.slice(0,10).reduce((V,$)=>{let G=$.pressure;if(s){let J=Fd(1,$.distance/n),Ae=Fd(1,1-J);G=Fd(1,V+(Ae-V)*(J*IC))}return(V+G)/2},e[0].pressure),S=wC(n,r,e[e.length-1].pressure,o),k,_=e[0].vector,T=e[0].point,A=T,C=T,R=A,P=!1;for(let V=0;V<e.length;V++){let{pressure:$}=e[V],{point:G,vector:J,distance:Ae,runningLength:ye}=e[V];if(V<e.length-1&&m-ye<3)continue;if(r){if(s){let Ge=Fd(1,Ae/n),at=Fd(1,1-Ge);$=Fd(1,w+(at-w)*(Ge*IC))}S=wC(n,r,$,o)}else S=n/2;k===void 0&&(k=S);let ke=ye<p?d(ye/p):1,wt=m-ye<y?h((m-ye)/y):1;S=Math.max(.01,S*Math.min(ke,wt));let Ot=(V<e.length-1?e[V+1]:e[V]).vector,xn=V<e.length-1?_C(J,Ot):1,en=_C(J,_)<0&&!P,gi=xn!==null&&xn<0;if(en||gi){let Ge=Ds(Bg(_),S);for(let at=1/13,dn=0;dn<=1;dn+=at)C=zg(qr(G,Ge),G,Hg*dn),E.push(C),R=zg(Ls(G,Ge),G,Hg*-dn),v.push(R);T=C,A=R,gi&&(P=!0);continue}if(P=!1,V===e.length-1){let Ge=Ds(Bg(J),S);E.push(qr(G,Ge)),v.push(Ls(G,Ge));continue}let $i=Ds(Bg(I7(Ot,J,xn)),S);C=qr(G,$i),(V<=1||TC(T,C)>b)&&(E.push(C),T=C),R=Ls(G,$i),(V<=1||TC(A,R)>b)&&(v.push(R),A=R),w=$,_=J}let N=e[0].point.slice(0,2),K=e.length>1?e[e.length-1].point.slice(0,2):Ls(e[0].point,[1,1]),H=[],z=[];if(e.length===1){if(!(p||y)||c){let V=SC(N,zF(Bg(qr(N,K))),-(k||S)),$=[];for(let G=1/13,J=G;J<=1;J+=G)$.push(zg(V,N,Hg*2*J));return $}}else{if(!(p||y&&e.length===1))if(u)for(let $=1/13,G=$;G<=1;G+=$){let J=zg(v[0],N,Hg*G);H.push(J)}else{let $=qr(E[0],v[0]),G=Ds($,.5),J=Ds($,.51);H.push(qr(N,G),qr(N,J),Ls(N,J),Ls(N,G))}let V=Bg(Jse(e[e.length-1].vector));if(y||p&&e.length===1)z.push(K);else if(f){let $=SC(K,V,S);for(let G=1/29,J=G;J<1;J+=G)z.push(zg($,K,Hg*3*J))}else z.push(Ls(K,Ds(V,S)),Ls(K,Ds(V,S*.99)),qr(K,Ds(V,S*.99)),qr(K,Ds(V,S)))}return E.concat(z,v.reverse(),H)}function aoe(e,t={}){var n;let{streamline:i=.5,size:r=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-i)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:m,pressure:p=.5})=>[h,m,p]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let m=1;m<5;m++)a.push(I7(a[0],h,m/4))}a.length===1&&(a=[...a,[...Ls(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,u=0,d=l[0],f=a.length-1;for(let h=1;h<a.length;h++){let m=s&&h===f?a[h].slice(0,2):I7(d.point,a[h],o);if(toe(d.point,m))continue;let p=roe(m,d.point);if(u+=p,h<f&&!c){if(u<r)continue;c=!0}d={point:m,pressure:a[h][2]>=0?a[h][2]:.5,vector:zF(qr(d.point,m)),distance:p,runningLength:u},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function loe(e,t={}){return ooe(aoe(e,t),t)}const ti=10,coe=(e,t,n,i,r,s,o,a)=>{const{width:l,height:c}=Za(e),u=i/l,d=r/c,f=(e.crop?.x??0)/u,h=(e.crop?.y??0)/d,m=W(I(s,o),Jn(e,t),-e.angle);s=m[0],o=m[1];let p=e.width,y=e.height,b=e.crop??{x:0,y:0,width:i,height:r,naturalWidth:i,naturalHeight:r};const E=b.height,v=b.width,w=e.scale[0]===-1,S=e.scale[1]===-1;let k=o-e.y,_=s-e.x;n.includes("n")&&(y=Ve(e.height-k,ti,S?c-h:e.height+h)),n.includes("s")&&(k=o-e.y-e.height,y=Ve(e.height+k,ti,S?e.height+h:c-h)),n.includes("e")&&(_=s-e.x-e.width,p=Ve(e.width+_,ti,w?e.width+f:l-f)),n.includes("w")&&(p=Ve(e.width-_,ti,w?l-f:e.width+f));const T=R=>{R.height=y*d,R.width=p*u};T(b);const A=(R,P)=>{T(P),R.includes("n")&&(S||(P.y+=E-P.height)),R.includes("s")&&S&&(P.y+=E-P.height),R.includes("e")&&w&&(P.x+=v-P.width),R.includes("w")&&(w||(P.x+=v-P.width))};switch(n){case"n":{if(a){const R=f+e.width/2,P=l-f-e.width/2,N=Math.min(R,P)*2;p=Ve(y*a,ti,N),y=p/a}A(n,b),a&&(b.x+=(v-b.width)/2);break}case"s":{if(a){const R=f+e.width/2,P=l-f-e.width/2,N=Math.min(R,P)*2;p=Ve(y*a,ti,N),y=p/a}A(n,b),a&&(b.x+=(v-b.width)/2);break}case"w":{if(a){const R=h+e.height/2,P=c-h-e.height/2,N=Math.min(R,P)*2;y=Ve(p/a,ti,N),p=y*a}A(n,b),a&&(b.y+=(E-b.height)/2);break}case"e":{if(a){const R=h+e.height/2,P=c-h-e.height/2,N=Math.min(R,P)*2;y=Ve(p/a,ti,N),p=y*a}A(n,b),a&&(b.y+=(E-b.height)/2);break}case"ne":{if(a)if(_>-k){const R=S?c-h:h+e.height;y=Ve(p/a,ti,R),p=y*a}else{const R=w?f+e.width:l-f;p=Ve(y*a,ti,R),y=p/a}A(n,b);break}case"nw":{if(a)if(_<k){const R=S?c-h:h+e.height;y=Ve(p/a,ti,R),p=y*a}else{const R=w?l-f:f+e.width;p=Ve(y*a,ti,R),y=p/a}A(n,b);break}case"se":{if(a)if(_>k){const R=S?h+e.height:c-h;y=Ve(p/a,ti,R),p=y*a}else{const R=w?f+e.width:l-f;p=Ve(y*a,ti,R),y=p/a}A(n,b);break}case"sw":{if(a)if(-_>k){const R=S?h+e.height:c-h;y=Ve(p/a,ti,R),p=y*a}else{const R=w?l-f:f+e.width;p=Ve(y*a,ti,R),y=p/a}A(n,b);break}}const C=uoe(e,n,p,y,!!a);return rC(b.width,b.naturalWidth)&&rC(b.height,b.naturalHeight)&&(b=null),{x:C[0],y:C[1],width:p,height:y,crop:b}},uoe=(e,t,n,i,r)=>{const[s,o,a,l]=$0(e,e.width,e.height,!0),c=I(s,o),u=I(a,l),d=pb(c,u),[f,h,m,p]=$0(e,n,i,!0),y=m-f,b=p-h;let E=[...c];if(["n","w","nw"].includes(t)&&(E=[u[0]-Math.abs(y),u[1]-Math.abs(b)]),t==="ne"){const T=[c[0],u[1]];E=[T[0],T[1]-Math.abs(b)]}if(t==="sw"){const T=[u[0],c[1]];E=[T[0]-Math.abs(y),T[1]]}r&&(["s","n"].includes(t)&&(E[0]=d[0]-y/2),["e","w"].includes(t)&&(E[1]=d[1]-b/2));const v=e.angle,w=W(E,d,v),S=[E[0]+Math.abs(y)/2,E[1]+Math.abs(b)/2],k=W(S,d,v);E=W(w,k,-v);const _=[...E];return _[0]+=e.x-f,_[1]+=e.y-h,_},doe=(e,t)=>{if(e.crop){const{width:n,height:i}=Za(e),[r,s,o,a,l,c]=Le(e,t),u=ae(W(I(r,s),I(l,c),e.angle)),d=ae(W(I(o,s),I(l,c),e.angle)),f=ws(gb(d,u)),h=ae(W(I(r,a),I(l,c),e.angle)),m=gb(h,u),p=ws(m),{cropX:y,cropY:b}=foe(e.crop,e.scale),E=_f(_f(u,Sn(f,-y*n/e.crop.naturalWidth)),Sn(p,-b*i/e.crop.naturalHeight)),v=Ei(_f(_f(E,Sn(f,n/2)),Sn(p,i/2))),w=W(Ei(E),v,-e.angle);return{...e,x:w[0],y:w[1],width:n,height:i,crop:null}}return e},Za=e=>{if(e.crop){const t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},foe=(e,t)=>{let n=e.x,i=e.y;const r=t[0]===-1,s=t[1]===-1;return r&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(i=e.naturalHeight-Math.abs(i)-e.height),{cropX:n,cropY:i}},hoe=(e,t=!1)=>{const n=e.crop;if(!n)return null;const i=e.scale[0]===-1,r=e.scale[1]===-1;let s=n.x,o=n.y;if(i&&(s=n.naturalWidth-n.width-n.x),r&&(o=n.naturalHeight-n.height-n.y),t)return{x:s,y:o};const{width:a,height:l}=Za(e);return{x:s/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},Q1=new WeakMap,Hw=(e,t)=>{const n=Q1.get(e);if(!n)return;const{version:i,shapes:r}=n;if(i!==e.version){Q1.delete(e);return}return r.get(t)},Vw=(e,t,n)=>{const i=Q1.get(e);if(!i){Q1.set(e,{version:e.version,shapes:new Map([[n,t]])});return}const{version:r,shapes:s}=i;if(r!==e.version){Q1.set(e,{version:e.version,shapes:new Map([[n,t]])});return}s.set(n,t)};function xb(e){const t=Hw(e,0);if(t)return t;const n=fle(e),i=[],r=[];for(let o=0;o<n.length;o+=1){const a=n[o],l=n[o-1]&&a5(n[o-1].data.slice(-2));switch(a.op){case"move":continue;case"lineTo":if(!l)throw new Error("prevPoint is undefined");i.push(Se(I(e.x+l[0],e.y+l[1]),I(e.x+a.data[0],e.y+a.data[1])));continue;case"bcurveTo":if(!l)throw new Error("prevPoint is undefined");r.push(Ln(I(e.x+l[0],e.y+l[1]),I(e.x+a.data[0],e.y+a.data[1]),I(e.x+a.data[2],e.y+a.data[3]),I(e.x+a.data[4],e.y+a.data[5])));continue;default:console.error("Unknown op type",a.op)}}const s=[i,r];return Vw(e,s,0),s}function $w(e,t=0){const n=Hw(e,t);if(n)return n;let i=Ji(Math.min(e.width,e.height),e);i===0&&(i=.01);const r=bre(I(e.x,e.y),I(e.x+e.width,e.y+e.height)),s=Se(I(r[0][0]+i,r[0][1]),I(r[1][0]-i,r[0][1])),o=Se(I(r[1][0],r[0][1]+i),I(r[1][0],r[1][1]-i)),a=Se(I(r[0][0]+i,r[1][1]),I(r[1][0]-i,r[1][1])),l=Se(I(r[0][0],r[1][1]-i),I(r[0][0],r[0][1]+i)),c=[Ln(l[1],I(l[1][0]+2/3*(r[0][0]-l[1][0]),l[1][1]+2/3*(r[0][1]-l[1][1])),I(s[0][0]+2/3*(r[0][0]-s[0][0]),s[0][1]+2/3*(r[0][1]-s[0][1])),s[0]),Ln(s[1],I(s[1][0]+2/3*(r[1][0]-s[1][0]),s[1][1]+2/3*(r[0][1]-s[1][1])),I(o[0][0]+2/3*(r[1][0]-o[0][0]),o[0][1]+2/3*(r[0][1]-o[0][1])),o[0]),Ln(o[1],I(o[1][0]+2/3*(r[1][0]-o[1][0]),o[1][1]+2/3*(r[1][1]-o[1][1])),I(a[1][0]+2/3*(r[1][0]-a[1][0]),a[1][1]+2/3*(r[1][1]-a[1][1])),a[1]),Ln(a[0],I(a[0][0]+2/3*(r[0][0]-a[0][0]),a[0][1]+2/3*(r[1][1]-a[0][1])),I(l[0][0]+2/3*(r[0][0]-l[0][0]),l[0][1]+2/3*(r[1][1]-l[0][1])),l[0])],u=t>0?c.map(h=>Rw(uo(h,t))):[[c[0]],[c[1]],[c[2]],[c[3]]],f=[[Se(u[0][u[0].length-1][3],u[1][0][0]),Se(u[1][u[1].length-1][3],u[2][0][0]),Se(u[2][u[2].length-1][3],u[3][0][0]),Se(u[3][u[3].length-1][3],u[0][0][0])],u.flat()];return Vw(e,f,t),f}function Gw(e,t=0){const n=Hw(e,t);if(n)return n;const[i,r,s,o,a,l,c,u]=zb(e),d=e.roundness?Ji(Math.abs(i-c),e):(i-c)*.01,f=e.roundness?Ji(Math.abs(o-r),e):(o-r)*.01,[h,m,p,y]=[I(e.x+i,e.y+r),I(e.x+s,e.y+o),I(e.x+a,e.y+l),I(e.x+c,e.y+u)],b=[Ln(I(m[0]-d,m[1]-f),m,m,I(m[0]-d,m[1]+f)),Ln(I(p[0]+d,p[1]-f),p,p,I(p[0]-d,p[1]-f)),Ln(I(y[0]+d,y[1]+f),y,y,I(y[0]+d,y[1]-f)),Ln(I(h[0]-d,h[1]+f),h,h,I(h[0]+d,h[1]+f))],E=t>0?b.map(S=>Rw(uo(S,t))):[[b[0]],[b[1]],[b[2]],[b[3]]],w=[[Se(E[0][E[0].length-1][3],E[1][0][0]),Se(E[1][E[1].length-1][3],E[2][0][0]),Se(E[2][E[2].length-1][3],E[3][0][0]),Se(E[3][E[3].length-1][3],E[0][0][0])],E.flat()];return Vw(e,w,t),w}const Bo=(e,t=1)=>{if(e.length>=3){const[n,i]=[e[0],e[e.length-1]];return dt(n,i)<=QU/t}return!1},Ji=(e,t)=>{if(t.roundness?.type===ln.PROPORTIONAL_RADIUS||t.roundness?.type===ln.LEGACY)return e*A8;if(t.roundness?.type===ln.ADAPTIVE_RADIUS){const n=t.roundness?.value??Zie,i=n/A8;return e<=i?e*A8:n}return 0},Tn=e=>!!e&&e.type==="image"&&!!e.fileId,yt=e=>!!e&&e.type==="image",ur=e=>!!e&&e.type==="embeddable",Ll=e=>!!e&&e.type==="iframe",os=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),le=e=>e!=null&&e.type==="text",HF=e=>e!=null&&e.type==="frame",r2=e=>e!=null&&e.type==="magicframe",pe=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),yr=e=>e!=null&&goe(e.type),goe=e=>e==="freedraw",we=e=>e!=null&&Xw(e.type),sn=e=>e!=null&&e.type==="line",_e=e=>e!=null&&e.type==="arrow",ce=e=>_e(e)&&e.elbowed,moe=e=>_e(e)&&!e.elbowed,poe=e=>_e(e)&&!e.elbowed&&!e.roundness,Uoe=e=>_e(e)&&!e.elbowed&&e.roundness!==null,Xw=e=>e==="arrow"||e==="line",Aa=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&VF(e.type),VF=e=>e==="arrow",Zs=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),boe=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Ou=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||_e(e)),$F=e=>{const t=e?.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return Po(t,null),!1}},f5=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",nr=e=>Ou(e)&&!!e.boundElements?.some(({type:t})=>t==="text"),Ft=e=>e!==null&&"containerId"in e&&e.containerId!==null&&le(e),GF=e=>!!e.startBinding||!!e.endBinding,_d=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",XF=e=>e==="line"||e==="arrow"||e==="diamond",yoe=(e,t)=>!!((e===ln.ADAPTIVE_RADIUS||e===ln.LEGACY)&&_d(t.type)||e===ln.PROPORTIONAL_RADIUS&&XF(t.type)),Eoe=e=>XF(e.type)?{type:ln.PROPORTIONAL_RADIUS}:_d(e.type)?{type:ln.ADAPTIVE_RADIUS}:null,Cb=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null,Ff=e=>poe(e)?"sharpArrow":Uoe(e)?"curvedArrow":ce(e)?"elbowArrow":"line",x7=e=>e.length>3&&_s(e[0],e[e.length-1]),jF=e=>e.length>3||e.length===3&&!_s(e[0],e[e.length-1]),hh={},Ab=(e,t)=>{const n=hh[e]||(hh[e]={height:t});return n.height=t,n},YF=e=>{hh[e]&&delete hh[e]},voe=e=>hh[e]?.height??null,Bn=(e,t,n)=>{const i=e.split(`
`).map(a=>a||" ").join(`
`),r=parseFloat(t),s=Soe(i,r,n);return{width:Ww(i,t),height:s}},WF="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),KF=(e,t)=>{const n=Ioe(e);return n===0?Bn(WF.split("").join(`
`),e,t).width+Nn*2:n+Nn*2},jw=(e,t)=>Bn("",e,t).width+Nn*2,woe=()=>Ww(WF,ot({fontSize:dl,fontFamily:Hc}))>0,gh=e=>SF(e).replace(/\t/g,"        "),Yw=e=>gh(e).split(`
`),_oe=e=>{const t=Yw(e.text).length;return e.height/t/e.fontSize},Wm=(e,t)=>e*t,ZF=(e,t)=>Wm(e,t)+Nn*2;let N8;class Toe{canvas;constructor(){this.canvas=document.createElement("canvas")}getLineWidth(t,n){const i=this.canvas.getContext("2d");return i.font=n,i.measureText(t).width}}const Qu=(e,t)=>(N8||(N8=new Toe),N8.getLineWidth(e,t)),Ww=(e,t)=>{const n=Yw(e);let i=0;return n.forEach(r=>{i=Math.max(i,Qu(r,t))}),i},Soe=(e,t,n)=>{const i=Yw(e).length;return Wm(t,n)*i},Km=(()=>{const e={};return{calculate:(r,s)=>{const o=r.charCodeAt(0);if(e[s]||(e[s]=[]),!e[s][o]){const a=Qu(r,s);e[s][o]=a}return e[s][o]},getCache:r=>e[r],clearCache:r=>{e[r]=[]}}})(),Ioe=e=>{const t=Km.getCache(e);if(!t)return 0;const n=t.filter(i=>i!==void 0);return Math.max(...n)};let P8,lU,F8;const xoe=e=>(P8||(P8=Ut.class(...Object.values(da))),P8.test(e)),Coe=()=>{if(!lU)try{lU=Moe()}catch{lU=Aoe()}return lU},Kw=()=>(F8||(F8=koe()),F8),Kr={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?…\//u},da={CHAR:/\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Hangul}｀＇＾〃〰〆＃＆＊＋－ー／＼＝｜￤〒￢￣/u,OPENING:/（［｛〈《｟｢「『【〖〔〘〚＜〝/u,CLOSING:/）］｝〉》｠｣」』】〗〕〙〛＞。．，、〟‥？！：；・〜〞/u,CURRENCY:/￥￦￡￠＄/u},Jc={FLAG:/\p{RI}\p{RI}/u,JOINER:/(?:\p{Emoji_Modifier}|\uFE0F\u20E3?|[\u{E0020}-\u{E007E}]+\u{E007F})?/u,ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},Aoe=()=>Ut.or(Kw(),gn.On(Kr.HYPHEN,Kr.WHITESPACE,da.CHAR)),Moe=()=>Ut.or(Kw(),gn.Before(Kr.WHITESPACE).Build(),gn.After(Kr.WHITESPACE,Kr.HYPHEN).Build(),gn.Before(da.CHAR,da.CURRENCY).NotPrecededBy(Kr.OPENING,da.OPENING).Build(),gn.After(da.CHAR).NotFollowedBy(Kr.HYPHEN,Kr.CLOSING,da.CLOSING).Build(),gn.BeforeMany(da.OPENING).NotPrecededBy(Kr.OPENING).Build(),gn.AfterMany(da.CLOSING).NotFollowedBy(Kr.CLOSING).Build(),gn.AfterMany(Kr.CLOSING).FollowedBy(Kr.OPENING).Build()),koe=()=>Ut.group(Ut.or(Jc.FLAG,Ut.and(Jc.MOST,Jc.JOINER,Ut.build(`(?:${Jc.ZWJ.source}(?:${Jc.FLAG.source}|${Jc.ANY.source}${Jc.JOINER.source}))*`)))),Ut={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>Ut.build(Ut.join(...e)),or:(...e)=>Ut.build(e.map(t=>t.source).join("|")),group:(...e)=>Ut.build(`(${Ut.join(...e)})`),class:(...e)=>Ut.build(`[${Ut.join(...e)}]`)},gn={On:(...e)=>{const t=Ut.join(...e);return Ut.build(`([${t}])`)},Before:(...e)=>{const t=Ut.join(...e),n=()=>Ut.build(`(?=[${t}])`);return gn.Chain(n)},After:(...e)=>{const t=Ut.join(...e),n=()=>Ut.build(`(?<=[${t}])`);return gn.Chain(n)},BeforeMany:(...e)=>{const t=Ut.join(...e),n=()=>Ut.build(`(?<![${t}])(?=[${t}])`);return gn.Chain(n)},AfterMany:(...e)=>{const t=Ut.join(...e),n=()=>Ut.build(`(?<=[${t}])(?![${t}])`);return gn.Chain(n)},NotBefore:(...e)=>{const t=Ut.join(...e),n=()=>Ut.build(`(?![${t}])`);return gn.Chain(n)},NotAfter:(...e)=>{const t=Ut.join(...e),n=()=>Ut.build(`(?<![${t}])`);return gn.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{const n=e(),i=gn.After(...t).Build(),r=()=>Ut.and(i,n);return gn.Chain(r)},FollowedBy:(...t)=>{const n=e(),i=gn.Before(...t).Build(),r=()=>Ut.and(n,i);return gn.Chain(r)},NotPrecededBy:(...t)=>{const n=e(),i=gn.NotAfter(...t).Build(),r=()=>Ut.and(i,n);return gn.Chain(r)},NotFollowedBy:(...t)=>{const n=e(),i=gn.NotBefore(...t).Build(),r=()=>Ut.and(n,i);return gn.Chain(r)}})},Roe=e=>{const t=Coe();return e.normalize("NFC").split(t).filter(Boolean)},$c=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;const i=[],r=e.split(`
`);for(const s of r){if(Qu(s,t)<=n){i.push(s);continue}const a=Doe(s,t,n);i.push(...a)}return i.join(`
`)},Doe=(e,t,n)=>{const i=[],s=Roe(e)[Symbol.iterator]();let o="",a=0,l=s.next();for(;!l.done;){const c=l.value,u=o+c,d=Noe(c)?a+Km.calculate(c,t):Qu(u,t);if(/\s/.test(c)||d<=n){o=u,a=d,l=s.next();continue}if(o)i.push(o.trimEnd()),o="",a=0;else{const f=Loe(c,t,n),h=f[f.length-1]??"",m=f.slice(0,-1);i.push(...m),o=h,a=Qu(h,t),l=s.next()}}if(o){const c=Ooe(o,t,n);i.push(c)}return i},Loe=(e,t,n)=>{if(Kw().test(e))return[e];const i=[],r=Array.from(e);let s="",o=0;for(const a of r){const l=Km.calculate(a,t),c=o+l;if(c<=n){s=s+a,o=c;continue}s&&i.push(s),s=a,o=l}return s&&i.push(s),i},Ooe=(e,t,n)=>{if(!(Qu(e,t)>n))return e;let[,r,s]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],o=Qu(r,t);for(const a of Array.from(s)){const l=Km.calculate(a,t),c=o+l;if(c>n)break;r=r+a,o=c}return r},Noe=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,Hi=(e,t,n)=>{const i=n.getNonDeletedElementsMap();let r;const s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:t?_e(t)?0:t.angle:e.angle};s.text=e.text,(t||!e.autoResize)&&(r=t?Ho(t,e):e.width,s.text=$c(e.originalText,ot(e),r));const o=Bn(s.text,ot(e),e.lineHeight);if(e.autoResize&&(s.width=o.width),s.height=o.height,t){const a=qm(t,e),l=Ho(t,e);if(!_e(t)&&o.height>a){const f=Ju(o.height,t.type);n.mutateElement(t,{height:f}),Ab(t.id,f)}if(o.width>l){const f=Ju(o.width,t.type);n.mutateElement(t,{width:f})}const c={...e,...s},{x:u,y:d}=Zh(t,c,i);s.x=u,s.y=d}n.mutateElement(e,s)},Zm=(e,t,n,i=!1)=>{const r=t.getNonDeletedElementsMap();if(!zo(e))return;YF(e.id);const o=Ce(e,r);if(o&&o.text){if(!e)return;let a=o.text,l=o.height,c=o.width;const u=Ho(e,o),d=qm(e,o);let f=e.height;if(i||n!=="n"&&n!=="s"){a&&(a=$c(o.originalText,ot(o),u));const h=Bn(a,ot(o),o.lineHeight);l=h.height,c=h.width}if(l>d){f=Ju(l,e.type);const h=f-e.height,m=!_e(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-h:e.y;t.mutateElement(e,{height:f,y:m})}t.mutateElement(o,{text:a,width:c,height:l}),_e(e)||t.mutateElement(o,Zh(e,o,r))}},Zh=(e,t,n)=>{if(_e(e))return Z.getBoundTextElementPosition(e,t,n);const i=Poe(e),r=qm(e,t),s=Ho(e,t);let o,a;return t.verticalAlign===Or.TOP?a=i.y:t.verticalAlign===Or.BOTTOM?a=i.y+(r-t.height):a=i.y+(r/2-t.height/2),t.textAlign===B0.LEFT?o=i.x:t.textAlign===B0.RIGHT?o=i.x+(s-t.width):o=i.x+(s/2-t.width/2),{x:o,y:a}},zo=e=>e?.boundElements?.length&&e?.boundElements?.find(t=>t.type==="text")?.id||null,Ce=(e,t)=>{if(!e)return null;const n=zo(e);return n&&t.get(n)||null},zn=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,B8=(e,t,n)=>{if(!_e(e))return{x:e.x+e.width/2,y:e.y+e.height/2};if(Z.getPointsGlobalCoordinates(e,n).length%2===1){const o=Math.floor(e.points.length/2),a=Z.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}const r=e.points.length/2-1;let s=Z.getEditorMidPoints(e,n,t)[r];return s||(s=Z.getSegmentMidPoint(e,r+1)),{x:s[0],y:s[1]}},Poe=e=>{let t=Nn,n=Nn;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},Foe=(e,t)=>_e(t)?0:t?t.angle:e.angle,Boe=(e,t)=>e.some(n=>{if(Ft(n)){const i=zn(n,t);return!_e(i)}return!1}),zoe=(e,t)=>e.some(n=>{if(Ft(n)){const i=zn(n,t);return!_e(i)}return le(n)}),Hoe=new Set(["rectangle","ellipse","diamond","arrow"]),Voe=e=>Hoe.has(e.type),Ju=(e,t)=>{e=Math.ceil(e);const n=Nn*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},Ho=(e,t)=>{const{width:n}=e;if(_e(e)){const i=(t?.fontSize??dl)*Wie;return Math.max(Yie*n,i)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Nn*2:e.type==="diamond"?Math.round(n/2)-Nn*2:n-Nn*2},qm=(e,t)=>{const{height:n}=e;return _e(e)?n-Nn*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Nn*2:e.type==="diamond"?Math.round(n/2)-Nn*2:n-Nn*2},qF=(e,t=`

`)=>e.reduce((i,r)=>(le(r)&&i.push(r.text),i),[]).join(t),Qm=(e,t,n)=>{switch(e.type){case"selection":case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return $oe(e,t,n);case"diamond":return Goe(e,t,n);case"ellipse":return Xoe(e,t,n);case"line":case"arrow":case"freedraw":return joe(e,n)}},$oe=(e,t,n)=>{const i=Jn(e,t),r=W(n,i,-e.angle),[s,o]=$w(e);return Math.min(...s.map(a=>l5(r,a)),...o.map(a=>Mw(a,r)).filter(a=>a!==null))},Goe=(e,t,n)=>{const i=Jn(e,t),r=W(n,i,-e.angle),[s,o]=Gw(e);return Math.min(...s.map(a=>l5(r,a)),...o.map(a=>Mw(a,r)).filter(a=>a!==null))},Xoe=(e,t,n)=>{const i=Jn(e,t);return fre(W(n,i,-e.angle),gF(i,e.width/2,e.height/2))},joe=(e,t)=>{const[n,i]=xb(e);return Math.min(...n.map(r=>l5(t,r)),...i.map(r=>Mw(r,t)))},Mb=e=>{if(e.type==="arrow")return!1;const t=!ds(e.backgroundColor)||nr(e)||os(e)||le(e);return e.type==="line"||e.type==="freedraw"?t&&Bo(e.points):t||yt(e)},tf=({point:e,element:t,threshold:n,elementsMap:i,frameNameBound:r=null})=>{const s=r?z0(I(r.x-n,r.y-n),e,I(r.x+r.width+n,r.y+r.height+n)):!1,o=_i(t,i,!0);return!z0(I(o[0]-n,o[1]-n),W(e,eg(o),-t.angle),I(o[2]+n,o[3]+n))&&!s?!1:Mb(t)&&Zw(e,t,i)||xC(e,t,i,n)||s},h5=(e,t,n,i=0)=>{let[r,s,o,a]=_i(t,n);return r-=i,s-=i,o+=i,a+=i,z0(I(r,s),e,I(o,a))},Yoe=(e,t)=>!tf(e)&&!QF(e.point,e.element,t)&&h5(e.point,e.element,t),QF=(e,t,n)=>{const i=Ce(t,n);if(!i)return!1;const r=we(t)?{...i,...Z.getBoundTextElementPosition(t,i,n)}:i;return Zw(e,r,n)},qa=(e,t,n,i=0,r=!1)=>{const s=[Math.min(n[0][0]-i,n[1][0]-i),Math.min(n[0][1]-i,n[1][1]-i),Math.max(n[0][0]+i,n[1][0]+i),Math.max(n[0][1]+i,n[1][1]+i)],o=_i(e,t);if(!tg(s,o))return[];switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"selection":case"magicframe":return Koe(e,t,n,i,r);case"diamond":return Zoe(e,t,n,i,r);case"ellipse":return qoe(e,t,n,i);case"line":case"freedraw":case"arrow":return Woe(e,n,r)}},JF=(e,t,n,i,r,s=!1)=>{for(const o of e){const a=h9(o[0],o[1],o[2],o[3]),l=[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])];if(!tg(a,l))continue;const c=hF(o,t);if(c.length>0){for(const u of c)n.push(W(u,i,r));if(s)return n}}return n},eB=(e,t,n,i,r,s=!1)=>{for(const o of e){const a=bb(o,t);if(a&&(n.push(W(a,i,r)),s))return n}return n},Woe=(e,t,n=!1)=>{const[i,r]=xb(e),s=[];for(const o of i){const a=bb(o,t);if(a&&(s.push(a),n))return s}for(const o of r){const a=h9(o[0],o[1],o[2],o[3]),l=[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])];if(!tg(a,l))continue;const c=hF(o,t);if(c.length>0&&(s.push(...c),n))return s}return s},Koe=(e,t,n,i=0,r=!1)=>{const s=Jn(e,t),o=W(n[0],s,-e.angle),a=W(n[1],s,-e.angle),l=Se(o,a),[c,u]=$w(e,i),d=[];return eB(c,l,d,s,e.angle,r),r&&d.length>0||JF(u,l,d,s,e.angle,r),d},Zoe=(e,t,n,i=0,r=!1)=>{const s=Jn(e,t),o=W(n[0],s,-e.angle),a=W(n[1],s,-e.angle),l=Se(o,a),[c,u]=Gw(e,i),d=[];return eB(c,l,d,s,e.angle,r),r&&d.length>0||JF(u,l,d,s,e.angle,r),d},qoe=(e,t,n,i=0)=>{const r=Jn(e,t),s=W(n[0],r,-e.angle),o=W(n[1],r,-e.angle);return hre(gF(r,e.width/2+i,e.height/2+i),Se(s,o)).map(a=>W(a,r,e.angle))},xC=(e,t,n,i=1)=>Qm(t,n,e)<=i,Zw=(e,t,n)=>{if((we(t)||yr(t))&&!Bo(t.points))return!1;const[i,r,s,o]=_i(t,n);if(!z0(I(i,r),e,I(s,o)))return!1;const a=I((i+s)/2,(r+o)/2),l=Ei(Sn(ws(ae(e,a,.1)),Math.max(t.width,t.height)*2),a),c=Se(e,l);return qa(t,n,c).filter((d,f,h)=>h.findIndex(m=>_s(m,d))===f).length%2===1},On=[1,0],qi=[0,1],as=[-1,0],zs=[0,-1],mh=e=>{const[t,n]=e,i=Math.abs(t),r=Math.abs(n);return t>r?On:t<=-r?as:n>i?qi:zs},xr=(e,t)=>mh(ae(e,t)),va=(e,t)=>Io(xr(e,t)),Pn=(e,t)=>e[0]===t[0]&&e[1]===t[1],Io=e=>Pn(e,On)||Pn(e,as),Qoe=(e,t,n)=>{const i=eg(t),r=.95,s=Ei(Sn(ae(W(I(e.x+e.width/2,e.y),i,e.angle),i),r),i),o=Ei(Sn(ae(W(I(e.x+e.width,e.y+e.height/2),i,e.angle),i),r),i),a=Ei(Sn(ae(W(I(e.x+e.width/2,e.y+e.height),i,e.angle),i),r),i),l=Ei(Sn(ae(W(I(e.x,e.y+e.height/2),i,e.angle),i),r),i);if(ut(ae(n,s),ae(s,o))<=0&&ut(ae(n,s),ae(s,l))>0)return xr(s,i);if(ut(ae(n,o),ae(o,a))<=0&&ut(ae(n,o),ae(o,s))>0)return xr(o,i);if(ut(ae(n,a),ae(a,l))<=0&&ut(ae(n,a),ae(a,o))>0)return xr(a,i);if(ut(ae(n,l),ae(l,s))<=0&&ut(ae(n,l),ae(l,a))>0)return xr(l,i);if(ut(ae(n,i),ae(s,i))<=0&&ut(ae(n,i),ae(o,i))>0){const u=e.width>e.height?s:o;return xr(u,i)}else if(ut(ae(n,i),ae(o,i))<=0&&ut(ae(n,i),ae(a,i))>0){const u=e.width>e.height?a:o;return xr(u,i)}else if(ut(ae(n,i),ae(a,i))<=0&&ut(ae(n,i),ae(l,i))>0){const u=e.width>e.height?a:l;return xr(u,i)}const c=e.width>e.height?s:l;return xr(c,i)},qw=(e,t,n)=>{const r=eg(t);if(e.type==="diamond")return Qoe(e,t,n);const s=f1(I(t[0],t[1]),r,2),o=f1(I(t[2],t[1]),r,2),a=f1(I(t[0],t[3]),r,2),l=f1(I(t[2],t[3]),r,2);return k8([s,o,r],n)?zs:k8([o,l,r],n)?On:k8([l,a,r],n)?qi:as},tB=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1],Qw=1,En=40,Joe=(e,t)=>{const n=e.fixedSegments?e.fixedSegments.slice():null;if(n){const i=[];e.points.map(o=>I(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return i.push(o);const c=xr(o,l[a-1]),u=xr(l[a-1],l[a-2]);if(Pn(c,u)){const d=n?.findIndex(h=>h.index===a-1)??-1,f=n?.findIndex(h=>h.index===a)??-1;f!==-1&&(n[f].start=I(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),i.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return i.push(o)});const r=[];i.forEach((o,a,l)=>{if(a<3)return r.push(o);if(dt(l[a-2],l[a-1])<Qw){const c=n?.findIndex(f=>f.index===a-2)??-1,u=n?.findIndex(f=>f.index===a-1)??-1;u!==-1&&n.splice(u,1),c!==-1&&n.splice(c,1),r.splice(-2,2),n.forEach(f=>{f.index>a-2&&(f.index-=2)});const d=va(o,l[a-1]);return r.push(I(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}r.push(o)});const s=n.filter(o=>o.index!==1&&o.index!==r.length-1);return s.length===0?za(t9(n9(e9(e,Jw(e,t,r.map(o=>I(o[0]-e.x,o[1]-e.y))))??[])),s,null,null):za(r,s,e.startIsSpecial,e.endIsSpecial)}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},eae=(e,t,n)=>{const i=t.map(A=>A.index),s=(e.fixedSegments?.map(A=>A.index)??[]).findIndex(A=>!i.includes(A));if(s===-1||!e.fixedSegments?.[s])return{points:e.points};const o=e.fixedSegments[s].index,a=e.fixedSegments[s-1],l=e.fixedSegments[s+1],c=e.x+(a?a.end[0]:0),u=e.y+(a?a.end[1]:0),d=a?null:e.startBinding,f=l?null:e.endBinding,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:y,hoveredStartElement:b,hoveredEndElement:E,...v}=Jw({x:c,y:u,startBinding:d,endBinding:f,startArrowhead:null,endArrowhead:null,points:e.points},n,[I(0,0),I(e.x+(l?.start[0]??e.points[e.points.length-1][0])-c,e.y+(l?.start[1]??e.points[e.points.length-1][1])-u)],{isDragging:!1}),{points:w}=za(t9(n9(e9(e,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:y,hoveredEndElement:E,...v})??[])),t,null,null),S=[];if(a)for(let A=0;A<a.index;A++)S.push(I(e.x+e.points[A][0],e.y+e.points[A][1]));if(w.forEach(A=>{S.push(I(e.x+(a?a.end[0]:0)+A[0],e.y+(a?a.end[1]:0)+A[1]))}),l)for(let A=l.index;A<e.points.length;A++)S.push(I(e.x+e.points[A][0],e.y+e.points[A][1]));const k=(l?.index??e.points.length)-(a?.index??0)-1,_=t.map(A=>A.index>o?{...A,index:A.index-k+(w.length-1)}:A),T=S.flatMap((A,C)=>{const R=S[C-1],P=S[C+1];if(R&&P){const N=xr(A,R),K=xr(P,A);if(Pn(N,K))return _.forEach(H=>{H.index>C&&(H.index-=1)}),[];if(Pn(N,tB(K)))return _.forEach(H=>{H.index>C&&(H.index+=1)}),[A,A]}return[A]});return za(T,_,!1,!1)},tae=(e,t,n,i,r,s)=>{const o=t.map((S,k)=>e.fixedSegments==null||e.fixedSegments[k]===void 0||e.fixedSegments[k].index!==S.index||(S.start[0]!==e.fixedSegments[k].start[0]&&S.end[0]!==e.fixedSegments[k].end[0])!=(S.start[1]!==e.fixedSegments[k].start[1]&&S.end[1]!==e.fixedSegments[k].end[1])?k:null).filter(S=>S!==null).shift();if(o==null)return{points:e.points};const a=e.fixedSegments?.findIndex(S=>S.index===1)??-1,l=e.fixedSegments?.findIndex(S=>S.index===e.points.length-1)??-1,c=dt(t[o].start,t[o].end),u=c<En+5;if(a===-1&&t[o].index===1&&r){const S=Io(n),_=(S?Pn(n,On):Pn(n,qi))?u?c/2:En:u?-c/2:-40;t[o].start=I(t[o].start[0]+(S?_:0),t[o].start[1]+(S?0:_))}if(l===-1&&t[o].index===e.points.length-1&&s){const S=Io(i),_=(S?Pn(i,On):Pn(i,qi))?u?c/2:En:u?-c/2:-40;t[o].end=I(t[o].end[0]+(S?_:0),t[o].end[1]+(S?0:_))}const d=t.map(S=>({...S,start:I(e.x+S.start[0],e.y+S.start[1]),end:I(e.x+S.end[0],e.y+S.end[1])})),f=e.points.map((S,k)=>I(e.x+S[0],e.y+S[1])),h=d[o].index-1,m=d[o].index,p=d[o].start,y=d[o].end,b=f[h-1]&&!_s(f[h],f[h-1])?va(f[h-1],f[h]):void 0,E=f[m+1]&&!_s(f[m],f[m+1])?va(f[m+1],f[m]):void 0;if(b!==void 0){const S=b?1:0;f[h-1][S]=p[S]}if(f[h]=p,f[m]=y,E!==void 0){const S=E?1:0;f[m+1][S]=y[S]}const v=d.findIndex(S=>S.index===h);if(v!==-1){const S=va(d[v].end,d[v].start)?1:0;d[v].start[S]=p[S],d[v].end=p}const w=d.findIndex(S=>S.index===m+1);if(w!==-1){const S=va(d[w].end,d[w].start)?1:0;d[w].end[S]=y[S],d[w].start=y}if(a===-1&&h===0){const S=r?Io(n):va(f[1],f[0]);f.unshift(I(S?p[0]:e.x+e.points[0][0],S?e.y+e.points[0][1]:p[1])),r&&f.unshift(I(e.x+e.points[0][0],e.y+e.points[0][1]));for(const k of d)k.index+=r?2:1}if(l===-1&&m===e.points.length-1){const S=Io(i);f.push(I(S?y[0]:e.x+e.points[e.points.length-1][0],S?e.y+e.points[e.points.length-1][1]:y[1])),s&&f.push(I(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return za(f,d.map(S=>({...S,start:I(S.start[0]-e.x,S.start[1]-e.y),end:I(S.end[0]-e.x,S.end[1]-e.y)})),!1,!1)},nae=(e,t,n,i,r,s,o,a,l)=>{let c=e.startIsSpecial??null,u=e.endIsSpecial??null;const d=t.map((y,b)=>b===0||b===t.length-1?I(e.x+y[0],e.y+y[1]):I(e.x+e.points[b][0],e.y+e.points[b][1])),f=n.map(y=>({...y,start:I(e.x+(y.start[0]-t[0][0]),e.y+(y.start[1]-t[0][1])),end:I(e.x+(y.end[0]-t[0][0]),e.y+(y.end[1]-t[0][1]))})),h=[],m=2+(c?1:0),p=2+(u?1:0);for(;h.length+m<d.length-p;)h.push(d[h.length+m]);{const y=d[c?2:1],b=d[c?3:2],E=Io(i),v=Io(mh(ae(y,b)));if(a&&E===v){const w=E?Pn(i,On):Pn(i,qi);if(h.unshift(I(v?s[0]+(w?En:-40):b[0],v?b[1]:s[1]+(w?En:-40))),h.unshift(I(E?s[0]+(w?En:-40):s[0],E?s[1]:s[1]+(w?En:-40))),!c){c=!0;for(const S of f)S.index>1&&(S.index+=1)}}else if(h.unshift(I(v?s[0]:y[0],v?y[1]:s[1])),c){c=!1;for(const w of f)w.index>1&&(w.index-=1)}h.unshift(s)}{const y=d[d.length-(u?3:2)],b=d[d.length-(u?4:3)],E=Io(r),v=va(b,y);if(l&&E===v){const w=E?Pn(r,On):Pn(r,qi);h.push(I(v?o[0]+(w?En:-40):b[0],v?b[1]:o[1]+(w?En:-40))),h.push(I(E?o[0]+(w?En:-40):o[0],E?o[1]:o[1]+(w?En:-40))),u||(u=!0)}else h.push(I(v?o[0]:y[0],v?y[1]:o[1])),u&&(u=!1)}return h.push(o),za(h,f.map(({index:y})=>({index:y,start:h[y-1],end:h[y]})).map(y=>({...y,start:I(y.start[0]-s[0],y.start[1]-s[1]),end:I(y.end[0]-s[0],y.end[1]-s[1])})),c,u)},cU=1e6,qh=(e,t,n,i)=>{if(e.points.length<2)return{points:n.points??e.points};const r=n.fixedSegments??e.fixedSegments??[],s=n.points?n.points&&n.points.length===2?e.points.map((S,k)=>k===0?n.points[0]:k===e.points.length-1?n.points[1]:S):n.points.slice():e.points.slice(),{startBinding:o,endBinding:a,...l}=n,c=typeof o<"u"?o:e.startBinding,u=typeof a<"u"?a:e.endBinding,d=c&&kb(c.elementId,t),f=u&&kb(u.elementId,t),h=iB(s);if(c&&!d&&h||u&&!f&&h||t.size===0&&h||Object.keys(l).length===0&&(d?.id!==c?.elementId||f?.id!==u?.elementId))return za(s.map(S=>I(e.x+S[0],e.y+S[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);const{startHeading:m,endHeading:p,startGlobalPoint:y,endGlobalPoint:b,hoveredStartElement:E,hoveredEndElement:v,...w}=Jw({x:e.x,y:e.y,startBinding:c,endBinding:u,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,s,i);return t.size===0&&h?za(s.map(S=>I(e.x+S[0],e.y+S[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial):!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?Joe(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((S,k)=>_s(S,e.points[k]??I(1/0,1/0)))&&h?{}:r.length===0?za(t9(n9(e9(e,{startHeading:m,endHeading:p,startGlobalPoint:y,endGlobalPoint:b,hoveredEndElement:v,...w})??[])),r,null,null):(e.fixedSegments?.length??0)>r.length?eae(e,r,t):n.points?n.points&&n.fixedSegments?n:nae(e,s,r,m,p,y,b,E,v):tae(e,r,m,p,E,v)},Jw=(e,t,n,i)=>{const r=mb(n[0],rn(e.x,e.y)),s=mb(n[n.length-1],rn(e.x,e.y));let o=null,a=null;if(i?.isDragging){const S=Array.from(t.values());o=kC(r,t,S,i?.zoom)||null,a=kC(s,t,S,i?.zoom)||null}else o=e.startBinding&&kb(e.startBinding.elementId,t)||null,a=e.endBinding&&kb(e.endBinding.elementId,t)||null;const l=AC({...e,type:"arrow",elbowed:!0,points:n},"start",e.startBinding?.fixedPoint,r,o,t,i?.isDragging),c=AC({...e,type:"arrow",elbowed:!0,points:n},"end",e.endBinding?.fixedPoint,s,a,t,i?.isDragging),u=MC(l,c,o,r,t),d=MC(c,l,a,s,t),f=[l[0]-2,l[1]-2,l[0]+2,l[1]+2],h=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],m=o?fa(o,t,El(u,e.startArrowhead?St*6:St*2,1)):f,p=a?fa(a,t,El(d,e.endArrowhead?St*6:St*2,1)):h,y=G0(l,a?fa(a,t,El(d,En,En)):h)||G0(c,o?fa(o,t,El(u,En,En)):f),b=nB(y?[f,h]:[m,p]),E=sae(y?f:m,y?h:p,b,y?El(u,!o&&!a?0:En,0):El(u,!o&&!a?0:En-(e.startArrowhead?St*6:St*2),En),y?El(d,!o&&!a?0:En,0):El(d,!o&&!a?0:En-(e.endArrowhead?St*6:St*2),En),y,o&&fa(o,t),a&&fa(a,t)),v=CC(E[0],u,l),w=CC(E[1],d,c);return{dynamicAABBs:E,startDonglePosition:v,startGlobalPoint:l,startHeading:u,endDonglePosition:w,endGlobalPoint:c,endHeading:d,commonBounds:b,hoveredStartElement:o,hoveredEndElement:a,boundsOverlap:y,startElementBounds:m,endElementBounds:p}},e9=(e,t)=>{const{dynamicAABBs:n,startDonglePosition:i,startGlobalPoint:r,startHeading:s,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:c,hoveredEndElement:u}=t,d=oae(n,i||r,s,o||a,l,c),f=i&&uU(i,d),h=o&&uU(o,d),m=uU(a,d);m&&u&&(m.closed=!0);const p=uU(r,d);p&&e.startBinding&&(p.closed=!0);const y=f&&h&&(G0(f.pos,n[1])||G0(h.pos,n[0])),b=iae(f||p,h||m,d,s||On,l||On,y?[]:n);if(b){const E=b.map(v=>[v.pos[0],v.pos[1]]);return f&&E.unshift(r),h&&E.push(a),E}return null},El=(e,t,n)=>{switch(e){case zs:return[t,n,n,n];case On:return[n,t,n,n];case qi:return[n,n,t,n]}return[n,n,n,t]},iae=(e,t,n,i,r,s)=>{const o=z8(e.pos,t.pos),a=new qne(l=>l.f);for(a.push(e);a.size()>0;){const l=a.pop();if(!l||l.closed)continue;if(l===t)return rae(e,l);l.closed=!0;const c=lae(l.addr,n);for(let u=0;u<4;u++){const d=c[u];if(!d||d.closed)continue;const f=f1(d.pos,l.pos,.5);if(zre(...s.map(w=>G0(f,w))))continue;const h=cae(u),m=l.parent?mh(ae(l.pos,l.parent.pos)):i,p=tB(m);if(Pn(p,h)||RC(e.addr,d.addr)&&Pn(h,i)||RC(t.addr,d.addr)&&Pn(h,r))continue;const b=m!==h,E=l.g+z8(d.pos,l.pos)+(b?Math.pow(o,3):0),v=d.visited;if(!v||E<d.g){const w=aae(d,t,h,r);d.visited=!0,d.parent=l,d.h=z8(t.pos,d.pos)+w*Math.pow(o,2),d.g=E,d.f=d.g+d.h,v?a.rescoreElement(d):a.push(d)}}}return null},rae=(e,t)=>{let n=t;const i=[];for(;n.parent;)i.unshift(n),n=n.parent;return i.unshift(e),i},z8=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),sae=(e,t,n,i,r,s,o,a)=>{const l=o??e,c=a??t,[u,d,f,h]=i??[0,0,0,0],[m,p,y,b]=r??[0,0,0,0],E=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+c[2])/2,e[0]-h):(l[0]+c[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+c[3])/2,e[1]-u):(l[1]+c[3])/2:e[1]>t[1]?e[1]-u:n[1]-u,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+c[0])/2,e[2]+d):(l[2]+c[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+c[1])/2,e[3]+f):(l[3]+c[1])/2:e[3]<t[3]?e[3]+f:n[3]+f],v=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((c[0]+l[2])/2,t[0]-b):(c[0]+l[2])/2:t[0]>e[0]?t[0]-b:n[0]-b,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((c[1]+l[3])/2,t[1]-m):(c[1]+l[3])/2:t[1]>e[1]?t[1]-m:n[1]-m,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((c[2]+l[0])/2,t[2]+p):(c[2]+l[0])/2:t[2]<e[2]?t[2]+p:n[2]+p,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((c[3]+l[1])/2,t[3]+y):(c[3]+l[1])/2:t[3]<e[3]?t[3]+y:n[3]+y],w=nB([E,v]);if(!s&&E[2]-E[0]+v[2]-v[0]>w[2]-w[0]+1e-11&&E[3]-E[1]+v[3]-v[1]>w[3]-w[1]+1e-11){const[S,k]=[(v[0]+v[2])/2,(v[1]+v[3])/2];if(t[0]>e[2]&&e[1]>t[3]){const _=E[2]+(v[0]-E[2])/2,T=v[3]+(E[1]-v[3])/2;return ut(rn(e[2]-S,e[1]-k),rn(e[0]-S,e[3]-k))>0?[[E[0],E[1],_,E[3]],[_,v[1],v[2],v[3]]]:[[E[0],T,E[2],E[3]],[v[0],v[1],v[2],T]]}else if(e[2]<t[0]&&e[3]<t[1]){const _=E[2]+(v[0]-E[2])/2,T=E[3]+(v[1]-E[3])/2;return ut(rn(e[0]-S,e[1]-k),rn(e[2]-S,e[3]-k))>0?[[E[0],E[1],E[2],T],[v[0],T,v[2],v[3]]]:[[E[0],E[1],_,E[3]],[_,v[1],v[2],v[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){const _=v[2]+(E[0]-v[2])/2,T=E[3]+(v[1]-E[3])/2;return ut(rn(e[2]-S,e[1]-k),rn(e[0]-S,e[3]-k))>0?[[_,E[1],E[2],E[3]],[v[0],v[1],_,v[3]]]:[[E[0],E[1],E[2],T],[v[0],T,v[2],v[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){const _=v[2]+(E[0]-v[2])/2,T=v[3]+(E[1]-v[3])/2;return ut(rn(e[0]-S,e[1]-k),rn(e[2]-S,e[3]-k))>0?[[_,E[1],E[2],E[3]],[v[0],v[1],_,v[3]]]:[[E[0],T,E[2],E[3]],[v[0],v[1],v[2],T]]}}return[E,v]},oae=(e,t,n,i,r,s)=>{const o=new Set,a=new Set;n===as||n===On?a.add(t[1]):o.add(t[0]),r===as||r===On?a.add(i[1]):o.add(i[0]),e.forEach(u=>{o.add(u[0]),o.add(u[2]),a.add(u[1]),a.add(u[3])}),o.add(s[0]),o.add(s[2]),a.add(s[1]),a.add(s[3]);const l=Array.from(a).sort((u,d)=>u-d),c=Array.from(o).sort((u,d)=>u-d);return{row:l.length,col:c.length,data:l.flatMap((u,d)=>c.map((f,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[f,u]})))}},CC=(e,t,n)=>{switch(t){case zs:return I(n[0],e[1]);case On:return I(e[2],n[1]);case qi:return I(n[0],e[3])}return I(e[0],n[1])},aae=(e,t,n,i)=>{if(i===On)switch(n){case On:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case zs:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case qi:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case as:return e.pos[1]===t.pos[1]?4:2}else if(i===as)switch(n){case On:return e.pos[1]===t.pos[1]?4:2;case zs:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case qi:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case as:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(i===zs)switch(n){case On:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case zs:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case qi:return e.pos[0]===t.pos[0]?4:2;case as:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(i===qi)switch(n){case On:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case zs:return e.pos[0]===t.pos[0]?4:2;case qi:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case as:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},lae=([e,t],n)=>[h1([e,t-1],n),h1([e+1,t],n),h1([e,t+1],n),h1([e-1,t],n)],h1=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,uU=(e,t)=>{for(let n=0;n<t.col;n++)for(let i=0;i<t.row;i++){const r=h1([n,i],t);if(r&&e[0]===r.pos[0]&&e[1]===r.pos[1])return r}return null},nB=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],kb=(e,t)=>{const n=t.get(e);return n&&Zs(n)?n:null},za=(e,t,n,i)=>{const r=e[0][0],s=e[0][1];let o=e.map(a=>mb(a,Sn(ae(e[0]),-1)));return(r<-1e6||r>cU||s<-1e6||s>cU||r+o[o.length-1][0]<-1e6||s+o[o.length-1][0]>cU||r+o[o.length-1][1]<-1e6||s+o[o.length-1][1]>cU)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:r,y:s,points:o,...dh(o)}),o=o.map(([a,l])=>I(Ve(a,-1e6,1e6),Ve(l,-1e6,1e6))),{points:o,x:Ve(r,-1e6,1e6),y:Ve(s,-1e6,1e6),fixedSegments:(t?.length??0)>0?t:null,...dh(o),startIsSpecial:n,endIsSpecial:i}},t9=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,i)=>{if(i===0||i===e.length-1)return!0;const r=e[i+1],s=Math.abs(n[1]-r[1])<Math.abs(n[0]-r[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},n9=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;const i=e[n-1];return dt(i,t)>Qw}):e,cae=e=>{switch(e){case 0:return zs;case 1:return On;case 2:return qi}return as},AC=(e,t,n,i,r,s,o)=>o?r&&s?lB(e,r,t,s):i:r?A7(n||[0,0],r,s??be([r])):i,MC=(e,t,n,i,r)=>_ae(e,t,n,n&&fa(n,r,Array(4).fill(Qm(n,r,e))),i,r),kC=(e,t,n,i)=>Ha(Fa(e),n,t,i,!0,!0),RC=(e,t)=>e[0]===t[0]&&e[1]===t[1],iB=(e,t=Qw)=>e.slice(1).map((n,i)=>Math.abs(n[0]-e[i][0])<t||Math.abs(n[1]-e[i][1])<t).every(Boolean),fi=(e,t,n,i)=>{let r=!1;const{points:s,fixedSegments:o,startBinding:a,endBinding:l,fileId:c}=n;ce(e)&&(Object.keys(n).length===0||typeof s<"u"||typeof o<"u"||typeof a<"u"||typeof l<"u")?n={...n,angle:0,...qh({...e,x:n.x||e.x,y:n.y||e.y},t,n,i)}:typeof s<"u"&&(n={...dh(s),...n});for(const u in n){const d=n[u];if(typeof d<"u"){if(e[u]===d&&(typeof d!="object"||d===null||u==="groupIds"||u==="scale"))continue;if(u==="scale"){const f=e[u],h=d;if(f[0]===h[0]&&f[1]===h[1])continue}else if(u==="points"){const f=e[u],h=d;if(f.length===h.length){let m=!1,p=f.length;for(;--p;){const y=f[p],b=h[p];if(y[0]!==b[0]||y[1]!==b[1]){m=!0;break}}if(!m)continue}}e[u]=d,r=!0}}return r&&((typeof n.height<"u"||typeof n.width<"u"||typeof c<"u"||typeof s<"u")&&Et.delete(e),e.version=n.version??e.version+1,e.versionNonce=n.versionNonce??Ts(),e.updated=Kh()),e},Ee=(e,t,n=!1)=>{let i=!1;for(const r in t){const s=t[r];if(typeof s<"u"){if(e[r]===s&&(typeof s!="object"||s===null))continue;i=!0}}return!i&&!n?e:{...e,...t,version:t.version??e.version+1,versionNonce:t.versionNonce??Ts(),updated:Kh()}},wa=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=Ts(),e.updated=Kh(),e),uae=e=>!e[B.CTRL_OR_CMD],Nu=e=>e.isBindingEnabled,St=5,dae=10,fae=(e,t)=>{const n=[];return t.forEach(i=>{const r=e.getNonDeletedElement(i);r!=null&&n.push(r)}),n},Rb=(e,t,n,i)=>{i.getNonDeletedElementsMap();const r=new Set,s=new Set;DC(e,t,n,"start",r,s,i),DC(e,n,t,"end",r,s,i);const o=Array.from(s).filter(a=>!r.has(a));fae(i,o).forEach(a=>{i.mutateElement(a,{boundElements:a.boundElements?.filter(l=>l.type!=="arrow"||l.id!==e.id)})})},DC=(e,t,n,i,r,s,o,a)=>{if(t!=="keep"){if(t===null){const l=Uae(e,i,o);l!=null&&s.add(l);return}aB(e)?(n==null||(n==="keep"?!sB(e,t,i):i==="start"||n.id!==t.id))&&(Vo(e,t,i,o),r.add(t.id)):(Vo(e,t,i,o),r.add(t.id))}},rB=(e,t,n)=>["start","end"].map(i=>{const r=cB(e,i,t),s=i==="start"?e.startBinding?.elementId:e.endBinding?.elementId;if(s){const o=t.get(s);if(Zs(o)&&s2(o,r,t,n))return o}return null}),hae=(e,t,n,i,r,s)=>{const a=e.points.length-1,l=n.findIndex(f=>f===0)>-1,c=n.findIndex(f=>f===a)>-1,u=l?t?Ob(e,"start",i,r,s):null:"keep",d=c?t?Ob(e,"end",i,r,s):null:"keep";return[u,d]},gae=(e,t,n,i,r)=>{if(ce(e))return["keep","keep"];const[s,o]=rB(e,t,r),a=s&&i?Ob(e,"start",t,n,r):null,l=o&&i?Ob(e,"end",t,n,r):null;return[a,l]},Db=(e,t,n,i,r)=>{e.forEach(s=>{const[o,a]=n?.length?hae(s,t,n??[],i.getNonDeletedElementsMap(),i.getNonDeletedElements(),r):gae(s,i.getNonDeletedElementsMap(),i.getNonDeletedElements(),t,r);Rb(s,o,a,i)})},H8=(e,t,n)=>e.length>50?[]:e.filter(we).flatMap(i=>rB(i,t,n)).filter(i=>i!==null).filter(i=>e.filter(r=>r.id===i?.id).length===0),C7=(e,t,n,i,r)=>Array.from(t.reduce((s,o)=>{const a=Ha(o,n.getNonDeletedElements(),n.getNonDeletedElementsMap(),i,ce(e),ce(e));return a!=null&&!oB(e,r?.id,a)&&s.add(a),s},new Set)),mae=(e,t,n,i)=>{const r=i.getNonDeletedElements(),s=i.getNonDeletedElementsMap();t.startBoundElement!=null&&Vo(e,t.startBoundElement,"start",i);const o=Ha(n,r,s,t.zoom,ce(e),ce(e));o!==null&&(sB(e,o,"end")||Vo(e,o,"end",i))},pae=(e,t)=>({...e,gap:Math.min(e.gap,Qh(t,t.width,t.height))}),Vo=(e,t,n,i)=>{if(!_e(e))return;let r={elementId:t.id,...pae(Eae(e,t,n,i.getNonDeletedElementsMap()),t)};ce(e)&&(r={...r,...Lb(e,t,n,i.getNonDeletedElementsMap())}),i.mutateElement(e,{[n==="start"?"startBinding":"endBinding"]:r}),be(t.boundElements||[]).has(e.id)||i.mutateElement(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},sB=(e,t,n)=>{const i=e[n==="start"?"endBinding":"startBinding"];return oB(e,i?.elementId,t)},oB=(e,t,n)=>t===n.id&&aB(e),aB=e=>e.points.length<3&&!ce(e),Uae=(e,t,n)=>{const i=t==="start"?"startBinding":"endBinding",r=e[i];return r==null?null:(n.mutateElement(e,{[i]:null}),r.elementId)},Ha=(e,t,n,i,r,s)=>{if(s){let a=!1;const l=yae(t,u=>Zs(u,!1)&&s2(u,e,n,i,(r||!JU(u))&&!pe(u))).filter(u=>a?!1:(JU(u)||(a=!0),!0));if(!l||l.length===0)return null;if(l.length===1)return l[0];const c=l.filter(u=>s2(u,e,n,i,!1));return c.length===1?c[0]:l.sort((u,d)=>d.width**2+d.height**2-(u.width**2+u.height**2)).pop()}return bae(t,a=>Zs(a,!1)&&s2(a,e,n,i,(r||!JU(a))&&!pe(a)))},bae=(e,t)=>{let n=null;for(let i=e.length-1;i>=0;--i){const r=e[i];if(!r.isDeleted&&t(r)){n=r;break}}return n},yae=(e,t)=>{const n=[];for(let i=e.length-1;i>=0;--i){const r=e[i];r.isDeleted||t(r)&&n.push(r)}return n},Eae=(e,t,n,i)=>{const r=n==="start"?-1:1,s=r===-1?0:e.points.length-1,o=s-r,a=Z.getPointAtIndexGlobalCoordinates(e,s,i),l=Z.getPointAtIndexGlobalCoordinates(e,o,i);return{focus:Aae(t,i,l,a),gap:Math.max(1,Qm(t,i,a))}},pr=(e,t,n)=>{if(!Zs(e))return;const{newSize:i,simultaneouslyUpdated:r}=n??{},s=wae(r);let o=t.getNonDeletedElementsMap();n?.changedElements&&(o=new Map(o),n.changedElements.forEach(a=>{o.set(a.id,a)})),Nb(o,e,a=>{if(!we(a)||a.isDeleted||!vae(a,e))return;const l=a.startBinding?o.get(a.startBinding.elementId):null,c=a.endBinding?o.get(a.endBinding.elementId):null;let u=null,d=null;l&&c&&(u=_i(l,o),d=_i(c,o));const f={startBinding:LC(e,a.startBinding,i),endBinding:LC(e,a.endBinding,i)};if(s.has(a.id)){t.mutateElement(a,f);return}const h=Pb(o,a,(p,y)=>{if(p&&Zs(p)&&(y==="startBinding"||y==="endBinding")&&(e.id===a[y]?.elementId||e.id===a[y==="startBinding"?"endBinding":"startBinding"]?.elementId&&!tg(u,d))){const b=xae(a,y,f[y],p,o);if(b)return[y==="startBinding"?0:a.points.length-1,{point:b}]}return null}).filter(p=>p!==null);Z.movePoints(a,t,new Map(h),{...e.id===a.startBinding?.elementId?{startBinding:f.startBinding}:{},...e.id===a.endBinding?.elementId?{endBinding:f.endBinding}:{}});const m=Ce(a,o);m&&!m.isDeleted&&Zm(a,t,!1)})},H0=(e,t,n)=>{we(e)?Db([e],!0,[],t,n?.zoom):pr(e,t,{...n,changedElements:new Map([[e.id,e]])})},vae=(e,t)=>e.startBinding?.elementId===t.id||e.endBinding?.elementId===t.id,wae=e=>new Set((e||[]).map(t=>t.id)),_ae=(e,t,n,i,r,s,o)=>{const a=mh(ae(t,e));return!n||!i?a:Tae(r,n,s,o)?qw(n,i,e):mh(ae(e,Jn(n,s)))},Tae=(e,t,n,i)=>{const r=Qm(t,n,e),s=Qh(t,t.width,t.height,i);return r>s?null:r},lB=(e,t,n,i)=>{const r=fa(t,i),s=e.points[n==="start"?0:e.points.length-1],o=I(e.x+s[0],e.y+s[1]),a=boe(t)?Sae(t,i,o):o,l=ce(e),c=eg(r),u=n==="start"?1:e.points.length-2,d=W(I(e.x+e.points[u][0],e.y+e.points[u][1]),c,e.angle??0);let f=null;if(l){const h=Io(qw(t,r,o)),m=Iae(t,i,a),p=I(h?c[0]:m[0],h?m[1]:c[1]),y=Se(p,Ei(Sn(ws(ae(m,p)),Math.max(t.width,t.height)*2),p));f=qa(t,i,y,St).sort(Xl)[0]}else f=qa(t,i,Se(d,Ei(Sn(ws(ae(a,d)),dt(a,d)+Math.max(t.width,t.height)*2),d)),St).sort((h,m)=>Xl(h,d)-Xl(m,d))[0];return!f||Xl(a,f)<Vm?a:l?f:a},Sae=(e,t,n)=>{const i=Jn(e,t),r=W(n,i,-e.angle);return r[0]<e.x&&r[1]<e.y?r[1]-e.y>-5?W(I(e.x-St,e.y),i,e.angle):W(I(e.x,e.y-St),i,e.angle):r[0]<e.x&&r[1]>e.y+e.height?r[0]-e.x>-5?W(I(e.x,e.y+e.height+St),i,e.angle):W(I(e.x-St,e.y+e.height),i,e.angle):r[0]>e.x+e.width&&r[1]>e.y+e.height?r[0]-e.x<e.width+St?W(I(e.x+e.width,e.y+e.height+St),i,e.angle):W(I(e.x+e.width+St,e.y+e.height),i,e.angle):r[0]>e.x+e.width&&r[1]<e.y?r[0]-e.x<e.width+St?W(I(e.x+e.width,e.y-St),i,e.angle):W(I(e.x+e.width+St,e.y),i,e.angle):n},Iae=(e,t,n,i=.05)=>{const{x:r,y:s,width:o,height:a,angle:l}=e,c=Jn(e,t,-.1,-.1),u=W(n,c,-l),d=Ve(i*a,5,80),f=Ve(i*o,5,80);if(u[0]<=r+o/2&&u[1]>c[1]-d&&u[1]<c[1]+d)return W(I(r-St,c[1]),c,l);if(u[1]<=s+a/2&&u[0]>c[0]-f&&u[0]<c[0]+f)return W(I(c[0],s-St),c,l);if(u[0]>=r+o/2&&u[1]>c[1]-d&&u[1]<c[1]+d)return W(I(r+o+St,c[1]),c,l);if(u[1]>=s+a/2&&u[0]>c[0]-f&&u[0]<c[0]+f)return W(I(c[0],s+a+St),c,l);if(e.type==="diamond"){const h=St,m=I(r+o/4-h,s+a/4-h),p=I(r+3*o/4+h,s+a/4-h),y=I(r+o/4-h,s+3*a/4+h),b=I(r+3*o/4+h,s+3*a/4+h);if(dt(m,u)<Math.max(f,d))return W(m,c,l);if(dt(p,u)<Math.max(f,d))return W(p,c,l);if(dt(y,u)<Math.max(f,d))return W(y,c,l);if(dt(b,u)<Math.max(f,d))return W(b,c,l)}return n},xae=(e,t,n,i,r)=>{if(n==null||n.elementId!==i.id&&e.points.length>2)return null;const s=t==="startBinding"?-1:1,o=s===-1?0:e.points.length-1;if(ce(e)&&Cb(n)){const d=g5(n.fixedPoint)??Lb(e,i,t==="startBinding"?"start":"end",r).fixedPoint,f=Jn(i,r),h=I(i.x+d[0]*i.width,i.y+d[1]*i.height),m=W(h,f,i.angle);return Z.pointFromAbsoluteCoords(e,m,r)}const a=o-s,l=Z.getPointAtIndexGlobalCoordinates(e,a,r),c=Mae(i,r,n.focus,l);let u;if(n.gap===0)u=c;else{const d=Z.getPointAtIndexGlobalCoordinates(e,o,r),f=Jn(i,r),h=dt(l,d)+dt(l,f)+Math.max(i.width,i.height)*2,m=[...qa(i,r,Se(l,Ei(Sn(ws(ae(c,l)),h),l)),n.gap).sort((p,y)=>Xl(p,l)-Xl(y,l)),Ei(Sn(ws(ae(c,l)),dt(l,d)),l)];m.length>1?u=m[0]:m.length===1?u=c:u=d}return Z.pointFromAbsoluteCoords(e,u,r)},Lb=(e,t,n,i)=>{const r=[t.x,t.y,t.x+t.width,t.y+t.height],s=lB(e,t,n,i),o=I(r[0]+(r[2]-r[0])/2,r[1]+(r[3]-r[1])/2),a=W(s,o,-t.angle);return{fixedPoint:g5([(a[0]-t.x)/t.width,(a[1]-t.y)/t.height])}},LC=(e,t,n)=>{if(t==null||n==null)return t;const{width:i,height:r}=n,{width:s,height:o}=e,a=Math.max(1,Math.min(Qh(e,i,r),t.gap*(i<r?i/s:r/o)));return{...t,gap:a}},Ob=(e,t,n,i,r)=>Ha(cB(e,t,n),i,n,r,ce(e),ce(e)),cB=(e,t,n)=>{const i=t==="start"?0:-1;return Fa(Z.getPointAtIndexGlobalCoordinates(e,i,n))},Cae=(e,t,n)=>{for(const i of e){if("boundElements"in i&&i.boundElements&&Object.assign(i,{boundElements:i.boundElements.reduce((r,s)=>{const o=t.get(s.id);return o&&r.push({...s,id:o}),r},[])}),"containerId"in i&&i.containerId&&Object.assign(i,{containerId:t.get(i.containerId)??null}),"endBinding"in i&&i.endBinding){const r=t.get(i.endBinding.elementId);Object.assign(i,{endBinding:r?{...i.endBinding,elementId:r}:null})}if("startBinding"in i&&i.startBinding){const r=t.get(i.startBinding.elementId);Object.assign(i,{startBinding:r?{...i.startBinding,elementId:r}:null})}ce(i)&&Object.assign(i,qh(i,n,{points:[i.points[0],i.points[i.points.length-1]]}))}},uB=(e,t)=>{const n=be(e);for(const i of t)g1.unbindAffected(n,i,(r,s)=>fi(r,n,s)),m1.unbindAffected(n,i,(r,s)=>fi(r,n,s))},J1=(e,t,n=[])=>{if(!e)return null;const i=e.filter(r=>!t.has(r.id));return i.push(...n.map(r=>({id:r.id,type:r.type}))),i},s2=(e,{x:t,y:n},i,r,s)=>{const o=I(t,n),a=Qh(e,e.width,e.height,r),l=(s||!JU(e))&&!pe(e),c=[t-a,n-a,t+a,n+a],u=_i(e,i);if(!tg(c,u))return!1;const d=qa(e,i,Se(Jn(e,i),o)),f=Qm(e,i,o);return l?d.length===0||f<=a:d.length>0&&f<=a},Qh=(e,t,n,i)=>{const r=i?.value&&i.value<1?i.value:1,o=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*o,32),dae/r+St)},Aae=(e,t,n,i)=>{const r=Jn(e,t);if(_s(n,i))return 0;const s=W(n,r,-e.angle),o=W(i,r,-e.angle),a=Math.sign(ut(ae(o,n),ae(o,r)))*-1,l=Se(o,Ei(Sn(ws(ae(o,s)),Math.max(e.width*2,e.height*2)),o)),c=e.type==="diamond"?[Se(I(e.x+e.width/2,e.y),I(e.x+e.width/2,e.y+e.height)),Se(I(e.x,e.y+e.height/2),I(e.x+e.width,e.y+e.height/2))]:[Se(I(e.x,e.y),I(e.x+e.width,e.y+e.height)),Se(I(e.x+e.width,e.y),I(e.x,e.y+e.height))],u=e.type==="diamond"?[Se(I(e.x+e.width/2,e.y-e.height),I(e.x+e.width/2,e.y+e.height*2)),Se(I(e.x-e.width,e.y+e.height/2),I(e.x+e.width*2,e.y+e.height/2))]:[Se(I(e.x-e.width,e.y-e.height),I(e.x+e.width*2,e.y+e.height*2)),Se(I(e.x+e.width*2,e.y-e.height),I(e.x-e.width,e.y+e.height*2))];return[bb(l,u[0]),bb(l,u[1])].filter(h=>h!==null).sort((h,m)=>Xl(h,i)-Xl(m,i)).map((h,m)=>a*dt(r,h)/(e.type==="diamond"?dt(c[m][0],c[m][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((h,m)=>Math.abs(h)-Math.abs(m))[0]??0},Mae=(e,t,n,i)=>{const r=Jn(e,t);if(n===0)return r;const s=(e.type==="diamond"?[I(e.x,e.y+e.height/2),I(e.x+e.width/2,e.y),I(e.x+e.width,e.y+e.height/2),I(e.x+e.width/2,e.y+e.height)]:[I(e.x,e.y),I(e.x+e.width,e.y),I(e.x+e.width,e.y+e.height),I(e.x,e.y+e.height)]).map(l=>Ei(Sn(ae(l,r),Math.abs(n)),r)).map(l=>W(l,r,e.angle)),o=[ut(ae(i,s[0]),ae(s[1],s[0]))>0&&(n>0?ut(ae(i,s[1]),ae(s[2],s[1]))<0:ut(ae(i,s[3]),ae(s[0],s[3]))<0),ut(ae(i,s[1]),ae(s[2],s[1]))>0&&(n>0?ut(ae(i,s[2]),ae(s[3],s[2]))<0:ut(ae(i,s[0]),ae(s[1],s[0]))<0),ut(ae(i,s[2]),ae(s[3],s[2]))>0&&(n>0?ut(ae(i,s[3]),ae(s[0],s[3]))<0:ut(ae(i,s[1]),ae(s[2],s[1]))<0),ut(ae(i,s[3]),ae(s[0],s[3]))>0&&(n>0?ut(ae(i,s[0]),ae(s[1],s[0]))<0:ut(ae(i,s[2]),ae(s[3],s[2]))<0)];return o[0]?n>0?s[1]:s[0]:o[1]?n>0?s[2]:s[1]:o[2]?n>0?s[3]:s[2]:n>0?s[0]:s[3]},kae=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),Nb=(e,t,n)=>{Zs(t)&&(t.boundElements?.slice()??[]).forEach(({id:r})=>{n(e.get(r),"boundElements",r)})},Pb=(e,t,n)=>{const i=[];if(t.frameId){const r=t.frameId;i.push(n(e.get(r),"frameId",r))}if(Ft(t)){const r=t.containerId;i.push(n(e.get(r),"containerId",r))}if(_e(t)){if(t.startBinding){const r=t.startBinding.elementId;i.push(n(e.get(r),"startBinding",r))}if(t.endBinding){const r=t.endBinding.elementId;i.push(n(e.get(r),"endBinding",r))}}return i};class g1{static unbindAffected(t,n,i){n&&Pb(t,n,r=>{!r||r.isDeleted||Nb(t,r,(s,o,a)=>{a===n.id&&i(r,{boundElements:J1(r.boundElements,new Set([a]))})})})}static rebindAffected=(t,n,i)=>{!n||n.isDeleted||Pb(t,n,(r,s)=>{if(!r||r.isDeleted){i(n,{[s]:null});return}s!=="frameId"&&(r.boundElements?.find(o=>o.id===n.id)||(_e(n)&&i(r,{boundElements:J1(r.boundElements,new Set,new Array(n))}),le(n)&&(r.boundElements?.find(o=>o.type==="text")?i(n,{[s]:null}):i(r,{boundElements:J1(r.boundElements,new Set,new Array(n))}))))})}}class m1{static unbindAffected(t,n,i){n&&Nb(t,n,r=>{!r||r.isDeleted||Pb(t,r,(s,o,a)=>{a===n.id&&i(r,{[o]:null})})})}static rebindAffected=(t,n,i)=>{!n||n.isDeleted||Nb(t,n,(r,s,o)=>{if(!r||r.isDeleted){i(n,{boundElements:J1(n.boundElements,new Set([o]))});return}le(r)&&((n.boundElements?.slice()??[]).reverse().find(l=>l.type==="text")?.id===r.id?r.containerId!==n.id&&i(r,{containerId:n.id}):(r.containerId!==null&&i(r,{containerId:null}),i(n,{boundElements:J1(n.boundElements,new Set([r.id]))})))})}}const A7=(e,t,n)=>{const[i,r]=g5(e);return W(I(t.x+t.width*i,t.y+t.height*r),Jn(t,n),t.angle)},Rae=(e,t)=>{const n=e.startBinding&&t.get(e.startBinding.elementId),i=e.endBinding&&t.get(e.endBinding.elementId),r=n&&e.startBinding?A7(e.startBinding.fixedPoint,n,t):I(e.x+e.points[0][0],e.y+e.points[0][1]),s=i&&e.endBinding?A7(e.endBinding.fixedPoint,i,t):I(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[r,s]},Dae=(e,t)=>{const[n,i]=Rae(e,t);return[Z.pointFromAbsoluteCoords(e,n,t),Z.pointFromAbsoluteCoords(e,i,t)]},g5=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,V8=({points:e})=>{const t=e[0][0],n=e[0][1];return{points:e.map(i=>I(i[0]-t,i[1]-n)),offsetX:t,offsetY:n}};class Z{elementId;selectedPointsIndices;pointerDownState;isDragging;lastUncommittedPoint;pointerOffset;startBindingElement;endBindingElement;hoverPointIndex;segmentMidPointHoveredCoords;elbowed;customLineAngle;constructor(t,n){this.elementId=t.id,_s(t.points[0],I(0,0))||(console.error("Linear element is not normalized",Error().stack),fi(t,n,Z.getNormalizeElementPointsAndCoords(t))),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=ce(t)&&t.elbowed,this.customLineAngle=null}static POINT_HANDLE_SIZE=10;static getElement(t,n){const i=n.get(t);return i||null}static handleBoxSelection(t,n,i,r){if(!n.editingLinearElement||!n.selectionElement)return!1;const{editingLinearElement:s}=n,{selectedPointsIndices:o,elementId:a}=s,l=Z.getElement(a,r);if(!l)return!1;const[c,u,d,f]=Le(n.selectionElement,r),m=Z.getPointsGlobalCoordinates(l,r).reduce((p,y,b)=>((y[0]>=c&&y[0]<=d&&y[1]>=u&&y[1]<=f||t.shiftKey&&o?.includes(b))&&p.push(b),p),[]).filter(p=>!(ce(l)&&p!==0&&p!==l.points.length-1));i({editingLinearElement:{...s,selectedPointsIndices:m.length?m:null}})}static handlePointDragging(t,n,i,r,s){if(!s)return null;const{elementId:o}=s,a=n.scene.getNonDeletedElementsMap(),l=Z.getElement(o,a);let c=s.customLineAngle;if(!l||ce(l)&&!s.pointerDownState.lastClickedIsEndPoint&&s.pointerDownState.lastClickedPoint!==0)return null;const u=ce(l)?[s.selectedPointsIndices?.includes(0)?0:void 0,s.selectedPointsIndices?.find(h=>h>0)?l.points.length-1:void 0].filter(h=>h!==void 0):s.selectedPointsIndices,d=ce(l)?s.pointerDownState.lastClickedPoint>0?l.points.length-1:0:s.pointerDownState.lastClickedPoint,f=l.points[d];if(u&&f){if(W1(t)&&u.length===1&&l.points.length>1){const y=u[0],b=l.points[y===0?1:y-1];c=s.customLineAngle??Math.atan2(l.points[y][1]-b[1],l.points[y][0]-b[0]);const[E,v]=Z._getShiftLockedDelta(l,a,b,I(i,r),t[B.CTRL_OR_CMD]?null:n.getEffectiveGridSize(),c);Z.movePoints(l,n.scene,new Map([[y,{point:I(E+b[0],v+b[1]),isDragging:y===d}]]))}else{const y=Z.createPointAt(l,a,i-s.pointerOffset.x,r-s.pointerOffset.y,t[B.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),b=y[0]-f[0],E=y[1]-f[1];Z.movePoints(l,n.scene,new Map(u.map(v=>{const w=v===d?Z.createPointAt(l,a,i-s.pointerOffset.x,r-s.pointerOffset.y,t[B.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):I(l.points[v][0]+b,l.points[v][1]+E);return[v,{point:w,isDragging:v===d}]})))}Ce(l,a)&&Zm(l,n.scene,!1);let m=[];if(Aa(l,!1)){const y=u[0]===0,b=u[u.length-1]===l.points.length-1,E=[];!y!=!b?E.push({x:i,y:r}):(y&&E.push(Fa(Z.getPointGlobalCoordinates(l,l.points[0],a))),b&&E.push(Fa(Z.getPointGlobalCoordinates(l,l.points[u[u.length-1]],a)))),E.length&&(m=C7(l,E,n.scene,n.state.zoom))}const p={...s,selectedPointsIndices:u,segmentMidPointHoveredCoords:d!==0&&d!==l.points.length-1?this.getPointGlobalCoordinates(l,f,a):null,hoverPointIndex:d===0||d===l.points.length-1?d:-1,isDragging:!0,customLineAngle:c};return{...n.state,editingLinearElement:n.state.editingLinearElement?p:null,selectedLinearElement:p,suggestedBindings:m}}return null}static handlePointerUp(t,n,i,r){const s=r.getNonDeletedElementsMap(),o=r.getNonDeletedElements(),a=Tt(t,i),{elementId:l,selectedPointsIndices:c,isDragging:u,pointerDownState:d}=n,f=Z.getElement(l,s);if(!f)return n;const h={};if(u&&c){for(const m of c)if(m===0||m===f.points.length-1){Bo(f.points,i.zoom.value)&&(sn(f)&&r.mutateElement(f,{...f9(f,!0)},{informMutation:!1,isDragging:!1}),Z.movePoints(f,r,new Map([[m,{point:m===0?f.points[f.points.length-1]:f.points[0]}]])));const p=Nu(i)?Ha((c?.length??0)>1?Fa(Z.getPointAtIndexGlobalCoordinates(f,m,s)):a,o,s,i.zoom,ce(f),ce(f)):null;h[m===0?"startBindingElement":"endBindingElement"]=p}}return{...n,...h,segmentMidPointHoveredCoords:null,hoverPointIndex:-1,selectedPointsIndices:u||t.shiftKey?!u&&t.shiftKey&&d.prevSelectedPointsIndices?.includes(d.lastClickedPoint)?c&&c.filter(m=>m!==d.lastClickedPoint):c:c?.includes(d.lastClickedPoint)?[d.lastClickedPoint]:c,isDragging:!1,pointerOffset:{x:0,y:0},customLineAngle:null}}static getEditorMidPoints=(t,n,i)=>{const r=Ce(t,n);if(!ce(t)&&!i.editingLinearElement&&t.points.length>2&&!r)return[];const s=Z.getPointsGlobalCoordinates(t,n);let o=0;const a=[];for(;o<s.length-1;){if(Z.isSegmentTooShort(t,t.points[o],t.points[o+1],o,i.zoom)){a.push(null),o++;continue}const l=Z.getSegmentMidPoint(t,o+1);a.push(l),o++}return a};static getSegmentMidpointHitCoords=(t,n,i,r)=>{const{elementId:s}=t,o=Z.getElement(s,r);if(!o)return null;const a=Z.getPointIndexUnderCursor(o,r,i.zoom,n.x,n.y);if(!ce(o)&&a>=0||Z.getPointsGlobalCoordinates(o,r).length>=3&&!i.editingLinearElement&&!ce(o))return null;const c=(Z.POINT_HANDLE_SIZE+1)/i.zoom.value,u=t.segmentMidPointHoveredCoords;if(u&&dt(I(u[0],u[1]),I(n.x,n.y))<=c)return u;let d=0;const f=Z.getEditorMidPoints(o,r,i);for(;d<f.length;){if(f[d]!==null&&dt(f[d],I(n.x,n.y))<=c)return f[d];d++}return null};static isSegmentTooShort(t,n,i,r,s){if(ce(t))return r>=0&&r<t.points.length?dt(n,i)*s.value<Z.POINT_HANDLE_SIZE/2:!1;let o=dt(n,i);if(t.points.length>2&&t.roundness){const[a,l]=xb(t);jn(a.length===0&&l.length>0,"Only linears built out of curves are supported"),jn(a.length+l.length>=r,"Invalid segment index while calculating mid point"),o=Dw(l[r])}return o*s.value<Z.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n){if(ce(t)){jn(t.points.length>=n,"Invalid segment index while calculating elbow arrow mid point");const s=pb(t.points[n-1],t.points[n]);return I(t.x+s[0],t.y+s[1])}const[i,r]=xb(t);if(jn(i.length===0&&r.length>0||i.length>0&&r.length===0,"Only linears built out of either segments or curves are supported"),jn(i.length+r.length>=n,"Invalid segment index while calculating mid point"),i.length){const s=i[n-1];return pb(s[0],s[1])}if(r.length){const s=r[n-1];return dre(s,.5)}jn(!1,"Invalid segment type while calculating mid point")}static getSegmentMidPointIndex(t,n,i,r){const s=Z.getElement(t.elementId,r);if(!s)return-1;const o=Z.getEditorMidPoints(s,r,n);let a=0;for(;a<o.length;){if(Z.arePointsEqual(i,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,i,r,s,o){const a=n.state,l=o.getNonDeletedElementsMap(),c=o.getNonDeletedElements(),u={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return u;const{elementId:d}=s,f=Z.getElement(d,l);if(!f)return u;const h=Z.getSegmentMidpointHitCoords(s,r,a,l);let m=null;if(h)m=Z.getSegmentMidPointIndex(s,a,h,l);else if(t.altKey&&a.editingLinearElement)return s.lastUncommittedPoint==null&&(o.mutateElement(f,{points:[...f.points,Z.createPointAt(f,l,r.x,r.y,t[B.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),u.didAddPoint=!0),i.scheduleCapture(),u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:[f.points.length-1],lastUncommittedPoint:null,endBindingElement:Ha(r,c,l,n.state.zoom,s.elbowed)},u.didAddPoint=!0,u;const p=Z.getPointIndexUnderCursor(f,l,a.zoom,r.x,r.y);if(p>=0||h)u.hitElement=f;else{const{startBindingElement:T,endBindingElement:A}=s;Nu(a)&&Aa(f)&&Rb(f,T,A,o)}const[y,b,E,v]=Le(f,l),w=(y+E)/2,S=(b+v)/2,k=p>-1&&W(I(f.x+f.points[p][0],f.y+f.points[p][1]),I(w,S),f.angle),_=p>-1||t.shiftKey?t.shiftKey||s.selectedPointsIndices?.includes(p)?Lae([...s.selectedPointsIndices||[],p]):[p]:null;return u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:p,lastClickedIsEndPoint:p===f.points.length-1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:_,pointerOffset:k?{x:r.x-k[0],y:r.y-k[1]}:{x:0,y:0}},u}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:_s(t,n)}static handlePointerMove(t,n,i,r){const s=r.state;if(!s.editingLinearElement)return null;const{elementId:o,lastUncommittedPoint:a}=s.editingLinearElement,l=r.scene.getNonDeletedElementsMap(),c=Z.getElement(o,l);if(!c)return s.editingLinearElement;const{points:u}=c,d=u[u.length-1];if(!t.altKey)return d===a&&Z.deletePoints(c,r,[u.length-1]),{...s.editingLinearElement,lastUncommittedPoint:null};let f;if(W1(t)&&u.length>=2){const h=u[u.length-2],[m,p]=Z._getShiftLockedDelta(c,l,h,I(n,i),t[B.CTRL_OR_CMD]?null:r.getEffectiveGridSize());f=I(m+h[0],p+h[1])}else f=Z.createPointAt(c,l,n-s.editingLinearElement.pointerOffset.x,i-s.editingLinearElement.pointerOffset.y,t[B.CTRL_OR_CMD]||ce(c)?null:r.getEffectiveGridSize());return d===a?Z.movePoints(c,r.scene,new Map([[c.points.length-1,{point:f}]])):Z.addPoints(c,r.scene,[f]),{...s.editingLinearElement,lastUncommittedPoint:c.points[c.points.length-1]}}static getPointGlobalCoordinates(t,n,i){const[r,s,o,a]=Le(t,i),l=(r+o)/2,c=(s+a)/2,{x:u,y:d}=t;return W(I(u+n[0],d+n[1]),I(l,c),t.angle)}static getPointsGlobalCoordinates(t,n){const[i,r,s,o]=Le(t,n),a=(i+s)/2,l=(r+o)/2;return t.points.map(c=>{const{x:u,y:d}=t;return W(I(u+c[0],d+c[1]),I(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,i){const r=n<0?t.points.length+n:n,[s,o,a,l]=Le(t,i),c=(s+a)/2,u=(o+l)/2,d=t.points[r],{x:f,y:h}=t;return W(d?I(f+d[0],h+d[1]):I(f,h),I(c,u),t.angle)}static pointFromAbsoluteCoords(t,n,i){if(ce(t))return I(n[0]-t.x,n[1]-t.y);const[r,s,o,a]=Le(t,i),l=(r+o)/2,c=(s+a)/2,[u,d]=W(I(n[0],n[1]),I(l,c),-t.angle);return I(u-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,i,r,s){const o=Z.getPointsGlobalCoordinates(t,n);let a=o.length;for(;--a>-1;){const l=o[a];if(dt(I(r,s),I(l[0],l[1]))*i.value<Z.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,i,r,s){const o=An(i,r,s),[a,l,c,u]=Le(t,n),d=(a+c)/2,f=(l+u)/2,[h,m]=W(I(o[0],o[1]),I(d,f),-t.angle);return I(h-t.x,m-t.y)}static getNormalizeElementPointsAndCoords(t){const{points:n,offsetX:i,offsetY:r}=V8(t);return{points:n,x:t.x+i,y:t.y+r}}static duplicateSelectedPoints(t,n){jn(t.editingLinearElement,"Not currently editing a linear element");const i=n.getNonDeletedElementsMap(),{selectedPointsIndices:r,elementId:s}=t.editingLinearElement,o=Z.getElement(s,i);jn(o,"The linear element does not exist in the provided Scene"),jn(r!=null,"There are no selected points to duplicate");const{points:a}=o,l=[];let c=!1,u=-1;const d=a.reduce((f,h,m)=>{if(++u,f.push(h),r.includes(m)){const y=a[m+1];y||(c=!0),f.push(y?I((h[0]+y[0])/2,(h[1]+y[1])/2):I(h[0],h[1])),l.push(u+1),++u}return f},[]);if(n.mutateElement(o,{points:d}),c){const f=o.points[o.points.length-1];Z.movePoints(o,n,new Map([[o.points.length-1,{point:I(f[0]+30,f[1]+30)}]]))}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:l}}}static deletePoints(t,n,i){const r=n.state.editingLinearElement?.lastUncommittedPoint===t.points[t.points.length-1],s=t.points.filter((u,d)=>!i.includes(d));sn(t)&&t.polygon&&(r||i.includes(0)||i.includes(t.points.length-1))&&(s[0]=I(s[s.length-1][0],s[s.length-1][1]));const{points:a,offsetX:l,offsetY:c}=V8({points:s});Z._updatePoints(t,n.scene,a,l,c)}static addPoints(t,n,i){const r=[...t.points,...i];sn(t)&&t.polygon&&(r[0]=I(r[r.length-1][0],r[r.length-1][1]));const{points:s,offsetX:o,offsetY:a}=V8({points:r});Z._updatePoints(t,n,s,o,a)}static movePoints(t,n,i,r){const{points:s}=t;if(sn(t)&&t.polygon){const u=i.get(0),d=i.get(s.length-1);u?i.set(s.length-1,{point:I(u.point[0],u.point[1]),isDragging:u.isDragging}):d&&i.set(0,{point:I(d.point[0],d.point[1]),isDragging:d.isDragging})}const o=i.get(0)?.point??I(0,0),[a,l]=o,c=ce(t)?[i.get(0)?.point??s[0],i.get(s.length-1)?.point??s[s.length-1]]:s.map((u,d)=>{const f=i.get(d)?.point??u;return I(f[0]-a,f[1]-l)});Z._updatePoints(t,n,c,a,l,r,{isDragging:Array.from(i.values()).some(u=>u.isDragging)})}static shouldAddMidpoint(t,n,i,r){const s=Z.getElement(t.elementId,r);if(s&&ce(s)||!s)return!1;const{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;const a=t.pointerDownState.origin,l=dt(I(a.x,a.y),I(n.x,n.y));return!(!i.editingLinearElement&&l<m7/i.zoom.value)}static addMidpoint(t,n,i,r,s){const o=s.getNonDeletedElementsMap(),a=Z.getElement(t.elementId,o);if(!a)return;const{segmentMidpoint:l}=t.pointerDownState,c={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},u=Z.createPointAt(a,o,n.x,n.y,r&&!ce(a)?i.getEffectiveGridSize():null),d=[...a.points.slice(0,l.index),u,...a.points.slice(l.index)];return s.mutateElement(a,{points:d}),c.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:l.index},c.selectedPointsIndices=[l.index],c}static _updatePoints(t,n,i,r,s,o,a){if(ce(t)){const l={};o?.startBinding!==void 0&&(l.startBinding=o.startBinding!==null&&Cb(o.startBinding)?o.startBinding:null),o?.endBinding!==void 0&&(l.endBinding=o.endBinding!==null&&Cb(o.endBinding)?o.endBinding:null),l.points=Array.from(i),n.mutateElement(t,l,{informMutation:!0,isDragging:a?.isDragging??!1})}else{const l=JC(t,i),c=JC(t,t.points),u=(l[0]+l[2])/2,d=(l[1]+l[3])/2,f=(c[0]+c[2])/2,h=(c[1]+c[3])/2,m=f-u,p=h-d,y=W(I(r,s),I(m,p),t.angle);n.mutateElement(t,{...o,points:i,x:t.x+y[0],y:t.y+y[1]})}}static _getShiftLockedDelta(t,n,i,r,s,o){const a=Z.getPointGlobalCoordinates(t,i,n);if(ce(t))return[r[0]-a[0],r[1]-a[1]];const[l,c]=An(r[0],r[1],s),{width:u,height:d}=O7(a[0],a[1],l,c,o);return W(I(u,d),I(0,0),-t.angle)}static getBoundTextElementPosition=(t,n,i)=>{Z.getPointsGlobalCoordinates(t,i).length<2&&fi(n,i,{isDeleted:!0});let s=0,o=0;if(t.points.length%2===1){const a=Math.floor(t.points.length/2),l=Z.getPointGlobalCoordinates(t,t.points[a],i);s=l[0]-n.width/2,o=l[1]-n.height/2}else{const a=t.points.length/2-1,l=Z.getSegmentMidPoint(t,a+1);s=l[0]-n.width/2,o=l[1]-n.height/2}return{x:s,y:o}};static getMinMaxXYWithBoundText=(t,n,i,r)=>{let[s,o,a,l]=i;const c=(s+a)/2,u=(o+l)/2,{x:d,y:f}=Z.getBoundTextElementPosition(t,r,n),h=d+r.width,m=f+r.height,p=I(c,u),y=W(I(s,o),p,t.angle),b=W(I(a,o),p,t.angle),E=W(I(d,f),p,-t.angle),v=W(I(h,f),p,-t.angle),w=W(I(d,m),p,-t.angle),S=W(I(h,m),p,-t.angle);return y[0]<b[0]&&y[1]>=b[1]?(s=Math.min(s,w[0]),a=Math.max(a,Math.max(v[0],S[0])),o=Math.min(o,E[1]),l=Math.max(l,S[1])):y[0]>=b[0]&&y[1]>b[1]?(s=Math.min(s,S[0]),a=Math.max(a,Math.max(E[0],v[0])),o=Math.min(o,w[1]),l=Math.max(l,v[1])):y[0]>=b[0]?(s=Math.min(s,v[0]),a=Math.max(a,w[0]),o=Math.min(o,S[1]),l=Math.max(l,E[1])):y[1]<=b[1]&&(s=Math.min(s,Math.min(v[0],E[0])),a=Math.max(a,S[0]),o=Math.min(o,v[1]),l=Math.max(l,w[1])),[s,o,a,l,c,u]};static getElementAbsoluteCoords=(t,n,i=!1)=>{let r,s,o,a,l;if(t.points.length<2||!Et.get(t)){const{minX:f,minY:h,maxX:m,maxY:p}=t.points.reduce((y,[b,E])=>(y.minY=Math.min(y.minY,E),y.minX=Math.min(y.minX,b),y.maxX=Math.max(y.maxX,b),y.maxY=Math.max(y.maxY,E),y),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});s=f+t.x,o=h+t.y,a=m+t.x,l=p+t.y}else{const f=Et.generateElementShape(t,null),h=wd(f[0]),[m,p,y,b]=y5(h);s=m+t.x,o=p+t.y,a=y+t.x,l=b+t.y}const c=(s+a)/2,u=(o+l)/2;if(r=[s,o,a,l,c,u],!i)return r;const d=Ce(t,n);return d&&(r=Z.getMinMaxXYWithBoundText(t,n,[s,o,a,l],d)),r};static moveFixedSegment(t,n,i,r,s){const o=s.getNonDeletedElementsMap(),a=Z.getElement(t.elementId,o);if(!a||!ce(a))return t;if(n&&n>0&&n<a.points.length){const l=Io(mh(ae(a.points[n],a.points[n-1]))),c=(a.fixedSegments??[]).reduce((h,m)=>(h[m.index]=m,h),{});c[n]={index:n,start:I(l?a.points[n-1][0]:i-a.x,l?r-a.y:a.points[n-1][1]),end:I(l?a.points[n][0]:i-a.x,l?r-a.y:a.points[n][1])};const u=Object.values(c).sort((h,m)=>h.index-m.index),d=u.map(h=>h.index).reduce((h,m)=>m<n?h+1:h,0);s.mutateElement(a,{fixedSegments:u});const f=I(a.x+(a.fixedSegments[d].start[0]+a.fixedSegments[d].end[0])/2,a.y+(a.fixedSegments[d].start[1]+a.fixedSegments[d].end[1])/2);return{...t,segmentMidPointHoveredCoords:f,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:a.fixedSegments[d].index,value:f}}}}return t}static deleteFixedSegment(t,n,i){n.mutateElement(t,{fixedSegments:t.fixedSegments?.filter(r=>r.index!==i)})}}const Lae=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,i)=>n-i),t.length?t:null};function OC(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function Oae(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}const Nae=1e-6;function NC(e,t){const n=ae(e[1],e[0]),i=ae(t,e[0]),r=ut(n,i);return Math.abs(r)<Nae}function $8(e,t){const n=ae(e[1],e[0]),i=ae(t,e[0]);return ut(n,i)<0}function PC(e,t){return NC(e,t[0])||NC(e,t[1])||($8(e,t[0])?!$8(e,t[1]):$8(e,t[1]))}function Pae(e,t){return Oae(OC(e),OC(t))&&PC(e,t)&&PC(t,e)}const Fae=e=>e.type==="diamond"?[I(e.width/2,0),I(e.width,e.height/2),I(e.width/2,e.height),I(0,e.height/2)]:[I(0,0),I(0+e.width,0),I(0+e.width,e.height),I(0,e.height)],Bae=e=>we(e)||yr(e)?e.points:Fae(e),FC=e=>{const t=e.reduce((n,[i,r])=>(n.minY=Math.min(n.minY,r),n.minX=Math.min(n.minX,i),n.maxX=Math.max(n.maxX,i),n.maxY=Math.max(n.maxY,r),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},zae=e=>{const t=Bae(e),{cx:n,cy:i}=FC(t),r=I(n,i),s=t.map(u=>W(u,r,e.angle)),{minX:o,minY:a,maxX:l,maxY:c}=FC(s);return[o+e.x,a+e.y,l+e.x,c+e.y]},Hae=(e,t)=>{const n=zae(e);return(rU(n[0],ki(t[0],t[2]))||rU(t[0],ki(n[0],n[2])))&&(rU(n[1],ki(t[1],t[3]))||rU(t[1],ki(n[1],n[3])))},Vae=({elements:e,bounds:t,type:n,errorMargin:i=0})=>{$F(t)&&(t=_i(t,be(e)));const r=[t[0]-i,t[1]-i,t[2]+i,t[3]+i],s=new Set;for(const o of e){if(s.has(o.id))continue;if(Hae(o,r)){if(s.add(o.id),o.boundElements)for(const l of o.boundElements)s.add(l.id);le(o)&&o.containerId&&s.add(o.containerId),_e(o)&&(o.startBinding&&s.add(o.startBinding.elementId),o.endBinding&&s.add(o.endBinding?.elementId))}}return e.filter(o=>s.has(o.id))},dB=(e,t,n)=>{const i=n.reduce((r,s)=>(s.groupIds.includes(e)&&(r[s.id]=!0),r),{});return Object.keys(i).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...i}}},Mi=function(){let e=null,t=null,n=null;const i=(s,o,a,l)=>{if(n!==void 0&&o===t&&s===e&&a.editingGroupId===n?.editingGroupId)return n;const c={};for(const f of s){let h=f.groupIds;if(a.editingGroupId){const m=h.indexOf(a.editingGroupId);m>-1&&(h=h.slice(0,m))}if(h.length>0){const m=h[h.length-1];c[m]=!0}}const u={},d=o.reduce((f,h)=>{if(h.isDeleted)return f;const m=h.groupIds.find(p=>c[p]);return m&&(f[h.id]=!0,Array.isArray(u[m])?u[m].push(h.id):u[m]=[h.id]),f},{});for(const f of Object.keys(u))u[f].length<2&&c[f]&&(c[f]=!1);return t=o,e=s,n={editingGroupId:a.editingGroupId,selectedGroupIds:c,selectedElementIds:pt({...a.selectedElementIds,...d},l)},n},r=(s,o,a,l)=>{const c=l?l.scene.getSelectedElements({selectedElementIds:s.selectedElementIds,elements:o}):Ne(o,s);return c.length?i(c,o,s,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:pt(s.selectedElementIds,a)}};return r.clearCache=()=>{t=null,e=null,n=null},r}(),fB=(e,t)=>hB(e,t)!=null,hB=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),Pu=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),Jm=(e,t)=>{let n={...t,selectedGroupIds:{}};for(const i of e){let r=i.groupIds;if(t.editingGroupId){const s=r.indexOf(t.editingGroupId);s>-1&&(r=r.slice(0,s))}if(r.length>0){const s=r[r.length-1];n={...n,...dB(s,n,e)}}}return n.selectedGroupIds},$ae=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),V0=(e,t)=>e.groupIds.includes(t),It=(e,t)=>{const n=[];for(const i of e.values())V0(i,t)&&n.push(i);return n},Gae=(e,t)=>e.groupIds.find(n=>t[n]),Xae=(e,t,n)=>{const i=[...e],r=n?i.indexOf(n):-1,s=r>-1?r:i.length;return i.splice(s,0,t),i},jae=(e,t)=>e.filter(n=>!t[n]),m5=(e,t)=>{const n=new Map;return e.forEach(i=>{const r=i.groupIds.length===0?i.id:i.groupIds[i.groupIds.length-1],s=n.get(r)||[],o=Ce(i,t);o&&s.push(o),n.set(r,[...s,i])}),Array.from(n.values())},Yae=e=>{const t=new Set;for(const[,n]of e)if(!n.isDeleted)for(const i of n.groupIds??[])t.add(i);return t},i9=e=>{const t=e.flatMap(r=>r.groupIds),n=new Map;let i=0;for(const r of t)n.set(r,(n.get(r)??0)+1),n.get(r)>i&&(i=n.get(r));return i===e.length},ph=e=>e.groupIds.length>0,Wae=(e,t,n)=>{const i=[...e],r=t?e.indexOf(t):-1,s=r>-1?r:e.length;for(let o=0;o<s;o++)i[o]=n(i[o]);return i},r9=e=>{const t=new Set;return e.forEach(n=>{pe(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},s9=(e,t,n,i=!0)=>{const[r,s,o,a]=Le(t,n);let l=e.filter(c=>{let[u,d,f,h]=_i(c,n);const m=Ur(c,n);if(m){const[p,y,b,E]=_i(m,n);u=Math.max(p,u),d=Math.max(y,d),f=Math.min(b,f),h=Math.min(E,h)}return c.locked===!1&&c.type!=="selection"&&!Ft(c)&&r<=u&&s<=d&&o>=f&&a>=h});return l=i?r9(l):l,l=l.filter(c=>{const u=Ur(c,n);return u?Ic(c,u,n):!0}),l},gB=(e,t,n,i)=>{const r=new Set(t.map(s=>s.id));return e.filter(s=>{const o=Hb(s,n.width,n.height,n,i);return!r.has(s.id)&&o})},Hn=function(){let e=null,t=null,n=null;const i=(r,s)=>(n!=null&&r===e&&s.selectedElementIds===t||(n=r.some(o=>s.selectedElementIds[o.id]),e=r,t=s.selectedElementIds),n);return i.clearCache=()=>{e=null,t=null,n=null},i}(),Ne=(e,t,n)=>{const i=new Set,r=[];for(const s of e.values()){if(t.selectedElementIds[s.id]){r.push(s),i.add(s.id);continue}if(n?.includeBoundTextElement&&Ft(s)&&t.selectedElementIds[s?.containerId]){r.push(s),i.add(s.id);continue}}if(n?.includeElementsInFrames){const s=[];return r.forEach(o=>{pe(o)&&Ss(e,o.id).forEach(a=>!i.has(a.id)&&s.push(a)),s.push(o)}),s}return r},mB=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:Ne(e,t,{includeBoundTextElement:!0}),pt=(e,t)=>Bi(t.selectedElementIds,e)?t.selectedElementIds:e,Kae=(e,t)=>{const n=e.filter(we);if(n.length===1){const i=n[0],r=i.boundElements?.map(o=>o.id)??[];if(e.every(o=>o.id===i.id||r.includes(o.id)))return new Z(i,be(t))}return null},pB=(e,t,n)=>({selectedLinearElement:Kae(e,t),...Mi({editingGroupId:n.editingGroupId,selectedElementIds:r9(e).reduce((i,r)=>(Ft(r)||(i[r.id]=!0),i),{})},t,n,null)}),Zae=(e,t,n)=>{const i=be(e);for(const r of t)if(r.frameId){const s=n.get(r.id),o=n.get(r.frameId),a=s&&i.get(s);a&&fi(a,i,{frameId:o??null})}};function o9(e,t,n){const i=L7(t,n),r=L7(e,n);return i.some(o=>r.some(a=>Pae(o,a)))}const UB=(e,t,n)=>U5(s9(e,t,n,!1)).filter(i=>!pe(i)&&!i.frameId||i.frameId===t.id),a9=(e,t,n)=>s9([t],e,n).some(i=>i.id===t.id),ep=(e,t,n)=>{const[i,r,s,o]=Le(t,n),[a,l,c,u]=ft(e);return i<=a&&r<=l&&s>=c&&o>=u},Ic=(e,t,n)=>ep([e],t,n)||o9(e,t,n)||a9(e,t,n),BC=(e,t,n)=>{const[i,r,s,o]=Le(t,n);return z0(I(i,r),I(e.x,e.y),I(s,o))},qae=e=>{const t=new Map;for(const n of e){const i=pe(n)?n.id:n.frameId;i&&!t.has(i)&&t.set(i,Ss(e,i))}return t},Ss=(e,t)=>{const n=[];for(const i of e.values())i.frameId===t&&n.push(i);return n},l9=e=>e.filter(t=>pe(t)),c9=e=>{const t=be(l9(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},ko=(e,t,n,i)=>{const r=Ss(e,t.id),s=new Set(r),o=new Set([...UB(e,t,i),...r.filter(f=>a9(f,t,i))]),a=r.filter(f=>!o.has(f)),l=new Set(Array.from(o).flatMap(f=>f.groupIds));for(const f of a)if(!o9(f,t,i))f.groupIds.length===0&&s.delete(f);else if(f.groupIds.length>0)for(const h of f.groupIds)l.add(h);for(const f of a)if(f.groupIds.length>0){let h=!0;for(const m of f.groupIds)l.has(m)&&(h=!1);h&&s.delete(f)}const c=Array.from(o).filter(f=>f.groupIds.length===0);for(const f of c)s.add(f);const u=Array.from(o).filter(f=>f.groupIds.length>0),d=Jm(u,n);for(const[f,h]of Object.entries(d))if(h){const m=It(e,f);if(ep(m,t,i))for(const p of m)s.add(p)}return[...s].filter(f=>!(le(f)&&f.containerId))},Qae=(e,t,n)=>Jae(U5(e,UB(e,t,n)),t,n),Jae=(e,t,n)=>{const i=[],r=new Map;for(const s of e){let o=!1;if(s.groupIds.length>0){if(s.groupIds.some(a=>r.get(a)))o=!0;else{const a=new Set(s.groupIds.flatMap(l=>It(n,l)));o=!ep(Array.from(a),t,n)}s.groupIds.forEach(a=>{r.set(a,o)})}o||i.push(s)}return i},Ur=(e,t)=>e.frameId&&t.get(e.frameId)||null,ele=(e,t)=>{const n=new Set,i=be(e);e=U5(e);for(const o of e)pe(o)&&o.id!==t.id&&n.add(o.id);const r=new Set,s=[];for(const o of e)if(!(pe(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){const a=o.groupIds.at(-1);if(!r.has(a)){r.add(a);const l=It(e,a);if(l.some(c=>Ic(c,t,i)))for(const c of l)s.push(c)}}else Ic(o,t,i)&&s.push(o);return s},e0=(e,t,n,i)=>{const r=be(e),s=new Map;for(const c of e.values())c.frameId===n.id&&s.set(c.id,!0);const o=new Set(t.map(c=>c.id)),a=[],l=new Set;for(const c of t)pe(c)&&c.id!==n.id&&l.add(c.id);for(const c of U5(e,t)){if(pe(c)||c.frameId&&l.has(c.frameId)||c.frameId&&i.selectedElementIds[c.id]&&i.selectedElementIds[c.frameId])continue;s.has(c.id)||a.push(c);const u=Ce(c,r);u&&!o.has(u.id)&&!s.has(u.id)&&a.push(u)}for(const c of a)fi(c,r,{frameId:n.id});return e},p5=(e,t)=>{const n=new Map,i=new Map;for(const r of e)if(r.frameId){n.set(r.id,r);const s=i.get(r.frameId)||[];s.push(r);const o=Ce(r,t);o&&(n.set(o.id,o),s.push(o)),i.set(r.frameId,s)}for(const[,r]of n)fi(r,t,{frameId:null})},bB=(e,t)=>{const n=Ss(e,t.id);return p5(n,be(e)),e},Jh=(e,t,n,i)=>e0(bB(e,n),t,n,i.state).slice(),Uh=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),r=new Set(i);if(t.editingGroupId)for(const a of i)a.groupIds.length===0?r.add(a):a.groupIds.flatMap(l=>It(e,l)).forEach(l=>r.add(l));const s=new Set,o=be(e);return r.forEach(a=>{a.frameId&&!pe(a)&&!Fb(a,o,t)&&s.add(a)}),s.size>0&&p5(s,o),e},U5=(e,t)=>{const n=new Set,i=t||e;for(const o of i.values()){const a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}const r=new Set;for(const o of n)It(e,o).some(a=>pe(a))&&r.add(o);const s=[];for(const o of i.values())r.has(o.groupIds[o.groupIds.length-1])||s.push(o);return s},M7=(e,t,n)=>{const i=le(e)&&zn(e,t)||e;return i.frameId&&n.selectedElementIds[i.id]&&n.selectedElementIds[i.frameId]?Ur(i,t):n.selectedElementIds[i.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:Ur(i,t)},Fb=(e,t,n,i)=>{const r=i?.targetFrame??M7(e,t,n);if(!r)return!1;const s=le(e)&&zn(e,t)||e,o=l=>{i?.checkedGroups&&s.groupIds.forEach(c=>{i.checkedGroups?.set(c,l)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[r.id])return!0;if(s.groupIds.length===0)return Ic(s,r,t);for(const l of s.groupIds)if(i?.checkedGroups?.has(l))return i.checkedGroups.get(l);const a=new Set(s.groupIds.filter(l=>i?.checkedGroups?!i.checkedGroups.has(l):!0).flatMap(l=>It(t,l)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){const l=new Set(Ne(t,n));if(n.frameToHighlight!==null)return!0;l.forEach(u=>{a.delete(u)})}for(const l of a)if(pe(l))return o(!1),!1;for(const l of a)if(Ic(l,r,t))return o(!0),!0;return!1},zC=(e,t,n,i,r)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;const s=o9(e,t,i)||a9(e,t,i);if(s){for(const o of e.groupIds)r?.set(o,!0);return!0}if(!s&&e.groupIds.length>0&&!ep([e],t,i)){let o=!1;if(n.selectedElementsAreBeingDragged)o=Fb(e,i,n,{targetFrame:t,checkedGroups:r});else{o=e.frameId===t.id;for(const a of e.groupIds)r?.set(a,o)}for(const a of e.groupIds)r?.set(a,o);return o}return!1},tle="Frame",nle="AI Frame",u9=e=>HF(e)?tle:nle,yB=e=>e.name===null?u9(e):e.name,d9=(e,t)=>Vae({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),EB=e=>{const t=be(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},vB="invert(100%) hue-rotate(180deg) saturate(1.25)",wB=(e,t)=>Tn(e)&&!t.imageCache.has(e.fileId),_B=(e,t,n)=>n.theme===Te.DARK&&Tn(e)&&!wB(e,t)&&t.imageCache.get(e.fileId)?.mimeType!==Ue.svg,b5=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},TB=(e,t,n,i,r=1)=>{let s=(t?.opacity??100)*e.opacity/1e4*r;return(n.has(e.id)||i&&i.some(o=>o.id===e.id)||t&&n.has(t.id))&&(s*=Kie/100),s},ile=(e,t,n)=>{const s=b5(e),[o,a,l,c]=Le(e,t),u=we(e)||yr(e)?Li(o,l):e.width,d=we(e)||yr(e)?Li(a,c):e.height;let f=u*window.devicePixelRatio+s*2,h=d*window.devicePixelRatio+s*2,m=n.value;return(f*m>32767||h*m>32767)&&(m=Math.min(32767/f,32767/h)),f*h*m*m>16777216&&(m=Math.sqrt(16777216/(f*h))),f=Math.floor(f*m),h=Math.floor(h*m),{width:f,height:h,scale:m}},SB=(e,t,n,i,r)=>{const s=document.createElement("canvas"),o=s.getContext("2d"),a=b5(e),{width:l,height:c,scale:u}=ile(e,t,n);if(!l||!c)return null;s.width=l,s.height=c;let d=-100,f=0;if(we(e)||yr(e)){const[b,E]=Le(e,t);d=e.x>b?Li(e.x,b)*window.devicePixelRatio*u:0,f=e.y>E?Li(e.y,E)*window.devicePixelRatio*u:0,o.translate(d,f)}o.save(),o.translate(a*u,a*u),o.scale(window.devicePixelRatio*u,window.devicePixelRatio*u);const h=Vc.canvas(s);_B(e,i,r)&&(o.filter=vB),o2(e,h,o,i),o.restore();const m=Ce(e,t),p=document.createElement("canvas"),y=p.getContext("2d");if(_e(e)&&m){const[b,E,v,w]=Le(e,t),S=Math.max(Li(b,v),Li(E,w));p.width=S*window.devicePixelRatio*u+a*u*10,p.height=S*window.devicePixelRatio*u+a*u*10,y.translate(p.width/2,p.height/2),y.rotate(e.angle),y.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);const[,,,,k,_]=Le(m,t);y.rotate(-e.angle);const T=(p.width-s.width)/2,A=(p.height-s.height)/2,C=p.width/2-(k-b)*window.devicePixelRatio*u-T-a*u,R=p.height/2-(_-E)*window.devicePixelRatio*u-A-a*u;y.translate(-C,-R),y.clearRect(-(m.width/2+Nn)*window.devicePixelRatio*u,-(m.height/2+Nn)*window.devicePixelRatio*u,(m.width+Nn*2)*window.devicePixelRatio*u,(m.height+Nn*2)*window.devicePixelRatio*u)}return{element:e,canvas:s,theme:r.theme,scale:u,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:f,boundTextElementVersion:Ce(e,t)?.version||null,containingFrameOpacity:Ur(e,t)?.opacity||100,boundTextCanvas:p,angle:e.angle,imageCrop:yt(e)?e.crop:null}},IB=typeof document<"u"?document.createElement("img"):{src:""};IB.src=`data:${Ue.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;const xB=typeof document<"u"?document.createElement("img"):{src:""};xB.src=`data:${Ue.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;const rle=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);const n=Math.min(e.width,e.height),i=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?xB:IB,e.width/2-i/2,e.height/2-i/2,i,i)},o2=(e,t,n,i,r)=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw(Et.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",Et.get(e).forEach(s=>{t.draw(s)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;const s=ale(e),o=Et.get(e);o&&t.draw(o),n.fillStyle=e.strokeColor,n.fill(s),n.restore();break}case"image":{const s=Tn(e)?i.imageCache.get(e.fileId)?.image:void 0;if(s!=null&&!(s instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,Ji(Math.min(e.width,e.height),e)),n.clip());const{x:o,y:a,width:l,height:c}=e.crop?e.crop:{x:0,y:0,width:s.naturalWidth,height:s.naturalHeight};n.drawImage(s,o,a,l,c,0,0,e.width,e.height)}else rle(e,n);break}default:if(le(e)){const s=yF(e.text),o=s&&!n.canvas.isConnected;o&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",s?"rtl":"ltr"),n.save(),n.font=ot(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;const a=e.text.replace(/\r\n?/g,`
`).split(`
`),l=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,c=Wm(e.fontSize,e.lineHeight),u=lF(e.fontFamily,e.fontSize,c);for(let d=0;d<a.length;d++)n.fillText(a[d],l,d*c+u);n.restore(),o&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},k7=new WeakMap,HC=(e,t,n,i)=>{const r=n?i.zoom:{value:1},s=k7.get(e),o=s&&s.zoomValue!==r.value&&!i?.shouldCacheIgnoreZoom,a=Ce(e,t),l=a?.version||null,c=yt(e)?e.crop:null,u=Ur(e,t)?.opacity||100;if(!s||o||s.theme!==i.theme||s.boundTextElementVersion!==l||s.imageCrop!==c||s.containingFrameOpacity!==u||_e(e)&&a&&e.angle!==s.angle){const d=SB(e,t,r,n,i);return d?(k7.set(e,d),d):null}return s},G8=(e,t,n,i,r)=>{const s=e.element,o=b5(s),a=e.scale,[l,c,u,d]=Le(s,r),f=((l+u)/2+i.scrollX)*window.devicePixelRatio,h=((c+d)/2+i.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);const m=Ce(s,r);if(_e(s)&&m){const p=(e.boundTextCanvas.width-e.canvas.width)/2,y=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(f,h),t.drawImage(e.boundTextCanvas,-(u-l)/2*window.devicePixelRatio-p/a-o,-(d-c)/2*window.devicePixelRatio-y/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(f,h),t.rotate(s.angle),"scale"in e.element&&!wB(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-f,-h),t.drawImage(e.canvas,(l+i.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(c+i.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale);t.restore()},sle=(e,t,n,i)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";const r=.5/n.zoom.value;t.fillRect(r,r,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(r,r,e.width,e.height),t.restore()},ou=(e,t,n,i,r,s,o)=>{const a=o.openDialog?.name==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(r.globalAlpha=TB(e,Ur(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,a?aF:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(r.save(),r.translate(e.x+o.scrollX,e.y+o.scrollY),r.fillStyle="rgba(0, 0, 200, 0.04)",r.lineWidth=Rt.strokeWidth/o.zoom.value,r.strokeStyle=Rt.strokeColor,r2(e)&&(r.strokeStyle=o.theme===Te.LIGHT?"#7affd7":"#1d8264"),r.roundRect?(r.beginPath(),r.roundRect(0,0,e.width,e.height,Rt.radius/o.zoom.value),r.stroke(),r.closePath()):r.strokeRect(0,0,e.width,e.height),r.restore());break}case"freedraw":{if(Et.generateElementShape(e,null),s.isExporting){const[l,c,u,d]=Le(e,t),f=(l+u)/2+o.scrollX,h=(c+d)/2+o.scrollY,m=(u-l)/2-(e.x-l),p=(d-c)/2-(e.y-c);r.save(),r.translate(f,h),r.rotate(e.angle),r.translate(-m,-p),o2(e,i,r,s),r.restore()}else{const l=HC(e,n,s,o);if(!l)return;G8(l,r,s,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(Et.generateElementShape(e,s),s.isExporting){const[l,c,u,d]=Le(e,t),f=(l+u)/2+o.scrollX,h=(c+d)/2+o.scrollY;let m=(u-l)/2-(e.x-l),p=(d-c)/2-(e.y-c);if(le(e)){const b=zn(e,t);if(_e(b)){const E=Z.getBoundTextElementPosition(b,e,t);m=(u-l)/2-(E.x-l),p=(d-c)/2-(E.y-c)}}r.save(),r.translate(f,h),_B(e,s,o)&&(r.filter="none");const y=Ce(e,t);if(_e(e)&&y){const b=document.createElement("canvas"),E=b.getContext("2d"),v=Math.max(Li(l,u),Li(c,d)),w=b5(e);b.width=v*o.exportScale+w*10*o.exportScale,b.height=v*o.exportScale+w*10*o.exportScale,E.translate(b.width/2,b.height/2),E.scale(o.exportScale,o.exportScale),m=e.width/2-(e.x-l),p=e.height/2-(e.y-c),E.rotate(e.angle);const S=Vc.canvas(b);E.translate(-m,-p),o2(e,S,E,s),E.translate(m,p),E.rotate(-e.angle);const[,,,,k,_]=Le(y,t),T=(l+u)/2-k,A=(c+d)/2-_;E.translate(-T,-A),E.clearRect(-y.width/2,-y.height/2,y.width,y.height),r.scale(1/o.exportScale,1/o.exportScale),r.drawImage(b,-b.width/2,-b.height/2,b.width,b.height)}else r.rotate(e.angle),e.type==="image"&&r.scale(e.scale[0],e.scale[1]),r.translate(-m,-p),o2(e,i,r,s);r.restore()}else{const l=HC(e,n,s,o);if(!l)return;const c=r.imageSmoothingEnabled;if(!o?.shouldCacheIgnoreZoom&&(!e.angle||nre(e.angle))&&(r.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&yt(l.element)&&l.element.crop!==null){r.save(),r.globalAlpha=.1;const u=SB(doe(l.element,t),n,o.zoom,s,o);u&&G8(u,r,s,o,n),r.restore()}G8(l,r,s,o,n),r.imageSmoothingEnabled=c}break}default:throw new Error(`Unimplemented type ${e.type}`)}r.globalAlpha=1},CB=new WeakMap([]);function ole(e){const t=AB(e),n=new Path2D(t);return CB.set(e,n),n}function ale(e){return CB.get(e)}function AB(e){const t=e.simulatePressure?e.points:e.points.length?e.points.map(([i,r],s)=>[i,r,e.pressures[s]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:i=>Math.sin(i*Math.PI/2),last:!!e.lastCommittedPoint};return cle(loe(t,n))}function VC(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}const lle=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function cle(e){if(!e.length)return"";const t=e.length-1;return e.reduce((n,i,r,s)=>(r===t?n.push(i,VC(i,s[0]),"L",s[0],"Z"):n.push(i,VC(i,s[r+1])),n),["M",e[0],"Q"]).join(" ").replace(lle,"$1")}const bh=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",R7=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",$C=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",GC=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",D7=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",XC=e=>e==="arrow",Bb=e=>e==="arrow";class Et{static rg=new fh;static cache=new WeakMap;static get=t=>Et.cache.get(t);static set=(t,n)=>Et.cache.set(t,n);static delete=t=>Et.cache.delete(t);static destroy=()=>{Et.cache=new WeakMap};static generateElementShape=(t,n)=>{const i=n?.isExporting?void 0:Et.get(t);if(i!==void 0)return i;k7.delete(t);const r=hle(t,Et.rg,n||{isExporting:!1,canvasBackgroundColor:Pe.white,embedsValidationStatus:null});return Et.cache.set(t,r),r}}const ule=e=>[8,8+e],MB=e=>[1.5,6+e];function dle(e){const t=e.roughness,n=Math.max(e.width,e.height),i=Math.min(e.width,e.height);return i>=20&&n>=50||i>=15&&e.roundness&&D7(e.type)||we(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}const Cr=(e,t=!1)=>{const n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?ule(e.strokeWidth):e.strokeStyle==="dotted"?MB(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:dle(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<rF.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=ds(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return Bo(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},jC=(e,t,n)=>os(e)&&(t||ur(e)&&n?.get(e.id)!==!0)&&ds(e.backgroundColor)&&ds(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:Ll(e)?{...e,strokeColor:ds(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:ds(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,YC=(e,t,n,i,r,s,o)=>{const a=QC(e,t,n,i);if(a===null)return[];const l=(c,u)=>{if(c===null)return[];const[,,d,f,h,m]=c;return[r.line(d,f,h,m,u)]};switch(i){case"dot":case"circle":case"circle_outline":{const[c,u,d]=a;return delete s.strokeLineDash,[r.circle(c,u,d,{...s,fill:i==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{const[c,u,d,f,h,m]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[c,u]],{...s,fill:i==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{const[c,u,d,f,h,m,p,y]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[p,y],[c,u]],{...s,fill:i==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(a,s);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{const[c,u,d,f,h,m]=a;if(e.strokeStyle==="dotted"){const p=MB(e.strokeWidth-1);s.strokeLineDash=[p[0],p[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[r.line(d,f,c,u,s),r.line(h,m,c,u,s),...i==="crowfoot_one_or_many"?l(QC(e,t,n,"crowfoot_one"),s):[]]}}},fle=e=>{const t=new fh,n={seed:e.seed,disableMultiStroke:!0,disableMultiStrokeFill:!0,roughness:0,preserveVertices:!0},i=eg(e.points.reduce((r,s)=>[Math.min(e.x+s[0],r[0]),Math.min(e.y+s[1],r[1]),Math.max(e.x+s[0],r[2]),Math.max(e.y+s[1],r[3])],[1/0,1/0,-1/0,-1/0]));switch(e.type){case"line":case"arrow":{const r=e.points.length?e.points:[I(0,0)];return ce(e)?t.path(kB(r,16),n).sets[0].ops:e.roundness?t.curve(r,n).sets[0].ops.slice(0,e.points.length).map((s,o)=>{if(o===0){const a=W(I(e.x+s.data[0],e.y+s.data[1]),i,e.angle);return{op:"move",data:I(a[0]-e.x,a[1]-e.y)}}return{op:"bcurveTo",data:[W(I(e.x+s.data[0],e.y+s.data[1]),i,e.angle),W(I(e.x+s.data[2],e.y+s.data[3]),i,e.angle),W(I(e.x+s.data[4],e.y+s.data[5]),i,e.angle)].map(a=>I(a[0]-e.x,a[1]-e.y)).flat()}}):r.map((s,o)=>{const a=W(I(e.x+s[0],e.y+s[1]),i,e.angle);return{op:o===0?"move":"lineTo",data:I(a[0]-e.x,a[1]-e.y)}})}case"freedraw":{if(e.points.length<2)return[];const r=zw(e.points,.75);return t.curve(r,n).sets[0].ops.slice(0,e.points.length).map((s,o)=>{if(o===0){const a=W(I(e.x+s.data[0],e.y+s.data[1]),i,e.angle);return{op:"move",data:I(a[0]-e.x,a[1]-e.y)}}return{op:"bcurveTo",data:[W(I(e.x+s.data[0],e.y+s.data[1]),i,e.angle),W(I(e.x+s.data[2],e.y+s.data[3]),i,e.angle),W(I(e.x+s.data[4],e.y+s.data[5]),i,e.angle)].map(a=>I(a[0]-e.x,a[1]-e.y)).flat()}})}}},hle=(e,t,{isExporting:n,canvasBackgroundColor:i,embedsValidationStatus:r})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let s;if(e.roundness){const o=e.width,a=e.height,l=Ji(Math.min(o,a),e);s=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,Cr(jC(e,n,r),!0))}else s=t.rectangle(0,0,e.width,e.height,Cr(jC(e,n,r),!1));return s}case"diamond":{let s;const[o,a,l,c,u,d,f,h]=zb(e);if(e.roundness){const m=Ji(Math.abs(o-f),e),p=Ji(Math.abs(c-a),e);s=t.path(`M ${o+m} ${a+p} L ${l-m} ${c-p}
            C ${l} ${c}, ${l} ${c}, ${l-m} ${c+p}
            L ${u+m} ${d-p}
            C ${u} ${d}, ${u} ${d}, ${u-m} ${d-p}
            L ${f+m} ${h+p}
            C ${f} ${h}, ${f} ${h}, ${f+m} ${h-p}
            L ${o-m} ${a+p}
            C ${o} ${a}, ${o} ${a}, ${o+m} ${a+p}`,Cr(e,!0))}else s=t.polygon([[o,a],[l,c],[u,d],[f,h]],Cr(e));return s}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,Cr(e));case"line":case"arrow":{let s;const o=Cr(e),a=e.points.length?e.points:[I(0,0)];if(ce(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?s=[t.path(kB(a,16),Cr(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),s=[]):e.roundness?s=[t.curve(a,o)]:o.fill?s=[t.polygon(a,o)]:s=[t.linearPath(a,o)],e.type==="arrow"){const{startArrowhead:l=null,endArrowhead:c="arrow"}=e;if(l!==null){const u=YC(e,s,"start",l,t,o,i);s.push(...u)}if(c!==null){const u=YC(e,s,"end",c,t,o,i);s.push(...u)}}return s}case"freedraw":{let s;if(ole(e),Bo(e.points)){const o=zw(e.points,.75);s=t.curve(o,{...Cr(e),stroke:"none"})}else s=null;return s}case"frame":case"magicframe":case"text":case"image":return null;default:return Po(e,`generateElementShape(): Unimplemented type ${e?.type}`),null}},kB=(e,t)=>{const n=[];for(let r=1;r<e.length-1;r+=1){const s=e[r-1],o=e[r+1],a=e[r],l=va(a,s),c=va(o,a),u=Math.min(t,dt(e[r],o)/2,dt(e[r],s)/2);l?s[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):s[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u]),n.push(e[r]),c?o[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):o[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u])}const i=[`M ${e[0][0]} ${e[0][1]}`];for(let r=0;r<n.length;r+=3)i.push(`L ${n[r][0]} ${n[r][1]}`),i.push(`Q ${n[r+1][0]} ${n[r+1][1]}, ${n[r+2][0]} ${n[r+2][1]}`);return i.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),i.join(" ")},gle=(e,t)=>{switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return Yse(e);case"arrow":case"line":{const n=Et.get(e)?.[0]??Et.generateElementShape(e,null)[0],[,,,,i,r]=Le(e,t);return Mb(e)?Qse(e,n,I(e.x,e.y),e.angle,I(i,r)):Kse(n,I(e.x,e.y),e.angle,I(i,r))}case"ellipse":return Wse(e);case"freedraw":{const[,,,,n,i]=Le(e,t);return qse(e,I(n,i),Mb(e))}}},f9=(e,t)=>{const n=[...e.points];if(t){if(!jF(e.points))return null;const r=n[0],s=n[n.length-1];Math.hypot(r[0]-s[0],r[1]-s[1])>qie||n.length<4?n.push(I(r[0],r[1])):n[n.length-1]=I(r[0],r[1])}return{polygon:t,points:n}};class Ol{static boundsCache=new WeakMap;static nonRotatedBoundsCache=new WeakMap;static getBounds(t,n,i=!1){const r=i&&t.angle!==0?Ol.nonRotatedBoundsCache.get(t):Ol.boundsCache.get(t);if(r?.version&&r.version===t.version&&!Ft(t))return r.bounds;if(i&&t.angle!==0){const o=Ol.calculateBounds({...t,angle:0},n);return Ol.nonRotatedBoundsCache.set(t,{version:t.version,bounds:o}),o}const s=Ol.calculateBounds(t,n);return Ol.boundsCache.set(t,{version:t.version,bounds:s}),s}static calculateBounds(t,n){let i;const[r,s,o,a,l,c]=Le(t,n);if(yr(t)){const[u,d,f,h]=g9(t.points.map(([m,p])=>W(I(m,p),I(l-t.x,c-t.y),t.angle)));return[u+t.x,d+t.y,f+t.x,h+t.y]}else if(we(t))i=vle(t,l,c,n);else if(t.type==="diamond"){const[u,d]=W(I(l,s),I(l,c),t.angle),[f,h]=W(I(l,a),I(l,c),t.angle),[m,p]=W(I(r,c),I(l,c),t.angle),[y,b]=W(I(o,c),I(l,c),t.angle),E=Math.min(u,f,m,y),v=Math.min(d,h,p,b),w=Math.max(u,f,m,y),S=Math.max(d,h,p,b);i=[E,v,w,S]}else if(t.type==="ellipse"){const u=(o-r)/2,d=(a-s)/2,f=Math.cos(t.angle),h=Math.sin(t.angle),m=Math.hypot(u*f,d*h),p=Math.hypot(d*f,u*h);i=[l-m,c-p,l+m,c+p]}else{const[u,d]=W(I(r,s),I(l,c),t.angle),[f,h]=W(I(r,a),I(l,c),t.angle),[m,p]=W(I(o,a),I(l,c),t.angle),[y,b]=W(I(o,s),I(l,c),t.angle),E=Math.min(u,f,m,y),v=Math.min(d,h,p,b),w=Math.max(u,f,m,y),S=Math.max(d,h,p,b);i=[E,v,w,S]}return i}}const Le=(e,t,n=!1)=>{if(yr(e))return Ule(e);if(we(e))return Z.getElementAbsoluteCoords(e,t,n);if(le(e)){const i=t?zn(e,t):null;if(_e(i)){const{x:r,y:s}=Z.getBoundTextElementPosition(i,e,t);return[r,s,r+e.width,s+e.height,r+e.width/2,s+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},L7=(e,t)=>{const n=gle(e,t),[i,r,s,o,a,l]=Le(e,t),c=I(a,l);if(n.type==="polycurve"){const b=n.data.map(w=>Ym(w,10)).flat();let E=0;const v=[];for(;E<b.length-1;)v.push(Se(I(b[E][0],b[E][1]),I(b[E+1][0],b[E+1][1]))),E++;return v}else{if(n.type==="polyline")return n.data;if(mle(e)){const[y,b]=$w(e),E=b.map(w=>KC(w,c,e.angle)).flat();return[...WC(y,c,e.angle),...E]}else if(e.type==="diamond"){const[y,b]=Gw(e),E=b.map(w=>KC(w,c,e.angle)).flat();return[...WC(y,c,e.angle),...E]}else if(n.type==="polygon"){if(le(e)){const E=zn(e,t);if(E&&we(E))return[Se(I(i,r),I(s,r)),Se(I(s,r),I(s,o)),Se(I(s,o),I(i,o)),Se(I(i,o),I(i,r))]}const y=n.data,b=[];for(let E=0;E<y.length-1;E++)b.push(Se(y[E],y[E+1]));return b}else if(n.type==="ellipse")return ple(e)}const[u,d,f,h,,,m,p]=[[i,r],[s,r],[i,o],[s,o],[a,r],[a,o],[i,l],[s,l]].map(y=>W(y,c,e.angle));return[Se(u,d),Se(f,h),Se(u,f),Se(d,h),Se(u,p),Se(f,p),Se(d,m),Se(h,m)]},mle=e=>e!=null&&(e.type==="rectangle"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),WC=(e,t,n)=>e.map(i=>Se(W(i[0],t,n),W(i[1],t,n))),KC=(e,t,n)=>{const i=Ym(e,10);let r=0;const s=[];for(;r<i.length-1;)s.push(Se(W(I(i[r][0],i[r][1]),t,n),W(I(i[r+1][0],i[r+1][1]),t,n))),r++;return s},ple=e=>{const t=I(e.x+e.width/2,e.y+e.height/2),n=e.width/2,i=e.height/2,r=[],s=[],o=90,a=Math.PI*2/o;for(let l=0;l<o;l++){const c=l*a,u=t[0]+n*Math.cos(c),d=t[1]+i*Math.sin(c);s.push(W(I(u,d),t,e.angle))}for(let l=0;l<s.length-1;l++)r.push(Se(s[l],s[l+1]));return r.push(Se(s[s.length-1],s[0])),r},zb=e=>{const t=Math.floor(e.width/2)+1,n=0,i=e.width,r=Math.floor(e.height/2)+1,s=t,o=e.height;return[t,n,i,r,s,o,0,r]},ZC=(e,t,n,i,r)=>{const s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*i+Math.pow(e,3)*r},qC=(e,t,n,i)=>{const r=t-e,s=n-t,o=i-n,a=3*r-6*s+3*o,l=6*s-6*r,c=3*r,u=l*l-4*a*c;if(!(u>=0))return!1;let f=null,h=null,m=1/0,p=1/0;return a===0?m=p=-c/l:(m=(-l+Math.sqrt(u))/(2*a),p=(-l-Math.sqrt(u))/(2*a)),m>=0&&m<=1&&(f=ZC(m,e,t,n,i)),p>=0&&p<=1&&(h=ZC(p,e,t,n,i)),[f,h]},h9=(e,t,n,i)=>{const r=qC(e[0],t[0],n[0],i[0]),s=qC(e[1],t[1],n[1],i[1]);let o=Math.min(e[0],i[0]),a=Math.max(e[0],i[0]);if(r){const u=r.filter(d=>d!==null);o=Math.min(o,...u),a=Math.max(a,...u)}let l=Math.min(e[1],i[1]),c=Math.max(e[1],i[1]);if(s){const u=s.filter(d=>d!==null);l=Math.min(l,...u),c=Math.max(c,...u)}return[o,l,a,c]},y5=(e,t)=>{let n=I(0,0);const{minX:i,minY:r,maxX:s,maxY:o}=e.reduce((a,{op:l,data:c})=>{if(l==="move"){const u=a5(c);jn(u!=null,"Op data is not a point"),n=u}else if(l==="bcurveTo"){const u=I(c[0],c[1]),d=I(c[2],c[3]),f=I(c[4],c[5]),h=t?t(u):u,m=t?t(d):d,p=t?t(f):f,y=t?t(n):n;n=f;const[b,E,v,w]=h9(y,h,m,p);a.minX=Math.min(a.minX,b),a.minY=Math.min(a.minY,E),a.maxX=Math.max(a.maxX,v),a.maxY=Math.max(a.maxY,w)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[i,r,s,o]},g9=e=>{let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const[s,o]of e)t=Math.min(t,s),n=Math.min(n,o),i=Math.max(i,s),r=Math.max(r,o);return[t,n,i,r]},Ule=e=>{const[t,n,i,r]=g9(e.points),s=t+e.x,o=n+e.y,a=i+e.x,l=r+e.y;return[s,o,a,l,(s+a)/2,(o+l)/2]},ble=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},yle=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},QC=(e,t,n,i)=>{if(t.length<1)return null;const r=wd(t[0]);if(r.length<1)return null;const s=n==="start"?1:r.length-1,o=r[s].data;jn(o.length===6,"Op data length is not 6");const a=I(o[4],o[5]),l=I(o[2],o[3]),c=I(o[0],o[1]),u=r[s-1];let d=I(0,0);if(u.op==="move"){const H=a5(u.data);jn(H!=null,"Op data is not a point"),d=H}else u.op==="bcurveTo"&&(d=I(u.data[4],u.data[5]));const f=(H,z)=>Math.pow(1-H,3)*a[z]+3*H*Math.pow(1-H,2)*l[z]+3*Math.pow(H,2)*(1-H)*c[z]+d[z]*Math.pow(H,3),[h,m]=n==="start"?d:a,[p,y]=[f(.3,0),f(.3,1)],b=Math.hypot(h-p,m-y),E=(h-p)/b,v=(m-y)/b,w=ble(i);let S=0;{const[H,z]=n==="end"?e.points[e.points.length-1]:e.points[0],[V,$]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];S=Math.hypot(H-V,z-$)}const _=Math.min(w,S*(i==="diamond"||i==="diamond_outline"?.25:.5)),T=h-E*_,A=m-v*_;if(i==="dot"||i==="circle"||i==="circle_outline"){const H=Math.hypot(A-m,T-h)+e.strokeWidth-2;return[h,m,H]}const C=yle(i);if(i==="crowfoot_many"||i==="crowfoot_one_or_many"){const[H,z]=W(I(h,m),I(T,A),Du(-C)),[V,$]=W(I(h,m),I(T,A),Du(C));return[T,A,H,z,V,$]}const[R,P]=W(I(T,A),I(h,m),-C*Math.PI/180),[N,K]=W(I(T,A),I(h,m),Du(C));if(i==="diamond"||i==="diamond_outline"){let H,z;if(n==="start"){const[V,$]=e.points.length>1?e.points[1]:[0,0];[H,z]=W(I(h+_*2,m),I(h,m),Math.atan2($-m,V-h))}else{const[V,$]=e.points.length>1?e.points[e.points.length-2]:[0,0];[H,z]=W(I(h-_*2,m),I(h,m),Math.atan2(m-$,h-V))}return[h,m,R,P,H,z,N,K]}return[h,m,R,P,N,K]},Ele=e=>{const t=Vc.generator(),n=Cr(e),i=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[i](e.points,n)},vle=(e,t,n,i)=>{const r=Ce(e,i);if(e.points.length<2){const[d,f]=e.points[0],[h,m]=W(I(e.x+d,e.y+f),I(t,n),e.angle);let p=[h,m,h,m];if(r){const y=Z.getMinMaxXYWithBoundText(e,i,[h,m,h,m],r);p=[y[0],y[1],y[2],y[3]]}return p}const o=Et.get(e)?.[0]??Ele(e),a=wd(o),c=y5(a,([d,f])=>W(I(e.x+d,e.y+f),I(t,n),e.angle));let u=[c[0],c[1],c[2],c[3]];if(r){const d=Z.getMinMaxXYWithBoundText(e,i,u,r);u=[d[0],d[1],d[2],d[3]]}return u},_i=(e,t,n=!1)=>Ol.getBounds(e,t,n),ft=(e,t)=>{if(!IF(e))return[0,0,0,0];let n=1/0,i=-1/0,r=1/0,s=-1/0;const o=t||be(e);return e.forEach(a=>{const[l,c,u,d]=_i(a,o);n=Math.min(n,l),r=Math.min(r,c),i=Math.max(i,u),s=Math.max(s,d)}),[n,r,i,s]},m9=(e,t)=>{const[n,i,r,s]=ft(e);return[n+t.x,i+t.y,r+t.x,s+t.y]},$0=(e,t,n,i)=>{if(!(we(e)||yr(e)))return[e.x,e.y,e.x+t,e.y+n];const r=wb(0,t,wb(1,n,e.points,i),i);let s;if(yr(e))s=g9(r);else{const u=Vc.generator(),d=e.roundness?u.curve(r,Cr(e)):u.linearPath(r,Cr(e)),f=wd(d);s=y5(f)}const[o,a,l,c]=s;return[o+e.x,a+e.y,l+e.x,c+e.y]},JC=(e,t)=>{const n=Vc.generator(),i=e.roundness==null?n.linearPath(t,Cr(e)):n.curve(t,Cr(e)),r=wd(i),[s,o,a,l]=y5(r);return[s+e.x,o+e.y,a+e.x,l+e.y]},wle=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,i=e[0];const r=be(e);return e.forEach(s=>{const[o,a,l,c]=_i(s,r),u=dt(I((o+l)/2,(a+c)/2),I(t.x,t.y));u<n&&(n=u,i=s)}),_i(i,r)},Us=e=>{const[t,n,i,r]=ft(e);return{minX:t,minY:n,maxX:i,maxY:r,width:i-t,height:r-n,midX:(t+i)/2,midY:(n+r)/2}},RB=({scrollX:e,scrollY:t,width:n,height:i,zoom:r})=>[-e,-t,-e+n/r.value,-t+i/r.value],eg=e=>I(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),fa=(e,t,n)=>{const i={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},r=Jn(e,t),[s,o]=W(I(i.minX,i.minY),r,e.angle),[a,l]=W(I(i.maxX,i.minY),r,e.angle),[c,u]=W(I(i.maxX,i.maxY),r,e.angle),[d,f]=W(I(i.minX,i.maxY),r,e.angle),h=[Math.min(s,a,c,d),Math.min(o,l,u,f),Math.max(s,a,c,d),Math.max(o,l,u,f)];if(n){const[m,p,y,b]=n;return[h[0]-b,h[1]-m,h[2]+p,h[3]+y]}return h},G0=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],tg=(e,t)=>{if(e==null||t==null)return!1;const[n,i,r,s]=e,[o,a,l,c]=t;return n<l&&r>o&&i<c&&s>a},Jn=(e,t,n=0,i=0)=>{const[r,s]=eg(_i(e,t));return I(r+n,s+i)},_le=.1,oc=e=>we(e)||yr(e)?e.points.length<2||e.points.length===2&&_e(e)&&_s(e.points[0],e.points[e.points.length-1],_le):e.width===0&&e.height===0,Hb=(e,t,n,i,r)=>{const[s,o,a,l]=_i(e,r),c=Tt({clientX:i.offsetLeft,clientY:i.offsetTop},i),u=Tt({clientX:i.offsetLeft+t,clientY:i.offsetTop+n},i);return c.x<=a&&c.y<=l&&u.x>=s&&u.y>=o},a2=(e,t,n,i,r,s)=>{const[o,a,l,c]=ft(e,r),u=Tt({clientX:i.offsetLeft+(s?.left||0),clientY:i.offsetTop+(s?.top||0)},i),d=Tt({clientX:i.offsetLeft+t-(s?.right||0),clientY:i.offsetTop+n-(s?.bottom||0)},i);return o>=u.x&&a>=u.y&&l<=d.x&&c<=d.y},eA=(e,t,n)=>{const i=Math.abs(t),r=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){const s=Math.round(Math.atan(r/i)/Ar)*Ar;s===0?n=0:s===Math.PI/2?t=0:n=i*Math.tan(s)*Math.sign(n)||n}else e!=="selection"&&(n=i*Math.sign(n));return{width:t,height:n}},O7=(e,t,n,i,r)=>{let s=n-e,o=i-t;const a=Math.atan2(o,s);let l=Math.round(a/Ar)*Ar;if(r){const c=Math.floor(r/Ar)*Ar;ire(a,c,c+Ar)&&(rre(a,r)<Ar/6?l=r:Xs(a)>Xs(r)?l=c+Ar:l=c)}if(l===0)o=0;else if(l===Math.PI/2)s=0;else{const c=Math.tan(l),u=-1,d=t-c*e,f=-1/c,h=-1,m=i-f*n,p=(u*m-h*d)/(c*h-f*u),y=(d*f-m*c)/(c*h-f*u);s=p-e,o=y-t}return{width:s,height:o}},DB=e=>{const t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){const n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){const n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},Tle=(e,t,n)=>{const i=n.getNonDeletedElementsMap(),r=m5(e,i),s=Us(e);return r.flatMap(o=>{const a=Sle(o,s,t);return o.map(l=>{const c=n.mutateElement(l,{x:l.x+a.x,y:l.y+a.y});return pr(l,n,{simultaneouslyUpdated:o}),c})})},Sle=(e,t,{axis:n,position:i})=>{const r=Us(e),[s,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return i==="start"?{...a,[n]:t[s]-r[s]}:i==="end"?{...a,[n]:t[o]-r[o]}:{...a,[n]:(t[s]+t[o])/2-(r[s]+r[o])/2}},Ile=e=>{const t=e.slice(),n=new Set,i=s=>{const o=s[0]?.groupIds?.join(""),a=[s[0]],l=[];for(const c of s.slice(1))c.groupIds?.join("")===o?a.push(c):l.push(c);return l.length?[...a,...i(l)]:a},r=new Map;return t.forEach((s,o)=>{if(!r.has(s.id))if(s.groupIds?.length){const a=s.groupIds[s.groupIds.length-1],l=t.slice(o).filter(c=>{const u=c?.groupIds?.some(d=>d===a);return u&&r.set(c.id,!0),u});for(const c of i(l))n.add(c)}else n.add(s)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},xle=e=>{const t=Rre(e),n=e.slice(),i=new Set;return n.forEach((r,s)=>{r&&(r.boundElements?.length?(i.add(r),n[s]=null,r.boundElements.forEach(o=>{const a=t.get(o.id);a&&o.type==="text"&&(i.add(a[0]),n[a[1]]=null)})):r.type==="text"&&r.containerId&&t.get(r.containerId)?.[0].boundElements?.find(a=>a.id===r.id)||(i.add(r),n[s]=null))}),i.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...i]},Cle=e=>xle(Ile(e)),Ale=(e,t,n,i)=>{const r=xc(n);return r.id=tr(),r.updated=Kh(),i&&(r.seed=Ts(),wa(r)),r.groupIds=Wae(r.groupIds,e,s=>(t.has(s)||t.set(s,tr()),t.get(s))),r},Vb=e=>{let{elements:t}=e;const n="appState"in e?e.appState:{editingGroupId:null,selectedGroupIds:{}},i=new Map,r=new Map,s=[],o=[],a=new Map,l=new Map,c=new Map,u=be(t),d=e.type==="in-place"?e.idsOfElementsToDuplicate:new Map(t.map(y=>[y.id,y]));if(e.type==="in-place")for(const y of Object.keys(e.appState.selectedGroupIds))t.filter(b=>b.groupIds?.includes(y)).forEach(b=>d.set(b.id,b));t=Cle(t);const f=t.slice(),h=y=>{const E=R8(y).reduce((v,w)=>{if(i.has(w.id))return v;i.set(w.id,!0);const S=Ale(n.editingGroupId,r,w,e.randomizeSeed);return i.set(S.id,!0),c.set(S.id,S),a.set(w.id,S.id),l.set(S.id,w),o.push(w),s.push(S),v.push(S),v},[]);return Array.isArray(y)?E:E[0]||null},m=(y,b)=>{if(b){if(y>f.length-1){f.push(...R8(b));return}f.splice(y+1,0,...R8(b))}},p=new Set(t.filter(y=>d.has(y.id)&&pe(y)).map(y=>y.id));for(const y of t){if(i.has(y.id)||!d.has(y.id))continue;const b=hB(n,y);if(b){const E=It(t,b).flatMap(w=>pe(w)?[...Ss(t,w.id),w]:[w]),v=du(f,w=>w.groupIds?.includes(b));m(v,h(E));continue}if(!(y.frameId&&p.has(y.frameId))){if(pe(y)){const E=y.id,v=Ss(t,E),w=du(f,S=>S.frameId===E||S.id===E);m(w,h([...v,y]));continue}if(nr(y)){const E=Ce(y,u),v=du(f,w=>w.id===y.id||"containerId"in w&&w.containerId===y.id);E?m(v,h([y,E])):m(v,h(y));continue}if(Ft(y)){const E=zn(y,u),v=du(f,w=>w.id===y.id||w.id===E?.id);E?m(v,h([E,y])):m(v,h(y));continue}m(du(f,E=>E.id===y.id),h(y))}}if(Cae(s,a,c),Zae(f,o,a),e.overrides)for(const y of s){const b=l.get(y.id);b&&Object.assign(y,e.overrides({duplicateElement:y,origElement:b,origIdToDuplicateId:a}))}return{duplicatedElements:s,duplicateElementsMap:c,elementsWithDuplicates:f,origIdToDuplicateId:a}},N7=(e,t=0)=>{if(e==null||typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){const i=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(const r in e)if(e.hasOwnProperty(r)){if(t===0&&(r==="shape"||r==="canvas"))continue;i[r]=N7(e[r],t+1)}return i}if(Array.isArray(e)){let i=e.length;const r=new Array(i);for(;i--;)r[i]=N7(e[i],t+1);return r}return e},xc=e=>N7(e),j={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"};class Mle{constructor(t){this.app=t}onDurableIncrementEmitter=new Ns;onStoreIncrementEmitter=new Ns;scheduledMacroActions=new Set;scheduledMicroActions=[];_snapshot=Ma.empty();get snapshot(){return this._snapshot}set snapshot(t){this._snapshot=t}scheduleAction(t){this.scheduledMacroActions.add(t),this.satisfiesScheduledActionsInvariant()}scheduleCapture(){this.scheduleAction(j.IMMEDIATELY)}scheduleMicroAction(t){const{action:n}=t;let i;if("change"in t)i=t.change;else{const s=Ma.create(this.app.scene.getElementsMapIncludingDeleted(),this.app.state),o=s.maybeClone(n,t.elements?Nle(t.elements):void 0,t.appState);i=Bf.create(s,o)}const r="delta"in t?t.delta:void 0;this.scheduledMicroActions.push(()=>this.processAction({action:n,change:i,delta:r}))}commit(t,n){this.flushMicroActions();try{const i=this.getScheduledMacroAction();this.processAction({action:i,elements:t,appState:n})}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledMacroActions=new Set}}clear(){this.snapshot=Ma.empty(),this.scheduledMacroActions=new Set}emitDurableIncrement(t,n=void 0,i=void 0){const r=this.snapshot;let s,o;if(n?s=n:s=Bf.create(r,t),i?o=i:o=OB.calculate(r,t),!o.isEmpty()){const a=new kle(s,o);this.onDurableIncrementEmitter.trigger(a),this.onStoreIncrementEmitter.trigger(a)}}emitEphemeralIncrement(t,n=void 0){let i;if(n)i=n;else{const s=this.snapshot;i=Bf.create(s,t)}const r=new Rle(i);this.onStoreIncrementEmitter.trigger(r)}applyChangeToSnapshot(t){const n=this.snapshot,i=this.snapshot.applyChange(t);return n===i?null:i}maybeCloneSnapshot(t,n,i){if(!n&&!i)return null;const r=this.snapshot,s=this.snapshot.maybeClone(t,n,i);return r===s?null:s}flushMicroActions(){for(const t of this.scheduledMicroActions)try{t()}catch(n){console.error("Failed to execute scheduled micro action",n)}this.scheduledMicroActions=[]}processAction(t){const{action:n}=t;if(n===j.EVENTUALLY&&!this.onStoreIncrementEmitter.subscribers.length)return;let i;if("change"in t?i=this.applyChangeToSnapshot(t.change):i=this.maybeCloneSnapshot(n,t.elements,t.appState),!i)return;const r="change"in t?t.change:void 0,s="delta"in t?t.delta:void 0;try{switch(n){case j.IMMEDIATELY:this.emitDurableIncrement(i,r,s);break;case j.NEVER:case j.EVENTUALLY:this.emitEphemeralIncrement(i,r);break;default:Po(n,"Unknown store action")}}finally{switch(n){case j.IMMEDIATELY:case j.NEVER:this.snapshot=i;break}}}getScheduledMacroAction(){let t;return this.scheduledMacroActions.has(j.IMMEDIATELY)?t=j.IMMEDIATELY:this.scheduledMacroActions.has(j.NEVER)?t=j.NEVER:t=j.EVENTUALLY,t}satisfiesScheduledActionsInvariant(){if(!(this.scheduledMacroActions.size>=0&&this.scheduledMacroActions.size<=Object.keys(j).length)){const t=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledMacroActions.size}".`;console.error(t,this.scheduledMacroActions.values())}}}class Bf{constructor(t,n){this.elements=t,this.appState=n}static create(t,n){const i=n.getChangedElements(t),r=n.getChangedAppState(t);return new Bf(i,r)}}class LB{constructor(t,n){this.type=t,this.change=n}static isDurable(t){return t.type==="durable"}static isEphemeral(t){return t.type==="ephemeral"}}class kle extends LB{constructor(t,n){super("durable",t),this.change=t,this.delta=n}}class Rle extends LB{constructor(t){super("ephemeral",t),this.change=t}}class OB{constructor(t,n,i){this.id=t,this.elements=n,this.appState=i}static create(t,n,i={id:tr()}){return new this(i.id,t,n)}static calculate(t,n){const i=n.metadata.didElementsChange?xt.calculate(t.elements,n.elements):xt.empty(),r=n.metadata.didAppStateChange?Rn.calculate(t.appState,n.appState):Rn.empty();return this.create(i,r)}static restore(t){const{id:n,elements:i,appState:r}=t;return new this(n,xt.restore(i),Rn.restore(r))}static load({id:t,elements:{added:n,removed:i,updated:r}}){const s=xt.create(n,i,r);return new this(t,s,Rn.empty())}static inverse(t){return this.create(t.elements.inverse(),t.appState.inverse())}static applyTo(t,n,i){const[r,s]=t.elements.applyTo(n),[o,a]=t.appState.applyTo(i,r);return[r,o,s||a]}static applyLatestChanges(t,n,i,r){return this.create(t.elements.applyLatestChanges(n,i,r),t.appState,{id:t.id})}isEmpty(){return this.elements.isEmpty()&&this.appState.isEmpty()}}class Ma{constructor(t,n,i={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){this.elements=t,this.appState=n,this.metadata=i}_lastChangedElementsHash=0;_lastChangedAppStateHash=0;static create(t,n,i={didElementsChange:!1,didAppStateChange:!1}){return new Ma(t,tA(n)?n:zf(n),i)}static empty(){return new Ma(new Map,Dle(),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}getChangedElements(t){const n={};for(const i of Dl(t.elements))this.elements.get(i.id)||(n[i.id]=Ee(i,{isDeleted:!0}));for(const i of Dl(this.elements))t.elements.get(i.id)!==i&&(n[i.id]=i);return n}getChangedAppState(t){return Xe.getRightDifferences(t.appState,this.appState).reduce((n,i)=>Object.assign(n,{[i]:this.appState[i]}),{})}isEmpty(){return this.metadata.isEmpty}applyChange(t){const n=new Map(this.elements);for(const[r,s]of Object.entries(t.elements))n.set(r,s);const i=zf({...this.appState,...t.appState});return Ma.create(n,i,{didElementsChange:Object.keys(t.elements).length>0,didAppStateChange:Object.keys(t.appState).length>0})}maybeClone(t,n,i){const r={shouldCompareHashes:!1};t===j.EVENTUALLY&&(r.shouldCompareHashes=!0);const s=this.maybeCreateElementsSnapshot(n,r),o=this.maybeCreateAppStateSnapshot(i,r);let a=!1,l=!1;return this.elements!==s&&(a=!0),this.appState!==o&&(l=!0),!a&&!l?this:new Ma(s,o,{didElementsChange:a,didAppStateChange:l})}maybeCreateAppStateSnapshot(t,n={shouldCompareHashes:!1}){if(!t)return this.appState;const i=tA(t)?t:zf(t);return this.detectChangedAppState(i,n)?i:this.appState}maybeCreateElementsSnapshot(t,n={shouldCompareHashes:!1}){if(!t)return this.elements;const i=this.detectChangedElements(t,n);return i?.size?this.createElementsSnapshot(i):this.elements}detectChangedAppState(t,n={shouldCompareHashes:!1}){if(this.appState===t)return;const i=Xe.isRightDifferent(this.appState,t);if(!i)return;const r=S9(JSON.stringify(t));if(!(n.shouldCompareHashes&&this._lastChangedAppStateHash===r))return this._lastChangedAppStateHash=r,i}detectChangedElements(t,n={shouldCompareHashes:!1}){if(this.elements===t)return;const i=new Map;for(const s of Dl(this.elements))t.get(s.id)||i.set(s.id,Ee(s,{isDeleted:!0}));for(const s of Dl(t)){const o=this.elements.get(s.id);if(!o||o.version<s.version){if(yt(s)&&!Tn(s))continue;i.set(s.id,s)}}if(!i.size)return;const r=az(i);if(!(n.shouldCompareHashes&&this._lastChangedElementsHash===r))return this._lastChangedElementsHash=r,i}createElementsSnapshot(t){const n=new Map;for(const i of Dl(this.elements))n.set(i.id,i);for(const i of Dl(t))n.set(i.id,xc(i));return n}}const NB="__observedAppState",Dle=()=>({name:null,editingGroupId:null,viewBackgroundColor:Pe.white,selectedElementIds:{},selectedGroupIds:{},editingLinearElementId:null,selectedLinearElementId:null,croppingElementId:null,activeLockedId:null,lockedMultiSelections:{}}),zf=e=>{const t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,croppingElementId:e.croppingElementId,activeLockedId:e.activeLockedId,lockedMultiSelections:e.lockedMultiSelections,editingLinearElementId:e.editingLinearElement?.elementId??e.editingLinearElementId??null,selectedLinearElementId:e.selectedLinearElement?.elementId??e.selectedLinearElementId??null};return Reflect.defineProperty(t,NB,{value:!0,enumerable:!1}),t},tA=e=>!!Reflect.get(e,NB),PB="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Sf(e,t,n){const i=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===i||t&&t.slice(-1)===i)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||i)===t[o];)o++;if(o>0)return t.slice(0,o)+Sf(e.slice(o),t.slice(o),n)}const r=e?n.indexOf(e[0]):0,s=t!=null?n.indexOf(t[0]):n.length;if(s-r>1){const o=Math.round(.5*(r+s));return n[o]}else return t&&t.length>1?t.slice(0,1):n[r]+Sf(e.slice(1),null,n)}function FB(e){if(e.length!==BB(e[0]))throw new Error("invalid integer part of order key: "+e)}function BB(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function p1(e){const t=BB(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function nA(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=p1(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function iA(e,t){FB(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])+1;o===t.length?i[s]=t[0]:(i[s]=t[o],r=!1)}if(r){if(n==="Z")return"a"+t[0];if(n==="z")return null;const s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?i.push(t[0]):i.pop(),s+i.join("")}else return n+i.join("")}function Lle(e,t){FB(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])-1;o===-1?i[s]=t.slice(-1):(i[s]=t[o],r=!1)}if(r){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?i.push(t.slice(-1)):i.pop(),s+i.join("")}else return n+i.join("")}function Bd(e,t,n=PB){if(e!=null&&nA(e,n),t!=null&&nA(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=p1(t),c=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+Sf("",c,n);if(l<t)return l;const u=Lle(l,n);if(u==null)throw new Error("cannot decrement any more");return u}if(t==null){const l=p1(e),c=e.slice(l.length),u=iA(l,n);return u??l+Sf(c,null,n)}const i=p1(e),r=e.slice(i.length),s=p1(t),o=t.slice(s.length);if(i===s)return i+Sf(r,o,n);const a=iA(i,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:i+Sf(r,null,n)}function P7(e,t,n,i=PB){if(n===0)return[];if(n===1)return[Bd(e,t,i)];if(t==null){let o=Bd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Bd(o,t,i),a.push(o);return a}if(e==null){let o=Bd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Bd(e,o,i),a.push(o);return a.reverse(),a}const r=Math.floor(n/2),s=Bd(e,t,i);return[...P7(e,s,r,i),s,...P7(s,t,n-r-1,i)]}class Ole extends Error{code="ELEMENT_HAS_INVALID_INDEX"}const p9=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:i,reconciliationContext:r})=>{const s=[],o=l=>`${l?.index}:${l?.id}:${l?.type}:${l?.isDeleted}:${l?.version}:${l?.versionNonce}`,a=e.map(l=>l.index);for(const[l,c]of a.entries()){const u=a[l-1],d=a[l+1];if(F7(c,u,d)||s.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&nr(e[l])){const f=e[l],h=Ce(f,be(e));h&&h.index<=f.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(f)}"`)}}if(s.length){const l=new Ole,c=[];if(r&&(c.push("Additional reconciliation context:"),c.push(r.localElements.map(u=>o(u))),c.push(r.remoteElements.map(u=>o(u)))),i||console.error(s.join(`

`),l.stack,e.map(u=>o(u)),...c),t)throw l}},U9=e=>e.sort((t,n)=>rA(t)&&rA(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),qs=(e,t)=>{try{const n=be(e),i=Ple(e,t),r=b9(e,i),s=e.map(o=>{const a=r.get(o);return a?{...o,index:a.index}:o});p9(s,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(const[o,{index:a}]of r)fi(o,n,{index:a})}catch{Gc(e)}return e},Gc=e=>{const t=be(e),n=zB(e),i=b9(e,n);for(const[r,{index:s}]of i)fi(r,t,{index:s});return e},Nle=e=>{const t=be(e),n=zB(e),i=b9(e,n);for(const[r,{index:s}]of i)t.set(r.id,Ee(r,{index:s}));return t},Ple=(e,t)=>{const n=[];let i=0;for(;i<e.length;)if(t.has(e[i].id)){const r=[i-1,i];for(;++i<e.length&&t.has(e[i].id);)r.push(i);r.push(i),n.push(r)}else i++;return n},zB=e=>{const t=[];let n,i,r=-1,s=0;const o=c=>{const u=e[r]?e[r].index:void 0,d=e[c-1]?.index;return!u&&d||u&&d&&d>u?[d,c-1]:[u,r]},a=c=>{const u=e[s]?e[s].index:void 0;if(u&&c<s)return[u,s];let d=s;for(;++d<e.length;){const f=e[d]?.index;if(!u&&f||u&&f&&f>u)return[f,d]}return[void 0,d]};let l=0;for(;l<e.length;){const c=e[l].index;if([n,r]=o(l),[i,s]=a(l),F7(c,n,i))l++;else{const u=[r,l];for(;++l<e.length;){const d=e[l].index,[f,h]=o(l),[m,p]=a(l);if(F7(d,f,m))break;[n,r]=[f,h],[i,s]=[m,p],u.push(l)}u.push(s),t.push(u)}}return t},F7=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,b9=(e,t)=>{const n=new Map;for(const i of t){const r=i.shift(),s=i.pop(),o=P7(e[r]?.index,e[s]?.index,i.length);for(let a=0;a<i.length;a++){const l=e[i[a]];n.set(l,{index:o[a]})}}return n},rA=e=>!!e.index,sA=e=>{const t=new Map,n=[];for(const i of e)i.isDeleted||(n.push(i),t.set(i.id,i));return{elementsMap:t,elements:n}},Fle=So(e=>{window?.DEBUG_FRACTIONAL_INDICES&&p9(e,{shouldThrow:Ore(),includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),Ble=e=>{const t=["includeBoundTextElement","includeElementsInFrames"];let n="";for(const i of t)n+=`${i}:${e[i]?"1":"0"}`;return n};class $b{callbacks=new Set;nonDeletedElements=[];nonDeletedElementsMap=Fo(new Map);elements=[];nonDeletedFramesLikes=[];frames=[];elementsMap=Fo(new Map);selectedElementsCache={selectedElementIds:null,elements:null,cache:new Map};sceneNonce;getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}constructor(t=null){t&&this.replaceAllElements(t)}getSelectedElements(t){const n=Ble(t),i=t?.elements||this.nonDeletedElements;if(this.selectedElementsCache.elements===i&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){const s=this.selectedElementsCache.cache.get(n);if(s)return s}else t?.elements==null&&this.selectedElementsCache.cache.clear();const r=Ne(i,{selectedElementIds:t.selectedElementIds},t);return t?.elements==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,r)),r}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){const n=this.getElement(t);return n&&Y7(n)?n:null}mapElements(t){let n=!1;const i=this.elements.map(r=>{const s=t(r);return s!==r&&(n=!0),s});return n&&this.replaceAllElements(i),n}replaceAllElements(t){const n=Lre(t),i=[];Fle(n),this.elements=Gc(n),this.elementsMap.clear(),this.elements.forEach(s=>{pe(s)&&i.push(s),this.elementsMap.set(s.id,s)});const r=sA(this.elements);this.nonDeletedElements=r.elements,this.nonDeletedElementsMap=r.elementsMap,this.frames=i,this.nonDeletedFramesLikes=sA(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=Ts();for(const t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),t,...this.elements.slice(n)];qs(i,be([t])),this.replaceAllElements(i)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];qs(i,be(t)),this.replaceAllElements(i)}insertElement=t=>{const n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)};insertElements=t=>{if(!t.length)return;const n=t[0]?.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)};getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}getContainerElement=t=>t&&t.containerId&&this.getElement(t.containerId)||null;getElementsFromId=t=>{const n=this.getNonDeletedElementsMap(),i=n.get(t);return i?[i]:It(n,t)};mutateElement(t,n,i={informMutation:!0,isDragging:!1}){const r=this.getNonDeletedElementsMap(),{version:s}=t,{version:o}=fi(t,r,n,i);return this.elementsMap.has(t.id)&&s!==o&&i.informMutation&&this.triggerUpdate(),t}}class Xe{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,i,r){const s=i&&r!=="inserted"?i(t,"deleted"):t,o=i&&r!=="deleted"?i(n,"inserted"):n;return new Xe(s,o)}static calculate(t,n,i,r){if(t===n)return Xe.empty();const s={},o={};for(const c of this.getDifferences(t,n))s[c]=t[c],o[c]=n[c];const[a,l]=r?r(s,o):[s,o];return Xe.create(a,l,i)}static empty(){return new Xe({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,i){const r={...t};for(const s of Object.keys(i))delete r[s];return{...r,...n}}static mergeArrays(t,n,i,r){return Object.values(Xe.mergeObjects(oa(t??[],r),oa(n??[],r),oa(i??[],r)))}static diffObjects(t,n,i,r){if(!t[i]&&!n[i])return;const s=t[i]!==null&&typeof t[i]=="object",o=n[i]!==null&&typeof n[i]=="object";if(s||o){const a=t[i]??{},l=n[i]??{},c=Xe.getLeftDifferences(a,l).reduce((d,f)=>(d[f]=r(a[f]),d),{}),u=Xe.getRightDifferences(a,l).reduce((d,f)=>(d[f]=r(l[f]),d),{});Object.keys(c).length||Object.keys(u).length?(Reflect.set(t,i,c),Reflect.set(n,i,u)):(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}else t[i]===n[i]&&(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}static diffArrays(t,n,i,r){if(!(!t[i]&&!n[i])&&(Array.isArray(t[i])||Array.isArray(n[i]))){const s=Array.isArray(t[i])?t[i]:[],o=Array.isArray(n[i])?n[i]:[],a=oa(Xe.getLeftDifferences(oa(s,r),oa(o,r)),c=>c),l=oa(Xe.getRightDifferences(oa(s,r),oa(o,r)),c=>c);if(Object.keys(a).length||Object.keys(l).length){const c=s.filter(d=>a[r?r(d):String(d)]),u=o.filter(d=>l[r?r(d):String(d)]);Reflect.set(t,i,c),Reflect.set(n,i,u)}else Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i)}}static isLeftDifferent(t,n,i=!1){return!!this.distinctKeysIterator("left",t,n,i).next().value}static isRightDifferent(t,n,i=!1){return!!this.distinctKeysIterator("right",t,n,i).next().value}static isInnerDifferent(t,n,i=!1){return!!!!this.distinctKeysIterator("inner",t,n,i).next().value}static isDifferent(t,n,i=!1){return!!!!this.distinctKeysIterator("full",t,n,i).next().value}static getLeftDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("left",t,n,i)).sort()}static getRightDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("right",t,n,i)).sort()}static getInnerDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("inner",t,n,i)).sort()}static getDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("full",t,n,i)).sort()}static*distinctKeysIterator(t,n,i,r=!1){if(n===i)return;let s=[];t==="left"?s=Object.keys(n):t==="right"?s=Object.keys(i):t==="inner"?s=Object.keys(n).filter(o=>o in i):t==="full"?s=Array.from(new Set([...Object.keys(n),...Object.keys(i)])):Po(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(const o of s){const a=n[o],l=i[o];if(a!==l){if(!r&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&Bi(a,l))continue;yield o}}}}class Rn{constructor(t){this.delta=t}static calculate(t,n){const i=Xe.calculate(t,n,Rn.orderAppStateKeys,Rn.postProcess);return new Rn(i)}static restore(t){const{delta:n}=t;return new Rn(n)}static empty(){return new Rn(Xe.create({},{}))}inverse(){const t=Xe.create(this.delta.inserted,this.delta.deleted);return new Rn(t)}applyTo(t,n){try{const{selectedElementIds:i={},selectedGroupIds:r={}}=this.delta.deleted,{selectedElementIds:s={},selectedGroupIds:o={},selectedLinearElementId:a,editingLinearElementId:l,...c}=this.delta.inserted,u=Xe.mergeObjects(t.selectedElementIds,s,i),d=Xe.mergeObjects(t.selectedGroupIds,o,r),f=a&&n.has(a)?new Z(n.get(a),n):null,h=l&&n.has(l)?new Z(n.get(l),n):null,m={...t,...c,selectedElementIds:u,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?f:t.selectedLinearElement,editingLinearElement:typeof l<"u"?h:t.editingLinearElement},p=this.filterInvisibleChanges(t,m,n);return[m,p]}catch(i){return console.error("Couldn't apply appstate change",i),[t,!1]}}isEmpty(){return Xe.isEmpty(this.delta)}filterInvisibleChanges(t,n,i){const r=zf(t),s=zf(n),o=Xe.isRightDifferent(Rn.stripElementsProps(r),Rn.stripElementsProps(s)),a=Xe.isRightDifferent(Rn.stripStandaloneProps(r),Rn.stripStandaloneProps(s));if(!o&&!a)return!1;const l={value:o};if(a){const c=Xe.getRightDifferences(Rn.stripStandaloneProps(r),Rn.stripStandaloneProps(s));let u=new Set;(c.includes("editingGroupId")||c.includes("selectedGroupIds"))&&(u=Yae(i));for(const d of c)switch(d){case"selectedElementIds":n[d]=Rn.filterSelectedElements(n[d],i,l);break;case"selectedGroupIds":n[d]=Rn.filterSelectedGroups(n[d],u,l);break;case"croppingElementId":{const p=n[d];if(!p)l.value=!0;else{const y=i.get(p);y&&!y.isDeleted?l.value=!0:n[d]=null}break}case"editingGroupId":const f=n[d];f?u.has(f)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":const h=Rn.convertToAppStateKey(d),m=n[h];if(!m)l.value=!0;else{const p=i.get(m.elementId);p&&!p.isDeleted?l.value=!0:n[h]=null}break;case"lockedMultiSelections":{const p=t[d]||{},y=n[d]||{};Bi(p,y)||(l.value=!0);break}case"activeLockedId":{const p=t[d]||null,y=n[d]||null;p!==y&&(l.value=!0);break}default:Po(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,i){const r=Object.keys(t);if(!r.length)return i.value=!0,t;const s={...t};for(const o of r){const a=n.get(o);a&&!a.isDeleted?i.value=!0:delete s[o]}return s}static filterSelectedGroups(t,n,i){if(!Object.keys(t).length)return i.value=!0,t;const s={...t};for(const o of Object.keys(s))n.has(o)?i.value=!0:delete s[o];return s}static stripElementsProps(t){const{editingGroupId:n,selectedGroupIds:i,selectedElementIds:r,editingLinearElementId:s,selectedLinearElementId:o,croppingElementId:a,lockedMultiSelections:l,activeLockedId:c,...u}=t;return u}static stripStandaloneProps(t){const{name:n,viewBackgroundColor:i,...r}=t;return r}static postProcess(t,n){try{Xe.diffObjects(t,n,"selectedElementIds",i=>!0),Xe.diffObjects(t,n,"selectedGroupIds",i=>i??!1),Xe.diffObjects(t,n,"lockedMultiSelections",i=>i??{}),Xe.diffObjects(t,n,"activeLockedId",i=>i??null)}catch{console.error("Couldn't postprocess appstate change deltas.")}finally{return[t,n]}}static orderAppStateKeys(t){const n={};for(const i of Object.keys(t).sort())n[i]=t[i];return n}}class xt{constructor(t,n,i){this.added=t,this.removed=n,this.updated=i}static create(t,n,i,r={shouldRedistribute:!1}){let s;if(r.shouldRedistribute){const o={},a={},l={},c=[...Object.entries(t),...Object.entries(n),...Object.entries(i)];for(const[u,d]of c)this.satisfiesAddition(d)?o[u]=d:this.satisfiesRemoval(d)?a[u]=d:l[u]=d;s=new xt(o,a,l)}else s=new xt(t,n,i);return s}static restore(t){const{added:n,removed:i,updated:r}=t;return xt.create(n,i,r)}static satisfiesAddition=({deleted:t,inserted:n})=>t.isDeleted===!0&&!n.isDeleted;static satisfiesRemoval=({deleted:t,inserted:n})=>!t.isDeleted&&n.isDeleted===!0;static satisfiesUpdate=({deleted:t,inserted:n})=>!!t.isDeleted==!!n.isDeleted;static satisfiesCommmonInvariants=({deleted:t,inserted:n})=>!!(t.version&&n.version&&Number.isInteger(t.version)&&Number.isInteger(n.version)&&t.version>=0&&n.version>=0&&t.version!==n.version);static validate(t,n,i){for(const[r,s]of Object.entries(t[n]))if(!this.satisfiesCommmonInvariants(s)||!i(s))throw console.error(`Broken invariant for "${n}" delta, element "${r}", delta:`,s),new Error(`ElementsDelta invariant broken for element "${r}".`)}static calculate(t,n){if(t===n)return xt.empty();const i={},r={},s={};for(const o of t.values())if(!n.get(o.id)){const l={...o,isDeleted:!1},c={isDeleted:!0,version:o.version+1,versionNonce:Ts()},u=Xe.create(l,c,xt.stripIrrelevantProps);r[o.id]=u}for(const o of n.values()){const a=t.get(o.id);if(!a){const l={isDeleted:!0,version:o.version-1,versionNonce:Ts()},c={...o,isDeleted:!1},u=Xe.create(l,c,xt.stripIrrelevantProps);i[o.id]=u;continue}if(a.versionNonce!==o.versionNonce){const l=Xe.calculate(a,o,xt.stripIrrelevantProps,xt.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?i[o.id]=l:r[o.id]=l;continue}Xe.isEmpty(l)||(s[o.id]=l)}}return xt.create(i,r,s)}static empty(){return xt.create({},{},{})}inverse(){const t=s=>{const o={};for(const[a,l]of Object.entries(s))o[a]=Xe.create(l.inserted,l.deleted);return o},n=t(this.added),i=t(this.removed),r=t(this.updated);return xt.create(i,n,r)}isEmpty(){return Object.keys(this.added).length===0&&Object.keys(this.removed).length===0&&Object.keys(this.updated).length===0}applyLatestChanges(t,n,i){const r=(c,u)=>(d,f)=>{let h;switch(f){case"deleted":h=c;break;case"inserted":h=u;break}if(!h)return console.error("Element not found when trying to apply latest changes"),d;const m={};for(const p of Object.keys(d))switch(p){case"boundElements":m[p]=d[p];break;default:m[p]=h[p]}return m},s=c=>{const u={};for(const[d,f]of Object.entries(c)){const h=t.get(d),m=n.get(d);let p=null;h||m?p=Xe.create(f.deleted,f.inserted,r(h,m),i):p=f,Xe.isInnerDifferent(p.deleted,p.inserted)&&(u[d]=p)}return u},o=s(this.added),a=s(this.removed),l=s(this.updated);return xt.create(o,a,l,{shouldRedistribute:!0})}applyTo(t,n=Ma.empty().elements,i={excludedProperties:new Set}){let r=new Map(t),s;const o={containsVisibleDifference:!1,containsZindexDifference:!1};try{const a=xt.createApplier(r,n,i,o),l=a(this.added),c=a(this.removed),u=a(this.updated),d=this.resolveConflicts(t,r);s=new Map([...l,...c,...u,...d])}catch(a){return console.error("Couldn't apply elements delta",a),[t,!0]}try{r=xt.reorderElements(r,s,o);const a=new $b(r);xt.redrawTextBoundingBoxes(a,s),xt.redrawBoundArrows(a,s)}catch(a){console.error("Couldn't mutate elements after applying elements change",a)}finally{return[r,o.containsVisibleDifference]}}static createApplier=(t,n,i,r)=>s=>{const o=xt.createGetter(t,n,r);return Object.entries(s).reduce((a,[l,c])=>{const u=o(l,c.inserted);if(u){const d=xt.applyDelta(u,c,i,r);t.set(d.id,d),a.set(d.id,d)}return a},new Map)};static createGetter=(t,n,i)=>(r,s)=>{let o=t.get(r);return o||(o=n.get(r),o?(i.containsZindexDifference=!0,(!s.isDeleted||s.isDeleted&&!o.isDeleted)&&(i.containsVisibleDifference=!0)):o=Ee({id:r,version:1},{...s})),o};static applyDelta(t,n,i,r){const s={};for(const o of Object.keys(n.inserted)){if(o==="boundElements"||i.excludedProperties.has(o))continue;const a=n.inserted[o];Reflect.set(s,o,a)}if(n.deleted.boundElements?.length||n.inserted.boundElements?.length){const o=Xe.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,a=>a.id);Object.assign(s,{boundElements:o})}if(!r.containsVisibleDifference){const{index:o,...a}=s,l=xt.checkForVisibleDifference(t,a);r.containsVisibleDifference=l}return r.containsZindexDifference||(r.containsZindexDifference=n.deleted.index!==n.inserted.index),Ee(t,s)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:Xe.isRightDifferent(t,n)}resolveConflicts(t,n){const i=new Map,r=(c,u)=>{const d=n.get(c.id);if(!d)return;let f;t.get(c.id)===d?f=Ee(d,u):f=fi(d,n,u),i.set(f.id,f),n.set(f.id,f)};for(const c of Object.keys(this.removed))xt.unbindAffected(t,n,c,r);for(const c of Object.keys(this.added))xt.rebindAffected(t,n,c,r);for(const[c]of Array.from(Object.entries(this.updated)).filter(([u,d])=>Object.keys({...d.deleted,...d.inserted}).find(f=>kae.has(f)))){const u=n.get(c);!u||u.isDeleted||xt.rebindAffected(t,n,c,r)}const s=new Map(Array.from(t).filter(([c])=>i.has(c))),{added:o,removed:a,updated:l}=xt.calculate(s,i);for(const[c,u]of Object.entries(o))this.added[c]=u;for(const[c,u]of Object.entries(a))this.removed[c]=u;for(const[c,u]of Object.entries(l))this.updated[c]=u;return i}static unbindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);g1.unbindAffected(n,s(),r),g1.unbindAffected(n,o(),r),m1.unbindAffected(n,s(),r),m1.unbindAffected(n,o(),r)}static rebindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);g1.unbindAffected(n,s(),r),g1.rebindAffected(n,o(),r),m1.unbindAffected(n,s(),(a,l)=>{le(a)&&r(a,l)}),m1.rebindAffected(n,o(),r)}static redrawTextBoundingBoxes(t,n){const i=t.getNonDeletedElementsMap(),r=new Map;for(const s of n.values()){if(Ft(s)){const{containerId:o}=s,a=o?i.get(o):void 0;a&&r.set(a.id,{container:a,boundText:s})}if(nr(s)){const o=zo(s),a=o?i.get(o):void 0;a&&r.set(s.id,{container:s,boundText:a})}}for(const{container:s,boundText:o}of r.values())s.isDeleted||o.isDeleted||Hi(o,s,t)}static redrawBoundArrows(t,n){for(const i of n.values())!i.isDeleted&&Zs(i)&&pr(i,t,{changedElements:n})}static reorderElements(t,n,i){if(!i.containsZindexDifference)return t;const r=Array.from(t.values()),s=U9([...r]),o=Xe.getRightDifferences(r,s,!0).reduce((a,l)=>{const c=r[Number(l)];return c&&n.has(c.id)&&a.set(c.id,c),a},new Map);return!i.containsVisibleDifference&&o.size&&(i.containsVisibleDifference=!0),be(qs(s,o))}static postProcess(t,n){try{Xe.diffArrays(t,n,"boundElements",s=>s.id);const i=t.points??[],r=n.points??[];Xe.isDifferent(i,r)||(Reflect.deleteProperty(t,"points"),Reflect.deleteProperty(n,"points"))}catch{console.error("Couldn't postprocess elements delta.")}finally{return[t,n]}}static stripIrrelevantProps(t){const{id:n,updated:i,...r}=t;return r}}const zle=(e,t,n)=>{const[i,r,s,o]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=Us(e),l=m5(e,t).map(f=>[f,Us(f)]).sort((f,h)=>f[1][r]-h[1][r]);let c=0;for(const f of l)c+=f[1][o];const u=(a[o]-c)/(l.length-1);if(u<0){const f=l.findIndex(y=>y[1][i]===a[i]),h=l.findIndex(y=>y[1][s]===a[s]),m=(l[h][1][r]-l[f][1][r])/(l.length-1);let p=l[f][1][r];return l.flatMap(([y,b],E)=>{const v={x:0,y:0};return E!==f&&E!==h&&(p+=m,v[n.axis]=p-b[r]),y.map(w=>Ee(w,{x:w.x+v.x,y:w.y+v.y}))})}let d=a[i];return l.flatMap(([f,h])=>{const m={x:0,y:0};return m[n.axis]=d-h[i],d+=u,d+=h[o],f.map(p=>Ee(p,{x:p.x+m.x,y:p.y+m.y}))})},Hle=(e,t,n,i,r,s)=>{if(t.length===1&&ce(t[0])&&(t[0].startBinding||t[0].endBinding))return;const o=t.filter(d=>{if(ce(d)&&d.startBinding&&d.endBinding){const f=t.find(m=>m.id===d.startBinding?.elementId),h=t.find(m=>m.id===d.endBinding?.elementId);return f&&h}return!0}),a=new Set(o),l=o.filter(d=>pe(d)).map(d=>d.id);if(l.length>0)for(const d of i.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);const c=[];for(const d of a){const f=e.originalElements.get(d.id);if(!f)return;c.push(f)}const u=Vle(ft(c),n,r,s);a.forEach(d=>{if(oA(e,d,i,u),!_e(d)){const f=Ce(d,i.getNonDeletedElementsMap());f&&oA(e,f,i,u),pr(d,i,{simultaneouslyUpdated:Array.from(a)})}})},Vle=(e,t,n,i)=>{const[r,s]=e;let o=r+t.x+n.x,a=s+t.y+n.y;if(n.x===0||n.y===0){const[l,c]=An(r+t.x,s+t.y,i);n.x===0&&(o=l),n.y===0&&(a=c)}return{x:o-r,y:a-s}},oA=(e,t,n,i)=>{const r=e.originalElements.get(t.id)??t,s=r.x+i.x,o=r.y+i.y;n.mutateElement(t,{x:s,y:o})},$le=(e,t,n)=>{const[i,r]=ft(e);return[t-i,n-r]},aA=({newElement:e,elementType:t,originX:n,originY:i,x:r,y:s,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:c,zoom:u,scene:d,widthAspectRatio:f=null,originOffset:h=null,informMutation:m=!0})=>{l&&e.type!=="selection"&&(f?a=o/f:(Math.abs(s-i)>Math.abs(r-n)?{width:o,height:a}=eA(t,a,r<n?-o:o):{width:o,height:a}=eA(t,o,s<i?-a:a),a<0&&(a=-a)));let p=r<n?n-o:n,y=s<i?i-a:i;c&&(o+=o,a+=a,p=n-o/2,y=i-a/2);let b=null;if(le(e)){a=e.height;const E=jw(ot({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,E),Math.abs(r-n)>Tie/u&&(b={autoResize:!1}),y=i,c&&(p=n-o/2)}if(o!==0&&a!==0){let E=null;yt(e)&&(E={initialWidth:o,initialHeight:a}),d.mutateElement(e,{x:p+(h?.x??0),y:y+(h?.y??0),width:o,height:a,...b,...E},{informMutation:m,isDragging:!1})}},HB=(e,t)=>{const n=window.location.href;try{const i=new URL(n);return i.searchParams.set(hb,e),Hr(i.toString())}catch(i){console.error(i)}return Hr(n)},VB=(e,t)=>{if(e.length>0&&Gb(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){const n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},Gb=e=>!!(e.length===1||e.length>1&&i9(e)),Hf=e=>{try{const t=new URL(e);return t.searchParams.has(hb)&&t.host===window.location.host}catch{return!1}},Gle=e=>{try{const{searchParams:t}=new URL(e);if(t.has(hb))return t.get(hb)}catch{}return null},Qs=(e,{x:t,y:n,strokeColor:i=nn.strokeColor,backgroundColor:r=nn.backgroundColor,fillStyle:s=nn.fillStyle,strokeWidth:o=nn.strokeWidth,strokeStyle:a=nn.strokeStyle,roughness:l=nn.roughness,opacity:c=nn.opacity,width:u=0,height:d=0,angle:f=0,groupIds:h=[],frameId:m=null,index:p=null,roundness:y=null,boundElements:b=null,link:E=null,locked:v=nn.locked,...w})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||u<-1e6||u>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:u,height:d,points:w.points}),{id:w.id||tr(),type:e,x:t,y:n,width:u,height:d,angle:f,strokeColor:i,backgroundColor:r,fillStyle:s,strokeWidth:o,strokeStyle:a,roughness:l,opacity:c,groupIds:h,frameId:m,index:p,roundness:y,seed:w.seed??Ts(),version:w.version||1,versionNonce:w.versionNonce??0,isDeleted:!1,boundElements:b,updated:Kh(),link:E,locked:v,customData:w.customData}),$o=e=>Qs(e.type,e),lA=e=>Qs("embeddable",e),Xle=e=>({...Qs("iframe",e)}),y9=e=>Ee({...Qs("frame",e),type:"frame",name:e?.name||null},{}),B7=e=>Ee({...Qs("magicframe",e),type:"magicframe",name:e?.name||null},{}),$B=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),Gr=e=>{const t=e.fontFamily||Hc,n=e.fontSize||dl,i=e.lineHeight||Tc(t),r=gh(e.text),s=Bn(r,ot({fontFamily:t,fontSize:n}),i),o=e.textAlign||Hm,a=e.verticalAlign||cb,l=$B({textAlign:o,verticalAlign:a},s),c={...Qs("text",e),text:r,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??r,autoResize:e.autoResize??!0,lineHeight:i};return Ee(c,{})},jle=(e,t,n)=>{let{width:i,height:r}=Bn(n,ot(e),e.lineHeight);e.autoResize||(i=e.width);const{textAlign:s,verticalAlign:o}=e;let a,l;if(s==="center"&&o===Or.MIDDLE&&!e.containerId&&e.autoResize){const c=Bn(e.text,ot(e),e.lineHeight),u=$B(e,{width:i-c.width,height:r-c.height});a=e.x-u.x,l=e.y-u.y}else{const[c,u,d,f]=Le(e,t),[h,m,p,y]=$0(e,i,r,!1),b=(c-h)/2,E=(u-m)/2,v=(d-p)/2,w=(f-y)/2;[a,l]=Yle({s:!0,e:s==="center"||s==="left",w:s==="center"||s==="right"},e.x,e.y,e.angle,b,E,v,w)}return{width:i,height:r,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},Yle=(e,t,n,i,r,s,o,a)=>{const l=Math.cos(i),c=Math.sin(i);return e.e&&e.w?t+=r+o:e.e?(t+=r*(1+l),n+=r*c,t+=o*(1-l),n+=o*-c):e.w&&(t+=r*(1-l),n+=r*-c,t+=o*(1+l),n+=o*c),e.n&&e.s?n+=s+a:e.n?(t+=s*c,n+=s*(1-l),t+=a*-c,n+=a*(1+l)):(t+=s*-c,n+=s*(1+l),t+=a*c,n+=a*(1-l)),[t,n]},GB=(e,t,n,i=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(i=$c(i,ot(e),t?Ho(t,e):e.width));const r=jle(e,n,i);return{text:i,...r}},Wle=e=>({...Qs(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),ac=e=>{const t={...Qs(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null};return sn(t)?{...t,polygon:e.polygon??!1}:t},Vf=e=>e.elbowed?{...Qs(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...Qs(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},XB=e=>({...Qs("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),oo=new Map,Kle=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,Zle=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,qle=/^https:\/\/(?:www\.)?figma\.com/,cA=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,Qle=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,Jle=/^(?:https?:\/\/)?forms\.microsoft\.com\//,uA=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,ece=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,tce=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,nce=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,dA=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,fA=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,ice=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,z7=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com","forms.microsoft.com"]),hA=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com","forms.microsoft.com"]),t0=e=>`<html><body>${e}</body></html>`,If=e=>{if(!e)return null;if(oo.has(e))return oo.get(e);const t=e,n=hA.has(H7(e,hA)||"");let i="generic",r={w:560,h:840};const s=e.match(Kle);if(s?.[2]){const c=s[3]?`&start=${s[3]}`:"",u=e.includes("shorts");switch(i="video",s[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${c}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${c}`;break;default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${c}`;break}return r=u?{w:315,h:560}:{w:560,h:315},oo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}}const o=e.match(Zle);if(o?.[1]){const c=o?.[1],u=/^\d+$/.test(c)?void 0:new URIError("Invalid embed link format");return i="video",e=`https://player.vimeo.com/video/${c}?api=1`,r={w:560,h:315},oo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,error:u,sandbox:{allowSameOrigin:n}}}if(e.match(qle))return i="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,r={w:550,h:550},oo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};const l=e.match(tce);if(l)return e=l[1]==="embed"?l[0]:l[0].replace("/v","/embed"),oo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};if(Jle.test(e)&&!e.includes("embed=true")&&(e+=e.includes("?")?"&embed=true":"?embed=true"),uA.test(e)){const c=e.match(uA)[1],u=t2(`https://twitter.com/x/status/${c}`),d={type:"document",srcdoc:f=>t0(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${f}"><a href="${u}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return oo.set(t,d),d}if(fA.test(e)){const[,c,u,d]=e.match(fA),f=t2(`https://reddit.com/r/${c}/comments/${u}/${d}`),h={type:"document",srcdoc:m=>t0(`<blockquote class="reddit-embed-bq" data-embed-theme="${m}"><a href="${f}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return oo.set(t,h),h}if(cA.test(e)){const[,c,u]=e.match(cA),d=t2(`https://gist.github.com/${c}/${u}`),f={type:"document",srcdoc:()=>t0(`
          <script src="${d}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return oo.set(e,f),f}return oo.set(e,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}},jB=e=>{let t;Ll(e)?t="IFrame element":t=!e.link||e?.link===""?"Empty Web-Embed":e.link;const n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),i=Ye.Helvetica,r=ot({fontSize:n,fontFamily:i});return Gr({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:i,fontSize:n,text:$c(t,r,e.width-20),textAlign:"center",verticalAlign:Or.MIDDLE,angle:e.angle??0})},H7=(e,t)=>{try{const{hostname:n}=new URL(e),i=n.replace(/^www\./,"");if(t instanceof Set){if(z7.has(i))return i;const s=i.replace(/^([^.]+)/,"*");return z7.has(s)?s:null}const r=t.replace(/^www\./,"");if(i===r)return r}catch{}return null},rce=e=>{const t=e.match(ece);if(t&&t.length===2)return t[1];const n=e.match(ice);if(n&&n.length===2)return n[1];const i=e.match(Qle);if(i&&i.length===2)return i[1];if(dA.test(e))return`https://giphy.com/embed/${dA.exec(e)[1]}`;const r=e.match(nce);return r&&r.length===2?r[1]:e},l2=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){const n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(const n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(H7(e,n))return!0;return!1}}return!!H7(e,z7)},$f=100,pu=100,gA=e=>{switch(e){case B.ARROW_UP:return"up";case B.ARROW_DOWN:return"down";case B.ARROW_RIGHT:return"right";case B.ARROW_LEFT:return"left";default:return"right"}},YB=(e,t,n,i)=>{const r=[...n.values()].reduce((s,o)=>{let a;if(ce(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&o[e==="predecessors"?"endBinding":"startBinding"]?.elementId===t.id){const l=n.get(a.elementId);if(!l)return s;jn(Zs(l),"not an ExcalidrawBindableElement");const c=e==="predecessors"?o.points[o.points.length-1]:[0,0],u=qw(t,fa(t,n),[c[0]+o.x,c[1]+o.y]);s.push({relative:l,heading:u})}return s},[]);switch(i){case"up":return r.filter(s=>Pn(s.heading,zs)).map(s=>s.relative);case"down":return r.filter(s=>Pn(s.heading,qi)).map(s=>s.relative);case"right":return r.filter(s=>Pn(s.heading,On)).map(s=>s.relative);case"left":return r.filter(s=>Pn(s.heading,as)).map(s=>s.relative)}},V7=(e,t,n)=>YB("successors",e,t,n),$7=(e,t,n)=>YB("predecessors",e,t,n),sce=(e,t,n)=>{const i=pu+e.width;if(n==="up"||n==="down"){const a=$f+e.height,l=e.x,c=e.x+e.width;if(t.every(u=>u.x+u.width<l||u.x>c))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){const a=e.y,l=e.y+e.height;if(t.every(c=>c.y+c.height<a||c.y>l))return{x:(pu+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){const a=$f+e.height,l=(t.length===0,a),c=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="up"?{x:c,y:l*-1}:{x:c,y:l}}const r=$f+e.height,s=(t.length===0,pu+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="left"?{x:s*-1,y:o}:{x:s,y:o}},oce=(e,t,n,i)=>{const r=i.getNonDeletedElementsMap(),s=V7(e,r,n),o=$7(e,r,n),a=sce(e,[...s,...o],n),l=$o({type:e.type,x:e.x+a.x,y:e.y+a.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});jn(f5(l),"not an ExcalidrawFlowchartNodeElement");const c=WB(e,l,n,t,i);return{nextNode:l,bindingArrow:c}},ace=(e,t,n,i,r)=>{const s=[];for(let o=0;o<r;o++){let a,l;if(n==="left"||n==="right"){const d=$f*(r-1)+r*e.height,f=e.y+e.height/2-d/2;let h=pu+e.width;n==="left"&&(h*=-1),a=e.x+h;const m=($f+e.height)*o;l=f+m}else{const d=pu*(r-1)+r*e.width,f=e.x+e.width/2-d/2;let h=$f+e.height;n==="up"&&(h*=-1),l=e.y+h;const m=(pu+e.width)*o;a=f+m}const c=$o({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});jn(f5(c),"not an ExcalidrawFlowchartNodeElement");const u=WB(e,c,n,t,i);s.push(c),s.push(u)}return s},WB=(e,t,n,i,r)=>{let s,o;switch(n){case"up":{s=e.x+e.width/2,o=e.y-6;break}case"down":{s=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{s=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{s=e.x-6,o=e.y+e.height/2;break}}let l,c;switch(n){case"up":{l=t.x+t.width/2-s,c=t.y+t.height-o+6;break}case"down":{l=t.x+t.width/2-s,c=t.y-o-6;break}case"right":{l=t.x-s-6,c=t.y-o+t.height/2;break}case"left":{l=t.x+t.width-s+6,c=t.y-o+t.height/2;break}}const u=Vf({type:"arrow",x:s,y:o,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[I(0,0),I(l,c)],elbowed:!0}),d=r.getNonDeletedElementsMap();Vo(u,e,"start",r),Vo(u,t,"end",r);const f=new Map;f.set(e.id,e),f.set(t.id,t),f.set(u.id,u),Z.movePoints(u,r,new Map([[1,{point:u.points[1]}]]));const h=qh(u,Fo(new Map([...d.entries(),[e.id,e],[t.id,t],[u.id,u]])),{points:u.points});return{...u,...h}};class lce{isExploring=!1;sameLevelNodes=[];sameLevelIndex=0;direction=null;visitedNodes=new Set;clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(t,n,i){if(!Zs(t))return null;if(i!==this.direction&&this.clear(),this.visitedNodes.has(t.id)||this.visitedNodes.add(t.id),this.isExploring&&i===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;const r=[...V7(t,n,i),...$7(t,n,i)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=i,this.visitedNodes.add(r[0].id),r[0].id;if(i===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(t.id);const o=["up","right","down","left"].filter(a=>a!==i).map(a=>[...V7(t,n,a),...$7(t,n,a)]).flat().filter(a=>!this.visitedNodes.has(a.id));for(const a of o)if(!this.visitedNodes.has(a.id))return this.visitedNodes.add(a.id),this.isExploring=!0,this.direction=i,a.id}return null}}class cce{isCreatingChart=!1;numberOfNodes=0;direction="right";pendingNodes=null;createNodes(t,n,i,r){const s=r.getNonDeletedElementsMap();if(i!==this.direction){const{nextNode:o,bindingArrow:a}=oce(t,n,i,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=i,this.pendingNodes=[o,a]}else{this.numberOfNodes+=1;const o=ace(t,n,i,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=i,this.pendingNodes=o}if(t.frameId){const o=s.get(t.frameId);jn(o&&HF(o),"not an ExcalidrawFrameElement"),o&&this.pendingNodes.every(a=>ep([a],o,s)||Ic(a,o,s))&&(this.pendingNodes=this.pendingNodes.map(a=>fi(a,s,{frameId:t.frameId})))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}}const uce=(e,t)=>{for(const[,n]of t)if(n.type==="arrow"&&(n.startBinding?.elementId===e.id||n.endBinding?.elementId===e.id))return!0;return!1},dce=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=r=>{n(r)},i.src=e}),KB=async({fileIds:e,files:t,imageCache:n})=>{const i=new Map,r=new Map;return await Promise.all(e.reduce((s,o)=>{const a=t[o];return a&&!i.has(o)?(i.set(o,!0),s.concat((async()=>{try{if(a.mimeType===Ue.binary)throw new Error("Only images can be added to ImageCache");const l=dce(a.dataURL),c={image:l,mimeType:a.mimeType};n.set(o,c);const u=await l;n.set(o,{...c,image:u})}catch{r.set(o,!0)}})())):s},[])),{imageCache:n,updatedFiles:i,erroredFiles:r}},ZB=e=>e.filter(t=>Tn(t)),fce=e=>e?.nodeName.toLowerCase()==="svg",mA=e=>{const t=new DOMParser().parseFromString(e,Ue.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!fce(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",qe);let r=n.getAttribute("width"),s=n.getAttribute("height");(r?.includes("%")||r==="auto")&&(r=null),(s?.includes("%")||s==="auto")&&(s=null);const o=n.getAttribute("viewBox");if(!r||!s){if(r=r||"50",s=s||"50",o){const a=o.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);a&&([,r,s]=a)}n.setAttribute("width",r),n.setAttribute("height",s)}return o||n.setAttribute("viewBox",`0 0 ${r} ${s}`),n.outerHTML}},hce=(e,t,n,i,r,s,o,a,l,c,u)=>{const d=i.getNonDeletedElementsMap();if(n.length===1){const[f]=n;if(t==="rotation")ce(f)||(gce(f,i,a,l,r),pr(f,i));else if(t){const h=n[0].id,m=d.get(h),p=e.get(h);if(m&&p){const{nextWidth:y,nextHeight:b}=Ece(m,p,t,a,l,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s});X0(y,b,m,p,e,i,t,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s})}}return le(f)&&pr(f,i),!0}else if(n.length>1){if(t==="rotation")return pce(e,n,i,a,l,r,c,u),!0;if(t){const{nextWidth:f,nextHeight:h,flipByX:m,flipByY:p,originalBoundingBox:y}=vce(n,e,d,t,a,l,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s});return qB(n,d,t,i,e,{shouldResizeFromCenter:s,shouldMaintainAspectRatio:o,flipByX:m,flipByY:p,nextWidth:f,nextHeight:h,originalBoundingBox:y}),!0}}return!1},gce=(e,t,n,i,r)=>{const[s,o,a,l]=Le(e,t.getNonDeletedElementsMap()),c=(s+a)/2,u=(o+l)/2;let d;pe(e)?d=0:(d=5*Math.PI/2+Math.atan2(i-u,n-c),r&&(d=d+Ar/2,d=d-d%Ar),d=Xs(d));const f=zo(e);if(t.mutateElement(e,{angle:d}),f){const h=t.getElement(f);h&&!_e(e)&&t.mutateElement(h,{angle:d})}},E9=(e,t,n,i)=>we(e)||yr(e)?{points:wb(0,t,wb(1,n,e.points,i),i)}:{},v9=(e,t,n)=>{let i=e.width;if(Ft(e)){const o=zn(e,t);o&&(i=Ho(o,e))}const s=e.fontSize*(n/i);return s<_w?null:{size:s}},mce=(e,t,n,i,r,s,o)=>{const a=n.getNonDeletedElementsMap(),l=t.width*(o/t.height),c=v9(t,a,l);if(c!==null){if(i.includes("n")||i.includes("s")){const u=I(e.x,e.y),d=G7(u,e.width,e.height,l,o,e.angle,i,!1,r);n.mutateElement(t,{fontSize:c.size,width:l,height:o,x:d.x,y:d.y});return}if(i==="e"||i==="w"){const u=jw(ot({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight),d=Math.max(u,s),f=$c(t.originalText,ot(t),Math.abs(d)),h=Bn(f,ot(t),t.lineHeight),m=h.height,p=I(e.x,e.y),y=G7(p,e.width,e.height,d,m,t.angle,i,!1,r),b={width:Math.abs(d),height:Math.abs(h.height),x:y.x,y:y.y,text:f,autoResize:!1};n.mutateElement(t,b)}}},pce=(e,t,n,i,r,s,o,a)=>{const l=n.getNonDeletedElementsMap();let c=5*Math.PI/2+Math.atan2(r-a,i-o);s&&(c+=Ar/2,c-=c%Ar);for(const u of t)if(!pe(u)){const[d,f,h,m]=Le(u,l),p=(d+h)/2,y=(f+m)/2,b=e.get(u.id)?.angle??u.angle,[E,v]=W(I(p,y),I(o,a),c+b-u.angle),w=ce(u)?{points:Dae(u,l)}:{x:u.x+(E-p),y:u.y+(v-y),angle:Xs(c+b)};n.mutateElement(u,w),pr(u,n,{simultaneouslyUpdated:t});const S=Ce(u,l);S&&!_e(u)&&n.mutateElement(S,{x:S.x+(E-p),y:S.y+(v-y),angle:Xs(c+b)})}n.triggerUpdate()},Uce=(e,t,n,i,r)=>{const[s,o,a,l]=t.length===1?Le(t[0],n):ft(t),c=(s+a)/2,u=(o+l)/2,d=t.length===1?t[0].angle:0;switch([i,r]=W(I(i,r),I(c,u),-d),e){case"n":return W(I(i-(s+a)/2,r-o),I(0,0),d);case"s":return W(I(i-(s+a)/2,r-l),I(0,0),d);case"w":return W(I(i-s,r-(o+l)/2),I(0,0),d);case"e":return W(I(i-a,r-(o+l)/2),I(0,0),d);case"nw":return W(I(i-s,r-o),I(0,0),d);case"ne":return W(I(i-a,r-o),I(0,0),d);case"sw":return W(I(i-s,r-l),I(0,0),d);case"se":return W(I(i-a,r-l),I(0,0),d);default:return[0,0]}},bce=(e,t)=>{const[,[n,i]]=t.points;return e==="nw"&&(n<0||i<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||i>0)?"end":"origin"},yce=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},G7=(e,t,n,i,r,s,o,a,l)=>{const c=yce(o,a,l),[u,d]=e;switch(c){case"top-left":return{x:u+(t-i)/2+(i-t)/2*Math.cos(s)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(i-t)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"top-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(t-i)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"bottom-left":return{x:u+(t-i)/2*(1-Math.cos(s))+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(i-t)/2*Math.sin(s)};case"bottom-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(t-i)/2*Math.sin(s)};case"center":return{x:u-(i-t)/2,y:d-(r-n)/2};case"east-side":return{x:u+(t-i)/2*(Math.cos(s)+1),y:d+(t-i)/2*Math.sin(s)+(n-r)/2};case"west-side":return{x:u+(t-i)/2*(1-Math.cos(s)),y:d+(i-t)/2*Math.sin(s)+(n-r)/2};case"north-side":return{x:u+(t-i)/2+(n-r)/2*Math.sin(s),y:d+(r-n)/2*(Math.cos(s)-1)};case"south-side":return{x:u+(t-i)/2+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)}}},X0=(e,t,n,i,r,s,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:c=!1}={})=>{if(le(n)&&le(i))return mce(i,n,s,o,c,e,t);let u={};const d=s.getNonDeletedElementsMap(),f=Ce(n,d);if(f){const y=r.get(f.id);if(y&&(u={fontSize:y.fontSize}),l){const b={...n,width:e},E=v9(f,d,Ho(b,f));if(E===null)return;u={fontSize:E.size}}else{const b=KF(ot(f),f.lineHeight),E=ZF(f.fontSize,f.lineHeight);e=Math.max(e,b),t=Math.max(t,E)}}const h=E9(i,e,t,!0);let m=I(i.x,i.y);if(we(i)){const[y,b]=_i(i,r);m=I(y,b)}const p=G7(m,i.width,i.height,e,t,i.angle,o,l,c);if(we(i)&&h.points){const y=i.x-m[0],b=i.y-m[1];p.x+=y,p.y+=b;const E=h.points[0][0],v=h.points[0][1];p.x+=E,p.y+=v,h.points=h.points.map(w=>I(w[0]-E,w[1]-v))}if(e<0&&(p.x=p.x+e),t<0&&(p.y=p.y+t),"scale"in n&&"scale"in i&&s.mutateElement(n,{scale:[(Math.sign(e)||i.scale[0])*i.scale[0],(Math.sign(t)||i.scale[1])*i.scale[1]]}),_e(n)&&f&&l){const y=e/n.width*f.fontSize;if(y<_w)return;u.fontSize=y}if(e!==0&&t!==0&&Number.isFinite(p.x)&&Number.isFinite(p.y)){const y={...p,width:Math.abs(e),height:Math.abs(t),...h};s.mutateElement(n,y,{informMutation:a,isDragging:!1}),f&&u!=null&&s.mutateElement(f,{fontSize:u.fontSize}),Zm(n,s,o,l),pr(n,s,{newSize:{width:e,height:t}})}},Ece=(e,t,n,i,r,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1}={})=>{const[a,l,c,u]=$0(t,t.width,t.height,!0),d=I(a,l),f=I(c,u),h=pb(d,f),m=W(I(i,r),h,-t.angle),[p,y,b,E]=$0(e,e.width,e.height,!0),v=b-p,w=E-y,S=f[0]-d[0],k=f[1]-d[1];let _=S/v,T=k/w;n.includes("e")&&(_=(m[0]-d[0])/v),n.includes("s")&&(T=(m[1]-d[1])/w),n.includes("w")&&(_=(f[0]-m[0])/v),n.includes("n")&&(T=(f[1]-m[1])/w);let A=e.width*_,C=e.height*T;if(o&&(A=2*A-t.width,C=2*C-t.height),s){const R=Math.abs(A)/t.width,P=Math.abs(C)/t.height;if(n.length===1&&(C*=R,A*=P),n.length===2){const N=Math.max(R,P);A=t.width*N*Math.sign(A),C=t.height*N*Math.sign(C)}}return{nextWidth:A,nextHeight:C}},vce=(e,t,n,i,r,s,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{const l=e.map(N=>t.get(N.id)),c=l.reduce((N,K)=>{if(!we(K))return N;const H=zo(K);if(!H)return N;const z=t.get(H)??null;return Ft(z)?[...N,{...z,...Z.getBoundTextElementPosition(K,z,n)}]:N},[]),u=Us(l.map(N=>N).concat(c)),{minX:d,minY:f,maxX:h,maxY:m,midX:p,midY:y}=u,b=h-d,E=m-f,v={ne:[d,m],se:[d,f],sw:[h,f],nw:[h,m],e:[d,f+E/2],w:[h,f+E/2],n:[d+b/2,m],s:[d+b/2,f]},[w,S]=a?[p,y]:v[i],k=a?2:1,_=Math.max(Math.abs(r-w)/b||0,Math.abs(s-S)/E||0)*k;let T=i.includes("e")||i.includes("w")?Math.abs(r-w)*k:b,A=i.includes("n")||i.includes("s")?Math.abs(s-S)*k:E;o&&(T=b*_*Math.sign(r-w),A=E*_*Math.sign(s-S));const C={ne:[r<w,s>S],se:[r<w,s<S],sw:[r>w,s<S],nw:[r>w,s>S],e:[r<w,!1],w:[r>w,!1],n:[!1,s>S],s:[!1,s<S]},[R,P]=C[i].map(N=>N);return{originalBoundingBox:u,nextWidth:T,nextHeight:A,flipByX:R,flipByY:P}},qB=(e,t,n,i,r,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:c,nextWidth:u,originalBoundingBox:d}={})=>{if(u===void 0&&c===void 0&&a===void 0&&l===void 0||c===0||u===0)return;r||(r=t);const f=e.reduce((k,_)=>{const T=r.get(_.id);return T&&k.push({orig:T,latest:_}),k},[]);let h;if(d)h=d;else{const k=f.reduce((_,{orig:T})=>{if(!we(T))return _;const A=zo(T);if(!A)return _;const C=r.get(A)??null;return Ft(C)?[..._,{...C,...Z.getBoundTextElementPosition(T,C,t)}]:_},[]);h=Us(f.map(({orig:_})=>_).concat(k))}const{minX:m,minY:p,maxX:y,maxY:b,midX:E,midY:v}=h,w=y-m,S=b-p;if(u===void 0&&c===void 0&&(u=w,c=S),s&&(u===void 0?u=c*(w/S):c===void 0?c=u*(S/w):Math.abs(u/c-w/S)>.001&&(u=c*(w/S))),u&&c){let k=n.includes("e")||n.includes("w")?Math.abs(u)/w:1,_=n.includes("n")||n.includes("s")?Math.abs(c)/S:1,T;n.length===1?T=n.includes("e")||n.includes("w")?k:_:T=Math.max(Math.abs(u)/w||0,Math.abs(c)/S||0);const A={ne:[m,b],se:[m,p],sw:[y,p],nw:[y,b],e:[m,p+S/2],w:[y,p+S/2],n:[m+w/2,b],s:[m+w/2,p]},[C,R]=o?[E,v]:A[n],P=s||f.some(V=>V.latest.angle!==0||le(V.latest)||ph(V.latest));P&&(k=T,_=T);const[N,K]=[a?-1:1,l?-1:1],H=[];for(const{orig:V,latest:$}of f){if(le(V)&&Ft(V))continue;const G=V.width*k,J=V.height*_,Ae=Xs(V.angle*N*K),ye=we(V)||yr(V),ke=V.x-C,wt=V.y-R,Ot=a&&!ye?G:0,xn=l&&!ye?J:0,en=C+N*(ke*k+Ot),gi=R+K*(wt*_+xn),$i=E9(V,G*N,J*K,!1),Ge={x:en,y:gi,width:G,height:J,angle:Ae,...$i};if(ce(V)&&(V.startBinding&&(Ge.startBinding={...V.startBinding,fixedPoint:[a?-V.startBinding.fixedPoint[0]+1:V.startBinding.fixedPoint[0],l?-V.startBinding.fixedPoint[1]+1:V.startBinding.fixedPoint[1]]}),V.endBinding&&(Ge.endBinding={...V.endBinding,fixedPoint:[a?-V.endBinding.fixedPoint[0]+1:V.endBinding.fixedPoint[0],l?-V.endBinding.fixedPoint[1]+1:V.endBinding.fixedPoint[1]]}),V.fixedSegments&&$i.points&&(Ge.fixedSegments=V.fixedSegments.map(dn=>({...dn,start:$i.points[dn.index-1],end:$i.points[dn.index]})))),yt(V)&&(Ge.scale=[V.scale[0]*N,V.scale[1]*K]),le(V)){const dn=v9(V,t,G);if(!dn)return;Ge.fontSize=dn.size}const at=r.get(zo(V)??"");if(at)if(P){const dn=at.fontSize*T;if(dn<_w)return;Ge.boundTextFontSize=dn}else Ge.boundTextFontSize=at.fontSize;H.push({element:$,update:Ge})}const z=H.map(({element:V})=>V);for(const{element:V,update:{boundTextFontSize:$,...G}}of H){const{width:J,height:Ae,angle:ye}=G;i.mutateElement(V,G),pr(V,i,{simultaneouslyUpdated:z,newSize:{width:J,height:Ae}});const ke=Ce(V,t);ke&&$&&(i.mutateElement(ke,{fontSize:$,angle:we(V)?void 0:ye}),Zm(V,i,n,!0))}i.triggerUpdate()}},pA={mouse:8,pen:16,touch:28},wce=16,QB={e:!0,s:!0,n:!0,w:!0},UA={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},X8={e:!0,s:!0,n:!0,w:!0},aa=(e,t,n,i,r,s,o)=>{const[a,l]=W(I(e+n/2,t+i/2),I(r,s),o);return[a-n/2,l-i/2,n,i]},w9=e=>!(e.viewport.isMobile||e.isTouchScreen&&(Eie||ZP)),n0=e=>w9(e)?QB:{},_9=([e,t,n,i,r,s],o,a,l,c={},u=4,d=qu)=>{const f=pA[l],h=f/a.value,m=f/a.value,p=f/a.value,y=f/a.value,b=n-e,E=i-t,v=u/a.value,w=(f-d*2)/(2*a.value),S={nw:c.nw?void 0:aa(e-v-p+w,t-v-y+w,h,m,r,s,o),ne:c.ne?void 0:aa(n+v-w,t-v-y+w,h,m,r,s,o),sw:c.sw?void 0:aa(e-v-p+w,i+v-w,h,m,r,s,o),se:c.se?void 0:aa(n+v-w,i+v-w,h,m,r,s,o),rotation:c.rotation?void 0:aa(e+b/2-h/2,t-v-y+w-wce/a.value,h,m,r,s,o)},k=5*pA.mouse/a.value;return Math.abs(b)>k&&(c.n||(S.n=aa(e+b/2-h/2,t-v-y+w,h,m,r,s,o)),c.s||(S.s=aa(e+b/2-h/2,i+v-w,h,m,r,s,o))),Math.abs(E)>k&&(c.w||(S.w=aa(e-v-p+w,t+E/2-m/2,h,m,r,s,o)),c.e||(S.e=aa(n+v-w,t+E/2-m/2,h,m,r,s,o))),S},JB=(e,t,n,i="mouse",r=QB)=>{if(e.locked||ce(e))return{};if(e.type==="freedraw"||we(e)){if(e.points.length===2){const[,o]=e.points;o[0]===0||o[1]===0?r=X8:o[0]>0&&o[1]<0?r=UA:o[0]>0&&o[1]>0?r=X8:o[0]<0&&o[1]>0?r=UA:o[0]<0&&o[1]<0&&(r=X8)}}else pe(e)&&(r={...r,rotation:!0});const s=we(e)?qu+8:yt(e)?0:qu;return _9(Le(e,n,!0),e.angle,t,i,r,s,yt(e)?0:void 0)},ez=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;const n=e[0];return ce(n)?!1:we(n)?n.points.length>2:!0},X7=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],_ce=(e,t,n,i,r,s,o,a)=>{if(!n.selectedElementIds[e.id])return!1;const{rotation:l,...c}=JB(e,s,t,o,n0(a));if(l&&X7(l,i,r))return"rotation";const u=Object.keys(c).filter(d=>{const f=c[d];return f?X7(f,i,r):!1});if(u.length>0)return u[0];if(w9(a)){const[d,f,h,m,p,y]=Le(e,t);if(!(we(e)&&e.points.length<=2)){const b=yt(e)?0:ub/s.value,E=ub/s.value,v=tz(I(d-b,f-b),I(h+b,m+b),I(p,y),e.angle);for(const[w,S]of Object.entries(v))if(Ub(I(i,r),S,E))return w}}return!1},bA=(e,t,n,i,r,s,o,a)=>e.reduce((l,c)=>{if(l)return l;const u=_ce(c,o,t,n,i,r,s,a);return u?{element:c,transformHandleType:u}:null},null),yA=([e,t,n,i],r,s,o,a,l)=>{const c=_9([e,t,n,i,(e+n)/2,(t+i)/2],0,o,a,n0(l)),u=Object.keys(c).find(d=>{const f=c[d];return f&&X7(f,r,s)});if(u)return u;if(w9(l)){const d=(e+n)/2,f=(t+i)/2,h=ub/o.value,m=tz(I(e-h,t-h),I(n+h,i+h),I(d,f),0);for(const[p,y]of Object.entries(m))if(Ub(I(r,s),y,h))return p}return!1},j8=["ns","nesw","ew","nwse"],Tce=(e,t)=>{const n=j8.indexOf(e);if(n>=0){const i=Math.round(t/(Math.PI/4));e=j8[(n+i)%j8.length]}return e},EA=e=>{const{element:t,transformHandleType:n}=e,i=t&&Math.sign(t.height)*Math.sign(t.width)===-1;let r=null;switch(n){case"n":case"s":r="ns";break;case"w":case"e":r="ew";break;case"nw":case"se":i?r="nesw":r="nwse";break;case"ne":case"sw":i?r="nwse":r="nesw";break;case"rotation":return"grab"}return r&&t&&(r=Tce(r,t.angle)),r?`${r}-resize`:""},tz=([e,t],[n,i],r,s)=>{const o=W(I(e,t),r,s),a=W(I(n,t),r,s),l=W(I(e,i),r,s),c=W(I(n,i),r,s);return{n:[o,a],e:[a,c],s:[c,l],w:[l,o]}},T9=(e,t)=>!!(!e.viewModeEnabled&&e.openDialog?.name!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="lasso"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||Ne(t,e).length)),j7=(e,t)=>e.frameId===t||e.id===t,nz=(e,t,n)=>{let i=[],r=[],s=null,o=-1;const a=be(n||Ne(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){const l=e[o];a.get(l.id)?(r.length&&(i=i.concat(r),r=[]),i.push(o),s=o+1):l.isDeleted&&s===o?(s=o+1,r.push(o)):r=[]}return i},Sce=e=>{let t=0;return e.reduce((n,i,r)=>(r>0&&e[r-1]!==i-1&&(t=++t),(n[t]||(n[t]=[])).push(i),n),[])},vA=(e,t,n,i)=>{if("containerId"in e&&e.containerId){const r=i.getElement(e.containerId);if(r)return n==="left"?Math.min(t.indexOf(r),t.indexOf(e)):Math.max(t.indexOf(r),t.indexOf(e))}else{const r=e.boundElements?.find(s=>s.type!=="arrow")?.id;if(r){const s=i.getElement(r);if(s)return n==="left"?Math.min(t.indexOf(s),t.indexOf(e)):Math.max(t.indexOf(s),t.indexOf(e))}}},Ice=(e,t)=>{let n=-1,i=-1;return e.forEach((r,s)=>{j7(r,t)&&(n===-1&&(n=s),i=s)}),n===-1?[]:e.slice(n,i+1)},xce=(e,t,n,i,r,s)=>{const o=t[n],a=f=>f.isDeleted?!1:r?f.frameId===r:e.editingGroupId?f.groupIds.includes(e.editingGroupId):!0,l=i==="left"?du(t,f=>a(f),Math.max(0,n-1)):vF(t,f=>a(f),n+1),c=t[l];if(!c)return-1;if(e.editingGroupId){if(o?.groupIds.join("")===c?.groupIds.join(""))return vA(c,t,i,s)??l;if(!c?.groupIds.includes(e.editingGroupId))return-1}if(!r&&(c.frameId||pe(c))){const f=Ice(t,c.frameId||c.id);return i==="left"?t.indexOf(f[0]):t.indexOf(f[f.length-1])}if(!c.groupIds.length)return vA(c,t,i,s)??l;const u=e.editingGroupId?c.groupIds[c.groupIds.indexOf(e.editingGroupId)-1]:c.groupIds[c.groupIds.length-1],d=It(t,u);return d.length?i==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1]):l},iz=(e,t)=>t.reduce((n,i)=>{const r=e[i];return n.set(r.id,r),n},new Map),rz=(e,t,n,i)=>{const r=nz(e,t),s=iz(e,r);let o=Sce(r);n==="right"&&(o=o.reverse());const a=new Set(r.filter(l=>pe(e[l])).map(l=>e[l].id));return o.forEach((l,c)=>{const u=l[0],d=l[l.length-1],f=n==="left"?u:d,h=l.some(v=>{const w=e[v];return w.frameId&&a.has(w.frameId)})?null:e[f]?.frameId,m=xce(t,e,f,n,h,i);if(m===-1||f===m)return;const p=n==="left"?e.slice(0,m):e.slice(0,u),y=e.slice(u,d+1),b=n==="left"?e.slice(m,u):e.slice(d+1,m+1),E=n==="left"?e.slice(d+1):e.slice(m+1);e=n==="left"?[...p,...y,...b,...E]:[...p,...b,...y,...E]}),qs(e,s),e},sz=(e,t,n,i,r)=>{const s=nz(e,t,r),o=iz(e,s),a=[];let l,c;if(n==="left"){if(i)l=vF(e,m=>j7(m,i));else if(t.editingGroupId){const m=It(e,t.editingGroupId);if(!m.length)return e;l=e.indexOf(m[0])}else l=0;c=s[s.length-1]}else{if(i)c=du(e,m=>j7(m,i));else if(t.editingGroupId){const m=It(e,t.editingGroupId);if(!m.length)return e;c=e.indexOf(m[m.length-1])}else c=e.length-1;l=s[0]}l===-1&&(l=0);for(let m=l;m<c+1;m++)s.includes(m)||a.push(e[m]);const u=Array.from(o.values()),d=e.slice(0,l),f=e.slice(c+1),h=n==="left"?[...d,...u,...a,...f]:[...d,...a,...u,...f];return qs(h,o),h};function oz(e,t,n,i){const r=be(Ne(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},o=new Set;for(const c of e)r.has(c.id)&&pe(c)&&o.add(c.id);for(const c of e)if(r.has(c.id))if(pe(c)||c.frameId&&o.has(c.frameId))s.regularElements.push(c);else if(!c.frameId)s.regularElements.push(c);else{const u=s.frameChildren.get(c.frameId)||[];u.push(c),s.frameChildren.set(c.frameId,u)}let a=e;const l=Array.from(s.frameChildren.entries());for(const[c,u]of l)a=i(e,t,n,c,u);return i(a,t,n,null,s.regularElements)}const Cce=(e,t,n)=>rz(e,t,"left",n),Ace=(e,t,n)=>rz(e,t,"right",n),Mce=(e,t)=>oz(e,t,"left",sz),kce=(e,t)=>oz(e,t,"right",sz),zl=e=>e.reduce((t,n)=>t+n.version,0),az=e=>{let t=5381;for(const n of Dl(e))t=(t<<5)+t+n.versionNonce;return t>>>0},S9=e=>{let t=5381;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)+t+i}return t>>>0},Rce=e=>e.filter(t=>!t.isDeleted&&!oc(t)),Lt=e=>e.filter(t=>!t.isDeleted),Y7=e=>!e.isDeleted,I9=e=>Lt(e).map(t=>Xw(t.type)?{...t,lastCommittedPoint:null}:t),Dce=e=>I9(e),lz=e=>I9(e),cz=e=>I9(e),Lce=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((i,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t)))})};var Qa={};let Oce=0;function $t(e,t){const n=`atom${++Oce}`,i={toString(){return(Qa?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=Nce,i.write=Pce),i}function Nce(e){return e(this)}function Pce(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const wA=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,W7=e=>"init"in e,Y8=e=>!!e.write,Xb=new WeakMap,K7=e=>{var t;return Z7(e)&&!((t=Xb.get(e))!=null&&t[1])},Fce=(e,t)=>{const n=Xb.get(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((Qa?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},Bce=e=>{if(Xb.has(e))return;const t=[new Set,!1];Xb.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},Z7=e=>typeof e?.then=="function",_A=e=>"v"in e||"e"in e,dU=e=>{if("e"in e)throw e.e;if((Qa?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},uz=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},TA=(e,t,n,i,r)=>{var s;if((Qa?"production":void 0)!=="production"&&i===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,r.n),K7(n.v)&&uz(t,n.v,r),(s=r.m)==null||s.t.add(t),e&&zce(e,i,t)},Vg=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),i0=(e,t,n)=>{e[t].add(n)},SA=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),i0(e,"M",()=>{var i;(i=n.m)==null||i.l.forEach(r=>i0(e,"M",r))}))},zce=(e,t,n)=>{const i=e.D.get(t);i&&i.add(n)},Hce=(e,t)=>e.D.get(t),eu=e=>{let t,n=!1;const i=r=>{try{r()}catch(s){n||(t=s,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(i),e.H.clear(),e.M.forEach(i),e.M.clear(),e.L.forEach(i),e.L.clear();if(n)throw t},dz=(...[e,t,n,i])=>{const r=(b,E,v)=>{const w="v"in E,S=E.v,k=K7(E.v)?E.v:null;if(Z7(v)){Bce(v);for(const _ of E.d.keys())uz(b,v,e(_));E.v=v}else E.v=v;delete E.e,delete E.x,(!w||!Object.is(S,E.v))&&(++E.n,k&&Fce(k,v))},s=(b,E)=>{var v;const w=e(E);if(_A(w)&&(w.m&&!w.x||Array.from(w.d).every(([C,R])=>s(b,C).n===R)))return w;w.d.clear();let S=!0;const k=C=>{if(wA(E,C)){const P=e(C);if(!_A(P))if(W7(C))r(C,P,C.init);else throw new Error("no atom init");return dU(P)}const R=s(b,C);try{return dU(R)}finally{if(S)TA(b,E,w,C,R);else{const P=Vg();TA(P,E,w,C,R),d(P,E,w),eu(P)}}};let _,T;const A={get signal(){return _||(_=new AbortController),_.signal},get setSelf(){return(Qa?"production":void 0)!=="production"&&!Y8(E)&&console.warn("setSelf function cannot be used with read-only atom"),!T&&Y8(E)&&(T=(...C)=>{if((Qa?"production":void 0)!=="production"&&S&&console.warn("setSelf function cannot be called in sync"),!S)return u(E,...C)}),T}};try{const C=t(E,k,A);if(r(E,w,C),Z7(C)){(v=C.onCancel)==null||v.call(C,()=>_?.abort());const R=()=>{if(w.m){const P=Vg();d(P,E,w),eu(P)}};C.then(R,R)}return w}catch(C){return delete w.v,w.e=C,delete w.x,++w.n,w}finally{S=!1}},o=b=>dU(s(void 0,b)),a=(b,E,v)=>{var w,S;const k=new Map;for(const _ of((w=v.m)==null?void 0:w.t)||[]){const T=e(_);T.m&&k.set(_,T)}for(const _ of v.p)k.set(_,e(_));return(S=Hce(b,E))==null||S.forEach(_=>{k.set(_,e(_))}),k},l=(b,E,v)=>{const w=[],S=new Set,k=new Set,_=[[E,v]];for(;_.length>0;){const[T,A]=_[_.length-1];if(k.has(T)){_.pop();continue}if(S.has(T)){w.push([T,A,A.n]),k.add(T),A.x=!0,_.pop();continue}S.add(T);for(const[C,R]of a(b,T,A))T!==C&&!S.has(C)&&_.push([C,R])}i0(b,"H",()=>{const T=new Set([E]);for(let A=w.length-1;A>=0;--A){const[C,R,P]=w[A];let N=!1;for(const K of R.d.keys())if(K!==C&&T.has(K)){N=!0;break}N&&(s(b,C),d(b,C,R),P!==R.n&&(SA(b,C,R),T.add(C))),delete R.x}})},c=(b,E,...v)=>{let w=!0;const S=_=>dU(s(b,_)),k=(_,...T)=>{const A=e(_);try{if(wA(E,_)){if(!W7(_))throw new Error("atom not writable");const C=A.n,R=T[0];r(_,A,R),d(b,_,A),C!==A.n&&(SA(b,_,A),l(b,_,A));return}else return c(b,_,...T)}finally{w||eu(b)}};try{return n(E,S,k,...v)}finally{w=!1}},u=(b,...E)=>{const v=Vg();try{return c(v,b,...E)}finally{eu(v)}},d=(b,E,v)=>{if(v.m&&!K7(v.v)){for(const w of v.d.keys())v.m.d.has(w)||(f(b,w,e(w)).t.add(E),v.m.d.add(w));for(const w of v.m.d||[])if(!v.d.has(w)){v.m.d.delete(w);const S=h(b,w,e(w));S?.t.delete(E)}}},f=(b,E,v)=>{if(!v.m){s(b,E);for(const w of v.d.keys())f(b,w,e(w)).t.add(E);if(v.m={l:new Set,d:new Set(v.d.keys()),t:new Set},Y8(E)){const w=v.m;let S;const k=(_,T)=>{let A=!0;S=(...C)=>{try{return c(_,E,...C)}finally{A||eu(_)}};try{return T()}finally{A=!1}};i0(b,"L",()=>{const _=k(b,()=>i(E,(...T)=>S(...T)));_&&(w.u=T=>k(T,_))})}}return v.m},h=(b,E,v)=>{if(v.m&&!v.m.l.size&&!Array.from(v.m.t).some(w=>{var S;return(S=e(w).m)==null?void 0:S.d.has(E)})){const w=v.m.u;w&&i0(b,"L",()=>w(b)),delete v.m;for(const S of v.d.keys()){const k=h(b,S,e(S));k?.t.delete(E)}return}return v.m};return{get:o,set:u,sub:(b,E)=>{const v=Vg(),w=e(b),k=f(v,b,w).l;return k.add(E),eu(v),()=>{k.delete(E);const _=Vg();h(_,b,w),eu(_)}},unstable_derive:b=>dz(...b(e,t,n,i))}},Vce=e=>{const t=new WeakMap,n=new Set;let i,r=0;const s=e.unstable_derive((l,c,u,d)=>(i=l,[f=>{let h=t.get(f);if(!h){const m=l(f);h=new Proxy(m,{set(p,y,b){return y==="m"&&n.add(f),Reflect.set(p,y,b)},deleteProperty(p,y){return y==="m"&&n.delete(f),Reflect.deleteProperty(p,y)}}),t.set(f,h)}return h},c,(f,h,m,...p)=>r?m(f,...p):u(f,h,m,...p),d])),o=s.set;return Object.assign(s,{dev4_get_internal_weak_map:()=>({get:l=>{const c=i(l);if(c.n!==0)return c}}),dev4_get_mounted_atoms:()=>n,dev4_restore_atoms:l=>{o({read:()=>null,write:(u,d)=>{++r;try{for(const[f,h]of l)W7(f)&&d(f,h)}finally{--r}}})}})},tp=()=>{const e=new WeakMap,n=dz(i=>{if((Qa?"production":void 0)!=="production"&&!i)throw new Error("Atom is undefined or null");let r=e.get(i);return r||(r={d:new Map,p:new Set,n:0},e.set(i,r)),r},(i,...r)=>i.read(...r),(i,...r)=>i.write(...r),(i,...r)=>{var s;return(s=i.onMount)==null?void 0:s.call(i,...r)});return(Qa?"production":void 0)!=="production"?Vce(n):n};let $g;const $ce=()=>($g||($g=tp(),(Qa?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=$g),globalThis.__JOTAI_DEFAULT_STORE__!==$g&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),$g);var fz={};const hz=D.createContext(void 0),E5=e=>{const t=D.useContext(hz);return e?.store||t||$ce()},Gce=({children:e,store:t})=>{const n=D.useRef(void 0);return!t&&!n.current&&(n.current=tp()),D.createElement(hz.Provider,{value:t||n.current},e)},q7=e=>typeof e?.then=="function",gz=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},Xce=se.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(gz(e),e)}),W8=new WeakMap,IA=e=>{let t=W8.get(e);return t||(t=new Promise((n,i)=>{let r=e;const s=l=>c=>{r===l&&n(c)},o=l=>c=>{r===l&&i(c)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(c=>{if((fz?"production":void 0)!=="production"&&c===l)throw new Error("[Bug] p is not updated even after cancelation");q7(c)?(W8.set(c,t),r=c,c.then(s(c),o(c)),a(c)):n(c)})};e.then(s(e),o(e)),a(e)}),W8.set(e,t)),t};function j0(e,t){const n=E5(t),[[i,r,s],o]=D.useReducer(c=>{const u=n.get(e);return Object.is(c[0],u)&&c[1]===n&&c[2]===e?c:[u,n,e]},void 0,()=>[n.get(e),n,e]);let a=i;(r!==n||s!==e)&&(o(),a=n.get(e));const l=t?.delay;if(D.useEffect(()=>{const c=n.sub(e,()=>{if(typeof l=="number"){const u=n.get(e);q7(u)&&gz(IA(u)),setTimeout(o,l);return}o()});return o(),c},[n,e,l]),D.useDebugValue(a),q7(a)){const c=IA(a);return Xce(c)}return a}function x9(e,t){const n=E5(t);return D.useCallback((...r)=>{if((fz?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...r)},[n,e])}function yh(e,t){return[j0(e,t),x9(e,t)]}const xA=new WeakMap;function jce(e,t){const n=E5(t),i=Yce(n);for(const[r,s]of e)(!i.has(r)||t?.dangerouslyForceHydrate)&&(i.add(r),n.set(r,s))}const Yce=e=>{let t=xA.get(e);return t||(t=new WeakSet,xA.set(e,t)),t};function xf(){return xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xf.apply(this,arguments)}function mz(){const e=D.createContext(null);function t({store:o,initialValues:a=[],children:l}){const c=D.useRef(o);return c.current||(c.current=tp()),jce(a,{store:c.current}),g(e.Provider,{value:c.current,children:l})}const n=o=>{const a=D.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return E5(xf({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return yh(o,xf({store:l},a))},useAtomValue:(o,a)=>{const l=n();return j0(o,xf({store:l},a))},useSetAtom:(o,a)=>{const l=n();return x9(o,xf({store:l},a))}}}const{read:Axe,write:Mxe}=$t(null);D.createContext({scope:void 0,baseStore:void 0});const pz=mz(),{useAtom:cn,useSetAtom:v5,useAtomValue:Uz,useStore:kxe}=pz,Wce=pz.Provider,Rr=tp(),bz={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library…",libraries:"Browse libraries",loadingScene:"Loading scene…",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},polygon:{breakPolygon:"Break polygon",convertToPolygon:"Convert to polygon"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame",tab:"Tab",shapeSwitch:"Switch shape"},yz={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},Ez={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},vz={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas...",frames:"Frames",texts:"Texts"},wz={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},_z={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},Tz={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},Sz={selection:"Selection",lasso:"Lasso selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw",convertElementType:"Toggle shape type"},Iz={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},xz={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},Cz={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_line_info:"Double-click or press Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},Az={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},Mz={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},kz={or:"Or"},Rz={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},Dz={title:"Error"},Lz={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},Oz={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},Nz={title:"Clear canvas"},Pz={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},Fz={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},Bz={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},zz={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},Hz={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},Vz={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},$z={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},Gz={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},Xz={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},jz={color:"Color",mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},Yz={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},Wz={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},Kz={placeholder:"Quick search"},Zz={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},qz={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},Qz={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},C9={labels:bz,elementLink:yz,library:Ez,search:vz,buttons:wz,alerts:_z,errors:Tz,toolBar:Sz,element:Iz,headings:xz,hints:Cz,canvasError:Az,errorSplash:Mz,shareDialog:kz,roomDialog:Rz,errorDialog:Dz,exportDialog:Lz,helpDialog:Oz,clearCanvasDialog:Nz,publishDialog:Pz,publishSuccessDialog:Fz,confirmDialog:Bz,imageExportDialog:zz,encrypted:Hz,stats:Vz,toast:$z,colors:Gz,welcomeScreen:Xz,colorPicker:jz,overwriteConfirm:Yz,mermaid:Wz,quickSearch:Kz,fontList:Zz,userList:qz,commandPalette:Qz},Kce=Object.freeze(Object.defineProperty({__proto__:null,alerts:_z,buttons:wz,canvasError:Az,clearCanvasDialog:Nz,colorPicker:jz,colors:Gz,commandPalette:Qz,confirmDialog:Bz,default:C9,element:Iz,elementLink:yz,encrypted:Hz,errorDialog:Dz,errorSplash:Mz,errors:Tz,exportDialog:Lz,fontList:Zz,headings:xz,helpDialog:Oz,hints:Cz,imageExportDialog:zz,labels:bz,library:Ez,mermaid:Wz,overwriteConfirm:Yz,publishDialog:Pz,publishSuccessDialog:Fz,quickSearch:Kz,roomDialog:Rz,search:vz,shareDialog:kz,stats:Vz,toast:$z,toolBar:Sz,userList:qz,welcomeScreen:Xz},Symbol.toStringTag,{value:"Module"})),Jz=100,eH=36,tH={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:Jz,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:eH,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100},Zce=Object.freeze(Object.defineProperty({__proto__:null,default:tH,en:Jz,kaa:eH},Symbol.toStringTag,{value:"Module"})),qce=85,Td={code:"en",label:"English"},w5=[Td,...[{code:"ar-SA",label:"العربية",rtl:!0},{code:"bg-BG",label:"Български"},{code:"ca-ES",label:"Català"},{code:"cs-CZ",label:"Česky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"Ελληνικά"},{code:"es-ES",label:"Español"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"فارسی",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Français"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"עברית",rtl:!0},{code:"hi-IN",label:"हिन्दी"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"日本語"},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:"Қазақ тілі"},{code:"ko-KR",label:"한국어"},{code:"ku-TR",label:"Kurdî"},{code:"lt-LT",label:"Lietuvių"},{code:"lv-LV",label:"Latviešu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokmål"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"ਪੰਜਾਬੀ"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Português Brasileiro"},{code:"pt-PT",label:"Português"},{code:"ro-RO",label:"Română"},{code:"ru-RU",label:"Русский"},{code:"sk-SK",label:"Slovenčina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenščina"},{code:"tr-TR",label:"Türkçe"},{code:"uk-UA",label:"Українська"},{code:"zh-CN",label:"简体中文"},{code:"zh-TW",label:"繁體中文"},{code:"vi-VN",label:"Tiếng Việt"},{code:"mr-IN",label:"मराठी"}].filter(e=>tH[e.code]>=qce).sort((e,t)=>e.label>t.label?1:-1)],nH="__test__";let Cf=Td,c2={};const iH=async e=>{if(Cf=e,document.documentElement.dir=Cf.rtl?"rtl":"ltr",document.documentElement.lang=Cf.code,e.code.startsWith(nH))c2={};else try{c2=await Lce(Object.assign({"./locales/ar-SA.json":()=>ge(()=>import("./locales/ar-SA.json-D_jDFH8k.js"),__vite__mapDeps([])),"./locales/az-AZ.json":()=>ge(()=>import("./locales/az-AZ.json-BV3iXazI.js"),__vite__mapDeps([])),"./locales/bg-BG.json":()=>ge(()=>import("./locales/bg-BG.json-CFqJeJis.js"),__vite__mapDeps([])),"./locales/bn-BD.json":()=>ge(()=>import("./locales/bn-BD.json-Dg0jTBuU.js"),__vite__mapDeps([])),"./locales/ca-ES.json":()=>ge(()=>import("./locales/ca-ES.json-B_rqfBtq.js"),__vite__mapDeps([])),"./locales/cs-CZ.json":()=>ge(()=>import("./locales/cs-CZ.json-Cd3Jrse6.js"),__vite__mapDeps([])),"./locales/da-DK.json":()=>ge(()=>import("./locales/da-DK.json-DIUMM5f1.js"),__vite__mapDeps([])),"./locales/de-DE.json":()=>ge(()=>import("./locales/de-DE.json-BF0RlQMn.js"),__vite__mapDeps([])),"./locales/el-GR.json":()=>ge(()=>import("./locales/el-GR.json-DU1ye1AH.js"),__vite__mapDeps([])),"./locales/en.json":()=>ge(()=>Promise.resolve().then(()=>Kce),void 0),"./locales/es-ES.json":()=>ge(()=>import("./locales/es-ES.json-xlQfaHzf.js"),__vite__mapDeps([])),"./locales/eu-ES.json":()=>ge(()=>import("./locales/eu-ES.json-DHzY6Edt.js"),__vite__mapDeps([])),"./locales/fa-IR.json":()=>ge(()=>import("./locales/fa-IR.json-dG0Oexeb.js"),__vite__mapDeps([])),"./locales/fi-FI.json":()=>ge(()=>import("./locales/fi-FI.json-Bujb5Dw7.js"),__vite__mapDeps([])),"./locales/fr-FR.json":()=>ge(()=>import("./locales/fr-FR.json-XQSU67Np.js"),__vite__mapDeps([])),"./locales/gl-ES.json":()=>ge(()=>import("./locales/gl-ES.json-DtDal_zw.js"),__vite__mapDeps([])),"./locales/he-IL.json":()=>ge(()=>import("./locales/he-IL.json-DVcgm2lM.js"),__vite__mapDeps([])),"./locales/hi-IN.json":()=>ge(()=>import("./locales/hi-IN.json-C8kzCSp9.js"),__vite__mapDeps([])),"./locales/hu-HU.json":()=>ge(()=>import("./locales/hu-HU.json-DAfvrv_C.js"),__vite__mapDeps([])),"./locales/id-ID.json":()=>ge(()=>import("./locales/id-ID.json-CBiVsIt-.js"),__vite__mapDeps([])),"./locales/it-IT.json":()=>ge(()=>import("./locales/it-IT.json-WpaAwjln.js"),__vite__mapDeps([])),"./locales/ja-JP.json":()=>ge(()=>import("./locales/ja-JP.json-lTAhYhc8.js"),__vite__mapDeps([])),"./locales/kaa.json":()=>ge(()=>import("./locales/kaa.json-FVrrRyw0.js"),__vite__mapDeps([])),"./locales/kab-KAB.json":()=>ge(()=>import("./locales/kab-KAB.json-BrNis2fB.js"),__vite__mapDeps([])),"./locales/kk-KZ.json":()=>ge(()=>import("./locales/kk-KZ.json-D22q2uZy.js"),__vite__mapDeps([])),"./locales/km-KH.json":()=>ge(()=>import("./locales/km-KH.json-c8LT4rcW.js"),__vite__mapDeps([])),"./locales/ko-KR.json":()=>ge(()=>import("./locales/ko-KR.json-Be74AxMq.js"),__vite__mapDeps([])),"./locales/ku-TR.json":()=>ge(()=>import("./locales/ku-TR.json-DnNoknS4.js"),__vite__mapDeps([])),"./locales/lt-LT.json":()=>ge(()=>import("./locales/lt-LT.json-Bezae7cb.js"),__vite__mapDeps([])),"./locales/lv-LV.json":()=>ge(()=>import("./locales/lv-LV.json-DjX28ylN.js"),__vite__mapDeps([])),"./locales/mr-IN.json":()=>ge(()=>import("./locales/mr-IN.json-oZ81g7ZD.js"),__vite__mapDeps([])),"./locales/my-MM.json":()=>ge(()=>import("./locales/my-MM.json-DYr6nfRL.js"),__vite__mapDeps([])),"./locales/nb-NO.json":()=>ge(()=>import("./locales/nb-NO.json-KO5Ap4Cw.js"),__vite__mapDeps([])),"./locales/nl-NL.json":()=>ge(()=>import("./locales/nl-NL.json-CF-IsFrk.js"),__vite__mapDeps([])),"./locales/nn-NO.json":()=>ge(()=>import("./locales/nn-NO.json-BUxdfyBP.js"),__vite__mapDeps([])),"./locales/oc-FR.json":()=>ge(()=>import("./locales/oc-FR.json-DJSOwdjr.js"),__vite__mapDeps([])),"./locales/pa-IN.json":()=>ge(()=>import("./locales/pa-IN.json-CWeXowf0.js"),__vite__mapDeps([])),"./locales/percentages.json":()=>ge(()=>Promise.resolve().then(()=>Zce),void 0),"./locales/pl-PL.json":()=>ge(()=>import("./locales/pl-PL.json-DC_Gtqyg.js"),__vite__mapDeps([])),"./locales/pt-BR.json":()=>ge(()=>import("./locales/pt-BR.json-BP870iwO.js"),__vite__mapDeps([])),"./locales/pt-PT.json":()=>ge(()=>import("./locales/pt-PT.json-BCiUoe7O.js"),__vite__mapDeps([])),"./locales/ro-RO.json":()=>ge(()=>import("./locales/ro-RO.json-DDtEzs-o.js"),__vite__mapDeps([])),"./locales/ru-RU.json":()=>ge(()=>import("./locales/ru-RU.json-Cu66rc7c.js"),__vite__mapDeps([])),"./locales/si-LK.json":()=>ge(()=>import("./locales/si-LK.json-D8rbKfZA.js"),__vite__mapDeps([])),"./locales/sk-SK.json":()=>ge(()=>import("./locales/sk-SK.json-B-lk308q.js"),__vite__mapDeps([])),"./locales/sl-SI.json":()=>ge(()=>import("./locales/sl-SI.json-C9l50axt.js"),__vite__mapDeps([])),"./locales/sv-SE.json":()=>ge(()=>import("./locales/sv-SE.json-S0z3nuUO.js"),__vite__mapDeps([])),"./locales/ta-IN.json":()=>ge(()=>import("./locales/ta-IN.json-Bb4XJg6y.js"),__vite__mapDeps([])),"./locales/th-TH.json":()=>ge(()=>import("./locales/th-TH.json-D-2txP3v.js"),__vite__mapDeps([])),"./locales/tr-TR.json":()=>ge(()=>import("./locales/tr-TR.json-C8iTlMZv.js"),__vite__mapDeps([])),"./locales/uk-UA.json":()=>ge(()=>import("./locales/uk-UA.json-BmimCNFT.js"),__vite__mapDeps([])),"./locales/vi-VN.json":()=>ge(()=>import("./locales/vi-VN.json-Cs9mO6qO.js"),__vite__mapDeps([])),"./locales/zh-CN.json":()=>ge(()=>import("./locales/zh-CN.json-D5rso2fJ.js"),__vite__mapDeps([])),"./locales/zh-HK.json":()=>ge(()=>import("./locales/zh-HK.json-Cr1Xzg-X.js"),__vite__mapDeps([])),"./locales/zh-TW.json":()=>ge(()=>import("./locales/zh-TW.json-BhXss3zf.js"),__vite__mapDeps([]))}),`./locales/${Cf.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),c2=C9}Rr.set(rH,e.code)},Y0=()=>Cf,CA=(e,t)=>{for(let n=0;n<t.length;++n){const i=t[n];if(e[i]===void 0)return;e=e[i]}if(typeof e=="string")return e},M=(e,t,n)=>{if(Cf.code.startsWith(nH))return`‪[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]‬`;const i=e.split(".");let r=CA(c2,i)||CA(C9,i)||n;if(r===void 0){const s=`Can't find translation for ${e}`;return console.warn(s),""}if(t)for(const s in t)r=r.replace(`{{${s}}}`,String(t[s]));return r},rH=$t(Td.code),un=()=>{const e=Uz(rH);return{t:M,langCode:e}},Qce=(e,t)=>{const[n,i,r,s]=t,{x:o,y:a}=Nr({sceneX:n,sceneY:i},e),{x:l,y:c}=Nr({sceneX:r,sceneY:s},e);return l-o>e.width||c-a>e.height},sH=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:i})=>{let r=(t.width-(i?.right??0))/2/n.value-e.x;r+=(i?.left??0)/2/n.value;let s=(t.height-(i?.bottom??0))/2/n.value-e.y;return s+=(i?.top??0)/2/n.value,{scrollX:r,scrollY:s}},W0=(e,t)=>{if(e=Rce(e),!e.length)return{scrollX:0,scrollY:0};let[n,i,r,s]=ft(e);Qce(t,[n,i,r,s])&&([n,i,r,s]=wle(e,Tt({clientX:t.scrollX,clientY:t.scrollY},t)));const o=(n+r)/2,a=(i+s)/2;return sH({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},ka=e=>Ve(Pa(e,6),Sw,Iw),Jce=e=>Ve(Math.round(e),1,100),oH=e=>Ve(Math.round(e),1,100),Hs=e=>"var(--icon-fill-color)",aH=e=>e===Te.LIGHT?ci.white:"#1e1e1e",X=(e,t=512)=>{const{width:n=512,height:i=n,mirror:r,style:s,...o}=typeof t=="number"?{width:t}:t;return g("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${i}`,className:he({"rtl-mirror":r}),style:s,...o,children:typeof e=="string"?g("path",{fill:"currentColor",d:e}):e})},oe={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},De={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:3,y:8,width:18,height:4,rx:1}),g("line",{x1:12,y1:8,x2:12,y2:21}),g("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),g("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),oe);const A9=X(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),g("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),g("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),oe),eue=X(O("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),oe),tue=X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"1"}),g("circle",{cx:"12",cy:"19",r:"1"}),g("circle",{cx:"12",cy:"5",r:"1"})]}),oe),nue=X(O("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),g("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),g("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),oe),AA=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 8m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M15 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M6.5 9.5l3.5 -3"}),g("path",{d:"M14 5.5l3 1.5"}),g("path",{d:"M18.5 10l-2.5 7"}),g("path",{d:"M13.5 17.5l-7 -5"})]}),oe),_5=X(O("g",{children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:g("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),g("g",{mask:"url(#UnlockedIcon)",children:g("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),De),M9=X(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),g("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),De),iue=X(g("g",{fill:"currentColor",children:g("path",{d:"M12 2a5 5 0 0 1 5 5v3a3 3 0 0 1 3 3v6a3 3 0 0 1 -3 3h-10a3 3 0 0 1 -3 -3v-6a3 3 0 0 1 3 -3v-3a5 5 0 0 1 5 -5m0 12a2 2 0 0 0 -1.995 1.85l-.005 .15a2 2 0 1 0 2 -2m0 -10a3 3 0 0 0 -3 3v3h6v-3a3 3 0 0 0 -3 -3"})}),{width:24,height:24}),rue=X(O(de,{children:[g("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),g("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),sue=X(O(de,{children:[g("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),g("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),oue=X(O(de,{children:[g("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),g("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),Q7=X(g("g",{fill:"currentColor",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"}),aue=X(O("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),g("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),J7=X(O("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[g("path",{d:"M4.028 13.252c-.657 -.972 -1.028 -2.078 -1.028 -3.252c0 -3.866 4.03 -7 9 -7s9 3.134 9 7s-4.03 7 -9 7c-1.913 0 -3.686 -.464 -5.144 -1.255"}),g("path",{d:"M5 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 17c0 1.42 .316 2.805 1 4"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),lH=X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),oe),cH=X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),oe),uH=X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"})]}),oe),lue=X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),oe),dH=X(g("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),De),cue=X(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),g("path",{d:"M16 7h4"}),g("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),oe),T5=X(O("g",{strokeWidth:"1.25",children:[g("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),g("path",{d:"m11.25 5.417 3.333 3.333"})]}),De),k9=X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),g("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),g("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),g("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),g("polyline",{points:"5 20 11 4 13 4 20 20"})]}),oe),uue=X(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M12.5 6.667h.01"}),g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),g("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),g("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),De),due=X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),g("path",{d:"M18 13.3l-6.3 -6.3"})]}),oe),MA=X(g("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),De),kA=X(g("path",{d:"M5 10h10",strokeWidth:"1.25"}),De),fue=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 21l-6 -6"}),g("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),g("path",{d:"M3 4v4h4"})]}),oe),Cc=X(g("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),De),RA=X(O("g",{strokeWidth:"1.5",children:[g("polyline",{points:"12 16 18 10 12 4"}),g("polyline",{points:"8 4 2 10 8 16"})]}),De),e4=X(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),De),t4=X(g("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),De),n4=X(g("g",{stroke:"currentColor",strokeLinejoin:"round",children:g("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...De,strokeWidth:1.5}),fH=X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),g("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),oe),S5=X(g("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),De),R9=X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),oe),hue=X(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),oe),DA=X(g("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),De),D9=X(g("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),De),hH=X(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),g("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),De),gH=X(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),g("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),oe),gue=X(g("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),jb=X(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),g("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),De),mue=X("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),pue=X("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),L9=X(g("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),De);X("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});const Uue=X("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),K8=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),g("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),g("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),oe),bue=X(g("g",{strokeWidth:1.5,children:g("path",{d:"M6 18l12 -12"})}),oe),mH=X(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8h.01"}),g("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),g("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),g("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),g("path",{d:"M19 16v6"}),g("path",{d:"M22 19l-3 3l-3 -3"})]}),oe),yue=X(g("path",{d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z",strokeLinecap:"round",strokeLinejoin:"round"}),oe),Eue=X("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});X("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});X("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});const vue=X("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");X("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");const LA=X(g("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),De),OA=X(g("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),De),wue=X("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),O9=X(g("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),De),_ue=X("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"),Tue=X("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),Sue=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),g("path",{d:"M12 14v-11"}),g("path",{d:"M9 6l3 -3l3 3"})]}),oe),Iue=X(O(de,{children:[g("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),g("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});X(g("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});const pH=O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 10l0 10"}),g("path",{d:"M12 10l4 4"}),g("path",{d:"M12 10l-4 4"}),g("path",{d:"M4 4l16 0"})]}),UH=O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 5l0 14"}),g("path",{d:"M16 9l-4 -4"}),g("path",{d:"M8 9l4 -4"})]}),NA=X(UH,oe),PA=X(UH,{...oe,style:{transform:"rotate(180deg)"}}),FA=X(pH,oe),BA=X(pH,{...oe,style:{transform:"rotate(180deg)"}}),zA=X(O(de,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),HA=X(O(de,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),VA=X(O(de,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),$A=X(O(de,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),xue=X(O(de,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),Cue=X(O(de,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),GA=X(O("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),g("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),De),XA=X(O("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),g("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),De),N9=X(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"9",cy:"7",r:"4"}),g("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),g("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),g("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),oe);X("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");X("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");const Sd=X(O(de,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M15 5 5 15M5 5l10 10"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De);X("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});const Aue=X("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});X("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});const jA=se.memo(({theme:e})=>X(O(de,{children:[g("path",{d:"M25 26H111V111H25",fill:Hs()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Hs(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Hs()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Hs(),strokeWidth:"2"}),O("g",{fill:aH(e),stroke:Hs(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),YA=se.memo(({theme:e})=>X(O(de,{children:[g("path",{d:"M25 26H111V111H25",fill:Hs()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Hs(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Hs()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Hs(),strokeWidth:"2"}),O("g",{fill:aH(e),stroke:Hs(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),g("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),Mue=X(g("g",{strokeWidth:1.25,children:g("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),De),kue=X(O(de,{children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),g("g",{mask:"url(#FillHachureIcon)",children:g("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),De),Rue=X(O(de,{children:[O("g",{clipPath:"url(#a)",children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:g("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("g",{mask:"url(#FillCrossHatchIcon)",children:g("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),Due=X(O(de,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...De,fill:"currentColor"}),bH=X(g(de,{children:g("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),De),Lue=X(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),De),Oue=X(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),De);se.memo(({theme:e})=>X(g("path",{d:"M6 10H34",stroke:Hs(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));const Nue=X(O("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12h2"}),g("path",{d:"M17 12h2"}),g("path",{d:"M11 12h2"})]}),oe),Pue=X(O("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M8 12v.01"}),g("path",{d:"M12 12v.01"}),g("path",{d:"M16 12v.01"}),g("path",{d:"M20 12v.01"})]}),oe),Fue=X(g("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),De),Bue=X(g("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),De),zue=X(g("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),De),Hue=X(O("svg",{strokeWidth:"1.5",children:[g("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),g("path",{d:"M13.3333 3.33331V3.34331"}),g("path",{d:"M16.6667 3.33331V3.34331"}),g("path",{d:"M16.6667 6.66669V6.67669"}),g("path",{d:"M16.6667 10V10.01"}),g("path",{d:"M3.33334 13.3333V13.3433"}),g("path",{d:"M16.6667 13.3333V13.3433"}),g("path",{d:"M3.33334 16.6667V16.6767"}),g("path",{d:"M6.66666 16.6667V16.6767"}),g("path",{d:"M10 16.6667V16.6767"}),g("path",{d:"M13.3333 16.6667V16.6767"}),g("path",{d:"M16.6667 16.6667V16.6767"})]}),De),Vue=X(O("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),g("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),g("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),g("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),g("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),g("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),g("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),g("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),g("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),g("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),g("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),g("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),oe),$ue=X(O("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[g("path",{d:"M12 12l9 0"}),g("path",{d:"M3 9l6 6"}),g("path",{d:"M3 15l6 -6"})]}),oe),i4=se.memo(({flip:e=!1})=>X(O("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[g("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),g("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),Gue=se.memo(({flip:e=!1})=>X(O("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Xue=se.memo(({flip:e=!1})=>X(O("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[g("path",{d:"M26 10L6 10"}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),jue=se.memo(({flip:e=!1})=>X(g("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:g("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),Yue=se.memo(({flip:e=!1})=>X(O("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),Wue=se.memo(({flip:e=!1})=>X(O("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[g("path",{d:"M6,9.5H27"}),g("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),Kue=se.memo(({flip:e=!1})=>X(O("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Zue=se.memo(({flip:e=!1})=>X(O("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),que=se.memo(({flip:e=!1})=>X(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Que=se.memo(({flip:e=!1})=>X(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),Jue=se.memo(({flip:e=!1})=>X(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),ede=X(O(de,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),tde=X(O(de,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),nde=X(O(de,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),ide=X(g(de,{children:g("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),De),I5=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 7v-2h13v2"}),g("path",{d:"M10 5v14"}),g("path",{d:"M12 19h-4"}),g("path",{d:"M15 13v-1h6v1"}),g("path",{d:"M18 12v7"}),g("path",{d:"M17 19h2"})]}),oe),rde=X(g(de,{children:O("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 12h10"}),g("path",{d:"M7 5v14"}),g("path",{d:"M17 5v14"}),g("path",{d:"M15 19h4"}),g("path",{d:"M15 5h4"}),g("path",{d:"M5 19h4"}),g("path",{d:"M5 5h4"})]})}),oe),r4=X(g(de,{children:g("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),De),yH=X(O(de,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),De),sde=X(O("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),g("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),oe),ode=X(O("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),g("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),oe),ade=X(O("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),oe),lde=se.memo(({theme:e})=>X(O("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),g("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),oe)),cde=se.memo(({theme:e})=>X(O("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),g("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),oe)),ude=se.memo(({theme:e})=>X(O("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),g("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),g("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),oe)),EH=X(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 19h-18l9 -15"}),g("path",{d:"M20.615 15.171h.015"}),g("path",{d:"M19.515 11.771h.015"}),g("path",{d:"M17.715 8.671h.015"}),g("path",{d:"M15.415 5.971h.015"})]}),oe),dde=X(g("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});X(g("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));const vH=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),g("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),oe),WA=X(O(de,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M7 11l5 5l5 -5"}),g("path",{d:"M12 4l0 12"})]}),oe),np=X(O(de,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),g("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),oe),fde=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M9.15 14.85l8.85 -10.85"}),g("path",{d:"M6 4l8.85 10.85"})]}),oe),hde=X(O(de,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),g("path",{d:"M12 17l0 .01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),oe),gde=X(O(de,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 4v16l13 -8z"})]}),oe),mde=X(O(de,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),oe),pde=X(O(de,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12l5 5l10 -10"})]}),oe),Ude=X(O(de,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),g("path",{d:"M12 9v4"}),g("path",{d:"M12 17h.01"})]}),oe),bde=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11 7l6 6"}),g("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),oe),yde=X(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l-4 7h8z"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),oe),Yb=X(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 7l16 0"}),g("path",{d:"M4 17l16 0"}),g("path",{d:"M7 4l0 16"}),g("path",{d:"M17 4l0 16"})]}),oe),wH=X(g("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),u2=X(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M4.16602 10H15.8327"}),g("path",{d:"M12.5 13.3333L15.8333 10"}),g("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),De),s4=X(O("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[g("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),g("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),_H=X(O("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),oe);X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),oe);X(O("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),g("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),g("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),g("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),g("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),g("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),oe);const Ede=X(O("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),g("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),g("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),g("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),oe),P9=X(O("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),g("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),oe),vde=X(O("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),g("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),g("path",{d:"M3 3l18 18"})]}),oe),wde=X(O("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),oe),_de=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),oe),ed=X(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),g("path",{d:"M21 21l-6 -6"})]}),oe),Tde=X(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),g("path",{d:"M12 7v5l3 3"}),g("path",{d:"M19 16l-2 3h4l-2 3"})]}),oe),Sde=X(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),g("path",{d:"M5 10a7 7 0 0 0 14 0"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),oe),Ide=X(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 3l18 18"}),g("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),g("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),oe),o4=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),oe),xde=X(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),g("path",{d:"M12 20v.01"}),g("path",{d:"M16 20v.01"}),g("path",{d:"M8 20v.01"}),g("path",{d:"M4 20v.01"}),g("path",{d:"M4 16v.01"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M4 8v.01"}),g("path",{d:"M4 4v.01"}),g("path",{d:"M8 4v.01"}),g("path",{d:"M12 4v.01"}),g("path",{d:"M16 4v.01"}),g("path",{d:"M20 4v.01"}),g("path",{d:"M20 8v.01"}),g("path",{d:"M20 12v.01"}),g("path",{d:"M20 16v.01"}),g("path",{d:"M20 20v.01"})]}),oe),Cde=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3v18"}),g("path",{d:"M19 21v-18"}),g("path",{d:"M5 7h14"}),g("path",{d:"M5 15h14"}),g("path",{d:"M8 13v4"}),g("path",{d:"M11 13v4"}),g("path",{d:"M16 13v4"}),g("path",{d:"M14 5v4"}),g("path",{d:"M11 5v4"}),g("path",{d:"M8 5v4"}),g("path",{d:"M3 21h18"})]}),oe),Ade=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 12l18 0"}),g("path",{d:"M7 16l10 0l-10 5l0 -5"}),g("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),oe),Mde=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l0 18"}),g("path",{d:"M16 7l0 10l5 0l-5 -10"}),g("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),oe),TH=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),g("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),g("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),oe),F9=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),g("path",{d:"M22 22l-3 -3"}),g("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),g("path",{d:"M3 11v-1"}),g("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),g("path",{d:"M10 3h1"}),g("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),oe),kde=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),g("path",{d:"M10 15l2 6l2 -6"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),oe),Rde=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),g("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),g("path",{d:"M11 21v-6l3 6v-6"})]}),oe),Dde=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),g("path",{d:"M4 8l5 0"}),g("path",{d:"M15 8l4 0"})]}),oe),Lde=X(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),g("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),g("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),oe),Ode=X(O("g",{stroke:"currentColor",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...oe,strokeWidth:1.5}),SH=X(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M21 12h-13l3 -3"}),g("path",{d:"M11 15l-3 -3"})]}),oe),IH=X(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),g("path",{d:"M10 9l5 3l-5 3z"})]}),oe),Nde=X(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 6h18"}),g("path",{d:"M3 12h18"}),g("path",{d:"M3 18h18"}),g("path",{d:"M6 3v18"}),g("path",{d:"M12 3v18"}),g("path",{d:"M18 3v18"})]}),oe),Pde=X(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),oe),xH=X(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 18l12 -12"}),g("path",{d:"M18 10v-4h-4"})]}),oe),CH=X(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),g("path",{d:"M18 4l3 3l-3 3"})]}),oe),AH=X(O("g",{children:[g("path",{d:"M16,12L20,9L16,6"}),g("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),oe),MH=X(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 9l6 6l6 -6"})]}),oe),Fde=X(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),oe),Bde=X(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),oe),KA=X(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),g("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),oe),kH=X(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 7l0 10"}),g("path",{d:"M7 5l10 0"}),g("path",{d:"M7 19l10 0"}),g("path",{d:"M19 7l0 10"})]}),oe);class zde extends Error{constructor(t="Couldn't export canvas.",n="CANVAS_ERROR"){super(),this.name=n,this.message=t}}class Eh extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}class Uu extends Error{code;constructor(t="Image Scene Data Error",n="IMAGE_SCENE_DATA_ERROR"){super(t),this.name="EncodingError",this.code=n}}class RH extends Error{code;constructor(t="Worker URL is not defined!",n="WORKER_URL_NOT_DEFINED"){super(t),this.name="WorkerUrlNotDefinedError",this.code=n}}class DH extends Error{code;constructor(t="Worker has to be in a separate chunk!",n="WORKER_IN_THE_MAIN_CHUNK"){super(t),this.name="WorkerInTheMainChunkError",this.code=n}}class Vs extends Error{constructor(t){super(t),this.name="ExcalidrawError"}}const Ja=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:i=""})=>{const s=-(se.useRef(Date.now()).current%1600);return g("div",{className:`Spinner ${i}`,children:g("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${s}ms`:0},children:g("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},Be=se.forwardRef(({size:e="medium",visible:t=!0,className:n="",...i},r)=>{const{id:s}=Qo(),o=se.useRef(null);se.useImperativeHandle(r,()=>o.current);const a=`ToolIcon_size_${e}`,[l,c]=D.useState(!1),u=D.useRef(!0),d=async h=>{const m="onClick"in i&&i.onClick?.(h);if(Xm(m))try{c(!0),await m}catch(p){if(p instanceof Eh)console.warn(p);else throw p}finally{u.current&&c(!1)}};D.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const f=D.useRef(null);if(i.type==="button"||i.type==="icon"||i.type==="submit"){const h=i.type==="icon"?"button":i.type;return O("button",{className:he("ToolIcon_type_button",a,n,t&&!i.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!i.hidden,"ToolIcon--selected":i.selected,"ToolIcon--plain":i.type==="icon"}),style:i.style,"data-testid":i["data-testid"],hidden:i.hidden,title:i.title,"aria-label":i["aria-label"],type:h,onClick:d,ref:o,disabled:l||i.isLoading||!!i.disabled,children:[(i.icon||i.label)&&O("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!i.disabled,children:[i.icon||i.label,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel}),i.isLoading&&g(Ja,{})]}),i.showAriaLabel&&O("div",{className:"ToolIcon__label",children:[i["aria-label"]," ",l&&g(Ja,{})]}),i.children]})}return O("label",{className:he("ToolIcon",n),title:i.title,onPointerDown:h=>{f.current=h.pointerType||null,i.onPointerDown?.({pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{f.current=null})},children:[g("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:i.name,"aria-label":i["aria-label"],"aria-keyshortcuts":i["aria-keyshortcuts"],"data-testid":i["data-testid"],id:`${s}-${i.id}`,onChange:()=>{i.onChange?.({pointerType:f.current})},checked:i.checked,ref:o}),O("div",{className:"ToolIcon__icon",children:[i.icon,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel})]})]})});Be.displayName="ToolButton";let a4=[];const re=e=>(a4=a4.concat(e),e),Hde=(e,t,n)=>{const i=new Set(Ne(e.filter(u=>pe(u)),t).map(u=>u.id)),r={},s=n.scene.getNonDeletedElementsMap(),o=new Set;for(const u of i){const d=Ss(e,u);for(const f of d)if(!o.has(f.id)){if(Ft(f)){const h=zn(f,s);h&&(r[h.id]=!0)}else r[f.id]=!0;o.add(f.id)}}let a=!0;const l=e.map(u=>{if(t.selectedElementIds[u.id]){const d=Ft(u)?zn(u,s):null;return u.frameId&&i.has(u.frameId)?(a=!1,r[u.id]=!0,u):d?.frameId&&i.has(d?.frameId)?u:(u.boundElements&&u.boundElements.forEach(f=>{const h=n.scene.getNonDeletedElementsMap().get(f.id);h&&ce(h)&&n.scene.mutateElement(h,{startBinding:u.id===h.startBinding?.elementId?null:h.startBinding,endBinding:u.id===h.endBinding?.elementId?null:h.endBinding})}),Ee(u,{isDeleted:!0}))}return u.frameId&&i.has(u.frameId)?(a=!1,Ft(u)||(r[u.id]=!0),Ee(u,{frameId:null})):Ft(u)&&t.selectedElementIds[u.containerId]?Ee(u,{isDeleted:!0}):u});let c=t.editingGroupId;if(a&&t.editingGroupId){const u=It(l,t.editingGroupId).filter(d=>!d.isDeleted);if(u.length>1)u[0]&&(r[u[0].id]=!0);else{c=null,u[0]&&(r[u[0].id]=!0);const d=u[0];if(d){const f=d.groupIds.findIndex(m=>m===t.editingGroupId),h=d.groupIds[f+1];if(h){const m=It(l,h).filter(p=>!p.isDeleted);m.length>1&&(c=h,m.forEach(p=>{r[p.id]=!0}))}}}}return{elements:l,appState:{...t,...Mi({selectedElementIds:r,editingGroupId:c},l,t,null)}}},ZA=(e,t)=>{if(e.editingGroupId){const n=It(Lt(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},LH=re({name:"deleteSelectedElements",label:"labels.delete",icon:Cc,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,i)=>{if(t.editingLinearElement){const{elementId:o,selectedPointsIndices:a,startBindingElement:l,endBindingElement:c}=t.editingLinearElement,u=i.scene.getNonDeletedElementsMap(),d=Z.getElement(o,u);if(!d||a==null)return!1;if(d.points.length<2){const h=e.map(p=>p.id===d.id?Ee(p,{isDeleted:!0}):p),m=ZA(t,h);return{elements:h,appState:{...m,editingLinearElement:null},captureUpdate:j.IMMEDIATELY}}const f={startBindingElement:a?.includes(0)?null:l,endBindingElement:a?.includes(d.points.length-1)?null:c};return Z.deletePoints(d,i,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...f,selectedPointsIndices:a?.[0]>0?[a[0]-1]:[0]}},captureUpdate:j.IMMEDIATELY}}let{elements:r,appState:s}=Hde(e,t,i);return uB(r,r.filter(o=>o.isDeleted)),s=ZA(s,r),{elements:r,appState:{...s,activeTool:Xt(t,{type:"selection"}),multiElement:null,activeEmbeddable:null,selectedLinearElement:null},captureUpdate:Hn(Lt(e),t)?j.IMMEDIATELY:j.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===B.BACKSPACE||e.key===B.DELETE)&&!e[B.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>g(Be,{type:"button",icon:Cc,title:M("labels.delete"),"aria-label":M("labels.delete"),onClick:()=>n(null),visible:Hn(Lt(e),t)})}),Vde=re({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:PA,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Cce(e,t,i.scene),appState:t,captureUpdate:j.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[B.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Ke.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${M("labels.sendBackward")} — ${q("CtrlOrCmd+[")}`,children:PA})}),$de=re({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:NA,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Ace(e,t,i.scene),appState:t,captureUpdate:j.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[B.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Ke.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${M("labels.bringForward")} — ${q("CtrlOrCmd+]")}`,children:NA})}),Gde=re({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:BA,trackEvent:{category:"element"},perform:(e,t)=>({elements:Mce(e,t),appState:t,captureUpdate:j.IMMEDIATELY}),keyTest:e=>No?e[B.CTRL_OR_CMD]&&e.altKey&&e.code===Ke.BRACKET_LEFT:e[B.CTRL_OR_CMD]&&e.shiftKey&&e.code===Ke.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${M("labels.sendToBack")} — ${q(No?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:BA})}),Xde=re({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:FA,trackEvent:{category:"element"},perform:(e,t)=>({elements:kce(e,t),appState:t,captureUpdate:j.IMMEDIATELY}),keyTest:e=>No?e[B.CTRL_OR_CMD]&&e.altKey&&e.code===Ke.BRACKET_RIGHT:e[B.CTRL_OR_CMD]&&e.shiftKey&&e.code===Ke.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${M("labels.bringToFront")} — ${q(No?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:FA})}),jde=re({name:"selectAll",label:"labels.selectAll",icon:xde,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,i)=>{if(t.editingLinearElement)return!1;const r=e.filter(s=>!s.isDeleted&&!(le(s)&&s.containerId)&&!s.locked).reduce((s,o)=>(s[o.id]=!0,s),{});return{appState:{...t,...Mi({editingGroupId:null,selectedElementIds:r},Lt(e),t,i),selectedLinearElement:Object.keys(r).length===1&&we(e[0])?new Z(e[0],be(e)):null},captureUpdate:j.IMMEDIATELY}},keyTest:e=>e[B.CTRL_OR_CMD]&&e.key===B.A}),Yde=re({name:"duplicateSelection",label:"labels.duplicateSelection",icon:e4,trackEvent:{category:"element"},perform:(e,t,n,i)=>{if(t.selectedElementsAreBeingDragged)return!1;if(t.editingLinearElement)try{const o=Z.duplicateSelectedPoints(t,i.scene);return{elements:e,appState:o,captureUpdate:j.IMMEDIATELY}}catch{return!1}let{duplicatedElements:r,elementsWithDuplicates:s}=Vb({type:"in-place",elements:e,idsOfElementsToDuplicate:be(Ne(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),appState:t,randomizeSeed:!0,overrides:({origElement:o,origIdToDuplicateId:a})=>{const l=o.frameId&&a.get(o.frameId);return{x:o.x+db/2,y:o.y+db/2,frameId:l??o.frameId}}});if(i.props.onDuplicate&&s){const o=i.props.onDuplicate(s,e);o&&(s=o)}return{elements:qs(s,be(r)),appState:{...t,...pB(r,Lt(s),t)},captureUpdate:j.IMMEDIATELY}},keyTest:e=>e[B.CTRL_OR_CMD]&&e.key===B.D,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Be,{type:"button",icon:e4,title:`${M("labels.duplicateSelection")} — ${q("CtrlOrCmd+D")}`,"aria-label":M("labels.duplicateSelection"),onClick:()=>n(null),visible:Hn(Lt(e),t)})});var Wde={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"/excalidraw",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Kde=new Set(["command_palette","export"]),tt=(e,t,n,i)=>{try{if(typeof window>"u"||Wde.VITE_WORKER_ID||!Kde.has(e))return;Ow(),window.sa_event&&window.sa_event(t,{category:e,label:n,value:i})}catch(r){console.error("error during analytics",r)}},B9=D.forwardRef((e,t)=>{const{title:n,className:i,testId:r,active:s,standalone:o,icon:a,onClick:l}=e;return g("button",{type:"button",ref:t,title:n,"data-testid":r,className:he(i,{standalone:o,active:s}),onClick:l,style:e.style,children:a},n)}),Zo=e=>g(de,{children:e.options.map(t=>e.type==="button"?g(B9,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):O("label",{className:he({active:e.value===t.value}),title:t.text,children:[g("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))});function wi(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),n===!1||!r.defaultPrevented)return t?.(r)}}function qA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function OH(...e){return t=>{let n=!1;const i=e.map(r=>{const s=qA(r,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():qA(e[r],null)}}}}function Js(...e){return D.useCallback(OH(...e),e)}function ip(e,t=[]){let n=[];function i(s,o){const a=D.createContext(o),l=n.length;n=[...n,o];const c=d=>{const{scope:f,children:h,...m}=d,p=f?.[e]?.[l]||a,y=D.useMemo(()=>m,Object.values(m));return g(p.Provider,{value:y,children:h})};c.displayName=s+"Provider";function u(d,f){const h=f?.[e]?.[l]||a,m=D.useContext(h);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>D.createContext(o));return function(a){const l=a?.[e]||s;return D.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return r.scopeName=e,[i,Zde(r,...t)]}function Zde(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var K0=D.forwardRef((e,t)=>{const{children:n,...i}=e,r=D.Children.toArray(n),s=r.find(Qde);if(s){const o=s.props.children,a=r.map(l=>l===s?D.Children.count(o)>1?D.Children.only(null):D.isValidElement(o)?o.props.children:null:l);return g(l4,{...i,ref:t,children:D.isValidElement(o)?D.cloneElement(o,void 0,a):null})}return g(l4,{...i,ref:t,children:n})});K0.displayName="Slot";var l4=D.forwardRef((e,t)=>{const{children:n,...i}=e;if(D.isValidElement(n)){const r=efe(n),s=Jde(i,n.props);return n.type!==D.Fragment&&(s.ref=t?OH(t,r):r),D.cloneElement(n,s)}return D.Children.count(n)>1?D.Children.only(null):null});l4.displayName="SlotClone";var qde=({children:e})=>g(de,{children:e});function Qde(e){return D.isValidElement(e)&&e.type===qde}function Jde(e,t){const n={...t};for(const i in t){const r=e[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function efe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var tfe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],sr=tfe.reduce((e,t)=>{const n=D.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?K0:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g(a,{...o,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function nfe(e,t){e&&vn.flushSync(()=>e.dispatchEvent(t))}function el(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...n)=>t.current?.(...n),[])}function ife(e,t=globalThis?.document){const n=el(e);D.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var rfe="DismissableLayer",c4="dismissableLayer.update",sfe="dismissableLayer.pointerDownOutside",ofe="dismissableLayer.focusOutside",QA,NH=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),PH=D.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,c=D.useContext(NH),[u,d]=D.useState(null),f=u?.ownerDocument??globalThis?.document,[,h]=D.useState({}),m=Js(t,_=>d(_)),p=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(y),E=u?p.indexOf(u):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,w=E>=b,S=cfe(_=>{const T=_.target,A=[...c.branches].some(C=>C.contains(T));!w||A||(r?.(_),o?.(_),_.defaultPrevented||a?.())},f),k=ufe(_=>{const T=_.target;[...c.branches].some(C=>C.contains(T))||(s?.(_),o?.(_),_.defaultPrevented||a?.())},f);return ife(_=>{E===c.layers.size-1&&(i?.(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),D.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(QA=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),JA(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=QA)}},[u,f,n,c]),D.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),JA())},[u,c]),D.useEffect(()=>{const _=()=>h({});return document.addEventListener(c4,_),()=>document.removeEventListener(c4,_)},[]),g(sr.div,{...l,ref:m,style:{pointerEvents:v?w?"auto":"none":void 0,...e.style},onFocusCapture:wi(e.onFocusCapture,k.onFocusCapture),onBlurCapture:wi(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:wi(e.onPointerDownCapture,S.onPointerDownCapture)})});PH.displayName=rfe;var afe="DismissableLayerBranch",lfe=D.forwardRef((e,t)=>{const n=D.useContext(NH),i=D.useRef(null),r=Js(t,i);return D.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g(sr.div,{...e,ref:r})});lfe.displayName=afe;function cfe(e,t=globalThis?.document){const n=el(e),i=D.useRef(!1),r=D.useRef(()=>{});return D.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){FH(sfe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=l,t.addEventListener("click",r.current,{once:!0})):l()}else t.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function ufe(e,t=globalThis?.document){const n=el(e),i=D.useRef(!1);return D.useEffect(()=>{const r=s=>{s.target&&!i.current&&FH(ofe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function JA(){const e=new CustomEvent(c4);document.dispatchEvent(e)}function FH(e,t,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),i?nfe(r,s):r.dispatchEvent(s)}var Z8=0;function dfe(){D.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??eM()),document.body.insertAdjacentElement("beforeend",e[1]??eM()),Z8++,()=>{Z8===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Z8--}},[])}function eM(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var q8="focusScope.autoFocusOnMount",Q8="focusScope.autoFocusOnUnmount",tM={bubbles:!1,cancelable:!0},ffe="FocusScope",BH=D.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=e,[a,l]=D.useState(null),c=el(r),u=el(s),d=D.useRef(null),f=Js(t,p=>l(p)),h=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(i){let p=function(v){if(h.paused||!a)return;const w=v.target;a.contains(w)?d.current=w:xl(d.current,{select:!0})},y=function(v){if(h.paused||!a)return;const w=v.relatedTarget;w!==null&&(a.contains(w)||xl(d.current,{select:!0}))},b=function(v){if(document.activeElement===document.body)for(const S of v)S.removedNodes.length>0&&xl(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",y);const E=new MutationObserver(b);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",y),E.disconnect()}}},[i,a,h.paused]),D.useEffect(()=>{if(a){iM.add(h);const p=document.activeElement;if(!a.contains(p)){const b=new CustomEvent(q8,tM);a.addEventListener(q8,c),a.dispatchEvent(b),b.defaultPrevented||(hfe(bfe(zH(a)),{select:!0}),document.activeElement===p&&xl(a))}return()=>{a.removeEventListener(q8,c),setTimeout(()=>{const b=new CustomEvent(Q8,tM);a.addEventListener(Q8,u),a.dispatchEvent(b),b.defaultPrevented||xl(p??document.body,{select:!0}),a.removeEventListener(Q8,u),iM.remove(h)},0)}}},[a,c,u,h]);const m=D.useCallback(p=>{if(!n&&!i||h.paused)return;const y=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=document.activeElement;if(y&&b){const E=p.currentTarget,[v,w]=gfe(E);v&&w?!p.shiftKey&&b===w?(p.preventDefault(),n&&xl(v,{select:!0})):p.shiftKey&&b===v&&(p.preventDefault(),n&&xl(w,{select:!0})):b===E&&p.preventDefault()}},[n,i,h.paused]);return g(sr.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});BH.displayName=ffe;function hfe(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(xl(i,{select:t}),document.activeElement!==n)return}function gfe(e){const t=zH(e),n=nM(t,e),i=nM(t.reverse(),e);return[n,i]}function zH(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function nM(e,t){for(const n of e)if(!mfe(n,{upTo:t}))return n}function mfe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function pfe(e){return e instanceof HTMLInputElement&&"select"in e}function xl(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&pfe(e)&&t&&e.select()}}var iM=Ufe();function Ufe(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=rM(e,t),e.unshift(t)},remove(t){e=rM(e,t),e[0]?.resume()}}}function rM(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function bfe(e){return e.filter(t=>t.tagName!=="A")}var td=globalThis?.document?D.useLayoutEffect:()=>{},yfe=YK.useId||(()=>{}),Efe=0;function z9(e){const[t,n]=D.useState(yfe());return td(()=>{n(i=>i??String(Efe++))},[e]),e||(t?`radix-${t}`:"")}const vfe=["top","right","bottom","left"],Ac=Math.min,Mr=Math.max,Wb=Math.round,fU=Math.floor,Ro=e=>({x:e,y:e}),wfe={left:"right",right:"left",bottom:"top",top:"bottom"},_fe={start:"end",end:"start"};function u4(e,t,n){return Mr(e,Ac(t,n))}function tl(e,t){return typeof e=="function"?e(t):e}function nl(e){return e.split("-")[0]}function ng(e){return e.split("-")[1]}function H9(e){return e==="x"?"y":"x"}function V9(e){return e==="y"?"height":"width"}function Mc(e){return["top","bottom"].includes(nl(e))?"y":"x"}function $9(e){return H9(Mc(e))}function Tfe(e,t,n){n===void 0&&(n=!1);const i=ng(e),r=$9(e),s=V9(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Kb(o)),[o,Kb(o)]}function Sfe(e){const t=Kb(e);return[d4(e),t,d4(t)]}function d4(e){return e.replace(/start|end/g,t=>_fe[t])}function Ife(e,t,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:i:t?i:r;case"left":case"right":return t?s:o;default:return[]}}function xfe(e,t,n,i){const r=ng(e);let s=Ife(nl(e),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),t&&(s=s.concat(s.map(d4)))),s}function Kb(e){return e.replace(/left|right|bottom|top/g,t=>wfe[t])}function Cfe(e){return{top:0,right:0,bottom:0,left:0,...e}}function HH(e){return typeof e!="number"?Cfe(e):{top:e,right:e,bottom:e,left:e}}function Zb(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function sM(e,t,n){let{reference:i,floating:r}=e;const s=Mc(t),o=$9(t),a=V9(o),l=nl(t),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let h;switch(l){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(ng(t)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const Afe=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=sM(c,i,l),f=i,h={},m=0;for(let p=0;p<a.length;p++){const{name:y,fn:b}=a[p],{x:E,y:v,data:w,reset:S}=await b({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});u=E??u,d=v??d,h={...h,[y]:{...h[y],...w}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:r}):S.rects),{x:u,y:d}=sM(c,f,l)),p=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function Z0(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=tl(t,e),m=HH(h),y=a[f?d==="floating"?"reference":"floating":d],b=Zb(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},S=Zb(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:v,strategy:l}):E);return{top:(b.top-S.top+m.top)/w.y,bottom:(S.bottom-b.bottom+m.bottom)/w.y,left:(b.left-S.left+m.left)/w.x,right:(S.right-b.right+m.right)/w.x}}const Mfe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=tl(e,t)||{};if(c==null)return{};const d=HH(u),f={x:n,y:i},h=$9(r),m=V9(h),p=await o.getDimensions(c),y=h==="y",b=y?"top":"left",E=y?"bottom":"right",v=y?"clientHeight":"clientWidth",w=s.reference[m]+s.reference[h]-f[h]-s.floating[m],S=f[h]-s.reference[h],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=k?k[v]:0;(!_||!await(o.isElement==null?void 0:o.isElement(k)))&&(_=a.floating[v]||s.floating[m]);const T=w/2-S/2,A=_/2-p[m]/2-1,C=Ac(d[b],A),R=Ac(d[E],A),P=C,N=_-p[m]-R,K=_/2-p[m]/2+T,H=u4(P,K,N),z=!l.arrow&&ng(r)!=null&&K!==H&&s.reference[m]/2-(K<P?C:R)-p[m]/2<0,V=z?K<P?K-P:K-N:0;return{[h]:f[h]+V,data:{[h]:H,centerOffset:K-H-V,...z&&{alignmentOffset:V}},reset:z}}}),kfe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...y}=tl(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=nl(r),E=Mc(a),v=nl(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(v||!p?[Kb(a)]:Sfe(a)),k=m!=="none";!f&&k&&S.push(...xfe(a,p,m,w));const _=[a,...S],T=await Z0(t,y),A=[];let C=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&A.push(T[b]),d){const K=Tfe(r,o,w);A.push(T[K[0]],T[K[1]])}if(C=[...C,{placement:r,overflows:A}],!A.every(K=>K<=0)){var R,P;const K=(((R=s.flip)==null?void 0:R.index)||0)+1,H=_[K];if(H)return{data:{index:K,overflows:C},reset:{placement:H}};let z=(P=C.filter(V=>V.overflows[0]<=0).sort((V,$)=>V.overflows[1]-$.overflows[1])[0])==null?void 0:P.placement;if(!z)switch(h){case"bestFit":{var N;const V=(N=C.filter($=>{if(k){const G=Mc($.placement);return G===E||G==="y"}return!0}).map($=>[$.placement,$.overflows.filter(G=>G>0).reduce((G,J)=>G+J,0)]).sort(($,G)=>$[1]-G[1])[0])==null?void 0:N[0];V&&(z=V);break}case"initialPlacement":z=a;break}if(r!==z)return{reset:{placement:z}}}return{}}}};function oM(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function aM(e){return vfe.some(t=>e[t]>=0)}const Rfe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...r}=tl(e,t);switch(i){case"referenceHidden":{const s=await Z0(t,{...r,elementContext:"reference"}),o=oM(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:aM(o)}}}case"escaped":{const s=await Z0(t,{...r,altBoundary:!0}),o=oM(s,n.floating);return{data:{escapedOffsets:o,escaped:aM(o)}}}default:return{}}}}};async function Dfe(e,t){const{placement:n,platform:i,elements:r}=e,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=nl(n),a=ng(n),l=Mc(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=tl(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Lfe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=t,l=await Dfe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Ofe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:b,y:E}=y;return{x:b,y:E}}},...l}=tl(e,t),c={x:n,y:i},u=await Z0(t,l),d=Mc(nl(r)),f=H9(d);let h=c[f],m=c[d];if(s){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",E=h+u[y],v=h-u[b];h=u4(E,h,v)}if(o){const y=d==="y"?"top":"left",b=d==="y"?"bottom":"right",E=m+u[y],v=m-u[b];m=u4(E,m,v)}const p=a.fn({...t,[f]:h,[d]:m});return{...p,data:{x:p.x-n,y:p.y-i,enabled:{[f]:s,[d]:o}}}}}},Nfe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=tl(e,t),u={x:n,y:i},d=Mc(r),f=H9(d);let h=u[f],m=u[d];const p=tl(a,t),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const v=f==="y"?"height":"width",w=s.reference[f]-s.floating[v]+y.mainAxis,S=s.reference[f]+s.reference[v]-y.mainAxis;h<w?h=w:h>S&&(h=S)}if(c){var b,E;const v=f==="y"?"width":"height",w=["top","left"].includes(nl(r)),S=s.reference[d]-s.floating[v]+(w&&((b=o.offset)==null?void 0:b[d])||0)+(w?0:y.crossAxis),k=s.reference[d]+s.reference[v]+(w?0:((E=o.offset)==null?void 0:E[d])||0)-(w?y.crossAxis:0);m<S?m=S:m>k&&(m=k)}return{[f]:h,[d]:m}}}},Pfe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:r,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=tl(e,t),u=await Z0(t,c),d=nl(r),f=ng(r),h=Mc(r)==="y",{width:m,height:p}=s.floating;let y,b;d==="top"||d==="bottom"?(y=d,b=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=d,y=f==="end"?"top":"bottom");const E=p-u.top-u.bottom,v=m-u.left-u.right,w=Ac(p-u[y],E),S=Ac(m-u[b],v),k=!t.middlewareData.shift;let _=w,T=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=v),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(_=E),k&&!f){const C=Mr(u.left,0),R=Mr(u.right,0),P=Mr(u.top,0),N=Mr(u.bottom,0);h?T=m-2*(C!==0||R!==0?C+R:Mr(u.left,u.right)):_=p-2*(P!==0||N!==0?P+N:Mr(u.top,u.bottom))}await l({...t,availableWidth:T,availableHeight:_});const A=await o.getDimensions(a.floating);return m!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function x5(){return typeof window<"u"}function ig(e){return VH(e)?(e.nodeName||"").toLowerCase():"#document"}function Vr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function qo(e){var t;return(t=(VH(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function VH(e){return x5()?e instanceof Node||e instanceof Vr(e).Node:!1}function eo(e){return x5()?e instanceof Element||e instanceof Vr(e).Element:!1}function Go(e){return x5()?e instanceof HTMLElement||e instanceof Vr(e).HTMLElement:!1}function lM(e){return!x5()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vr(e).ShadowRoot}function rp(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=to(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(r)}function Ffe(e){return["table","td","th"].includes(ig(e))}function C5(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function G9(e){const t=X9(),n=eo(e)?to(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Bfe(e){let t=kc(e);for(;Go(t)&&!vh(t);){if(G9(t))return t;if(C5(t))return null;t=kc(t)}return null}function X9(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vh(e){return["html","body","#document"].includes(ig(e))}function to(e){return Vr(e).getComputedStyle(e)}function A5(e){return eo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function kc(e){if(ig(e)==="html")return e;const t=e.assignedSlot||e.parentNode||lM(e)&&e.host||qo(e);return lM(t)?t.host:t}function $H(e){const t=kc(e);return vh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Go(t)&&rp(t)?t:$H(t)}function q0(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=$H(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),o=Vr(r);if(s){const a=f4(o);return t.concat(o,o.visualViewport||[],rp(r)?r:[],a&&n?q0(a):[])}return t.concat(r,q0(r,[],n))}function f4(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function GH(e){const t=to(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=Go(e),s=r?e.offsetWidth:n,o=r?e.offsetHeight:i,a=Wb(n)!==s||Wb(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function j9(e){return eo(e)?e:e.contextElement}function Gf(e){const t=j9(e);if(!Go(t))return Ro(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:s}=GH(t);let o=(s?Wb(n.width):n.width)/i,a=(s?Wb(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const zfe=Ro(0);function XH(e){const t=Vr(e);return!X9()||!t.visualViewport?zfe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Hfe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Vr(e)?!1:t}function nd(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=j9(e);let o=Ro(1);t&&(i?eo(i)&&(o=Gf(i)):o=Gf(e));const a=Hfe(s,n,i)?XH(s):Ro(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=Vr(s),h=i&&eo(i)?Vr(i):i;let m=f,p=f4(m);for(;p&&i&&h!==m;){const y=Gf(p),b=p.getBoundingClientRect(),E=to(p),v=b.left+(p.clientLeft+parseFloat(E.paddingLeft))*y.x,w=b.top+(p.clientTop+parseFloat(E.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=v,c+=w,m=Vr(p),p=f4(m)}}return Zb({width:u,height:d,x:l,y:c})}function Y9(e,t){const n=A5(e).scrollLeft;return t?t.left+n:nd(qo(e)).left+n}function jH(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=i.left+t.scrollLeft-(n?0:Y9(e,i)),s=i.top+t.scrollTop;return{x:r,y:s}}function Vfe(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const s=r==="fixed",o=qo(i),a=t?C5(t.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Ro(1);const u=Ro(0),d=Go(i);if((d||!d&&!s)&&((ig(i)!=="body"||rp(o))&&(l=A5(i)),Go(i))){const h=nd(i);c=Gf(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}const f=o&&!d&&!s?jH(o,l,!0):Ro(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function $fe(e){return Array.from(e.getClientRects())}function Gfe(e){const t=qo(e),n=A5(e),i=e.ownerDocument.body,r=Mr(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=Mr(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+Y9(e);const a=-n.scrollTop;return to(i).direction==="rtl"&&(o+=Mr(t.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Xfe(e,t){const n=Vr(e),i=qo(e),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=X9();(!c||c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function jfe(e,t){const n=nd(e,!0,t==="fixed"),i=n.top+e.clientTop,r=n.left+e.clientLeft,s=Go(e)?Gf(e):Ro(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function cM(e,t,n){let i;if(t==="viewport")i=Xfe(e,n);else if(t==="document")i=Gfe(qo(e));else if(eo(t))i=jfe(t,n);else{const r=XH(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Zb(i)}function YH(e,t){const n=kc(e);return n===t||!eo(n)||vh(n)?!1:to(n).position==="fixed"||YH(n,t)}function Yfe(e,t){const n=t.get(e);if(n)return n;let i=q0(e,[],!1).filter(a=>eo(a)&&ig(a)!=="body"),r=null;const s=to(e).position==="fixed";let o=s?kc(e):e;for(;eo(o)&&!vh(o);){const a=to(o),l=G9(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||rp(o)&&!l&&YH(e,o))?i=i.filter(u=>u!==o):r=a,o=kc(o)}return t.set(e,i),i}function Wfe(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const o=[...n==="clippingAncestors"?C5(t)?[]:Yfe(t,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=cM(t,u,r);return c.top=Mr(d.top,c.top),c.right=Ac(d.right,c.right),c.bottom=Ac(d.bottom,c.bottom),c.left=Mr(d.left,c.left),c},cM(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Kfe(e){const{width:t,height:n}=GH(e);return{width:t,height:n}}function Zfe(e,t,n){const i=Go(t),r=qo(t),s=n==="fixed",o=nd(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Ro(0);if(i||!i&&!s)if((ig(t)!=="body"||rp(r))&&(a=A5(t)),i){const f=nd(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else r&&(l.x=Y9(r));const c=r&&!i&&!s?jH(r,a):Ro(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function J8(e){return to(e).position==="static"}function uM(e,t){if(!Go(e)||to(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return qo(e)===n&&(n=n.ownerDocument.body),n}function WH(e,t){const n=Vr(e);if(C5(e))return n;if(!Go(e)){let r=kc(e);for(;r&&!vh(r);){if(eo(r)&&!J8(r))return r;r=kc(r)}return n}let i=uM(e,t);for(;i&&Ffe(i)&&J8(i);)i=uM(i,t);return i&&vh(i)&&J8(i)&&!G9(i)?n:i||Bfe(e)||n}const qfe=async function(e){const t=this.getOffsetParent||WH,n=this.getDimensions,i=await n(e.floating);return{reference:Zfe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Qfe(e){return to(e).direction==="rtl"}const Jfe={convertOffsetParentRelativeRectToViewportRelativeRect:Vfe,getDocumentElement:qo,getClippingRect:Wfe,getOffsetParent:WH,getElementRects:qfe,getClientRects:$fe,getDimensions:Kfe,getScale:Gf,isElement:eo,isRTL:Qfe};function KH(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ehe(e,t){let n=null,i;const r=qo(e);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||t(),!f||!h)return;const m=fU(d),p=fU(r.clientWidth-(u+f)),y=fU(r.clientHeight-(d+h)),b=fU(u),v={rootMargin:-m+"px "+-p+"px "+-y+"px "+-b+"px",threshold:Mr(0,Ac(1,l))||1};let w=!0;function S(k){const _=k[0].intersectionRatio;if(_!==l){if(!w)return o();_?o(!1,_):i=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!KH(c,e.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(S,{...v,root:r.ownerDocument})}catch{n=new IntersectionObserver(S,v)}n.observe(e)}return o(!0),s}function the(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=j9(e),u=r||s?[...c?q0(c):[],...q0(t)]:[];u.forEach(b=>{r&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const d=c&&a?ehe(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(b=>{let[E]=b;E&&E.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=h)==null||v.observe(t)})),n()}),c&&!l&&h.observe(c),h.observe(t));let m,p=l?nd(e):null;l&&y();function y(){const b=nd(e);p&&!KH(p,b)&&n(),p=b,m=requestAnimationFrame(y)}return n(),()=>{var b;u.forEach(E=>{r&&E.removeEventListener("scroll",n),s&&E.removeEventListener("resize",n)}),d?.(),(b=h)==null||b.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const nhe=Lfe,ihe=Ofe,rhe=kfe,she=Pfe,ohe=Rfe,dM=Mfe,ahe=Nfe,lhe=(e,t,n)=>{const i=new Map,r={platform:Jfe,...n},s={...r.platform,_c:i};return Afe(e,t,{...r,platform:s})};var d2=typeof document<"u"?D.useLayoutEffect:D.useEffect;function qb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!qb(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&e.$$typeof)&&!qb(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ZH(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function fM(e,t){const n=ZH(e);return Math.round(t*n)/n}function eE(e){const t=D.useRef(e);return d2(()=>{t.current=e}),t}function che(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=D.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=D.useState(i);qb(f,i)||h(i);const[m,p]=D.useState(null),[y,b]=D.useState(null),E=D.useCallback($=>{$!==k.current&&(k.current=$,p($))},[]),v=D.useCallback($=>{$!==_.current&&(_.current=$,b($))},[]),w=s||m,S=o||y,k=D.useRef(null),_=D.useRef(null),T=D.useRef(u),A=l!=null,C=eE(l),R=eE(r),P=eE(c),N=D.useCallback(()=>{if(!k.current||!_.current)return;const $={placement:t,strategy:n,middleware:f};R.current&&($.platform=R.current),lhe(k.current,_.current,$).then(G=>{const J={...G,isPositioned:P.current!==!1};K.current&&!qb(T.current,J)&&(T.current=J,vn.flushSync(()=>{d(J)}))})},[f,t,n,R,P]);d2(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d($=>({...$,isPositioned:!1})))},[c]);const K=D.useRef(!1);d2(()=>(K.current=!0,()=>{K.current=!1}),[]),d2(()=>{if(w&&(k.current=w),S&&(_.current=S),w&&S){if(C.current)return C.current(w,S,N);N()}},[w,S,N,C,A]);const H=D.useMemo(()=>({reference:k,floating:_,setReference:E,setFloating:v}),[E,v]),z=D.useMemo(()=>({reference:w,floating:S}),[w,S]),V=D.useMemo(()=>{const $={position:n,left:0,top:0};if(!z.floating)return $;const G=fM(z.floating,u.x),J=fM(z.floating,u.y);return a?{...$,transform:"translate("+G+"px, "+J+"px)",...ZH(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:J}},[n,a,z.floating,u.x,u.y]);return D.useMemo(()=>({...u,update:N,refs:H,elements:z,floatingStyles:V}),[u,N,H,z,V])}const uhe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:r}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?dM({element:i.current,padding:r}).fn(n):{}:i?dM({element:i,padding:r}).fn(n):{}}}},dhe=(e,t)=>({...nhe(e),options:[e,t]}),fhe=(e,t)=>({...ihe(e),options:[e,t]}),hhe=(e,t)=>({...ahe(e),options:[e,t]}),ghe=(e,t)=>({...rhe(e),options:[e,t]}),mhe=(e,t)=>({...she(e),options:[e,t]}),phe=(e,t)=>({...ohe(e),options:[e,t]}),Uhe=(e,t)=>({...uhe(e),options:[e,t]});var bhe="Arrow",qH=D.forwardRef((e,t)=>{const{children:n,width:i=10,height:r=5,...s}=e;return g(sr.svg,{...s,ref:t,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g("polygon",{points:"0,0 30,0 15,10"})})});qH.displayName=bhe;var yhe=qH;function Ehe(e){const[t,n]=D.useState(void 0);return td(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var W9="Popper",[QH,JH]=ip(W9),[vhe,eV]=QH(W9),tV=e=>{const{__scopePopper:t,children:n}=e,[i,r]=D.useState(null);return g(vhe,{scope:t,anchor:i,onAnchorChange:r,children:n})};tV.displayName=W9;var nV="PopperAnchor",iV=D.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...r}=e,s=eV(nV,n),o=D.useRef(null),a=Js(t,o);return D.useEffect(()=>{s.onAnchorChange(i?.current||o.current)}),i?null:g(sr.div,{...r,ref:a})});iV.displayName=nV;var K9="PopperContent",[whe,_he]=QH(K9),rV=D.forwardRef((e,t)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...p}=e,y=eV(K9,n),[b,E]=D.useState(null),v=Js(t,en=>E(en)),[w,S]=D.useState(null),k=Ehe(w),_=k?.width??0,T=k?.height??0,A=i+(s!=="center"?"-"+s:""),C=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(c)?c:[c],P=R.length>0,N={padding:C,boundary:R.filter(She),altBoundary:P},{refs:K,floatingStyles:H,placement:z,isPositioned:V,middlewareData:$}=che({strategy:"fixed",placement:A,whileElementsMounted:(...en)=>the(...en,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[dhe({mainAxis:r+T,alignmentAxis:o}),l&&fhe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?hhe():void 0,...N}),l&&ghe({...N}),mhe({...N,apply:({elements:en,rects:gi,availableWidth:$i,availableHeight:Ge})=>{const{width:at,height:dn}=gi.reference,xs=en.floating.style;xs.setProperty("--radix-popper-available-width",`${$i}px`),xs.setProperty("--radix-popper-available-height",`${Ge}px`),xs.setProperty("--radix-popper-anchor-width",`${at}px`),xs.setProperty("--radix-popper-anchor-height",`${dn}px`)}}),w&&Uhe({element:w,padding:a}),Ihe({arrowWidth:_,arrowHeight:T}),f&&phe({strategy:"referenceHidden",...N})]}),[G,J]=aV(z),Ae=el(m);td(()=>{V&&Ae?.()},[V,Ae]);const ye=$.arrow?.x,ke=$.arrow?.y,wt=$.arrow?.centerOffset!==0,[Ot,xn]=D.useState();return td(()=>{b&&xn(window.getComputedStyle(b).zIndex)},[b]),g("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:V?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ot,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g(whe,{scope:n,placedSide:G,onArrowChange:S,arrowX:ye,arrowY:ke,shouldHideArrow:wt,children:g(sr.div,{"data-side":G,"data-align":J,...p,ref:v,style:{...p.style,animation:V?void 0:"none"}})})})});rV.displayName=K9;var sV="PopperArrow",The={top:"bottom",right:"left",bottom:"top",left:"right"},oV=D.forwardRef(function(t,n){const{__scopePopper:i,...r}=t,s=_he(sV,i),o=The[s.placedSide];return g("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:g(yhe,{...r,ref:n,style:{...r.style,display:"block"}})})});oV.displayName=sV;function She(e){return e!==null}var Ihe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:i,middlewareData:r}=t,o=r.arrow?.centerOffset!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[c,u]=aV(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(r.arrow?.x??0)+a/2,h=(r.arrow?.y??0)+l/2;let m="",p="";return c==="bottom"?(m=o?d:`${f}px`,p=`${-l}px`):c==="top"?(m=o?d:`${f}px`,p=`${i.floating.height+l}px`):c==="right"?(m=`${-l}px`,p=o?d:`${h}px`):c==="left"&&(m=`${i.floating.width+l}px`,p=o?d:`${h}px`),{data:{x:m,y:p}}}});function aV(e){const[t,n="center"]=e.split("-");return[t,n]}var xhe=tV,lV=iV,Che=rV,Ahe=oV,Mhe="Portal",cV=D.forwardRef((e,t)=>{const{container:n,...i}=e,[r,s]=D.useState(!1);td(()=>s(!0),[]);const o=n||r&&globalThis?.document?.body;return o?QK.createPortal(g(sr.div,{...i,ref:t}),o):null});cV.displayName=Mhe;function khe(e,t){return D.useReducer((n,i)=>t[n][i]??n,e)}var M5=e=>{const{present:t,children:n}=e,i=Rhe(t),r=typeof n=="function"?n({present:i.isPresent}):D.Children.only(n),s=Js(i.ref,Dhe(r));return typeof n=="function"||i.isPresent?D.cloneElement(r,{ref:s}):null};M5.displayName="Presence";function Rhe(e){const[t,n]=D.useState(),i=D.useRef({}),r=D.useRef(e),s=D.useRef("none"),o=e?"mounted":"unmounted",[a,l]=khe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const c=hU(i.current);s.current=a==="mounted"?c:"none"},[a]),td(()=>{const c=i.current,u=r.current;if(u!==e){const f=s.current,h=hU(c);e?l("MOUNT"):h==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),td(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=h=>{const p=hU(i.current).includes(h.animationName);if(h.target===t&&p&&(l("ANIMATION_END"),!r.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=h=>{h.target===t&&(s.current=hU(i.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:D.useCallback(c=>{c&&(i.current=getComputedStyle(c)),n(c)},[])}}function hU(e){return e?.animationName||"none"}function Dhe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Z9({prop:e,defaultProp:t,onChange:n=()=>{}}){const[i,r]=Lhe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:i,a=el(n),l=D.useCallback(c=>{if(s){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else r(c)},[s,e,r,a]);return[o,l]}function Lhe({defaultProp:e,onChange:t}){const n=D.useState(e),[i]=n,r=D.useRef(i),s=el(t);return D.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var Ohe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},zd=new WeakMap,gU=new WeakMap,mU={},tE=0,uV=function(e){return e&&(e.host||uV(e.parentNode))},Nhe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=uV(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Phe=function(e,t,n,i){var r=Nhe(t,Array.isArray(e)?e:[e]);mU[n]||(mU[n]=new WeakMap);var s=mU[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(i),m=h!==null&&h!=="false",p=(zd.get(f)||0)+1,y=(s.get(f)||0)+1;zd.set(f,p),s.set(f,y),o.push(f),p===1&&m&&gU.set(f,!0),y===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return u(t),a.clear(),tE++,function(){o.forEach(function(d){var f=zd.get(d)-1,h=s.get(d)-1;zd.set(d,f),s.set(d,h),f||(gU.has(d)||d.removeAttribute(i),gU.delete(d)),h||d.removeAttribute(n)}),tE--,tE||(zd=new WeakMap,zd=new WeakMap,gU=new WeakMap,mU={})}},Fhe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=Ohe(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),Phe(i,r,n,"aria-hidden")):function(){return null}},wo=function(){return wo=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},wo.apply(this,arguments)};function dV(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function Bhe(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var f2="right-scroll-bar-position",h2="width-before-scroll-bar",zhe="with-scroll-bars-hidden",Hhe="--removed-body-scroll-bar-size";function nE(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Vhe(e,t){var n=D.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=t,n.facade}var $he=typeof window<"u"?D.useLayoutEffect:D.useEffect,hM=new WeakMap;function Ghe(e,t){var n=Vhe(null,function(i){return e.forEach(function(r){return nE(r,i)})});return $he(function(){var i=hM.get(n);if(i){var r=new Set(i),s=new Set(e),o=n.current;r.forEach(function(a){s.has(a)||nE(a,null)}),s.forEach(function(a){r.has(a)||nE(a,o)})}hM.set(n,e)},[e]),n}function Xhe(e){return e}function jhe(e,t){t===void 0&&(t=Xhe);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function Yhe(e){e===void 0&&(e={});var t=jhe(null);return t.options=wo({async:!0,ssr:!1},e),t}var fV=function(e){var t=e.sideCar,n=dV(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return D.createElement(i,wo({},n))};fV.isSideCarExport=!0;function Whe(e,t){return e.useMedium(t),fV}var hV=Yhe(),iE=function(){},k5=D.forwardRef(function(e,t){var n=D.useRef(null),i=D.useState({onScrollCapture:iE,onWheelCapture:iE,onTouchMoveCapture:iE}),r=i[0],s=i[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,E=e.gapMode,v=dV(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,S=Ghe([n,t]),k=wo(wo({},v),r);return D.createElement(D.Fragment,null,u&&D.createElement(w,{sideCar:hV,removeScrollBar:c,shards:d,noIsolation:h,inert:m,setCallbacks:s,allowPinchZoom:!!p,lockRef:n,gapMode:E}),o?D.cloneElement(D.Children.only(a),wo(wo({},k),{ref:S})):D.createElement(b,wo({},k,{className:l,ref:S}),a))});k5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};k5.classNames={fullWidth:h2,zeroRight:f2};var Khe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Zhe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Khe();return t&&e.setAttribute("nonce",t),e}function qhe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Qhe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Jhe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Zhe())&&(qhe(t,n),Qhe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ege=function(){var e=Jhe();return function(t,n){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},gV=function(){var e=ege(),t=function(n){var i=n.styles,r=n.dynamic;return e(i,r),null};return t},tge={left:0,top:0,right:0,gap:0},rE=function(e){return parseInt(e||"",10)||0},nge=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[rE(n),rE(i),rE(r)]},ige=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return tge;var t=nge(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},rge=gV(),Xf="data-scroll-locked",sge=function(e,t,n,i){var r=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(zhe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Xf,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(f2,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(h2,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(f2," .").concat(f2,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(h2," .").concat(h2,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Xf,`] {
    `).concat(Hhe,": ").concat(a,`px;
  }
`)},gM=function(){var e=parseInt(document.body.getAttribute(Xf)||"0",10);return isFinite(e)?e:0},oge=function(){D.useEffect(function(){return document.body.setAttribute(Xf,(gM()+1).toString()),function(){var e=gM()-1;e<=0?document.body.removeAttribute(Xf):document.body.setAttribute(Xf,e.toString())}},[])},age=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;oge();var s=D.useMemo(function(){return ige(r)},[r]);return D.createElement(rge,{styles:sge(s,!t,r,n?"":"!important")})},h4=!1;if(typeof window<"u")try{var pU=Object.defineProperty({},"passive",{get:function(){return h4=!0,!0}});window.addEventListener("test",pU,pU),window.removeEventListener("test",pU,pU)}catch{h4=!1}var Hd=h4?{passive:!1}:!1,lge=function(e){return e.tagName==="TEXTAREA"},mV=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!lge(e)&&n[t]==="visible")},cge=function(e){return mV(e,"overflowY")},uge=function(e){return mV(e,"overflowX")},mM=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=pV(e,i);if(r){var s=UV(e,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},dge=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},fge=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},pV=function(e,t){return e==="v"?cge(t):uge(t)},UV=function(e,t){return e==="v"?dge(t):fge(t)},hge=function(e,t){return e==="h"&&t==="rtl"?-1:1},gge=function(e,t,n,i,r){var s=hge(e,window.getComputedStyle(t).direction),o=s*i,a=n.target,l=t.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=UV(e,a),m=h[0],p=h[1],y=h[2],b=p-y-s*m;(m||b)&&pV(e,a)&&(d+=b,f+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},UU=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},pM=function(e){return[e.deltaX,e.deltaY]},UM=function(e){return e&&"current"in e?e.current:e},mge=function(e,t){return e[0]===t[0]&&e[1]===t[1]},pge=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Uge=0,Vd=[];function bge(e){var t=D.useRef([]),n=D.useRef([0,0]),i=D.useRef(),r=D.useState(Uge++)[0],s=D.useState(gV)[0],o=D.useRef(e);D.useEffect(function(){o.current=e},[e]),D.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var p=Bhe([e.lockRef.current],(e.shards||[]).map(UM),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var a=D.useCallback(function(p,y){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var b=UU(p),E=n.current,v="deltaX"in p?p.deltaX:E[0]-b[0],w="deltaY"in p?p.deltaY:E[1]-b[1],S,k=p.target,_=Math.abs(v)>Math.abs(w)?"h":"v";if("touches"in p&&_==="h"&&k.type==="range")return!1;var T=mM(_,k);if(!T)return!0;if(T?S=_:(S=_==="v"?"h":"v",T=mM(_,k)),!T)return!1;if(!i.current&&"changedTouches"in p&&(v||w)&&(i.current=S),!S)return!0;var A=i.current||S;return gge(A,y,p,A==="h"?v:w)},[]),l=D.useCallback(function(p){var y=p;if(!(!Vd.length||Vd[Vd.length-1]!==s)){var b="deltaY"in y?pM(y):UU(y),E=t.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&mge(S.delta,b)})[0];if(E&&E.should){y.cancelable&&y.preventDefault();return}if(!E){var v=(o.current.shards||[]).map(UM).filter(Boolean).filter(function(S){return S.contains(y.target)}),w=v.length>0?a(y,v[0]):!o.current.noIsolation;w&&y.cancelable&&y.preventDefault()}}},[]),c=D.useCallback(function(p,y,b,E){var v={name:p,delta:y,target:b,should:E,shadowParent:yge(b)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(w){return w!==v})},1)},[]),u=D.useCallback(function(p){n.current=UU(p),i.current=void 0},[]),d=D.useCallback(function(p){c(p.type,pM(p),p.target,a(p,e.lockRef.current))},[]),f=D.useCallback(function(p){c(p.type,UU(p),p.target,a(p,e.lockRef.current))},[]);D.useEffect(function(){return Vd.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Hd),document.addEventListener("touchmove",l,Hd),document.addEventListener("touchstart",u,Hd),function(){Vd=Vd.filter(function(p){return p!==s}),document.removeEventListener("wheel",l,Hd),document.removeEventListener("touchmove",l,Hd),document.removeEventListener("touchstart",u,Hd)}},[]);var h=e.removeScrollBar,m=e.inert;return D.createElement(D.Fragment,null,m?D.createElement(s,{styles:pge(r)}):null,h?D.createElement(age,{gapMode:e.gapMode}):null)}function yge(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ege=Whe(hV,bge);var bV=D.forwardRef(function(e,t){return D.createElement(k5,wo({},e,{ref:t,sideCar:Ege}))});bV.classNames=k5.classNames;var q9="Popover",[yV,Rxe]=ip(q9,[JH]),sp=JH(),[vge,Xc]=yV(q9),EV=e=>{const{__scopePopover:t,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=e,a=sp(t),l=D.useRef(null),[c,u]=D.useState(!1),[d=!1,f]=Z9({prop:i,defaultProp:r,onChange:s});return g(xhe,{...a,children:g(vge,{scope:t,contentId:z9(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:D.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:D.useCallback(()=>u(!0),[]),onCustomAnchorRemove:D.useCallback(()=>u(!1),[]),modal:o,children:n})})};EV.displayName=q9;var vV="PopoverAnchor",wge=D.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Xc(vV,n),s=sp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return D.useEffect(()=>(o(),()=>a()),[o,a]),g(lV,{...s,...i,ref:t})});wge.displayName=vV;var wV="PopoverTrigger",_V=D.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Xc(wV,n),s=sp(n),o=Js(t,r.triggerRef),a=g(sr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":AV(r.open),...i,ref:o,onClick:wi(e.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:g(lV,{asChild:!0,...s,children:a})});_V.displayName=wV;var Q9="PopoverPortal",[_ge,Tge]=yV(Q9,{forceMount:void 0}),TV=e=>{const{__scopePopover:t,forceMount:n,children:i,container:r}=e,s=Xc(Q9,t);return g(_ge,{scope:t,forceMount:n,children:g(M5,{present:n||s.open,children:g(cV,{asChild:!0,container:r,children:i})})})};TV.displayName=Q9;var wh="PopoverContent",SV=D.forwardRef((e,t)=>{const n=Tge(wh,e.__scopePopover),{forceMount:i=n.forceMount,...r}=e,s=Xc(wh,e.__scopePopover);return g(M5,{present:i||s.open,children:s.modal?g(Sge,{...r,ref:t}):g(Ige,{...r,ref:t})})});SV.displayName=wh;var Sge=D.forwardRef((e,t)=>{const n=Xc(wh,e.__scopePopover),i=D.useRef(null),r=Js(t,i),s=D.useRef(!1);return D.useEffect(()=>{const o=i.current;if(o)return Fhe(o)},[]),g(bV,{as:K0,allowPinchZoom:!0,children:g(IV,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:wi(e.onCloseAutoFocus,o=>{o.preventDefault(),s.current||n.triggerRef.current?.focus()}),onPointerDownOutside:wi(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:wi(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ige=D.forwardRef((e,t)=>{const n=Xc(wh,e.__scopePopover),i=D.useRef(!1),r=D.useRef(!1);return g(IV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(i.current||n.triggerRef.current?.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),IV=D.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,f=Xc(wh,n),h=sp(n);return dfe(),g(BH,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:g(PH,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:g(Che,{"data-state":AV(f.open),role:"dialog",id:f.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),xV="PopoverClose",xge=D.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Xc(xV,n);return g(sr.button,{type:"button",...i,ref:t,onClick:wi(e.onClick,()=>r.onOpenChange(!1))})});xge.displayName=xV;var Cge="PopoverArrow",CV=D.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=sp(n);return g(Ahe,{...r,...i,ref:t})});CV.displayName=Cge;function AV(e){return e?"open":"closed"}var R5=EV,D5=_V,Age=TV,J9=SV,MV=CV;const kV=()=>g("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),RV=se.createContext(null),hi=()=>se.useContext(RV),DV=e=>{const[t,n]=D.useState(null),i=ei(),{theme:r}=hi(),{container:s}=Qo();return D.useLayoutEffect(()=>{t&&(t.className="",t.classList.add("excalidraw",...e?.className?.split(/\s+/)||[]),t.classList.toggle("excalidraw--mobile",i.editor.isMobile),t.classList.toggle("theme--dark",r===Te.DARK))},[t,r,i.editor.isMobile,e?.className]),D.useLayoutEffect(()=>{const o=e?.parentSelector?s?.querySelector(e.parentSelector):document.body;if(!o)return;const a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[s,e?.parentSelector]),t};function e_(e,t,n){D.useEffect(()=>{function i(r){const s=r;if(!e.current)return;const o=n?.(s,e.current);if(o===!0)return;if(o===!1)return t(s);e.current.contains(s.target)||!document.documentElement.contains(s.target)||s.target.closest("[data-radix-portal]")||s.target===document.documentElement&&document.body.style.pointerEvents==="none"||s.target.closest("[data-prevent-outside-click]")||t(s)}return document.addEventListener(ee.POINTER_DOWN,i),document.addEventListener(ee.TOUCH_START,i),()=>{document.removeEventListener(ee.POINTER_DOWN,i),document.removeEventListener(ee.TOUCH_START,i)}},[e,t,n])}const L5=e=>{const t=D.useRef(e);return Object.assign(t.current,e),t.current},O5=$t(null),Mge=({onCancel:e,onChange:t,onSelect:n,colorPickerType:i})=>{const r=DV({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),s=hi(),o=ay(),a=ro(),l=Ne(o,s),c=L5({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:u}=Qo();D.useEffect(()=>{const f=d.current;if(!f||!a.canvas||!r)return;let h=!1;const m=a.canvas.getContext("2d"),p=({clientX:k,clientY:_})=>{const T=m.getImageData((k-s.offsetLeft)*window.devicePixelRatio,(_-s.offsetTop)*window.devicePixelRatio,1,1).data;return yie(T[0],T[1],T[2])},y=({clientX:k,clientY:_,altKey:T})=>{f.style.top=`${_+20}px`,f.style.left=`${k+20}px`;const A=p({clientX:k,clientY:_});h&&c.onChange(i,A,c.selectedElements,{altKey:T}),f.style.background=A},b=()=>{c.onCancel()},E=(k,_)=>{c.onSelect(k,_)},v=k=>{h=!0,k.stopImmediatePropagation()},w=k=>{h=!1,u?.focus(),k.stopImmediatePropagation(),k.preventDefault(),E(p(k),k)},S=k=>{k.key===B.ESCAPE&&(k.preventDefault(),k.stopImmediatePropagation(),b())};return r.tabIndex=-1,r.focus(),y({clientX:c.app.lastViewportPosition.x,clientY:c.app.lastViewportPosition.y,altKey:!1}),r.addEventListener(ee.KEYDOWN,S),r.addEventListener(ee.POINTER_DOWN,v),r.addEventListener(ee.POINTER_UP,w),window.addEventListener("pointermove",y,{passive:!0}),window.addEventListener(ee.BLUR,b),()=>{h=!1,r.removeEventListener(ee.KEYDOWN,S),r.removeEventListener(ee.POINTER_DOWN,v),r.removeEventListener(ee.POINTER_UP,w),window.removeEventListener("pointermove",y),window.removeEventListener(ee.BLUR,b)}},[c,a.canvas,r,i,u,s.offsetLeft,s.offsetTop]);const d=D.useRef(null);return e_(d,()=>{e()},f=>!!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),r?vn.createPortal(g("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),r):null},js=se.forwardRef(({children:e,padding:t,className:n,style:i},r)=>g("div",{className:he("Island",n),style:{"--padding":t,...i},ref:r,children:e})),LV=se.forwardRef(({className:e,container:t,children:n,style:i,onClose:r,onKeyDown:s,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l},c)=>{const u=ei();return g(Age,{container:t,children:O(J9,{ref:c,className:he("focus-visible-none",e),"data-prevent-outside-click":!0,side:u.editor.isMobile&&!u.viewport.isLandscape?"bottom":"right",align:u.editor.isMobile&&!u.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:s,onFocusOutside:o,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!_re(document.activeElement)&&t.focus(),r()},children:[g(js,{padding:3,style:i,children:n}),g(MV,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),N5=({palette:e,color:t})=>{if(!t)return null;for(const[n,i]of Object.entries(e))if(Array.isArray(i)){const r=i.indexOf(t);if(r>-1)return{colorName:n,shade:r}}else if(i===t)return{colorName:n,shade:null};return null},g4=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),OV=({color:e,palette:t})=>!Object.values(t).flat().includes(e),kge=(e,t,n)=>{const i={elementBackground:"backgroundColor",elementStroke:"strokeColor"},r=e.filter(o=>{if(o.isDeleted)return!1;const a=o[i[t]];return OV({color:a,palette:n})}),s=new Map;return r.forEach(o=>{const a=o[i[t]];s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)}),[...s.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,gie)},rg=$t(null),bM=(e,t,n)=>(e*299+t*587+n*114)/1e3,t_=(e,t=160)=>{if(!e)return!0;if(e==="transparent")return!1;if(!e.startsWith("#")){const s=document.createElement("div");if(s.style.color=e,s.style.color){s.style.position="absolute",s.style.visibility="hidden",s.style.width="0",s.style.height="0",document.body.appendChild(s);const o=getComputedStyle(s).color;document.body.removeChild(s);const a=o.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),l=parseInt(a[0]),c=parseInt(a[1]),u=parseInt(a[2]);return bM(l,c,u)<t}return!0}const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return bM(n,i,r)<t},Rge=({color:e,onChange:t,label:n,colorPickerType:i,placeholder:r})=>{const s=ei(),[o,a]=D.useState(e),[l,c]=cn(rg);D.useEffect(()=>{a(e)},[e]);const u=D.useCallback(p=>{const y=p.toLowerCase(),b=zge(y);b&&t(b),a(y)},[t]),d=D.useRef(null),f=D.useRef(null);D.useEffect(()=>{d.current&&d.current.focus()},[l]);const[h,m]=cn(O5);return D.useEffect(()=>()=>{m(null)},[m]),O("div",{className:"color-picker__input-label",children:[g("div",{className:"color-picker__input-hash",children:"#"}),g("input",{ref:l==="hex"?d:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:p=>{u(p.target.value)},value:(o||"").replace(/^#/,""),onBlur:()=>{a(e)},tabIndex:-1,onFocus:()=>c("hex"),onKeyDown:p=>{p.key!==B.TAB&&(p.key===B.ESCAPE&&f.current?.focus(),p.stopPropagation())},placeholder:r}),!s.editor.isMobile&&O(de,{children:[g("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),g("div",{ref:f,className:he("excalidraw-eye-dropper-trigger",{selected:h}),onClick:()=>m(p=>p?null:{keepOpenOnAlt:!1,onSelect:y=>t(y),colorPickerType:i}),title:`${M("labels.eyeDropper")} — ${B.I.toLocaleUpperCase()} or ${q("Alt")} `,children:bde})]})]})},n_=({color:e,keyLabel:t,isShade:n=!1})=>O("div",{className:"color-picker__button__hotkey-label",style:{color:t_(e)?"#fff":"#000"},children:[n&&"⇧",t]}),Dge=({colors:e,color:t,onChange:n,label:i})=>{const[r,s]=cn(rg),o=D.useRef(null);return D.useEffect(()=>{o.current&&o.current.focus()},[t,r]),g("div",{className:"color-picker-content--default",children:e.map((a,l)=>O("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:he("color-picker__button color-picker__button--large has-outline",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),s("custom")},title:a,"aria-label":i,style:{"--swatch-color":a},children:[g("div",{className:"color-picker__button-outline"}),g(n_,{color:a,keyLabel:l+1})]},l))})},Lge=({palette:e,color:t,onChange:n,activeShade:i})=>{const r=N5({color:t,palette:e}),[s,o]=cn(rg),a=D.useRef(null);return D.useEffect(()=>{a.current&&s==="baseColors"&&a.current.focus()},[r?.colorName,s]),g("div",{className:"color-picker-content--default",children:Object.entries(e).map(([l,c],u)=>{const d=(Array.isArray(c)?c[i]:c)||"transparent",f=g4[u],h=M(`colors.${l.replace(/\d+/,"")}`,null,"");return O("button",{ref:r?.colorName===l?a:void 0,tabIndex:-1,type:"button",className:he("color-picker__button color-picker__button--large has-outline",{active:r?.colorName===l,"is-transparent":d==="transparent"||!1}),onClick:()=>{n(d),o("baseColors")},title:`${h}${d.startsWith("#")?` ${d}`:""} — ${f}`,"aria-label":`${h} — ${f}`,style:{"--swatch-color":d},"data-testid":`color-${l}`,children:[g("div",{className:"color-picker__button-outline"}),g(n_,{color:d,keyLabel:f})]},l)})})},g2=({children:e})=>g("div",{className:"color-picker__heading",children:e}),Oge=({color:e,onChange:t,palette:n})=>{const i=N5({color:e||"transparent",palette:n}),[r,s]=cn(rg),o=D.useRef(null);if(D.useEffect(()=>{o.current&&r==="shades"&&o.current.focus()},[i,r]),i){const{colorName:a,shade:l}=i,c=n[a];if(Array.isArray(c))return g("div",{className:"color-picker-content--default shades",children:c.map((u,d)=>O("button",{ref:d===l&&r==="shades"?o:void 0,tabIndex:-1,type:"button",className:he("color-picker__button color-picker__button--large has-outline",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:u?{"--swatch-color":u}:void 0,onClick:()=>{t(u),s("shades")},children:[g("div",{className:"color-picker__button-outline"}),g(n_,{color:u,keyLabel:d+1,isShade:!0})]},d))})}return O("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[g("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),g("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:M("colorPicker.noShades")})]})},sE=(e,t,n)=>{const i=Math.ceil(n/Jd);switch(t=t??-1,e){case"ArrowLeft":{const r=t-1;return r<0?n-1:r}case"ArrowRight":return(t+1)%n;case"ArrowDown":{const r=t+Jd;return r>=n?t%Jd:r}case"ArrowUp":{const r=t-Jd,s=r<0?Jd*i+r:r;return s>=n?void 0:s}}},Nge=({e,colorObj:t,onChange:n,palette:i,customColors:r,setActiveColorPickerSection:s,activeShade:o})=>{if(t?.shade!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){const a=Number(e.code.slice(-1))-1;return n(i[t.colorName][a]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&r[Number(e.key)-1])return n(r[Number(e.key)-1]),s("custom"),!0;if(g4.includes(e.key)){const a=g4.indexOf(e.key),l=Object.keys(i)[a],c=i[l],u=Array.isArray(c)?c[o]:c;return n(u),s("baseColors"),!0}return!1},Pge=({event:e,activeColorPickerSection:t,palette:n,color:i,onChange:r,customColors:s,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:c,onEscape:u})=>{if(e[B.CTRL_OR_CMD])return!1;if(e.key===B.ESCAPE)return u(e),!0;if(e.key===B.ALT)return c(!0),!0;if(e.key===B.I)return c(),!0;const d=N5({color:i,palette:n});if(e.key===B.TAB){const f={custom:!!s.length,baseColors:!0,shades:d?.shade!=null,hex:!0},h=Object.entries(f).reduce((E,[v,w])=>(w&&E.push(v),E),[]),m=h.indexOf(t),p=e.shiftKey?-1:1,y=m+p>h.length-1?0:m+p<0?h.length-1:m+p,b=h[y];return b&&o(b),b==="custom"?r(s[0]):b==="baseColors"&&(Object.entries(n).find(([v,w])=>Array.isArray(w)?w.includes(i):w===i?v:null)||r(Pe.black)),e.preventDefault(),e.stopPropagation(),!0}if(Nge({e,colorObj:d,onChange:r,palette:n,customColors:s,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){const{shade:f}=d,h=sE(e.key,f,Jd);if(h!==void 0)return r(n[d.colorName][h]),!0}if(t==="baseColors"&&d){const{colorName:f}=d,h=Object.keys(n),m=h.indexOf(f),p=sE(e.key,m,h.length);if(p!==void 0){const y=h[p],b=n[y];return r(Array.isArray(b)?b[l]:b),!0}}if(t==="custom"){const f=i!=null?s.indexOf(i):0,h=sE(e.key,f,s.length);if(h!==void 0){const m=s[h];return r(m),!0}}return!1},Fge=se.forwardRef(({color:e,onChange:t,type:n,elements:i,palette:r,updateData:s,children:o,onEyeDropperToggle:a,onEscape:l},c)=>{const[u]=se.useState(()=>n==="canvasBackground"?[]:kge(i,n,r)),[d,f]=cn(rg),h=N5({color:e,palette:r});D.useEffect(()=>{if(!d){const b=!!e&&OV({color:e,palette:r}),E=b&&!u.includes(e);f(E?null:b?"custom":h?.shade!=null?"shades":"baseColors")}},[d,e,r,f,h,u]);const[m,p]=D.useState(h?.shade??(n==="elementBackground"?u1:c1));D.useEffect(()=>{h?.shade!=null&&p(h.shade);const b=E=>{E.key===B.ALT&&a(!1)};return document.addEventListener(ee.KEYUP,b,{capture:!0}),()=>{document.removeEventListener(ee.KEYUP,b,{capture:!0})}},[h,a]);const y=se.useRef(null);return D.useImperativeHandle(c,()=>y.current),D.useEffect(()=>{y?.current?.focus()},[]),g("div",{role:"dialog","aria-modal":"true","aria-label":M("labels.colorPicker"),children:O("div",{ref:y,onKeyDown:b=>{Pge({event:b,activeColorPickerSection:d,palette:r,color:e,onChange:t,onEyeDropperToggle:a,customColors:u,setActiveColorPickerSection:f,updateData:s,activeShade:m,onEscape:l})&&(b.preventDefault(),b.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!u.length&&O("div",{children:[g(g2,{children:M("colorPicker.mostUsedCustomColors")}),g(Dge,{colors:u,color:e,label:M("colorPicker.mostUsedCustomColors"),onChange:t})]}),O("div",{children:[g(g2,{children:M("colorPicker.colors")}),g(Lge,{color:e,palette:r,onChange:t,activeShade:m})]}),O("div",{children:[g(g2,{children:M("colorPicker.shades")}),g(Oge,{color:e,onChange:t,palette:r})]}),o]})})}),Bge=({onChange:e,type:t,activeColor:n,topPicks:i})=>{let r;return t==="elementStroke"&&(r=jP),t==="elementBackground"&&(r=YP),t==="canvasBackground"&&(r=WP),i&&(r=i),r?g("div",{className:"color-picker__top-picks",children:r.map(s=>g("button",{className:he("color-picker__button",{active:s===n,"is-transparent":s==="transparent"||!s,"has-outline":!t_(s,GP)}),style:{"--swatch-color":s},type:"button",title:s,onClick:()=>e(s),"data-testid":`color-top-pick-${s}`,children:g("div",{className:"color-picker__button-outline"})},s))}):(console.error("Invalid type for TopPicks"),null)},yM=e=>{const t=new Option().style;return t.color=e,!!t.color},zge=e=>ds(e)?e:yM(`#${e}`)?`#${e}`:yM(e)?e:null,Hge=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=Pe,updateData:o})=>{const{container:a}=Qo(),[,l]=cn(rg),[c,u]=cn(O5),d=O("div",{children:[g(g2,{children:M("colorPicker.hexCode")}),g(Rge,{color:t||"",label:i,onChange:m=>{n(m)},colorPickerType:e,placeholder:M("colorPicker.color")})]}),f=D.useRef(null),h=()=>{f.current?.focus()};return g(LV,{container:a,style:{maxWidth:"13rem"},onFocusOutside:m=>{h(),m.preventDefault()},onPointerDownOutside:m=>{c&&m.preventDefault()},onClose:()=>{o({openPopup:null}),l(null)},children:s?g(Fge,{ref:f,palette:s,color:t,onChange:m=>{n(m)},onEyeDropperToggle:m=>{u(p=>m?(p=p||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},p.keepOpenOnAlt=!0,p):m===!1||p?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:m=>{c?u(null):o({openPopup:null})},type:e,elements:r,updateData:o,children:d}):d})},Vge=({label:e,color:t,type:n})=>g(D5,{type:"button",className:he("color-picker__button active-color properties-trigger",{"is-transparent":!t||t==="transparent","has-outline":!t||!t_(t,GP)}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:M(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:g("div",{className:"color-picker__button-outline",children:!t&&bue})}),i_=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=Pe,topPicks:o,updateData:a,appState:l})=>g("div",{children:O("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[g(Bge,{activeColor:t,onChange:n,type:e,topPicks:o}),g(kV,{}),O(R5,{open:l.openPopup===e,onOpenChange:c=>{a({openPopup:c?e:null})},children:[g(Vge,{color:t,label:i,type:e}),l.openPopup===e&&g(Hge,{type:e,color:t,onChange:n,label:i,elements:r,palette:s,updateData:a})]})]})}),$ge="/excalidraw/fonts/CascadiaCode/CascadiaCode-Regular.woff2",Gge=[{uri:$ge}],Xge="/excalidraw/fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",jge="/excalidraw/fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",Yge="/excalidraw/fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",Wge="/excalidraw/fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",Kge=[{uri:Xge,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:Wge,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:Yge,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:jge,descriptors:{unicodeRange:"U+3bb"}}],Zge=[{uri:Aw}];class qge{instance;constructor(t){this.instance=new Worker(t,{type:"module"})}debounceTerminate}class r_{idleWorkers=new Set;workerUrl;workerTTL;constructor(t,n){this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new RH;if(!import.meta.url||t.toString()===import.meta.url)throw new DH;return new r_(t,n)}async postMessage(t,n){let i;const r=Array.from(this.idleWorkers).shift();return r?(this.idleWorkers.delete(r),i=r):i=await this.createWorker(),new Promise((s,o)=>{i.instance.onmessage=this.onMessageHandler(i,s),i.instance.onerror=this.onErrorHandler(i,o),i.instance.postMessage(t,n),i.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(const t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){const t=new qge(this.workerUrl);return t.debounceTerminate=Ya(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return i=>{t.debounceTerminate(),this.idleWorkers.add(t),n(i.data)}}onErrorHandler(t,n){return i=>{t.debounceTerminate(()=>n(i)),t.debounceTerminate.flush(),this.clear()}}}let EM=typeof Worker<"u";const Qge=async(e,t)=>{const{Commands:n,subsetToBase64:i,toBase64:r}=await e1e();return EM?Sc(async()=>{try{const s=await t1e(),o=e.slice(0),a=await s.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return r(a)}catch(s){return EM=!1,Nre()&&(s instanceof RH||s instanceof DH)||console.error("Failed to use workers for subsetting, falling back to the main thread.",s),i(e,t)}}):i(e,t)};let oE=null,aE=null;const Jge=async()=>(oE||(oE=ge(()=>import("./subset-worker.chunk-CVR6pt27.js"),__vite__mapDeps([0,1]))),oE),e1e=async()=>(aE||(aE=ge(()=>import("./subset-shared.chunk-D3ioWSie.js"),__vite__mapDeps([]))),aE);let lE=null;const t1e=()=>(lE||(lE=Sc(async()=>{const{WorkerUrl:e}=await Jge();return r_.create(e)})),lE);var cE={};class r0{urls;fontFace;static ASSETS_FALLBACK_URL=`https://esm.sh/${cE.PKG_NAME?`${cE.PKG_NAME}@${cE.PKG_VERSION}`:"@excalidraw/excalidraw"}/dist/prod/`;constructor(t,n,i){this.urls=r0.createUrls(n);const r=this.urls.map(s=>`url(${s}) ${r0.getFormat(s)}`).join(", ");this.fontFace=new FontFace(t,r,{display:"swap",style:"normal",weight:"400",...i})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;const n=Array.from(t).map(i=>i.codePointAt(0));return this.getContent(n).then(i=>`@font-face { font-family: ${this.fontFace.family}; src: url(${i}); }`)}async getContent(t){let n=0;const i=[];for(;n<this.urls.length;){const r=this.urls[n];try{const s=await this.fetchFont(r);return await Qge(s,t)}catch(s){i.push(`"${r.toString()}" returned error "${s}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(i,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return Sc(async()=>{const n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){const r=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${r}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){const t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{const[i,r]=n.replace("U+","").split("-");return r?`\\u{${i}}-\\u{${r}}`:`\\u{${i}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(Aw))return[];if(t.startsWith("http"))return[new URL(t)];const n=t.replace(/^\/+/,""),i=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){const r=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);i.push(new URL(n,r))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(r=>{const s=this.normalizeBaseUrl(r);i.push(new URL(n,s))});return i.push(new URL(n,r0.ASSETS_FALLBACK_URL)),i}static getFormat(t){if(!(t instanceof URL))return"";try{const n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),window?.location?.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}}const n1e="/excalidraw/fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",i1e="/excalidraw/fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",r1e="/excalidraw/fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",s1e="/excalidraw/fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",o1e="/excalidraw/fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",a1e="/excalidraw/fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",l1e="/excalidraw/fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",c1e=[{uri:o1e,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:l1e,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:a1e,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:r1e,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:i1e,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:n1e,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:s1e,descriptors:{unicodeRange:"U+300-301,U+303"}}],u1e=[{uri:Aw}],d1e="/excalidraw/fonts/LiberationSans/LiberationSans-Regular.woff2",f1e=[{uri:d1e}],h1e="/excalidraw/fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",g1e="/excalidraw/fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",m1e=[{uri:h1e,descriptors:{unicodeRange:cu.LATIN_EXT}},{uri:g1e,descriptors:{unicodeRange:cu.LATIN}}],p1e="/excalidraw/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",U1e="/excalidraw/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",b1e="/excalidraw/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",y1e="/excalidraw/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",E1e="/excalidraw/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",v1e=[{uri:b1e,descriptors:{unicodeRange:cu.CYRILIC_EXT,weight:"500"}},{uri:p1e,descriptors:{unicodeRange:cu.CYRILIC,weight:"500"}},{uri:E1e,descriptors:{unicodeRange:cu.VIETNAMESE,weight:"500"}},{uri:y1e,descriptors:{unicodeRange:cu.LATIN_EXT,weight:"500"}},{uri:U1e,descriptors:{unicodeRange:cu.LATIN,weight:"500"}}],w1e="/excalidraw/fonts/Virgil/Virgil-Regular.woff2",_1e=[{uri:w1e}],T1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",S1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",I1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",x1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",C1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",A1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",M1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",k1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",R1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",D1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",L1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",O1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",N1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",P1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",F1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",B1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",z1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",H1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",V1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",$1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",G1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",X1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",j1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",Y1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",W1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",K1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",Z1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",q1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",Q1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",J1e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",e0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",t0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",n0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",i0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",r0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",s0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",o0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",a0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",l0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",c0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",u0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",d0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",f0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",h0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",g0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",m0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",p0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",U0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",b0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",y0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",E0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",v0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",w0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",_0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",T0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",S0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",I0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",x0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",C0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",A0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",M0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",k0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",R0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",D0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",L0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",O0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",N0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",P0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",F0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",B0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",z0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",H0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",V0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",$0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",G0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",X0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",j0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",Y0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",W0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",K0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",Z0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",q0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",Q0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",J0e="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",eme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",tme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",nme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",ime="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",rme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",sme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",ome="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",ame="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",lme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",cme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",ume="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",dme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",fme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",hme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",gme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",mme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",pme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",Ume="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",bme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",yme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",Eme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",vme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",wme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",_me="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",Tme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",Sme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",Ime="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",xme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",Cme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",Ame="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",Mme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",kme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",Rme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",Dme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",Lme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",Ome="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",Nme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",Pme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",Fme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",Bme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",zme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",Hme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",Vme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",$me="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",Gme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",Xme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",jme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",Yme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",Wme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",Kme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",Zme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",qme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",Qme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",Jme="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",epe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",tpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",npe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",ipe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",rpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",spe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",ope="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",ape="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",lpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",cpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",upe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",dpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",fpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",hpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",gpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",mpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",ppe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",Upe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",bpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",ype="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",Epe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",vpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",wpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",_pe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",Tpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",Spe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",Ipe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",xpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",Cpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",Ape="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",Mpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",kpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",Rpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",Dpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",Lpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",Ope="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",Npe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",Ppe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",Fpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",Bpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",zpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",Hpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",Vpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",$pe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",Gpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",Xpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",jpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",Ype="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",Wpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",Kpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",Zpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",qpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",Qpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",Jpe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",eUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",tUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",nUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",iUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",rUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",sUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",oUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",aUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",lUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",cUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",uUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",dUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",fUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",hUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",gUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",mUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",pUe="/excalidraw/fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",UUe=[{uri:k1e,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:O1e,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:L1e,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:N1e,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:F1e,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:B1e,descriptors:{unicodeRange:"U+d520-d608"}},{uri:P1e,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:z1e,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:V1e,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:$1e,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:D1e,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:G1e,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:X1e,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:I1e,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:R1e,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:j1e,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:S1e,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:Y1e,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:W1e,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:K1e,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:Z1e,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:q1e,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:Q1e,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:J1e,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:e0e,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:t0e,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:n0e,descriptors:{unicodeRange:"U+c258-c340"}},{uri:i0e,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:r0e,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:s0e,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:H1e,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:o0e,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:a0e,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:l0e,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:c0e,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:u0e,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:d0e,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:f0e,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:h0e,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:y0e,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:E0e,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:g0e,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:v0e,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:w0e,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:_0e,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:U0e,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:T0e,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:b0e,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:S0e,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:I0e,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:x0e,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:C0e,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:A0e,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:M0e,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:k0e,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:R0e,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:D0e,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:L0e,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:O0e,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:N0e,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:P0e,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:F0e,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:B0e,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:z0e,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:H0e,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:V0e,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:$0e,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:G0e,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:X0e,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:j0e,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:Y0e,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:C1e,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:W0e,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:K0e,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:Z0e,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:q0e,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:Q0e,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:J0e,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:eme,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:tme,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:T1e,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:nme,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:p0e,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:ime,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:rme,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:sme,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:ome,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:ame,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:lme,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:cme,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:ume,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:dme,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:fme,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:hme,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:gme,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:mme,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:pme,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:Ume,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:bme,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:yme,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:Eme,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:vme,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:wme,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:_me,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:Tme,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:m0e,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:Sme,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:Ime,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:xme,descriptors:{unicodeRange:"U+487a-4932"}},{uri:Cme,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:Ame,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:Mme,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:kme,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:Rme,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:Dme,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:Lme,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:Ome,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:Nme,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:Pme,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:Fme,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:Bme,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:zme,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:Hme,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:Vme,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:$me,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:Gme,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:Xme,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:jme,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:Yme,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:Wme,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:Kme,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:Zme,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:qme,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:Qme,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:Jme,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:epe,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:tpe,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:npe,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:ipe,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:rpe,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:spe,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:ope,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:ape,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:lpe,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:cpe,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:upe,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:dpe,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:fpe,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:hpe,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:gpe,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:mpe,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:ppe,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:Upe,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:bpe,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:ype,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:Epe,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:vpe,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:wpe,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:_pe,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:Tpe,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:Spe,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:A1e,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:Ipe,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:xpe,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:Cpe,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:Ape,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:x1e,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:Mpe,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:kpe,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:Rpe,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:Lpe,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:Ope,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:Npe,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:Ppe,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:Fpe,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:Bpe,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:zpe,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:Hpe,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:Vpe,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:$pe,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:Gpe,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:Xpe,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:jpe,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:M1e,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:Ype,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:Wpe,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:Kpe,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:Zpe,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:qpe,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:Qpe,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:Jpe,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:eUe,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:tUe,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:nUe,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:iUe,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:rUe,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:sUe,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:oUe,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:aUe,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:lUe,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:cUe,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:uUe,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:Dpe,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:dUe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:fUe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:hUe,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:gUe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:mUe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:pUe,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}];class He{static loadedFontsCache=new Set;static _registered;static _initialized=!1;static get registered(){return He._registered?He._initialized||(He._registered=new Map([...He.init().entries(),...He._registered.entries()])):He._registered=He.init(),He._registered}get registered(){return He.registered}scene;constructor(t){this.scene=t}getSceneFamilies=()=>He.getUniqueFamilies(this.scene.getNonDeletedElements());onLoaded=t=>{let n=!0;for(const s of t){const o=`${s.family}-${s.style}-${s.weight}-${s.unicodeRange}`;He.loadedFontsCache.has(o)||(He.loadedFontsCache.add(o),n=!1)}if(n)return;let i=!1;const r=this.scene.getNonDeletedElementsMap();for(const s of this.scene.getNonDeletedElements())if(le(s)){i=!0,Et.delete(s),Km.clearCache(ot(s));const o=zn(s,r);o&&Et.delete(o)}i&&this.scene.triggerUpdate()};loadSceneFonts=async()=>{const t=this.getSceneFamilies(),n=He.getCharsPerFamily(this.scene.getNonDeletedElements());return He.loadFontFaces(t,n)};static loadElementsFonts=async t=>{const n=He.getUniqueFamilies(t),i=He.getCharsPerFamily(t);return He.loadFontFaces(n,i)};static async generateFontFaceDeclarations(t){const n=He.getUniqueFamilies(t),i=He.getCharsPerFamily(t),r=n.find(l=>eF(l).includes(Ef));if(r){const l=He.getCharacters(i,r);if(xoe(l)){const c=vf[Ef];i[c]=new Set(l),n.unshift(vf[Ef])}}const s=He.fontFacesStylesGenerator(n,i),o=3,a=await new lC(s,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(const{fontFaces:o,metadata:a}of He.registered.values())if(!a.local)for(const{fontFace:l}of o)window.document.fonts.has(l)||window.document.fonts.add(l);const i=He.fontFacesLoader(t,n),r=10;return(await new lC(i,r).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(const[i,r]of t.entries()){const s=ot({fontFamily:r,fontSize:16}),o=He.getCharacters(n,r);window.document.fonts.check(s,o)||(yield Sc(async()=>{try{const a=await window.document.fonts.load(s,o);return[i,a]}catch(a){console.error(`Failed to load font "${s}" from urls "${He.registered.get(r)?.fontFaces.map(l=>l.urls)}"`,a)}}))}}static*fontFacesStylesGenerator(t,n){for(const[i,r]of t.entries()){const{fontFaces:s,metadata:o}=He.registered.get(r)??{};if(!Array.isArray(s)){console.error(`Couldn't find registered fonts for font-family "${r}"`,He.registered);continue}if(!o?.local)for(const[a,l]of s.entries())yield Sc(async()=>{try{const c=He.getCharacters(n,r),u=await l.toCSS(c);return u?[i*1e4+a,u]:void 0}catch(c){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,c)}})}}static register(t,n,...i){const r=Ye[t]??vf[t];return this.registered.get(r)||this.registered.set(r,{metadata:n,fontFaces:i.map(({uri:o,descriptors:a})=>new r0(t,o,a))}),this.registered}static init(){const t={registered:new Map},n=(i,...r)=>{const s=Ye[i]??vf[i],o=uh[s]??uh[Ye.Excalifont];He.register.call(t,i,o,...r)};return n("Cascadia",...Gge),n("Comic Shanns",...Kge),n("Excalifont",...c1e),n("Helvetica",...u1e),n("Liberation Sans",...f1e),n("Lilita One",...m1e),n("Nunito",...v1e),n("Virgil",..._1e),n(Ef,...UUe),n(F0,...Zge),He._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,i)=>(le(i)&&n.add(i.fontFamily),n),new Set))}static getCharsPerFamily(t){const n={};for(const i of t)if(le(i))for(const r of i.originalText)n[i.fontFamily]||(n[i.fontFamily]=new Set),n[i.fontFamily].add(r);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(He.registered.keys())}}const NV=se.forwardRef(({className:e,placeholder:t,onChange:n},i)=>O("div",{className:he("QuickSearch__wrapper",e),children:[ed,g("input",{ref:i,className:"QuickSearch__input",type:"text",placeholder:t,onChange:r=>n(r.target.value.trim().toLowerCase())})]})),PV=({className:e,placeholder:t,children:n})=>{const i=!D.Children.count(n);return g("div",{className:he("ScrollableList__wrapper",e),role:"menu",children:i?g("div",{className:"empty",children:t}):n})},Qb=({children:e,className:t="",style:n,title:i})=>O("div",{className:`dropdown-menu-group ${t}`,style:n,children:[i&&g("p",{className:"dropdown-menu-group-title",children:i}),e]});Qb.displayName="DropdownMenuGroup";const FV=({textStyle:e,icon:t,shortcut:n,children:i})=>{const r=ei();return O(de,{children:[t&&g("div",{className:"dropdown-menu-item__icon",children:t}),g("div",{style:e,className:"dropdown-menu-item__text",children:i}),n&&!r.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut",children:n})]})},BV=se.createContext({}),zV=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),HV=(e,t)=>{const n=D.useContext(BV);return u5(e,i=>{const r=new CustomEvent(ee.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t?.(r),r.defaultPrevented||n.onSelect?.(r)})},or=({icon:e,value:t,order:n,children:i,shortcut:r,className:s,hovered:o,selected:a,textStyle:l,onSelect:c,onClick:u,...d})=>{const f=HV(u,c),h=D.useRef(null);return D.useEffect(()=>{o&&(n===0?h.current?.scrollIntoView({block:"end"}):h.current?.scrollIntoView({block:"nearest"}))},[o,n]),g("button",{...d,ref:h,value:t,onClick:f,className:zV(s,a,o),title:d.title??d["aria-label"],children:g(FV,{textStyle:l,icon:e,shortcut:r,children:i})})};or.displayName="DropdownMenuItem";const U1={GREEN:"green",RED:"red",BLUE:"blue"},s_=({type:e=U1.BLUE,children:t})=>{const{theme:n}=up(),i={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===Te.LIGHT?"1.5px solid white":"none"};switch(e){case U1.GREEN:Object.assign(i,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case U1.RED:Object.assign(i,{backgroundColor:"pink",color:"darkred"});break;case U1.BLUE:default:Object.assign(i,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return g("div",{className:"DropDownMenuItemBadge",style:i,children:t})};s_.displayName="DropdownMenuItemBadge";or.Badge=s_;const bUe=({event:e,inputRef:t,hoveredFont:n,filteredFonts:i,onClose:r,onSelect:s,onHover:o})=>{if(!e[B.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===B.F)return t.current?.focus(),!0;if(e.key===B.ESCAPE)return r(),!0;if(e.key===B.ENTER)return n?.value&&s(n.value),!0;if(e.key===B.ARROW_DOWN)return n?.next?o(n.next.value):i[0]?.value&&o(i[0].value),!0;if(e.key===B.ARROW_UP)return n?.prev?o(n.prev.value):i[i.length-1]?.value&&o(i[i.length-1].value),!0},yUe=e=>{switch(e){case Ye.Excalifont:case Ye.Virgil:return T5;case Ye.Nunito:case Ye.Helvetica:return r4;case Ye["Lilita One"]:return rde;case Ye["Comic Shanns"]:case Ye.Cascadia:return yH;default:return r4}},EUe=se.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:i,onLeave:r,onOpen:s,onClose:o})=>{const{container:a}=Qo(),{fonts:l}=ro(),{showDeprecatedFonts:c}=cp(),[u,d]=D.useState(""),f=D.useRef(null),h=D.useMemo(()=>Array.from(He.registered.entries()).filter(([T,{metadata:A}])=>!A.private&&!A.fallback).map(([T,{metadata:A,fontFaces:C}])=>{const R={value:T,icon:yUe(T),text:C[0]?.fontFace?.family??"Unknown"};return A.deprecated&&Object.assign(R,{deprecated:A.deprecated,badge:{type:U1.RED,placeholder:M("fontList.badge.old")}}),R}).sort((T,A)=>T.text.toLowerCase()>A.text.toLowerCase()?1:-1),[]),m=D.useMemo(()=>new Set(l.getSceneFamilies()),[e]),p=D.useMemo(()=>h.filter(T=>m.has(T.value)),[h,m]),y=D.useMemo(()=>h.filter(T=>!m.has(T.value)&&(c||!T.deprecated)),[h,m,c]),b=D.useMemo(()=>Dre([...p,...y].filter(T=>T.text?.toLowerCase().includes(u))),[p,y,u]),E=D.useMemo(()=>{let T;return t?T=b.find(A=>A.value===t):e&&(T=b.find(A=>A.value===e)),!T&&u&&(b[0]?.value?i(b[0].value):r()),T},[t,e,u,b,i,r]),v=D.useCallback(T=>{bUe({event:T,inputRef:f,hoveredFont:E,filteredFonts:b,onSelect:n,onHover:i,onClose:o})&&(T.preventDefault(),T.stopPropagation())},[E,b,n,i,o]);D.useEffect(()=>(s(),()=>{o()}),[]);const w=D.useMemo(()=>b.filter(T=>m.has(T.value)),[b,m]),S=D.useMemo(()=>b.filter(T=>!m.has(T.value)),[b,m]),k=(T,A)=>O(or,{icon:T.icon,value:T.value,order:A,textStyle:{fontFamily:$m({fontFamily:T.value})},hovered:T.value===E?.value,selected:T.value===e,tabIndex:T.value===e?0:-1,onClick:C=>{n(Number(C.currentTarget.value))},onMouseMove:()=>{E?.value!==T.value&&i(T.value)},children:[T.text,T.badge&&g(s_,{type:T.badge.type,children:T.badge.placeholder})]},T.value),_=[];return w.length&&_.push(g(Qb,{title:M("fontList.sceneFonts"),children:w.map(k)},"group_1")),S.length&&_.push(g(Qb,{title:M("fontList.availableFonts"),children:S.map((T,A)=>k(T,A+w.length))},"group_2")),O(LV,{className:"properties-content",container:a,style:{width:"15rem"},onClose:o,onPointerLeave:r,onKeyDown:v,children:[g(NV,{ref:f,placeholder:M("quickSearch.placeholder"),onChange:Ya(d,20)}),g(PV,{className:"dropdown-menu fonts manual-hover",placeholder:M("fontList.empty"),children:_.length?_:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),vUe=({selectedFontFamily:e})=>{const t=D.useMemo(()=>!!(e&&!_Ue(e)),[e]);return g(D5,{asChild:!0,children:g("div",{children:g(B9,{standalone:!0,icon:k9,title:M("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},VV=[{value:Ye.Excalifont,icon:T5,text:M("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:Ye.Nunito,icon:r4,text:M("labels.normal"),testId:"font-family-normal"},{value:Ye["Comic Shanns"],icon:yH,text:M("labels.code"),testId:"font-family-code"}],wUe=new Set(VV.map(e=>e.value)),_Ue=e=>e?wUe.has(e):!1,TUe=se.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:i,onHover:r,onLeave:s,onPopupChange:o})=>{const a=D.useMemo(()=>VV,[]),l=D.useCallback(c=>{c&&i(c)},[i]);return O("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[g("div",{className:"buttonList",children:g(Zo,{type:"button",options:a,value:t,onClick:l})}),g(kV,{}),O(R5,{open:e,onOpenChange:o,children:[g(vUe,{selectedFontFamily:t}),e&&g(EUe,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:r,onLeave:s,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),P5=({icon:e})=>g("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),m4=({label:e,open:t,openTrigger:n,children:i,className:r,showCollapsedIcon:s=!0})=>O(de,{children:[O("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:r,onClick:n,children:[e,s&&g(P5,{icon:t?Fde:MH})]}),t&&g("div",{style:{display:"flex",flexDirection:"column"},children:i})]}),SUe=$t(!1);function IUe({options:e,value:t,label:n,onChange:i,onClose:r,numberOfOptionsToAlwaysShow:s=e.length}){const o=ei(),a=h=>{const m=e.find(p=>p.keyBinding===h.key.toLowerCase());if(!(h.metaKey||h.altKey||h.ctrlKey)&&m)i(m.value),h.preventDefault();else if(h.key===B.TAB){const p=e.findIndex(b=>b.value===t),y=h.shiftKey?(e.length+p-1)%e.length:(p+1)%e.length;i(e[y].value)}else if(d1(h.key)){const p=Y0().rtl,y=e.findIndex(b=>b.value===t);if(y!==-1){const b=e.length;let E=y;switch(h.key){case(p?B.ARROW_LEFT:B.ARROW_RIGHT):E=(y+1)%b;break;case(p?B.ARROW_RIGHT:B.ARROW_LEFT):E=(b+y-1)%b;break;case B.ARROW_DOWN:{E=(y+(s??1))%b;break}case B.ARROW_UP:{E=(b+y-(s??1))%b;break}}i(e[E].value)}h.preventDefault()}else(h.key===B.ESCAPE||h.key===B.ENTER)&&(h.preventDefault(),r());h.nativeEvent.stopImmediatePropagation(),h.stopPropagation()},[l,c]=cn(SUe),u=se.useMemo(()=>e.slice(0,s),[e,s]),d=se.useMemo(()=>e.slice(s),[e,s]);D.useEffect(()=>{u.some(h=>h.value===t)||c(!0)},[t,u,c]);const f=h=>g("div",{className:"picker-content",children:h.map((m,p)=>O("button",{type:"button",className:he("picker-option",{active:t===m.value}),onClick:y=>{i(m.value)},title:`${m.text} ${m.keyBinding&&`— ${m.keyBinding.toUpperCase()}`}`,"aria-label":m.text||"none","aria-keyshortcuts":m.keyBinding||void 0,ref:y=>{t===m.value&&setTimeout(()=>{y?.focus()},0)},children:[m.icon,m.keyBinding&&g("span",{className:"picker-keybinding",children:m.keyBinding})]},m.text))});return g(J9,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:O("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[f(u),d.length>0&&g(m4,{label:M("labels.more_options"),open:l,openTrigger:()=>{c(h=>!h)},className:"picker-collapsible",children:f(d)})]})})}function vM({value:e,label:t,options:n,onChange:i,group:r="",numberOfOptionsToAlwaysShow:s}){const[o,a]=se.useState(!1),l=se.useRef(null);return g("div",{children:O(R5,{open:o,onOpenChange:c=>a(c),children:[g(D5,{name:r,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:n.find(c=>c.value===e)?.icon}),o&&g(IUe,{options:n,value:e,label:t,onChange:i,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:s})]})})}const xUe=({updateData:e,app:t,testId:n})=>{const i=se.useRef(null),r=se.useRef(null),s=t.scene.getSelectedElements(t.state);let o=!0;const a=s.at(0),c=s.reduce((u,d)=>(u!=null&&u!==d.opacity&&(o=!1),u==null||u>d.opacity?d.opacity:u),a?.opacity??null)??t.state.currentItemOpacity;return D.useEffect(()=>{if(i.current&&r.current){const u=i.current,d=r.current,f=u.offsetWidth,h=15,m=c/100*(f-h)+h/2;d.style.left=`${m}px`,u.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${c}%, var(--button-bg) ${c}%, var(--button-bg) 100%)`}},[c]),O("label",{className:"control-label",children:[M("labels.opacity"),O("div",{className:"range-wrapper",children:[g("input",{style:{"--color-slider-track":o?void 0:"var(--button-bg)"},ref:i,type:"range",min:"0",max:"100",step:"10",onChange:u=>{e(+u.target.value)},value:c,className:"range-input","data-testid":n}),g("div",{className:"value-bubble",ref:r,children:c!==0?c:null}),g("div",{className:"zero-label",children:"0"})]})]})},$V=.1,ir=(e,t,n,i=!1)=>{const r=be(Ne(e,t,{includeBoundTextElement:i}));return e.map(s=>r.get(s.id)||s.id===t.editingTextElement?.id?n(s):s)},Er=function(e,t,n,i,r){const s=t.state.editingTextElement,o=Lt(e);let a=null;if(s&&(a=n(s)),!a)if(Hn(o,t.state)){const c=t.scene.getSelectedElements(t.state),u=i===!0?c:c.filter(d=>i(d));a=xF(u,n)??(typeof r=="function"?r(!0):r)}else a=typeof r=="function"?r(!1):r;return a},CUe=(e,t,n)=>Ft(t)||!t.autoResize?t:n.mutateElement(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2}),o_=(e,t,n,i,r)=>{const s=new Set,o=ir(e,t,a=>{if(le(a)){const l=i(a);s.add(l);let c=Ee(a,{fontSize:l});return Hi(c,n.scene.getContainerElement(a),n.scene),c=CUe(a,c,n.scene),c}return a},!0);return Ne(e,t,{includeBoundTextElement:!0}).forEach(a=>{le(a)&&pr(a,n.scene)}),{elements:o,appState:{...t,currentItemFontSize:s.size===1?[...s][0]:r??t.currentItemFontSize},captureUpdate:j.IMMEDIATELY}};re({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:ir(e,t,i=>R7(i.type)?Ee(i,{strokeColor:n.currentItemStrokeColor}):i,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?j.IMMEDIATELY:j.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O(de,{children:[g("h3",{"aria-hidden":"true",children:M("labels.stroke")}),g(i_,{topPicks:jP,palette:pie,type:"elementStroke",label:M("labels.stroke"),color:Er(e,i,r=>r.strokeColor,!0,r=>r?null:t.currentItemStrokeColor),onChange:r=>n({currentItemStrokeColor:r}),elements:e,appState:t,updateData:n})]})});re({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n,i)=>{if(!n.currentItemBackgroundColor)return{appState:{...t,...n},captureUpdate:j.EVENTUALLY};let r;const s=i.scene.getSelectedElements(t);if(!ds(n.currentItemBackgroundColor)&&s.every(a=>sn(a)&&jF(a.points))){const a=be(s);r=e.map(l=>a.has(l.id)&&sn(l)?Ee(l,{backgroundColor:n.currentItemBackgroundColor,...f9(l,!0)}):l)}else r=ir(e,t,a=>Ee(a,{backgroundColor:n.currentItemBackgroundColor}));return{elements:r,appState:{...t,...n},captureUpdate:j.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O(de,{children:[g("h3",{"aria-hidden":"true",children:M("labels.background")}),g(i_,{topPicks:YP,palette:Uie,type:"elementBackground",label:M("labels.background"),color:Er(e,i,r=>r.backgroundColor,!0,r=>r?null:t.currentItemBackgroundColor),onChange:r=>n({currentItemBackgroundColor:r}),elements:e,appState:t,updateData:n})]})});re({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,i)=>(tt("element","changeFillStyle",`${n} (${i.device.editor.isMobile?"mobile":"desktop"})`),{elements:ir(e,t,r=>Ee(r,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:j.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=Ne(e,t),s=r.length>0&&r.every(o=>o.fillStyle==="zigzag");return O("fieldset",{children:[g("legend",{children:M("labels.fill")}),g("div",{className:"buttonList",children:g(Zo,{type:"button",options:[{value:"hachure",text:`${M(s?"labels.zigzag":"labels.hachure")} (${q("Alt-Click")})`,icon:s?Mue:kue,active:s?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:M("labels.crossHatch"),icon:Rue,testId:"fill-cross-hatch"},{value:"solid",text:M("labels.solid"),icon:Due,testId:"fill-solid"}],value:Er(e,i,o=>o.fillStyle,o=>o.hasOwnProperty("fillStyle"),o=>o?null:t.currentItemFillStyle),onClick:(o,a)=>{const l=a.altKey&&o==="hachure"&&r.every(c=>c.fillStyle==="hachure")?"zigzag":o;n(l)}})})]})}});re({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>Ee(i,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:j.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O("fieldset",{children:[g("legend",{children:M("labels.strokeWidth")}),g("div",{className:"buttonList",children:g(Zo,{group:"stroke-width",options:[{value:M8.thin,text:M("labels.thin"),icon:bH,testId:"strokeWidth-thin"},{value:M8.bold,text:M("labels.bold"),icon:Lue,testId:"strokeWidth-bold"},{value:M8.extraBold,text:M("labels.extraBold"),icon:Oue,testId:"strokeWidth-extraBold"}],value:Er(e,i,r=>r.strokeWidth,r=>r.hasOwnProperty("strokeWidth"),r=>r?null:t.currentItemStrokeWidth),onChange:r=>n(r)})})]})});re({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>Ee(i,{seed:Ts(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:j.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O("fieldset",{children:[g("legend",{children:M("labels.sloppiness")}),g("div",{className:"buttonList",children:g(Zo,{group:"sloppiness",options:[{value:0,text:M("labels.architect"),icon:Fue},{value:1,text:M("labels.artist"),icon:Bue},{value:2,text:M("labels.cartoonist"),icon:zue}],value:Er(e,i,r=>r.roughness,r=>r.hasOwnProperty("roughness"),r=>r?null:t.currentItemRoughness),onChange:r=>n(r)})})]})});re({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>Ee(i,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:j.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O("fieldset",{children:[g("legend",{children:M("labels.strokeStyle")}),g("div",{className:"buttonList",children:g(Zo,{group:"strokeStyle",options:[{value:"solid",text:M("labels.strokeStyle_solid"),icon:bH},{value:"dashed",text:M("labels.strokeStyle_dashed"),icon:Nue},{value:"dotted",text:M("labels.strokeStyle_dotted"),icon:Pue}],value:Er(e,i,r=>r.strokeStyle,r=>r.hasOwnProperty("strokeStyle"),r=>r?null:t.currentItemStrokeStyle),onChange:r=>n(r)})})]})});re({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>Ee(i,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:j.IMMEDIATELY}),PanelComponent:({app:e,updateData:t})=>g(xUe,{updateData:t,app:e,testId:"opacity"})});re({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,i)=>o_(e,t,i,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O("fieldset",{children:[g("legend",{children:M("labels.fontSize")}),g("div",{className:"buttonList",children:g(Zo,{group:"font-size",options:[{value:16,text:M("labels.small"),icon:ede,testId:"fontSize-small"},{value:20,text:M("labels.medium"),icon:tde,testId:"fontSize-medium"},{value:28,text:M("labels.large"),icon:nde,testId:"fontSize-large"},{value:36,text:M("labels.veryLarge"),icon:ide,testId:"fontSize-veryLarge"}],value:Er(e,i,r=>{if(le(r))return r.fontSize;const s=Ce(r,i.scene.getNonDeletedElementsMap());return s?s.fontSize:null},r=>le(r)||Ce(r,i.scene.getNonDeletedElementsMap())!==null,r=>r?null:t.currentItemFontSize||dl),onChange:r=>n(r)})})]})});const wM=re({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:I5,trackEvent:!1,perform:(e,t,n,i)=>o_(e,t,i,r=>Math.round(1/(1+$V)*r.fontSize)),keyTest:e=>e[B.CTRL_OR_CMD]&&e.shiftKey&&(e.key===B.CHEVRON_LEFT||e.key===B.COMMA)}),_M=re({name:"increaseFontSize",label:"labels.increaseFontSize",icon:I5,trackEvent:!1,perform:(e,t,n,i)=>o_(e,t,i,r=>Math.round(r.fontSize*(1+$V))),keyTest:e=>e[B.CTRL_OR_CMD]&&e.shiftKey&&(e.key===B.CHEVRON_RIGHT||e.key===B.PERIOD)});re({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,i)=>{const{cachedElements:r,resetAll:s,resetContainers:o,...a}=n;if(s)return{elements:ir(e,t,p=>{const y=r?.get(p.id);return y?Ee(p,{...y}):p},!0),appState:{...t,...a},captureUpdate:j.NEVER};const{currentItemFontFamily:l,currentHoveredFontFamily:c}=n;let u=j.EVENTUALLY,d,f=!1;if(l)d=l,u=j.IMMEDIATELY;else if(c){d=c,u=j.EVENTUALLY;const m=Ne(e,t,{includeBoundTextElement:!0}).filter(p=>le(p));if(m.length>200)f=!0;else{let p=0,y=0;for(;p<m.length&&y<5e3;){const b=m[p];y+=b?.originalText.length||0,p++}y>5e3&&(f=!0)}}const h={appState:{...t,...a},captureUpdate:u};if(d&&!f){const m=new Map;let p=new Set,y=!1;const b=Array.from(He.loadedFontsCache.values()),E=Object.entries(Ye).find(([S,k])=>k===d)?.[0];c&&E&&b.some(S=>S.startsWith(E))&&(y=!0),Object.assign(h,{elements:ir(e,t,S=>{if(le(S)&&(S.fontFamily!==d||l)){const k=Ee(S,{fontFamily:d,lineHeight:Tc(d)}),_=r?.get(S.containerId||"")||{},T=i.scene.getContainerElement(S);return o&&T&&_&&i.scene.mutateElement(T,{..._}),y||(p=new Set([...p,...Array.from(k.originalText)])),m.set(k,T),k}return S},!0)});const v=`10px ${$m({fontFamily:d})}`,w=Array.from(p.values()).join();if(y||window.document.fonts.check(v,w))for(const[S,k]of m)Hi(S,k,i.scene);else window.document.fonts.load(v,w).then(S=>{for(const[k,_]of m){const T=i.scene.getElement(k.id),A=_?i.scene.getElement(_.id):null;T&&Hi(T,A,i.scene)}i.fonts.onLoaded(S)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:i})=>{const r=D.useRef(new Map),s=D.useRef(null),[o,a]=D.useState({}),l=D.useRef(!0),c=D.useMemo(()=>{const u=(d,f)=>Er(d,n,h=>{if(le(h))return h.fontFamily;const m=Ce(h,f);return m?m.fontFamily:null},h=>le(h)||Ce(h,f)!==null,h=>h?null:t.currentItemFontFamily||Hc);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?u(Array.from(r.current?.values()??[]),r.current):!o.openPopup&&t.openPopup!=="fontFamily"?u(e,n.scene.getNonDeletedElementsMap()):s.current},[o.openPopup,t,e,n]);return D.useEffect(()=>{s.current=c},[c]),D.useEffect(()=>{Object.keys(o).length&&(i(o),a({}))},[o]),D.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),O("fieldset",{children:[g("legend",{children:M("labels.fontFamily")}),g(TUe,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:c,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:u=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:u}),r.current.clear()},onHover:u=>{a({currentHoveredFontFamily:u,cachedElements:new Map(r.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0})},onPopupChange:u=>{if(u){r.current.clear();const{editingTextElement:d}=t;if(d?.type==="text"){const f=n.scene.getElement(d.id);r.current.set(d.id,Ee(f||d,{},!0))}else{const f=Ne(e,t,{includeBoundTextElement:!0});for(const h of f)r.current.set(h.id,Ee(h,{},!0))}a({openPopup:"fontFamily"})}else{const d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0};l.current?i({...o,...d}):a(d),r.current.clear()}}})]})}});re({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,i)=>({elements:ir(e,t,r=>{if(le(r)){const s=Ee(r,{textAlign:n});return Hi(s,i.scene.getContainerElement(r),i.scene),s}return r},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:j.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=i.scene.getNonDeletedElementsMap();return O("fieldset",{children:[g("legend",{children:M("labels.textAlign")}),g("div",{className:"buttonList",children:g(Zo,{group:"text-align",options:[{value:"left",text:M("labels.left"),icon:sde,testId:"align-left"},{value:"center",text:M("labels.center"),icon:ode,testId:"align-horizontal-center"},{value:"right",text:M("labels.right"),icon:ade,testId:"align-right"}],value:Er(e,i,s=>{if(le(s))return s.textAlign;const o=Ce(s,r);return o?o.textAlign:null},s=>le(s)||Ce(s,r)!==null,s=>s?null:t.currentItemTextAlign),onChange:s=>n(s)})})]})}});re({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:ir(e,t,r=>{if(le(r)){const s=Ee(r,{verticalAlign:n});return Hi(s,i.scene.getContainerElement(r),i.scene),s}return r},!0),appState:{...t},captureUpdate:j.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g("fieldset",{children:g("div",{className:"buttonList",children:g(Zo,{group:"text-align",options:[{value:Or.TOP,text:M("labels.alignTop"),icon:g(lde,{theme:t.theme}),testId:"align-top"},{value:Or.MIDDLE,text:M("labels.centerVertically"),icon:g(ude,{theme:t.theme}),testId:"align-middle"},{value:Or.BOTTOM,text:M("labels.alignBottom"),icon:g(cde,{theme:t.theme}),testId:"align-bottom"}],value:Er(e,i,r=>{if(le(r)&&r.containerId)return r.verticalAlign;const s=Ce(r,i.scene.getNonDeletedElementsMap());return s?s.verticalAlign:null},r=>le(r)||Ce(r,i.scene.getNonDeletedElementsMap())!==null,r=>r?null:Or.MIDDLE),onChange:r=>n(r)})})})});re({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>ce(i)?i:Ee(i,{roundness:n==="round"?{type:_d(i.type)?ln.ADAPTIVE_RADIUS:ln.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:j.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i,renderAction:r})=>{const o=mB(Lt(e),t).some(a=>a.roundness?.type===ln.LEGACY);return O("fieldset",{children:[g("legend",{children:M("labels.edges")}),O("div",{className:"buttonList",children:[g(Zo,{group:"edges",options:[{value:"sharp",text:M("labels.sharp"),icon:Hue},{value:"round",text:M("labels.round"),icon:Vue}],value:Er(e,i,a=>o?null:a.roundness?"round":"sharp",a=>!_e(a)&&a.hasOwnProperty("roundness"),a=>a?null:t.currentItemRoundness),onChange:a=>n(a)}),r("togglePolygon")]})]})}});const TM=e=>[{value:null,text:M("labels.arrowhead_none"),keyBinding:"q",icon:$ue},{value:"arrow",text:M("labels.arrowhead_arrow"),keyBinding:"w",icon:g(i4,{flip:e})},{value:"triangle",text:M("labels.arrowhead_triangle"),icon:g(Yue,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:M("labels.arrowhead_triangle_outline"),icon:g(Wue,{flip:e}),keyBinding:"r"},{value:"circle",text:M("labels.arrowhead_circle"),keyBinding:"a",icon:g(Gue,{flip:e})},{value:"circle_outline",text:M("labels.arrowhead_circle_outline"),keyBinding:"s",icon:g(Xue,{flip:e})},{value:"diamond",text:M("labels.arrowhead_diamond"),icon:g(Kue,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:M("labels.arrowhead_diamond_outline"),icon:g(Zue,{flip:e}),keyBinding:"f"},{value:"bar",text:M("labels.arrowhead_bar"),keyBinding:"z",icon:g(jue,{flip:e})},{value:"crowfoot_one",text:M("labels.arrowhead_crowfoot_one"),icon:g(Que,{flip:e}),keyBinding:"x"},{value:"crowfoot_many",text:M("labels.arrowhead_crowfoot_many"),icon:g(que,{flip:e}),keyBinding:"c"},{value:"crowfoot_one_or_many",text:M("labels.arrowhead_crowfoot_one_or_many"),icon:g(Jue,{flip:e}),keyBinding:"v"}];re({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>{if(we(i)){const{position:r,type:s}=n;if(r==="start")return Ee(i,{startArrowhead:s});if(r==="end")return Ee(i,{endArrowhead:s})}return i}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:j.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=Y0().rtl;return O("fieldset",{children:[g("legend",{children:M("labels.arrowheads")}),O("div",{className:"iconSelectList buttonList",children:[g(vM,{label:"arrowhead_start",options:TM(!r),value:Er(e,i,s=>we(s)&&Bb(s.type)?s.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:s=>n({position:"start",type:s}),numberOfOptionsToAlwaysShow:4}),g(vM,{label:"arrowhead_end",group:"arrowheads",options:TM(!!r),value:Er(e,i,s=>we(s)&&Bb(s.type)?s.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:s=>n({position:"end",type:s}),numberOfOptionsToAlwaysShow:4})]})]})}});re({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,i)=>{const r=ir(e,t,a=>{if(!_e(a))return a;let l=Ee(a,{roundness:n===ii.round?{type:ln.PROPORTIONAL_RADIUS}:null,elbowed:n===ii.elbow,points:n===ii.elbow||a.elbowed?[a.points[0],a.points[a.points.length-1]]:a.points});if(ce(l)){l.fixedSegments=null;const c=i.scene.getNonDeletedElementsMap();i.dismissLinearEditor();const u=Z.getPointAtIndexGlobalCoordinates(l,0,c),d=Z.getPointAtIndexGlobalCoordinates(l,-1,c),f=l.startBinding&&c.get(l.startBinding.elementId),h=l.endBinding&&c.get(l.endBinding.elementId),m=f&&l.startBinding?{...l.startBinding,...Lb(l,f,"start",c)}:null,p=h&&l.endBinding?{...l.endBinding,...Lb(l,h,"end",c)}:null;l={...l,startBinding:m,endBinding:p,...qh(l,c,{points:[u,d].map(y=>I(y[0]-l.x,y[1]-l.y)),startBinding:m,endBinding:p,fixedSegments:null})}}else{const c=i.scene.getNonDeletedElementsMap();if(l.startBinding){const u=c.get(l.startBinding.elementId);u&&Vo(l,u,"start",i.scene)}if(l.endBinding){const u=c.get(l.endBinding.elementId);u&&Vo(l,u,"end",i.scene)}}return l}),s={...t,currentItemArrowType:n},o=t.selectedLinearElement?.elementId;if(o){const a=r.find(l=>l.id===o);a&&(s.selectedLinearElement=new Z(a,be(e)))}return{elements:r,appState:s,captureUpdate:j.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O("fieldset",{children:[g("legend",{children:M("labels.arrowtypes")}),g("div",{className:"buttonList",children:g(Zo,{group:"arrowtypes",options:[{value:ii.sharp,text:M("labels.arrowtype_sharp"),icon:xH,testId:"sharp-arrow"},{value:ii.round,text:M("labels.arrowtype_round"),icon:AH,testId:"round-arrow"},{value:ii.elbow,text:M("labels.arrowtype_elbowed"),icon:CH,testId:"elbow-arrow"}],value:Er(e,i,r=>_e(r)?r.elbowed?ii.elbow:r.roundness?ii.round:ii.sharp:null,r=>_e(r),r=>r?null:t.currentItemArrowType),onChange:r=>n(r)})})]})});const AUe=Cw.includes(devicePixelRatio)?devicePixelRatio:1,Xo=()=>({showWelcomeScreen:!1,theme:Te.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:nn.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:nn.fillStyle,currentItemFontFamily:Hc,currentItemFontSize:dl,currentItemOpacity:nn.opacity,currentItemRoughness:nn.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:nn.strokeColor,currentItemRoundness:"round",currentItemArrowType:ii.round,currentItemStrokeStyle:nn.strokeStyle,currentItemStrokeWidth:nn.strokeWidth,currentItemTextAlign:Hm,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:nn.locked,fromSelection:!1,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:AUe,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:db,gridStep:nF,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:wf.generalStats|wf.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:Pe.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:null,lockedMultiSelections:{},activeLockedId:null}),MUe=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1},lockedMultiSelections:{browser:!0,export:!0,server:!0},activeLockedId:{browser:!1,export:!1,server:!1}}),a_=(e,t)=>{const n={};for(const i of Object.keys(e))if(MUe[i]?.[t]){const s=e[i];n[i]=s}return n},GV=e=>a_(e,"browser"),XV=e=>a_(e,"export"),kUe=e=>a_(e,"server"),Uo=({activeTool:e})=>e.type==="eraser",_h=({activeTool:e})=>e.type==="hand",s0=()=>{const e=document.querySelector(".excalidraw-tooltip");if(e)return e;const t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},jV=(e,t,n="bottom")=>{const i=e.getBoundingClientRect(),r=window.innerWidth,s=window.innerHeight,o=5;let a=t.left+t.width/2-i.width/2;a<0?a=o:a+i.width>=r&&(a=r-i.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+i.height>=s&&(l=t.top-i.height-o)):(l=t.top-i.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},RUe=(e,t,n,i)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=i?"50ch":"10ch",t.style.maxWidth=i?"50ch":"15ch",t.textContent=n;const r=e.getBoundingClientRect();jV(t,r)},il=({children:e,label:t,long:n=!1,style:i,disabled:r})=>(D.useEffect(()=>()=>s0().classList.remove("excalidraw-tooltip--visible"),[]),r?null:g("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:s=>RUe(s.currentTarget,s0(),t,n),onPointerLeave:()=>s0().classList.remove("excalidraw-tooltip--visible"),style:i,children:e})),YV='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',DUe='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',WV='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',LUe=`data:${Ue.svg},${encodeURIComponent(`${YV}${WV}</svg>`)}`,OUe=`data:${Ue.svg},${encodeURIComponent(`${YV}${DUe}${WV}</svg>`)}`,fo=e=>{e&&(e.style.cursor="")},_t=(e,t)=>{e&&(e.style.cursor=t)};let ao,SM;const KV=(e,t)=>{const i=()=>{const r=t===Te.DARK;ao=document.createElement("canvas"),ao.theme=t,ao.height=20,ao.width=20;const s=ao.getContext("2d");s.lineWidth=1,s.beginPath(),s.arc(ao.width/2,ao.height/2,5,0,2*Math.PI),s.fillStyle=r?ci.black:ci.white,s.fill(),s.strokeStyle=r?ci.white:ci.black,s.stroke(),SM=ao.toDataURL(Ue.svg)};(!ao||ao.theme!==t)&&i(),_t(e,`url(${SM}) ${20/2} ${20/2}, auto`)},ho=(e,t)=>{if(e)if(t.activeTool.type==="selection")fo(e);else if(_h(t))e.style.cursor=vt.GRAB;else if(Uo(t))KV(e,t.theme);else if(t.activeTool.type==="laser"){const n=t.theme===Te.LIGHT?LUe:OUe;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=vt.AUTO):e.style.cursor=vt.CROSSHAIR},bu=({viewportX:e,viewportY:t,nextZoom:n},i)=>{const r=e-i.offsetLeft,s=t-i.offsetTop,o=i.zoom.value,a=i.scrollX+(r-r/o),l=i.scrollY+(s-s/o),c=-(r-r/n),u=-(s-s/n);return{scrollX:a+c,scrollY:l+u,zoom:{value:n}}};re({name:"changeViewBackgroundColor",label:"labels.canvasBackground",trackEvent:!1,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?j.IMMEDIATELY:j.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i})=>g(i_,{palette:null,topPicks:WP,label:M("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:r=>n({viewBackgroundColor:r}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});const o0=re({name:"clearCanvas",label:"labels.clearCanvas",icon:Cc,trackEvent:{category:"canvas"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&t.openDialog?.name!=="elementLinkSelector",perform:(e,t,n,i)=>(i.imageCache.clear(),{elements:e.map(r=>Ee(r,{isDeleted:!0})),appState:{...Xo(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:j.IMMEDIATELY})}),IM=re({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:MA,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...bu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:ka(t.zoom.value+r5)},t),userToFollow:null},captureUpdate:j.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Be,{type:"button",className:"zoom-in-button zoom-button",icon:MA,title:`${M("buttons.zoomIn")} — ${q("CtrlOrCmd++")}`,"aria-label":M("buttons.zoomIn"),disabled:t.zoom.value>=Iw,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Ke.EQUAL||e.code===Ke.NUM_ADD)&&(e[B.CTRL_OR_CMD]||e.shiftKey)}),xM=re({name:"zoomOut",label:"buttons.zoomOut",icon:kA,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...bu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:ka(t.zoom.value-r5)},t),userToFollow:null},captureUpdate:j.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Be,{type:"button",className:"zoom-out-button zoom-button",icon:kA,title:`${M("buttons.zoomOut")} — ${q("CtrlOrCmd+-")}`,"aria-label":M("buttons.zoomOut"),disabled:t.zoom.value<=Sw,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Ke.MINUS||e.code===Ke.NUM_SUBTRACT)&&(e[B.CTRL_OR_CMD]||e.shiftKey)}),CM=re({name:"resetZoom",label:"buttons.resetZoom",icon:fue,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...bu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:ka(1)},t),userToFollow:null},captureUpdate:j.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(il,{label:M("buttons.resetZoom"),style:{height:"100%"},children:O(Be,{type:"button",className:"reset-zoom-button zoom-button",title:M("buttons.resetZoom"),"aria-label":M("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===Ke.ZERO||e.code===Ke.NUM_ZERO)&&(e[B.CTRL_OR_CMD]||e.shiftKey)}),NUe=(e,t,n=1)=>{const[i,r,s,o]=e,a=s-i,l=t.width/a,c=o-r,u=t.height/c,f=Math.min(l,u)*Ve(n,.1,1);return Math.min(f,1)},ZV=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:i=!1,viewportZoomFactor:r=1,minZoom:s=-1/0,maxZoom:o=1/0})=>{r=Ve(r,Sw,Iw);const[a,l,c,u]=e,d=(a+c)/2,f=(l+u)/2,h=n?.left??0,m=n?.top??0,p=n?.right??0,y=n?.bottom??0,b=t.width-h-p,E=t.height-m-y;let v;if(i){const k=c-a,_=u-l;v=Math.min(b/k,E/_)*r}else v=NUe(e,{width:b,height:E},r);const w=ka(Ve(tre(v,r5,"floor"),s,o)),S=sH({scenePoint:{x:d,y:f},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:w}});return{appState:{...t,scrollX:S.scrollX,scrollY:S.scrollY,zoom:{value:w}},captureUpdate:j.EVENTUALLY}},F5=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})=>{const a=ft(Lt(t));return ZV({canvasOffsets:e,bounds:a,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})};re({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:F9,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return F5({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===Ke.TWO&&e.shiftKey&&!e.altKey&&!e[B.CTRL_OR_CMD]});re({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:F9,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return F5({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===Ke.THREE&&e.shiftKey&&!e.altKey&&!e[B.CTRL_OR_CMD]});re({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:F9,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>F5({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()}),keyTest:e=>e.code===Ke.ONE&&e.shiftKey&&!e.altKey&&!e[B.CTRL_OR_CMD]});const Jb=re({name:"toggleTheme",label:(e,t)=>t.theme===Te.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===Te.LIGHT?t4:n4,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===Te.LIGHT?Te.DARK:Te.LIGHT)},captureUpdate:j.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===Ke.D,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.toggleTheme});re({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return Uo(t)?n=Xt(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=Xt(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:j.IMMEDIATELY}},keyTest:e=>e.key===B.E});re({name:"toggleLassoTool",label:"toolBar.lasso",icon:J7,trackEvent:{category:"toolbar"},perform:(e,t,n,i)=>{let r;return t.activeTool.type!=="lasso"?(r=Xt(t,{type:"lasso",fromSelection:!1}),_t(i.interactiveCanvas,vt.CROSSHAIR)):r=Xt(t,{type:"selection"}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:j.NEVER}}});const PUe=re({name:"toggleHandTool",label:"toolBar.hand",trackEvent:{category:"toolbar"},icon:vH,viewMode:!1,perform:(e,t,n,i)=>{let r;return _h(t)?r=Xt(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(r=Xt(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),_t(i.interactiveCanvas,vt.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:j.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[B.CTRL_OR_CMD]&&e.key===B.H});re({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,i)=>{const r=Xt(t,{type:"embeddable"});return ho(i.canvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:Xt(t,{type:"embeddable"})},captureUpdate:j.EVENTUALLY}}});const Rs=re({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,i)=>{const{interactiveCanvas:r,focusContainer:s,scene:o}=i,{event:a,sceneCoords:l}=n??{},c=o.getNonDeletedElementsMap();if(a&&t.selectedLinearElement){const h=Z.handlePointerUp(a,t.selectedLinearElement,t,i.scene),{startBindingElement:m,endBindingElement:p}=h,y=i.scene.getElement(h.elementId);if(Aa(y)&&Rb(y,m,p,i.scene),h!==t.selectedLinearElement){let b=e;return y&&oc(y)&&(b=b.filter(E=>E.id!==y.id)),{elements:b,appState:{selectedLinearElement:{...h,selectedPointsIndices:null},suggestedBindings:[]},captureUpdate:j.IMMEDIATELY}}}if(t.editingLinearElement){const{elementId:h,startBindingElement:m,endBindingElement:p}=t.editingLinearElement,y=Z.getElement(h,c);if(y)return Aa(y)&&Rb(y,m,p,o),sn(y)&&!x7(y.points)&&o.mutateElement(y,{polygon:!1}),{elements:y.points.length<2||oc(y)?e.filter(b=>b.id!==y.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:j.IMMEDIATELY}}let u=e;window.document.activeElement instanceof HTMLElement&&s();let d=null;if(t.multiElement)d=t.multiElement;else if(t.newElement?.type==="freedraw"||Aa(t.newElement))d=t.newElement;else if(Object.keys(t.selectedElementIds).length===1){const h=c.get(Object.keys(t.selectedElementIds)[0]);h&&(d=h)}if(d){if(t.multiElement&&d.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){const{points:h,lastCommittedPoint:m}=d;(!m||h[h.length-1]!==m)&&o.mutateElement(d,{points:d.points.slice(0,-1)})}if(d&&oc(d)&&(u=u.filter(h=>h.id!==d.id)),we(d)||yr(d)){const h=Bo(d.points,t.zoom.value);if(h&&(sn(d)||yr(d))){const m=d.points,p=m[0],y=m.map((b,E)=>E===m.length-1?I(p[0],p[1]):b);sn(d)?o.mutateElement(d,{points:y,polygon:!0}):o.mutateElement(d,{points:y})}if(sn(d)&&!x7(d.points)&&o.mutateElement(d,{polygon:!1}),Aa(d)&&!h&&d.points.length>1&&Nu(t)){const m=l??Fa(Z.getPointAtIndexGlobalCoordinates(d,-1,be(e)));mae(d,t,m,o)}}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!d)&&fo(r);let f;return t.activeTool.type==="eraser"?f=Xt(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):f=Xt(t,{type:"selection"}),{elements:u,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&d?t.activeTool:f,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:d&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[d.id]:!0}:t.selectedElementIds,selectedLinearElement:d&&we(d)?new Z(d,be(u)):t.selectedLinearElement},captureUpdate:j.IMMEDIATELY}},keyTest:(e,t)=>e.key===B.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===B.ESCAPE||e.key===B.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>g(Be,{type:"button",icon:vue,title:M("buttons.done"),"aria-label":M("buttons.done"),onClick:t,visible:e.multiElement!=null,size:n?.size||"medium",style:{pointerEvents:"all"}})}),l_=({children:e,checked:t,onChange:n,className:i})=>O("div",{className:he("Checkbox",i,{"is-checked":t}),onClick:r=>{n(!t,r),r.currentTarget.querySelector(".Checkbox-box").focus()},children:[g("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:gue}),g("div",{className:"Checkbox-label",children:e})]}),FUe=e=>{const t=e.title||(e.value===Te.DARK?M("buttons.lightMode"):M("buttons.darkMode"));return g(Be,{type:"icon",icon:e.value===Te.LIGHT?AM.MOON:AM.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===Te.DARK?Te.LIGHT:Te.DARK),"data-testid":"toggle-dark-mode"})},AM={SUN:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},BUe=e=>{const{id:t}=Qo(),[n,i]=D.useState(e.value),r=o=>{e.ignoreFocus||kre(o.target);const a=o.target.value;a!==e.value&&e.onChange(a)},s=o=>{if(o.key===B.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return O("div",{className:"ProjectName",children:[g("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),g("input",{type:"text",className:"TextInput",onBlur:r,onKeyDown:s,id:`${t}-filename`,value:n,onChange:o=>i(o.target.value)})]})};/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const zUe=4,MM=0,kM=1,HUe=2;function sg(e){let t=e.length;for(;--t>=0;)e[t]=0}const VUe=0,qV=1,$Ue=2,GUe=3,XUe=258,c_=29,op=256,Q0=op+1+c_,jf=30,u_=19,QV=2*Q0+1,yu=15,uE=16,jUe=7,d_=256,JV=16,e$=17,t$=18,p4=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),m2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),YUe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),n$=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WUe=512,ha=new Array((Q0+2)*2);sg(ha);const a0=new Array(jf*2);sg(a0);const J0=new Array(WUe);sg(J0);const em=new Array(XUe-GUe+1);sg(em);const f_=new Array(c_);sg(f_);const e6=new Array(jf);sg(e6);function dE(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let i$,r$,s$;function fE(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const o$=e=>e<256?J0[e]:J0[256+(e>>>7)],tm=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},gr=(e,t,n)=>{e.bi_valid>uE-n?(e.bi_buf|=t<<e.bi_valid&65535,tm(e,e.bi_buf),e.bi_buf=t>>uE-e.bi_valid,e.bi_valid+=n-uE):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},_o=(e,t,n)=>{gr(e,n[t*2],n[t*2+1])},a$=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},KUe=e=>{e.bi_valid===16?(tm(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},ZUe=(e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,f,h,m,p=0;for(f=0;f<=yu;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<QV;c++)u=e.heap[c],f=n[n[u*2+1]*2+1]+1,f>l&&(f=l,p++),n[u*2+1]=f,!(u>i)&&(e.bl_count[f]++,h=0,u>=a&&(h=o[u-a]),m=n[u*2],e.opt_len+=m*(f+h),s&&(e.static_len+=m*(r[u*2+1]+h)));if(p!==0){do{for(f=l-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(f=l;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--c],!(d>i)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}},l$=(e,t,n)=>{const i=new Array(yu+1);let r=0,s,o;for(s=1;s<=yu;s++)i[s]=r=r+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=a$(i[a]++,a))}},qUe=()=>{let e,t,n,i,r;const s=new Array(yu+1);for(n=0,i=0;i<c_-1;i++)for(f_[i]=n,e=0;e<1<<p4[i];e++)em[n++]=i;for(em[n-1]=i,r=0,i=0;i<16;i++)for(e6[i]=r,e=0;e<1<<m2[i];e++)J0[r++]=i;for(r>>=7;i<jf;i++)for(e6[i]=r<<7,e=0;e<1<<m2[i]-7;e++)J0[256+r++]=i;for(t=0;t<=yu;t++)s[t]=0;for(e=0;e<=143;)ha[e*2+1]=8,e++,s[8]++;for(;e<=255;)ha[e*2+1]=9,e++,s[9]++;for(;e<=279;)ha[e*2+1]=7,e++,s[7]++;for(;e<=287;)ha[e*2+1]=8,e++,s[8]++;for(l$(ha,Q0+1,s),e=0;e<jf;e++)a0[e*2+1]=5,a0[e*2]=a$(e,5);i$=new dE(ha,p4,op+1,Q0,yu),r$=new dE(a0,m2,0,jf,yu),s$=new dE(new Array(0),YUe,0,u_,jUe)},c$=e=>{let t;for(t=0;t<Q0;t++)e.dyn_ltree[t*2]=0;for(t=0;t<jf;t++)e.dyn_dtree[t*2]=0;for(t=0;t<u_;t++)e.bl_tree[t*2]=0;e.dyn_ltree[d_*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},u$=e=>{e.bi_valid>8?tm(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},QUe=(e,t,n,i)=>{u$(e),tm(e,n),tm(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},RM=(e,t,n,i)=>{const r=t*2,s=n*2;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},hE=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&RM(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!RM(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},DM=(e,t,n)=>{let i,r,s=0,o,a;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],r=e.pending_buf[e.l_buf+s],s++,i===0?_o(e,r,t):(o=em[r],_o(e,o+op+1,t),a=p4[o],a!==0&&(r-=f_[o],gr(e,r,a)),i--,o=o$(i),_o(e,o,n),a=m2[o],a!==0&&(i-=e6[o],gr(e,i,a)));while(s<e.last_lit);_o(e,d_,t)},U4=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,c;for(e.heap_len=0,e.heap_max=QV,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[c*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)hE(e,n,o);c=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],hE(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[c*2]=n[o*2]+n[a*2],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=c,e.heap[1]=c++,hE(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],ZUe(e,t),l$(n,l,e.bl_count)},LM=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)&&(a<c?e.bl_tree[s*2]+=a:s!==0?(s!==r&&e.bl_tree[s*2]++,e.bl_tree[JV*2]++):a<=10?e.bl_tree[e$*2]++:e.bl_tree[t$*2]++,a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},OM=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=n;i++)if(s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)){if(a<c)do _o(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==r&&(_o(e,s,e.bl_tree),a--),_o(e,JV,e.bl_tree),gr(e,a-3,2)):a<=10?(_o(e,e$,e.bl_tree),gr(e,a-3,3)):(_o(e,t$,e.bl_tree),gr(e,a-11,7));a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},JUe=e=>{let t;for(LM(e,e.dyn_ltree,e.l_desc.max_code),LM(e,e.dyn_dtree,e.d_desc.max_code),U4(e,e.bl_desc),t=u_-1;t>=3&&e.bl_tree[n$[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},e2e=(e,t,n,i)=>{let r;for(gr(e,t-257,5),gr(e,n-1,5),gr(e,i-4,4),r=0;r<i;r++)gr(e,e.bl_tree[n$[r]*2+1],3);OM(e,e.dyn_ltree,t-1),OM(e,e.dyn_dtree,n-1)},t2e=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return MM;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return kM;for(n=32;n<op;n++)if(e.dyn_ltree[n*2]!==0)return kM;return MM};let NM=!1;const n2e=e=>{NM||(qUe(),NM=!0),e.l_desc=new fE(e.dyn_ltree,i$),e.d_desc=new fE(e.dyn_dtree,r$),e.bl_desc=new fE(e.bl_tree,s$),e.bi_buf=0,e.bi_valid=0,c$(e)},d$=(e,t,n,i)=>{gr(e,(VUe<<1)+(i?1:0),3),QUe(e,t,n)},i2e=e=>{gr(e,qV<<1,3),_o(e,d_,ha),KUe(e)},r2e=(e,t,n,i)=>{let r,s,o=0;e.level>0?(e.strm.data_type===HUe&&(e.strm.data_type=t2e(e)),U4(e,e.l_desc),U4(e,e.d_desc),o=JUe(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&t!==-1?d$(e,t,n,i):e.strategy===zUe||s===r?(gr(e,(qV<<1)+(i?1:0),3),DM(e,ha,a0)):(gr(e,($Ue<<1)+(i?1:0),3),e2e(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),DM(e,e.dyn_ltree,e.dyn_dtree)),c$(e),i&&u$(e)},s2e=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(em[n]+op+1)*2]++,e.dyn_dtree[o$(t)*2]++),e.last_lit===e.lit_bufsize-1);var o2e=n2e,a2e=d$,l2e=r2e,c2e=s2e,u2e=i2e,d2e={_tr_init:o2e,_tr_stored_block:a2e,_tr_flush_block:l2e,_tr_tally:c2e,_tr_align:u2e};const f2e=(e,t,n,i)=>{let r=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+t[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0};var nm=f2e;const h2e=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},g2e=new Uint32Array(h2e()),m2e=(e,t,n,i)=>{const r=g2e,s=i+n;e^=-1;for(let o=i;o<s;o++)e=e>>>8^r[(e^t[o])&255];return e^-1};var ni=m2e,id={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B5={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:p2e,_tr_stored_block:U2e,_tr_flush_block:b2e,_tr_tally:lc,_tr_align:y2e}=d2e,{Z_NO_FLUSH:Id,Z_PARTIAL_FLUSH:E2e,Z_FULL_FLUSH:v2e,Z_FINISH:cc,Z_BLOCK:PM,Z_OK:To,Z_STREAM_END:FM,Z_STREAM_ERROR:bs,Z_DATA_ERROR:w2e,Z_BUF_ERROR:gE,Z_DEFAULT_COMPRESSION:_2e,Z_FILTERED:T2e,Z_HUFFMAN_ONLY:bU,Z_RLE:S2e,Z_FIXED:I2e,Z_DEFAULT_STRATEGY:x2e,Z_UNKNOWN:C2e,Z_DEFLATED:z5}=B5,A2e=9,M2e=15,k2e=8,R2e=29,D2e=256,b4=D2e+1+R2e,L2e=30,O2e=19,N2e=2*b4+1,P2e=15,et=3,jl=258,Ys=jl+et+1,F2e=32,H5=42,y4=69,p2=73,U2=91,b2=103,Eu=113,b1=666,Kn=1,ap=2,rd=3,og=4,B2e=3,Yl=(e,t)=>(e.msg=id[t],t),BM=e=>(e<<1)-(e>4?9:0),Hl=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let z2e=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,uc=z2e;const Cl=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},vi=(e,t)=>{b2e(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Cl(e.strm)},mt=(e,t)=>{e.pending_buf[e.pending++]=t},Gg=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},H2e=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=nm(e.adler,t,r,n):e.state.wrap===2&&(e.adler=ni(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},f$=(e,t)=>{let n=e.max_chain_length,i=e.strstart,r,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-Ys?e.strstart-(e.w_size-Ys):0,c=e.window,u=e.w_mask,d=e.prev,f=e.strstart+jl;let h=c[i+o-1],m=c[i+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(r=t,!(c[r+o]!==m||c[r+o-1]!==h||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<f);if(s=jl-(f-i),i=f-jl,s>o){if(e.match_start=t,o=s,s>=a)break;h=c[i+o-1],m=c[i+o]}}while((t=d[t&u])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},sd=e=>{const t=e.w_size;let n,i,r,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ys)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);s+=t}if(e.strm.avail_in===0)break;if(i=H2e(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=i,e.lookahead+e.insert>=et)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=uc(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=uc(e,e.ins_h,e.window[o+et-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<et)););}while(e.lookahead<Ys&&e.strm.avail_in!==0)},V2e=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(sd(e),e.lookahead===0&&t===Id)return Kn;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,vi(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Ys&&(vi(e,!1),e.strm.avail_out===0))return Kn}return e.insert=0,t===cc?(vi(e,!0),e.strm.avail_out===0?rd:og):(e.strstart>e.block_start&&(vi(e,!1),e.strm.avail_out===0),Kn)},mE=(e,t)=>{let n,i;for(;;){if(e.lookahead<Ys){if(sd(e),e.lookahead<Ys&&t===Id)return Kn;if(e.lookahead===0)break}if(n=0,e.lookahead>=et&&(e.ins_h=uc(e,e.ins_h,e.window[e.strstart+et-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Ys&&(e.match_length=f$(e,n)),e.match_length>=et)if(i=lc(e,e.strstart-e.match_start,e.match_length-et),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=et){e.match_length--;do e.strstart++,e.ins_h=uc(e,e.ins_h,e.window[e.strstart+et-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=uc(e,e.ins_h,e.window[e.strstart+1]);else i=lc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(vi(e,!1),e.strm.avail_out===0))return Kn}return e.insert=e.strstart<et-1?e.strstart:et-1,t===cc?(vi(e,!0),e.strm.avail_out===0?rd:og):e.last_lit&&(vi(e,!1),e.strm.avail_out===0)?Kn:ap},$d=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<Ys){if(sd(e),e.lookahead<Ys&&t===Id)return Kn;if(e.lookahead===0)break}if(n=0,e.lookahead>=et&&(e.ins_h=uc(e,e.ins_h,e.window[e.strstart+et-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=et-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Ys&&(e.match_length=f$(e,n),e.match_length<=5&&(e.strategy===T2e||e.match_length===et&&e.strstart-e.match_start>4096)&&(e.match_length=et-1)),e.prev_length>=et&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-et,i=lc(e,e.strstart-1-e.prev_match,e.prev_length-et),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=uc(e,e.ins_h,e.window[e.strstart+et-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=et-1,e.strstart++,i&&(vi(e,!1),e.strm.avail_out===0))return Kn}else if(e.match_available){if(i=lc(e,0,e.window[e.strstart-1]),i&&vi(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Kn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=lc(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<et-1?e.strstart:et-1,t===cc?(vi(e,!0),e.strm.avail_out===0?rd:og):e.last_lit&&(vi(e,!1),e.strm.avail_out===0)?Kn:ap},$2e=(e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=jl){if(sd(e),e.lookahead<=jl&&t===Id)return Kn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=et&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+jl;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=jl-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=et?(n=lc(e,1,e.match_length-et),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=lc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(vi(e,!1),e.strm.avail_out===0))return Kn}return e.insert=0,t===cc?(vi(e,!0),e.strm.avail_out===0?rd:og):e.last_lit&&(vi(e,!1),e.strm.avail_out===0)?Kn:ap},G2e=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(sd(e),e.lookahead===0)){if(t===Id)return Kn;break}if(e.match_length=0,n=lc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(vi(e,!1),e.strm.avail_out===0))return Kn}return e.insert=0,t===cc?(vi(e,!0),e.strm.avail_out===0?rd:og):e.last_lit&&(vi(e,!1),e.strm.avail_out===0)?Kn:ap};function lo(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const y1=[new lo(0,0,0,0,V2e),new lo(4,4,8,4,mE),new lo(4,5,16,8,mE),new lo(4,6,32,32,mE),new lo(4,4,16,16,$d),new lo(8,16,32,32,$d),new lo(8,16,128,128,$d),new lo(8,32,128,256,$d),new lo(32,128,258,1024,$d),new lo(32,258,258,4096,$d)],X2e=e=>{e.window_size=2*e.w_size,Hl(e.head),e.max_lazy_match=y1[e.level].max_lazy,e.good_match=y1[e.level].good_length,e.nice_match=y1[e.level].nice_length,e.max_chain_length=y1[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=et-1,e.match_available=0,e.ins_h=0};function j2e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=z5,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(N2e*2),this.dyn_dtree=new Uint16Array((2*L2e+1)*2),this.bl_tree=new Uint16Array((2*O2e+1)*2),Hl(this.dyn_ltree),Hl(this.dyn_dtree),Hl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(P2e+1),this.heap=new Uint16Array(2*b4+1),Hl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*b4+1),Hl(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const h$=e=>{if(!e||!e.state)return Yl(e,bs);e.total_in=e.total_out=0,e.data_type=C2e;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?H5:Eu,e.adler=t.wrap===2?0:1,t.last_flush=Id,p2e(t),To},g$=e=>{const t=h$(e);return t===To&&X2e(e.state),t},Y2e=(e,t)=>!e||!e.state||e.state.wrap!==2?bs:(e.state.gzhead=t,To),m$=(e,t,n,i,r,s)=>{if(!e)return bs;let o=1;if(t===_2e&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>A2e||n!==z5||i<8||i>15||t<0||t>9||s<0||s>I2e)return Yl(e,bs);i===8&&(i=9);const a=new j2e;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+et-1)/et),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,g$(e)},W2e=(e,t)=>m$(e,t,z5,M2e,k2e,x2e),K2e=(e,t)=>{let n,i;if(!e||!e.state||t>PM||t<0)return e?Yl(e,bs):bs;const r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===b1&&t!==cc)return Yl(e,e.avail_out===0?gE:bs);r.strm=e;const s=r.last_flush;if(r.last_flush=t,r.status===H5)if(r.wrap===2)e.adler=0,mt(r,31),mt(r,139),mt(r,8),r.gzhead?(mt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),mt(r,r.gzhead.time&255),mt(r,r.gzhead.time>>8&255),mt(r,r.gzhead.time>>16&255),mt(r,r.gzhead.time>>24&255),mt(r,r.level===9?2:r.strategy>=bU||r.level<2?4:0),mt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(mt(r,r.gzhead.extra.length&255),mt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=ni(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=y4):(mt(r,0),mt(r,0),mt(r,0),mt(r,0),mt(r,0),mt(r,r.level===9?2:r.strategy>=bU||r.level<2?4:0),mt(r,B2e),r.status=Eu);else{let o=z5+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=bU||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,o|=a<<6,r.strstart!==0&&(o|=F2e),o+=31-o%31,r.status=Eu,Gg(r,o),r.strstart!==0&&(Gg(r,e.adler>>>16),Gg(r,e.adler&65535)),e.adler=1}if(r.status===y4)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=ni(e.adler,r.pending_buf,r.pending-n,n)),Cl(e),n=r.pending,r.pending===r.pending_buf_size));)mt(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=ni(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=p2)}else r.status=p2;if(r.status===p2)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=ni(e.adler,r.pending_buf,r.pending-n,n)),Cl(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,mt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=ni(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.gzindex=0,r.status=U2)}else r.status=U2;if(r.status===U2)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=ni(e.adler,r.pending_buf,r.pending-n,n)),Cl(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,mt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=ni(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.status=b2)}else r.status=b2;if(r.status===b2&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Cl(e),r.pending+2<=r.pending_buf_size&&(mt(r,e.adler&255),mt(r,e.adler>>8&255),e.adler=0,r.status=Eu)):r.status=Eu),r.pending!==0){if(Cl(e),e.avail_out===0)return r.last_flush=-1,To}else if(e.avail_in===0&&BM(t)<=BM(s)&&t!==cc)return Yl(e,gE);if(r.status===b1&&e.avail_in!==0)return Yl(e,gE);if(e.avail_in!==0||r.lookahead!==0||t!==Id&&r.status!==b1){let o=r.strategy===bU?G2e(r,t):r.strategy===S2e?$2e(r,t):y1[r.level].func(r,t);if((o===rd||o===og)&&(r.status=b1),o===Kn||o===rd)return e.avail_out===0&&(r.last_flush=-1),To;if(o===ap&&(t===E2e?y2e(r):t!==PM&&(U2e(r,0,0,!1),t===v2e&&(Hl(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Cl(e),e.avail_out===0))return r.last_flush=-1,To}return t!==cc?To:r.wrap<=0?FM:(r.wrap===2?(mt(r,e.adler&255),mt(r,e.adler>>8&255),mt(r,e.adler>>16&255),mt(r,e.adler>>24&255),mt(r,e.total_in&255),mt(r,e.total_in>>8&255),mt(r,e.total_in>>16&255),mt(r,e.total_in>>24&255)):(Gg(r,e.adler>>>16),Gg(r,e.adler&65535)),Cl(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?To:FM)},Z2e=e=>{if(!e||!e.state)return bs;const t=e.state.status;return t!==H5&&t!==y4&&t!==p2&&t!==U2&&t!==b2&&t!==Eu&&t!==b1?Yl(e,bs):(e.state=null,t===Eu?Yl(e,w2e):To)},q2e=(e,t)=>{let n=t.length;if(!e||!e.state)return bs;const i=e.state,r=i.wrap;if(r===2||r===1&&i.status!==H5||i.lookahead)return bs;if(r===1&&(e.adler=nm(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){r===0&&(Hl(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(t.subarray(n-i.w_size,n),0),t=l,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,sd(i);i.lookahead>=et;){let l=i.strstart,c=i.lookahead-(et-1);do i.ins_h=uc(i,i.ins_h,i.window[l+et-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=et-1,sd(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=et-1,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,To};var Q2e=W2e,J2e=m$,ebe=g$,tbe=h$,nbe=Y2e,ibe=K2e,rbe=Z2e,sbe=q2e,obe="pako deflate (from Nodeca project)",l0={deflateInit:Q2e,deflateInit2:J2e,deflateReset:ebe,deflateResetKeep:tbe,deflateSetHeader:nbe,deflate:ibe,deflateEnd:rbe,deflateSetDictionary:sbe,deflateInfo:obe};const abe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var lbe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)abe(n,i)&&(e[i]=n[i])}}return e},cbe=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,s=e.length;i<s;i++){let o=e[i];n.set(o,r),r+=o.length}return n},V5={assign:lbe,flattenChunks:cbe};let p$=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p$=!1}const im=new Uint8Array(256);for(let e=0;e<256;e++)im[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;im[254]=im[254]=1;var ube=e=>{let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const dbe=(e,t)=>{if(t<65534&&e.subarray&&p$)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var fbe=(e,t)=>{let n,i;const r=t||e.length,s=new Array(r*2);for(i=0,n=0;n<r;){let o=e[n++];if(o<128){s[i++]=o;continue}let a=im[o];if(a>4){s[i++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|e[n++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return dbe(s,i)},hbe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+im[e[n]]>t?n:t},rm={string2buf:ube,buf2string:fbe,utf8border:hbe};function gbe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var U$=gbe;const b$=Object.prototype.toString,{Z_NO_FLUSH:mbe,Z_SYNC_FLUSH:pbe,Z_FULL_FLUSH:Ube,Z_FINISH:bbe,Z_OK:t6,Z_STREAM_END:ybe,Z_DEFAULT_COMPRESSION:Ebe,Z_DEFAULT_STRATEGY:vbe,Z_DEFLATED:wbe}=B5;function $5(e){this.options=V5.assign({level:Ebe,method:wbe,chunkSize:16384,windowBits:15,memLevel:8,strategy:vbe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new U$,this.strm.avail_out=0;let n=l0.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==t6)throw new Error(id[n]);if(t.header&&l0.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=rm.string2buf(t.dictionary):b$.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=l0.deflateSetDictionary(this.strm,i),n!==t6)throw new Error(id[n]);this._dict_set=!0}}$5.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?bbe:mbe,typeof e=="string"?n.input=rm.string2buf(e):b$.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===pbe||s===Ube)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=l0.deflate(n,s),r===ybe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=l0.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===t6;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};$5.prototype.onData=function(e){this.chunks.push(e)};$5.prototype.onEnd=function(e){e===t6&&(this.result=V5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function _be(e,t){const n=new $5(t);if(n.push(e,!0),n.err)throw n.msg||id[n.err];return n.result}var Tbe=_be,Sbe={deflate:Tbe};const yU=30,Ibe=12;var xbe=function(t,n){let i,r,s,o,a,l,c,u,d,f,h,m,p,y,b,E,v,w,S,k,_,T,A,C;const R=t.state;i=t.next_in,A=t.input,r=i+(t.avail_in-5),s=t.next_out,C=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=R.dmax,c=R.wsize,u=R.whave,d=R.wnext,f=R.window,h=R.hold,m=R.bits,p=R.lencode,y=R.distcode,b=(1<<R.lenbits)-1,E=(1<<R.distbits)-1;e:do{m<15&&(h+=A[i++]<<m,m+=8,h+=A[i++]<<m,m+=8),v=p[h&b];t:for(;;){if(w=v>>>24,h>>>=w,m-=w,w=v>>>16&255,w===0)C[s++]=v&65535;else if(w&16){S=v&65535,w&=15,w&&(m<w&&(h+=A[i++]<<m,m+=8),S+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=A[i++]<<m,m+=8,h+=A[i++]<<m,m+=8),v=y[h&E];n:for(;;){if(w=v>>>24,h>>>=w,m-=w,w=v>>>16&255,w&16){if(k=v&65535,w&=15,m<w&&(h+=A[i++]<<m,m+=8,m<w&&(h+=A[i++]<<m,m+=8)),k+=h&(1<<w)-1,k>l){t.msg="invalid distance too far back",R.mode=yU;break e}if(h>>>=w,m-=w,w=s-o,k>w){if(w=k-w,w>u&&R.sane){t.msg="invalid distance too far back",R.mode=yU;break e}if(_=0,T=f,d===0){if(_+=c-w,w<S){S-=w;do C[s++]=f[_++];while(--w);_=s-k,T=C}}else if(d<w){if(_+=c+d-w,w-=d,w<S){S-=w;do C[s++]=f[_++];while(--w);if(_=0,d<S){w=d,S-=w;do C[s++]=f[_++];while(--w);_=s-k,T=C}}}else if(_+=d-w,w<S){S-=w;do C[s++]=f[_++];while(--w);_=s-k,T=C}for(;S>2;)C[s++]=T[_++],C[s++]=T[_++],C[s++]=T[_++],S-=3;S&&(C[s++]=T[_++],S>1&&(C[s++]=T[_++]))}else{_=s-k;do C[s++]=C[_++],C[s++]=C[_++],C[s++]=C[_++],S-=3;while(S>2);S&&(C[s++]=C[_++],S>1&&(C[s++]=C[_++]))}}else if(w&64){t.msg="invalid distance code",R.mode=yU;break e}else{v=y[(v&65535)+(h&(1<<w)-1)];continue n}break}}else if(w&64)if(w&32){R.mode=Ibe;break e}else{t.msg="invalid literal/length code",R.mode=yU;break e}else{v=p[(v&65535)+(h&(1<<w)-1)];continue t}break}}while(i<r&&s<a);S=m>>3,i-=S,m-=S<<3,h&=(1<<m)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),R.hold=h,R.bits=m};const Gd=15,zM=852,HM=592,VM=0,pE=1,$M=2,Cbe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Abe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Mbe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),kbe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Rbe=(e,t,n,i,r,s,o,a)=>{const l=a.bits;let c=0,u=0,d=0,f=0,h=0,m=0,p=0,y=0,b=0,E=0,v,w,S,k,_,T=null,A=0,C;const R=new Uint16Array(Gd+1),P=new Uint16Array(Gd+1);let N=null,K=0,H,z,V;for(c=0;c<=Gd;c++)R[c]=0;for(u=0;u<i;u++)R[t[n+u]]++;for(h=l,f=Gd;f>=1&&R[f]===0;f--);if(h>f&&(h=f),f===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<f&&R[d]===0;d++);for(h<d&&(h=d),y=1,c=1;c<=Gd;c++)if(y<<=1,y-=R[c],y<0)return-1;if(y>0&&(e===VM||f!==1))return-1;for(P[1]=0,c=1;c<Gd;c++)P[c+1]=P[c]+R[c];for(u=0;u<i;u++)t[n+u]!==0&&(o[P[t[n+u]]++]=u);if(e===VM?(T=N=o,C=19):e===pE?(T=Cbe,A-=257,N=Abe,K-=257,C=256):(T=Mbe,N=kbe,C=-1),E=0,u=0,c=d,_=s,m=h,p=0,S=-1,b=1<<h,k=b-1,e===pE&&b>zM||e===$M&&b>HM)return 1;for(;;){H=c-p,o[u]<C?(z=0,V=o[u]):o[u]>C?(z=N[K+o[u]],V=T[A+o[u]]):(z=96,V=0),v=1<<c-p,w=1<<m,d=w;do w-=v,r[_+(E>>p)+w]=H<<24|z<<16|V|0;while(w!==0);for(v=1<<c-1;E&v;)v>>=1;if(v!==0?(E&=v-1,E+=v):E=0,u++,--R[c]===0){if(c===f)break;c=t[n+o[u]]}if(c>h&&(E&k)!==S){for(p===0&&(p=h),_+=d,m=c-p,y=1<<m;m+p<f&&(y-=R[m+p],!(y<=0));)m++,y<<=1;if(b+=1<<m,e===pE&&b>zM||e===$M&&b>HM)return 1;S=E&k,r[S]=h<<24|m<<16|_-s|0}}return E!==0&&(r[_+E]=c-p<<24|64<<16|0),a.bits=h,0};var c0=Rbe;const Dbe=0,y$=1,E$=2,{Z_FINISH:GM,Z_BLOCK:Lbe,Z_TREES:EU,Z_OK:od,Z_STREAM_END:Obe,Z_NEED_DICT:Nbe,Z_STREAM_ERROR:Is,Z_DATA_ERROR:v$,Z_MEM_ERROR:w$,Z_BUF_ERROR:Pbe,Z_DEFLATED:XM}=B5,_$=1,jM=2,YM=3,WM=4,KM=5,ZM=6,qM=7,QM=8,JM=9,ek=10,n6=11,la=12,UE=13,tk=14,bE=15,nk=16,ik=17,rk=18,sk=19,vU=20,wU=21,ok=22,ak=23,lk=24,ck=25,uk=26,yE=27,dk=28,fk=29,Wt=30,T$=31,Fbe=32,Bbe=852,zbe=592,Hbe=15,Vbe=Hbe,hk=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function $be(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const S$=e=>{if(!e||!e.state)return Is;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=_$,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Bbe),t.distcode=t.distdyn=new Int32Array(zbe),t.sane=1,t.back=-1,od},I$=e=>{if(!e||!e.state)return Is;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,S$(e)},x$=(e,t)=>{let n;if(!e||!e.state)return Is;const i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Is:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,I$(e))},C$=(e,t)=>{if(!e)return Is;const n=new $be;e.state=n,n.window=null;const i=x$(e,t);return i!==od&&(e.state=null),i},Gbe=e=>C$(e,Vbe);let gk=!0,EE,vE;const Xbe=e=>{if(gk){EE=new Int32Array(512),vE=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c0(y$,e.lens,0,288,EE,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c0(E$,e.lens,0,32,vE,0,e.work,{bits:5}),gk=!1}e.lencode=EE,e.lenbits=9,e.distcode=vE,e.distbits=5},A$=(e,t,n,i)=>{let r;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},jbe=(e,t)=>{let n,i,r,s,o,a,l,c,u,d,f,h,m,p,y=0,b,E,v,w,S,k,_,T;const A=new Uint8Array(4);let C,R;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Is;n=e.state,n.mode===la&&(n.mode=UE),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,f=l,T=od;e:for(;;)switch(n.mode){case _$:if(n.wrap===0){n.mode=UE;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,A[0]=c&255,A[1]=c>>>8&255,n.check=ni(n.check,A,2,0),c=0,u=0,n.mode=jM;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Wt;break}if((c&15)!==XM){e.msg="unknown compression method",n.mode=Wt;break}if(c>>>=4,u-=4,_=(c&15)+8,n.wbits===0)n.wbits=_;else if(_>n.wbits){e.msg="invalid window size",n.mode=Wt;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=c&512?ek:la,c=0,u=0;break;case jM:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==XM){e.msg="unknown compression method",n.mode=Wt;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Wt;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,n.check=ni(n.check,A,2,0)),c=0,u=0,n.mode=YM;case YM:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,n.check=ni(n.check,A,4,0)),c=0,u=0,n.mode=WM;case WM:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,n.check=ni(n.check,A,2,0)),c=0,u=0,n.mode=KM;case KM:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,n.check=ni(n.check,A,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=ZM;case ZM:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+h),_)),n.flags&512&&(n.check=ni(n.check,i,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=qM;case qM:if(n.flags&2048){if(a===0)break e;h=0;do _=i[s+h++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_));while(_&&h<a);if(n.flags&512&&(n.check=ni(n.check,i,h,s)),a-=h,s+=h,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=QM;case QM:if(n.flags&4096){if(a===0)break e;h=0;do _=i[s+h++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_));while(_&&h<a);if(n.flags&512&&(n.check=ni(n.check,i,h,s)),a-=h,s+=h,_)break e}else n.head&&(n.head.comment=null);n.mode=JM;case JM:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Wt;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=la;break;case ek:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.adler=n.check=hk(c),c=0,u=0,n.mode=n6;case n6:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,Nbe;e.adler=n.check=1,n.mode=la;case la:if(t===Lbe||t===EU)break e;case UE:if(n.last){c>>>=u&7,u-=u&7,n.mode=yE;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=tk;break;case 1:if(Xbe(n),n.mode=vU,t===EU){c>>>=2,u-=2;break e}break;case 2:n.mode=ik;break;case 3:e.msg="invalid block type",n.mode=Wt}c>>>=2,u-=2;break;case tk:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Wt;break}if(n.length=c&65535,c=0,u=0,n.mode=bE,t===EU)break e;case bE:n.mode=nk;case nk:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;r.set(i.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=la;break;case ik:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Wt;break}n.have=0,n.mode=rk;case rk:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.lens[P[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},T=c0(Dbe,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,T){e.msg="invalid code lengths set",n.mode=Wt;break}n.have=0,n.mode=sk;case sk:for(;n.have<n.nlen+n.ndist;){for(;y=n.lencode[c&(1<<n.lenbits)-1],b=y>>>24,E=y>>>16&255,v=y&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(v<16)c>>>=b,u-=b,n.lens[n.have++]=v;else{if(v===16){for(R=b+2;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=b,u-=b,n.have===0){e.msg="invalid bit length repeat",n.mode=Wt;break}_=n.lens[n.have-1],h=3+(c&3),c>>>=2,u-=2}else if(v===17){for(R=b+3;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=b,u-=b,_=0,h=3+(c&7),c>>>=3,u-=3}else{for(R=b+7;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=b,u-=b,_=0,h=11+(c&127),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Wt;break}for(;h--;)n.lens[n.have++]=_}}if(n.mode===Wt)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Wt;break}if(n.lenbits=9,C={bits:n.lenbits},T=c0(y$,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,T){e.msg="invalid literal/lengths set",n.mode=Wt;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},T=c0(E$,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,T){e.msg="invalid distances set",n.mode=Wt;break}if(n.mode=vU,t===EU)break e;case vU:n.mode=wU;case wU:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,xbe(e,f),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===la&&(n.back=-1);break}for(n.back=0;y=n.lencode[c&(1<<n.lenbits)-1],b=y>>>24,E=y>>>16&255,v=y&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(E&&!(E&240)){for(w=b,S=E,k=v;y=n.lencode[k+((c&(1<<w+S)-1)>>w)],b=y>>>24,E=y>>>16&255,v=y&65535,!(w+b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=b,u-=b,n.back+=b,n.length=v,E===0){n.mode=uk;break}if(E&32){n.back=-1,n.mode=la;break}if(E&64){e.msg="invalid literal/length code",n.mode=Wt;break}n.extra=E&15,n.mode=ok;case ok:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ak;case ak:for(;y=n.distcode[c&(1<<n.distbits)-1],b=y>>>24,E=y>>>16&255,v=y&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(!(E&240)){for(w=b,S=E,k=v;y=n.distcode[k+((c&(1<<w+S)-1)>>w)],b=y>>>24,E=y>>>16&255,v=y&65535,!(w+b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=b,u-=b,n.back+=b,E&64){e.msg="invalid distance code",n.mode=Wt;break}n.offset=v,n.extra=E&15,n.mode=lk;case lk:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Wt;break}n.mode=ck;case ck:if(l===0)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Wt;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=r,m=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do r[o++]=p[m++];while(--h);n.length===0&&(n.mode=wU);break;case uk:if(l===0)break e;r[o++]=n.length,l--,n.mode=wU;break;case yE:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?ni(n.check,r,f,o-f):nm(n.check,r,f,o-f)),f=l,(n.flags?c:hk(c))!==n.check){e.msg="incorrect data check",n.mode=Wt;break}c=0,u=0}n.mode=dk;case dk:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Wt;break}c=0,u=0}n.mode=fk;case fk:T=Obe;break e;case Wt:T=v$;break e;case T$:return w$;case Fbe:default:return Is}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<Wt&&(n.mode<yE||t!==GM))&&A$(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?ni(n.check,r,f,e.next_out-f):nm(n.check,r,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===la?128:0)+(n.mode===vU||n.mode===bE?256:0),(d===0&&f===0||t===GM)&&T===od&&(T=Pbe),T},Ybe=e=>{if(!e||!e.state)return Is;let t=e.state;return t.window&&(t.window=null),e.state=null,od},Wbe=(e,t)=>{if(!e||!e.state)return Is;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,od):Is},Kbe=(e,t)=>{const n=t.length;let i,r,s;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==n6)?Is:i.mode===n6&&(r=1,r=nm(r,t,n,0),r!==i.check)?v$:(s=A$(e,t,n,n),s?(i.mode=T$,w$):(i.havedict=1,od))};var Zbe=I$,qbe=x$,Qbe=S$,Jbe=Gbe,e6e=C$,t6e=jbe,n6e=Ybe,i6e=Wbe,r6e=Kbe,s6e="pako inflate (from Nodeca project)",ga={inflateReset:Zbe,inflateReset2:qbe,inflateResetKeep:Qbe,inflateInit:Jbe,inflateInit2:e6e,inflate:t6e,inflateEnd:n6e,inflateGetHeader:i6e,inflateSetDictionary:r6e,inflateInfo:s6e};function o6e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var a6e=o6e;const M$=Object.prototype.toString,{Z_NO_FLUSH:l6e,Z_FINISH:c6e,Z_OK:sm,Z_STREAM_END:wE,Z_NEED_DICT:_E,Z_STREAM_ERROR:u6e,Z_DATA_ERROR:mk,Z_MEM_ERROR:d6e}=B5;function G5(e){this.options=V5.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new U$,this.strm.avail_out=0;let n=ga.inflateInit2(this.strm,t.windowBits);if(n!==sm)throw new Error(id[n]);if(this.header=new a6e,ga.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=rm.string2buf(t.dictionary):M$.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ga.inflateSetDictionary(this.strm,t.dictionary),n!==sm)))throw new Error(id[n])}G5.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?c6e:l6e,M$.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=ga.inflate(n,o),s===_E&&r&&(s=ga.inflateSetDictionary(n,r),s===sm?s=ga.inflate(n,o):s===mk&&(s=_E));n.avail_in>0&&s===wE&&n.state.wrap>0&&e[n.next_in]!==0;)ga.inflateReset(n),s=ga.inflate(n,o);switch(s){case u6e:case mk:case _E:case d6e:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===wE))if(this.options.to==="string"){let l=rm.utf8border(n.output,n.next_out),c=n.next_out-l,u=rm.buf2string(n.output,l);n.next_out=c,n.avail_out=i-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===sm&&a===0)){if(s===wE)return s=ga.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};G5.prototype.onData=function(e){this.chunks.push(e)};G5.prototype.onEnd=function(e){e===sm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=V5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function f6e(e,t){const n=new G5(t);if(n.push(e),n.err)throw n.msg||id[n.err];return n.result}var h6e=f6e,g6e={inflate:h6e};const{deflate:m6e}=Sbe,{inflate:p6e}=g6e;var k$=m6e,R$=p6e;const y2=12,U6e=()=>{const e=new Uint8Array(y2);return window.crypto.getRandomValues(e)},h_=async e=>{const t=await window.crypto.subtle.generateKey({name:"AES-GCM",length:iF},!0,["encrypt","decrypt"]);return e==="cryptoKey"?t:(await window.crypto.subtle.exportKey("jwk",t)).k},D$=(e,t)=>window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:iF},!1,[t]),X5=async(e,t)=>{const n=typeof e=="string"?await D$(e,"encrypt"):e,i=U6e(),r=typeof t=="string"?new TextEncoder().encode(t):t instanceof Uint8Array?t:t instanceof Blob?await Wl(t):t;return{encryptedBuffer:await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},n,r),iv:i}},om=async(e,t,n)=>{const i=await D$(n,"decrypt");return window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},i,t)},i6=e=>{const t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e);let n="";for(const i of t)n+=String.fromCharCode(i);return n},L$=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return t},O$=e=>new TextDecoder("utf-8").decode(L$(e)),N$=(e,t=!1)=>t?window.btoa(e):window.btoa(i6(e)),P$=(e,t=!1)=>t?window.atob(e):O$(window.atob(e)),pk=e=>window.atob(e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"=")),F$=({text:e,compress:t})=>{let n;if(t!==!1)try{n=i6(k$(e))}catch(i){console.error("encode: cannot deflate",i)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||i6(e)}},B$=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:O$(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?R$(new Uint8Array(L$(t)),{to:"string"}):t},z$=1,E2=4,Yf=4,TE={1:8,2:16,4:32};function r6(e,t,n,i){if(i!=null){if(i>Math.pow(2,TE[t])-1)throw new Error(`attempting to set value higher than the allocated bytes (value: ${i}, bytes: ${t})`);const s=`setUint${TE[t]}`;return new DataView(e.buffer)[s](n,i),e}const r=`getUint${TE[t]}`;return new DataView(e.buffer)[r](n)}const Uk=(...e)=>{const t=new Uint8Array(E2+Yf*e.length+e.reduce((i,r)=>i+r.byteLength,0));let n=0;r6(t,E2,n,z$),n+=E2;for(const i of e)r6(t,Yf,n,i.byteLength),n+=Yf,t.set(i,n),n+=i.byteLength;return t},bk=e=>{const t=[];let n=0;const i=r6(e,Yf,n);if(i>z$)throw new Error(`invalid version ${i}`);for(n+=E2;;){const r=r6(e,Yf,n);if(n+=Yf,t.push(e.slice(n,n+r)),n+=r,n>=e.byteLength)break}return t},b6e=async(e,t)=>{const{encryptedBuffer:n,iv:i}=await X5(t,k$(e));return{iv:i,buffer:new Uint8Array(n)}},H$=async(e,t)=>{const n={version:2,compression:"pako@1",encryption:"AES-GCM"},i=new TextEncoder().encode(JSON.stringify(n)),r=new TextEncoder().encode(JSON.stringify(t.metadata||null)),{iv:s,buffer:o}=await b6e(Uk(r,e),t.encryptionKey);return Uk(i,s,o)},y6e=async(e,t,n,i)=>(t=new Uint8Array(await om(e,t,n)),i?R$(t):t),V$=async(e,t)=>{const[n,i,r]=bk(e),s=JSON.parse(new TextDecoder().decode(n));try{const[o,a]=bk(await y6e(i,r,t.decryptionKey,!!s.compression));return{metadata:JSON.parse(new TextDecoder().decode(o)),data:a}}catch(o){throw console.error("Error during decompressing and decrypting the file.",s),o}},jc=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),E6e=ge(jc?()=>import("./file-open-002ab408-DIuFHtCF.js"):()=>import("./file-open-7c801643-684qeFg4.js"),__vite__mapDeps([]));async function v6e(...e){return(await E6e).default(...e)}ge(jc?()=>import("./directory-open-4ed118d0-BzWybGaI.js"):()=>import("./directory-open-01563666-DWU9wJ6I.js"),__vite__mapDeps([]));const w6e=ge(jc?()=>import("./file-save-745eba88-Bb9F9Kg7.js"):()=>import("./file-save-3189631c-x92wctJd.js"),__vite__mapDeps([]));async function _6e(...e){return(await w6e).default(...e)}const yk=500,g_=e=>{const t=e.extensions?.reduce((i,r)=>(i.push(Ue[r]),i),[]),n=e.extensions?.reduce((i,r)=>r==="jpg"?i.concat(".jpg",".jpeg"):i.concat(`.${r}`),[]);return v6e({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(i,r,s)=>{const o=Ya(r,yk),a=()=>{l(),document.addEventListener(ee.KEYUP,o),document.addEventListener(ee.POINTER_UP,o),o()},l=()=>{if(s.files?.length){const u=e.multiple?[...s.files]:s.files[0];i(u)}};requestAnimationFrame(()=>{window.addEventListener(ee.FOCUS,a)});const c=window.setInterval(()=>{l()},yk);return u=>{clearInterval(c),o.cancel(),window.removeEventListener(ee.FOCUS,a),document.removeEventListener(ee.KEYUP,o),document.removeEventListener(ee.POINTER_UP,o),u&&(console.warn("Opening the file was canceled (legacy-fs)."),u(new Eh))}}})},s6=(e,t)=>_6e(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),T6e=()=>jc?(window.showDirectoryPicker({mode:"readwrite"}),!0):!1,S6e=(e,t)=>{const n={};for(const i of e)!i.isDeleted&&"fileId"in i&&i.fileId&&t[i.fileId]&&(n[i.fileId]=t[i.fileId]);return n},ag=(e,t,n,i)=>{const r={type:ms.excalidraw,version:s5.excalidraw,source:Tw(),elements:i==="local"?lz(e):Dce(e),appState:i==="local"?XV(t):kUe(t),files:i==="local"?S6e(e,n):void 0};return JSON.stringify(r,null,2)},$$=async(e,t,n,i=t.name||oF)=>{const r=ag(e,t,n,"local"),s=new Blob([r],{type:Ue.excalidraw});return{fileHandle:await s6(s,{name:i,extension:"excalidraw",description:"Excalidraw file",fileHandle:b_(t.fileHandle)?null:t.fileHandle})}},I6e=async(e,t)=>{const n=await g_({description:"Excalidraw files"});return y_(await E_(n),e,t,n.handle)},x6e=e=>e?.type===ms.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),G$=e=>typeof e=="object"&&e&&e.type===ms.excalidrawLibrary&&(e.version===1||e.version===2),X$=e=>{const t={type:ms.excalidrawLibrary,version:s5.excalidrawLibrary,source:Tw(),libraryItems:e};return JSON.stringify(t,null,2)},C6e=async e=>{const t=X$(e);await s6(new Blob([t],{type:Ue.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},A6e=12,j$=document.createElement("img");j$.src=`data:${Ue.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;const Y$=document.createElement("img");Y$.src=`data:${Ue.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;const m_=([e,t,n,i],r,s)=>{const o=A6e,a=s.zoom.value>1?s.zoom.value:1,l=o/a,c=o/a,u=o/a,d=(e+n)/2,f=(t+i)/2,h=(o-8)/(2*a),m=4/a,p=n+m-h,y=t-m-u+h,[b,E]=W(I(p+l/2,y+c/2),I(d,f),r);return[b-l/2,E-c/2,l,c]},W$=(e,t,n,[i,r])=>{const s=4/n.zoom.value,[o,a,l,c]=Le(e,t),[u,d,f,h]=m_([o,a,l,c],e.angle,n);return i>u-s&&i<u+s+f&&r>d-s&&r<d+h+s},SE=(e,t,n,[i,r],s)=>!e.link||n.selectedElementIds[e.id]?!1:!s&&n.viewModeEnabled&&h5(I(i,r),e,t)?!0:W$(e,t,n,I(i,r)),j5=(e,t,n,i,r,s=!0)=>{e.beginPath(),e.arc(t,n,i,0,Math.PI*2),s&&e.fill(),r&&e.stroke()},Y5=(e,t)=>[e.width/t,e.height/t],W5=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:i,theme:r,isExporting:s,viewBackgroundColor:o})=>{const a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),s&&r===Te.DARK&&(a.filter=xw),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,i),a.save(),a.fillStyle=o,a.fillRect(0,0,n,i),a.restore()):a.clearRect(0,0,n,i),a};function vl(e,t,n=.5){const i=cre(t,n);if(i)for(let r=0;r<i.length-1;r++){const[[s,o],[a,l]]=i[r];e.quadraticCurveTo(s,o,a,l)}}function wl(e,t,n=.5){const i=Rw(t,n);if(i)for(let r=0;r<i.length;r++){const[[s,o],[a,l],[c,u]]=i[r];e.bezierCurveTo(s,o,a,l,c,u)}}const M6e=(e,t,n,i)=>{const[r,s]=W(I(t.x,t.y),Jn(t,n),t.angle);e.save(),e.translate(r,s),e.rotate(t.angle);let o=Ji(Math.min(t.width,t.height),t);o===0&&(o=.01),e.beginPath();{const a=yl(I(0,0+o),I(0,0),I(0+o,0),i),l=yl(I(t.width-o,0),I(t.width,0),I(t.width,o),i),c=yl(I(t.width,t.height-o),I(t.width,t.height),I(t.width-o,t.height),i),u=yl(I(o,t.height),I(0,t.height),I(0,t.height-o),i);e.moveTo(a[a.length-1][0],a[a.length-1][1]),e.lineTo(l[0][0],l[0][1]),vl(e,l),e.lineTo(c[0][0],c[0][1]),vl(e,c),e.lineTo(u[0][0],u[0][1]),vl(e,u),e.lineTo(a[0][0],a[0][1]),vl(e,a)}{const a=yl(I(0+o,0),I(0,0),I(0,0+o),-5),l=yl(I(t.width,o),I(t.width,0),I(t.width-o,0),-5),c=yl(I(t.width-o,t.height),I(t.width,t.height),I(t.width,t.height-o),-5),u=yl(I(0,t.height-o),I(0,t.height),I(o,t.height),-5);e.moveTo(a[a.length-1][0],a[a.length-1][1]),e.lineTo(u[0][0],u[0][1]),vl(e,u),e.lineTo(c[0][0],c[0][1]),vl(e,c),e.lineTo(l[0][0],l[0][1]),vl(e,l),e.lineTo(a[0][0],a[0][1]),vl(e,a)}e.closePath(),e.fill(),e.restore()},k6e=(e,t,n,i,r,s)=>{e.beginPath(),e.ellipse(i,r,t/2,n/2,s,0,Math.PI*2),e.stroke()},K5=(e,t,n,i,r,s,o,a,l=!1,c=0)=>{e.save(),e.translate(s,o),e.rotate(a),l&&e.fillRect(t-s,n-o,i,r),c&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-o,i,r,c),e.stroke(),e.closePath()):e.strokeRect(t-s,n-o,i,r),e.restore()},R6e=(e,t,n,i)=>{const[r,s]=W(I(n.x,n.y),Jn(n,i),n.angle);e.save(),e.translate(r,s),e.rotate(n.angle);{e.beginPath();const[o,a,l,c,u,d,f,h]=zb(n),m=n.roundness?Ji(Math.abs(o-f),n):(o-f)*.01,p=n.roundness?Ji(Math.abs(c-a),n):(c-a)*.01,y=uo(Ln(I(o-m,a+p),I(o,a),I(o,a),I(o+m,a+p)),t),b=uo(Ln(I(l-m,c-p),I(l,c),I(l,c),I(l-m,c+p)),t),E=uo(Ln(I(u+m,d-p),I(u,d),I(u,d),I(u-m,d-p)),t),v=uo(Ln(I(f+m,h+p),I(f,h),I(f,h),I(f+m,h-p)),t);e.moveTo(y[y.length-1][0],y[y.length-1][1]),e.lineTo(b[1][0],b[1][1]),wl(e,b),e.lineTo(E[1][0],E[1][1]),wl(e,E),e.lineTo(v[1][0],v[1][1]),wl(e,v),e.lineTo(y[1][0],y[1][1]),wl(e,y)}{const[o,a,l,c,u,d,f,h]=zb(n),m=n.roundness?Ji(Math.abs(o-f),n):(o-f)*.01,p=n.roundness?Ji(Math.abs(c-a),n):(c-a)*.01,y=uo(Ln(I(o+m,a+p),I(o,a),I(o,a),I(o-m,a+p)),-5),b=uo(Ln(I(l-m,c+p),I(l,c),I(l,c),I(l-m,c-p)),-5),E=uo(Ln(I(u-m,d-p),I(u,d),I(u,d),I(u+m,d-p)),-5),v=uo(Ln(I(f+m,h-p),I(f,h),I(f,h),I(f+m,h+p)),-5);e.moveTo(y[y.length-1][0],y[y.length-1][1]),e.lineTo(v[1][0],v[1][1]),wl(e,v),e.lineTo(E[1][0],E[1][1]),wl(e,E),e.lineTo(b[1][0],b[1][1]),wl(e,b),e.lineTo(y[1][0],y[1][1]),wl(e,y)}e.closePath(),e.fill(),e.restore()},_U={Bold:"#dddddd",Regular:"#e5e5e5"},D6e=(e,t,n,i,r,s,o,a)=>{const l=i%t-t,c=r%t-t,u=t*s.value,d=1/s.value;e.save(),s.value===1&&e.translate(l%1?0:.5,c%1?0:.5);for(let f=l;f<l+o+t*2;f+=t){const h=n>1&&Math.round(f-i)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?_U.Bold:_U.Regular,e.moveTo(f,c-t),e.lineTo(f,Math.ceil(c+a+t*2)),e.stroke()}for(let f=c;f<c+a+t*2;f+=t){const h=n>1&&Math.round(f-r)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?_U.Bold:_U.Regular,e.moveTo(l-t,f),e.lineTo(Math.ceil(l+o+t*2),f),e.stroke()}e.restore()},Ek=(e,t,n,i)=>{t.translate(e.x+i.scrollX,e.y+i.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,Rt.radius/i.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+i.scrollX),-(e.y+i.scrollY))},vk={regularLink:null,elementLink:null},wk=(e,t,n,i)=>{if(e.link&&!n.selectedElementIds[e.id]){const[r,s,o,a]=Le(e,i),[l,c,u,d]=m_([r,s,o,a],e.angle,n),f=l+u/2,h=c+d/2;t.save(),t.translate(n.scrollX+f,n.scrollY+h),t.rotate(e.angle);const m=Hf(e.link)?"elementLink":"regularLink";let p=vk[m];if(!p||p.zoom!==n.zoom.value){p=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),p.width=u*window.devicePixelRatio*n.zoom.value,p.height=d*window.devicePixelRatio*n.zoom.value,vk[m]=p;const y=p.getContext("2d");y.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),y.fillStyle=n.viewBackgroundColor||"#fff",y.fillRect(0,0,u,d),m==="elementLink"?y.drawImage(Y$,0,0,u,d):y.drawImage(j$,0,0,u,d),y.restore()}t.drawImage(p,l-f,c-h,u,d),t.restore()}},K$=({canvas:e,rc:t,elementsMap:n,allElementsMap:i,visibleElements:r,scale:s,appState:o,renderConfig:a})=>{if(e===null)return;const{renderGrid:l=!0,isExporting:c}=a,[u,d]=Y5(e,s),f=W5({canvas:e,scale:s,normalizedWidth:u,normalizedHeight:d,theme:o.theme,isExporting:c,viewBackgroundColor:o.viewBackgroundColor});f.scale(o.zoom.value,o.zoom.value),l&&D6e(f,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,u/o.zoom.value,d/o.zoom.value);const h=new Set;r.forEach(p=>{p.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[p.id]&&(Ic(p,o.frameToHighlight,n)||p.groupIds.find(y=>h.has(y)))&&p.groupIds.forEach(y=>h.add(y))});const m=new Map;r.filter(p=>!os(p)).forEach(p=>{try{const y=p.frameId||o.frameToHighlight?.id;if(le(p)&&p.containerId&&n.has(p.containerId))return;if(f.save(),y&&o.frameRendering.enabled&&o.frameRendering.clip){const E=M7(p,n,o);E&&zC(p,E,o,n,m)&&Ek(E,f,a,o),ou(p,n,i,t,f,a,o)}else ou(p,n,i,t,f,a,o);const b=Ce(p,n);b&&ou(b,n,i,t,f,a,o),f.restore(),c||wk(p,f,o,n)}catch(y){console.error(y,p.id,p.x,p.y,p.width,p.height)}}),r.filter(p=>os(p)).forEach(p=>{try{const y=()=>{if(ou(p,n,i,t,f,a,o),os(p)&&(c||ur(p)&&a.embedsValidationStatus.get(p.id)!==!0)&&p.width&&p.height){const E=jB(p);ou(E,n,i,t,f,a,o)}c||wk(p,f,o,n)};if((p.frameId||o.frameToHighlight?.id)&&o.frameRendering.enabled&&o.frameRendering.clip){f.save();const E=M7(p,n,o);E&&zC(p,E,o,n,m)&&Ek(E,f,a,o),y(),f.restore()}else y()}catch(y){console.error(y)}}),a.pendingFlowchartNodes?.forEach(p=>{try{ou(p,n,i,t,f,a,o)}catch(y){console.error(y)}})},Z$=Wh(e=>{K$(e)},{trailing:!0}),q$=(e,t)=>{if(t){Z$(e);return}K$(e)},Xg=(e,t,n)=>{const i={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(i)},jg=(e,t,n,i,r)=>{if(!i.enabled||!i.clip)return null;const s=Ur(e,r);if(s){const o=t.ownerDocument.createElementNS(qe,"g");return o.setAttributeNS(qe,"clip-path",`url(#${s.id})`),n.forEach(a=>o.appendChild(a)),o}return null},v2=(e,t,n,i,r,s,o,a)=>{const l={x:s,y:o},[c,u,d,f]=Le(e,t);let h=(d-c)/2-(e.x-c),m=(f-u)/2-(e.y-u);if(le(e)){const v=zn(e,t);if(_e(v)){const[w,S,k,_]=Le(v,t),T=Z.getBoundTextElementPosition(v,e,t);h=(k-w)/2-(T.x-w),m=(_-S)/2-(T.y-S),s=s+T.x-e.x,o=o+T.y-e.y}}const p=180*e.angle/Math.PI;let y=i;if(e.link){const v=i.ownerDocument.createElementNS(qe,"a");v.setAttribute("href",Hr(e.link)),y.appendChild(v),y=v}const b=(v,w)=>{y.appendChild(v)},E=(Ur(e,t)?.opacity??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{const v=Et.generateElementShape(e,null),w=Xg(n,v,Lg);E!==1&&(w.setAttribute("stroke-opacity",`${E}`),w.setAttribute("fill-opacity",`${E}`)),w.setAttribute("stroke-linecap","round"),w.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const S=jg(e,y,[w],a.frameRendering,t);b(S||w);break}case"iframe":case"embeddable":{const v=Et.generateElementShape(e,a),w=Xg(n,v,Lg),S=e.opacity/100;S!==1&&(w.setAttribute("stroke-opacity",`${S}`),w.setAttribute("fill-opacity",`${S}`)),w.setAttribute("stroke-linecap","round"),w.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),b(w);const k=jB(e);v2(k,t,n,y,r,k.x+l.x-e.x,k.y+l.y-e.y,a);const _=Xg(n,v,Lg);for(_.setAttribute("stroke-linecap","round"),_.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);_.firstChild;)_.removeChild(_.firstChild);const T=Ji(Math.min(e.width,e.height),e),A=If(Pw(e.link||""));if(a.renderEmbeddables===!1||A?.type==="document"){const C=i.ownerDocument.createElementNS(qe,"a");C.setAttribute("href",Hr(e.link||"")),C.setAttribute("target","_blank"),C.setAttribute("rel","noopener noreferrer"),C.style.borderRadius=`${T}px`,_.appendChild(C)}else{const C=i.ownerDocument.createElementNS(qe,"foreignObject");C.style.width=`${e.width}px`,C.style.height=`${e.height}px`,C.style.border="none";const R=C.ownerDocument.createElementNS(qe,"div");R.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),R.style.width="100%",R.style.height="100%";const P=R.ownerDocument.createElement("iframe");P.src=A?.link??"",P.style.width="100%",P.style.height="100%",P.style.border="none",P.style.borderRadius=`${T}px`,P.style.top="0",P.style.left="0",P.allowFullscreen=!0,R.appendChild(P),C.appendChild(R),_.appendChild(C)}b(_);break}case"line":case"arrow":{const v=Ce(e,t),w=i.ownerDocument.createElementNS(qe,"mask");if(v){w.setAttribute("id",`mask-${e.id}`);const T=i.ownerDocument.createElementNS(qe,"rect");s=s||0,o=o||0,T.setAttribute("x","0"),T.setAttribute("y","0"),T.setAttribute("fill","#fff"),T.setAttribute("width",`${e.width+100+s}`),T.setAttribute("height",`${e.height+100+o}`),w.appendChild(T);const A=i.ownerDocument.createElementNS(qe,"rect"),C=Z.getBoundTextElementPosition(e,v,t),R=s+C.x-e.x,P=o+C.y-e.y;A.setAttribute("x",R.toString()),A.setAttribute("y",P.toString()),A.setAttribute("fill","#000"),A.setAttribute("width",`${v.width}`),A.setAttribute("height",`${v.height}`),A.setAttribute("opacity","1"),w.appendChild(A)}const S=i.ownerDocument.createElementNS(qe,"g");v&&S.setAttribute("mask",`url(#mask-${e.id})`),S.setAttribute("stroke-linecap","round"),Et.generateElementShape(e,a).forEach(T=>{const A=Xg(n,T,Lg);E!==1&&(A.setAttribute("stroke-opacity",`${E}`),A.setAttribute("fill-opacity",`${E}`)),A.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),e.type==="line"&&Bo(e.points)&&e.backgroundColor!=="transparent"&&A.setAttribute("fill-rule","evenodd"),S.appendChild(A)});const _=jg(e,y,[S,w],a.frameRendering,t);_?(b(_),y.appendChild(_)):(b(S),y.append(w));break}case"freedraw":{const v=Et.generateElementShape(e,a),w=v?Xg(n,v,Lg):i.ownerDocument.createElementNS(qe,"g");E!==1&&(w.setAttribute("stroke-opacity",`${E}`),w.setAttribute("fill-opacity",`${E}`)),w.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),w.setAttribute("stroke","none");const S=i.ownerDocument.createElementNS(qe,"path");S.setAttribute("fill",e.strokeColor),S.setAttribute("d",AB(e)),w.appendChild(S);const k=jg(e,y,[w],a.frameRendering,t);b(k||w);break}case"image":{const v=Math.round(e.width),w=Math.round(e.height),S=Tn(e)&&r[e.fileId];if(S){const{reuseImages:k=!0}=a;let _=`image-${S.id}`,T=e.width,A=e.height;e.crop&&({width:T,height:A}=Za(e),_=`image-crop-${S.id}-${S9(`${T}x${A}`)}`),k||(_=`image-${e.id}`);let C=i.querySelector(`#${_}`);if(!C){C=i.ownerDocument.createElementNS(qe,"symbol"),C.id=_;const $=i.ownerDocument.createElementNS(qe,"image");$.setAttribute("href",S.dataURL),$.setAttribute("preserveAspectRatio","none"),e.crop||!k?($.setAttribute("width",`${T}`),$.setAttribute("height",`${A}`)):($.setAttribute("width","100%"),$.setAttribute("height","100%")),C.appendChild($),(y.querySelector("defs")||y).prepend(C)}const R=i.ownerDocument.createElementNS(qe,"use");R.setAttribute("href",`#${_}`),a.exportWithDarkMode&&S.mimeType!==Ue.svg&&R.setAttribute("filter",vB);let P=0,N=0;if(e.crop){const{width:$,height:G}=Za(e);P=e.crop.x/(e.crop.naturalWidth/$),N=e.crop.y/(e.crop.naturalHeight/G)}const K=h+P,H=m+N;R.setAttribute("width",`${v+P}`),R.setAttribute("height",`${w+N}`),R.setAttribute("opacity",`${E}`),(e.scale[0]!==1||e.scale[1]!==1)&&R.setAttribute("transform",`translate(${K} ${H}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-K} ${-H})`);const z=i.ownerDocument.createElementNS(qe,"g");if(e.crop){const $=i.ownerDocument.createElementNS(qe,"mask");$.setAttribute("id",`mask-image-crop-${e.id}`),$.setAttribute("fill","#fff");const G=i.ownerDocument.createElementNS(qe,"rect");G.setAttribute("x",`${P}`),G.setAttribute("y",`${N}`),G.setAttribute("width",`${v}`),G.setAttribute("height",`${w}`),$.appendChild(G),y.appendChild($),z.setAttribute("mask",`url(#${$.id})`)}if(z.appendChild(R),z.setAttribute("transform",`translate(${s-P} ${o-N}) rotate(${p} ${K} ${H})`),e.roundness){const $=i.ownerDocument.createElementNS(qe,"clipPath");$.id=`image-clipPath-${e.id}`;const G=i.ownerDocument.createElementNS(qe,"rect"),J=Ji(Math.min(e.width,e.height),e);G.setAttribute("width",`${e.width}`),G.setAttribute("height",`${e.height}`),G.setAttribute("rx",`${J}`),G.setAttribute("ry",`${J}`),$.appendChild(G),b($),z.setAttributeNS(qe,"clip-path",`url(#${$.id})`)}const V=jg(e,y,[z],a.frameRendering,t);b(V||z)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){const v=document.createElementNS(qe,"rect");v.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),v.setAttribute("width",`${e.width}px`),v.setAttribute("height",`${e.height}px`),v.setAttribute("rx",Rt.radius.toString()),v.setAttribute("ry",Rt.radius.toString()),v.setAttribute("fill","none"),v.setAttribute("stroke",Rt.strokeColor),v.setAttribute("stroke-width",Rt.strokeWidth.toString()),b(v)}break}default:if(le(e)){const v=i.ownerDocument.createElementNS(qe,"g");E!==1&&(v.setAttribute("stroke-opacity",`${E}`),v.setAttribute("fill-opacity",`${E}`)),v.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const w=e.text.replace(/\r\n?/g,`
`).split(`
`),S=Wm(e.fontSize,e.lineHeight),k=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,_=lF(e.fontFamily,e.fontSize,S),T=yF(e.text)?"rtl":"ltr",A=e.textAlign==="center"?"middle":e.textAlign==="right"||T==="rtl"?"end":"start";for(let R=0;R<w.length;R++){const P=i.ownerDocument.createElementNS(qe,"text");P.textContent=w[R],P.setAttribute("x",`${k}`),P.setAttribute("y",`${R*S+_}`),P.setAttribute("font-family",$m(e)),P.setAttribute("font-size",`${e.fontSize}px`),P.setAttribute("fill",e.strokeColor),P.setAttribute("text-anchor",A),P.setAttribute("style","white-space: pre;"),P.setAttribute("direction",T),P.setAttribute("dominant-baseline","alphabetic"),v.appendChild(P)}const C=jg(e,y,[v],a.frameRendering,t);b(C||v)}else throw new Error(`Unimplemented type ${e.type}`)}},L6e=(e,t,n,i,r,s)=>{i&&(e.filter(o=>!os(o)).forEach(o=>{if(!o.isDeleted){if(le(o)&&o.containerId&&t.has(o.containerId))return;try{v2(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s);const a=Ce(o,t);a&&v2(a,t,n,i,r,a.x+s.offsetX,a.y+s.offsetY,s)}catch(a){console.error(a)}}}),e.filter(o=>os(o)).forEach(o=>{if(!o.isDeleted)try{v2(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s)}catch(a){console.error(a)}}))},O6e=(e,t)=>{if(e.width<=t)return e;const i=document.createElement("canvas").getContext("2d");i.font=ot({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(i.measureText(r).width>t)for(let o=r.length;o>0;o--){const a=`${r.slice(0,o)}...`;if(i.measureText(a).width<=t){r=a;break}}return Ee(e,{text:r,width:t})},N6e=(e,t)=>{const n=[];for(const i of e){if(pe(i)){let r=Gr({x:i.x,y:i.y-Rt.nameOffsetY,fontFamily:Ye.Helvetica,fontSize:Rt.nameFontSize,lineHeight:Rt.nameLineHeight,strokeColor:t.exportWithDarkMode?Rt.nameColorDarkTheme:Rt.nameColorLightTheme,text:yB(i)});r.y-=r.height,r=O6e(r,i.width),n.push(r)}n.push(i)}return n},Q$=(e,t)=>(t=t||Xo().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),J$=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:i})=>{let r;return t?r=d9(e,t):n.enabled&&n.name?r=N6e(e,{exportWithDarkMode:i}):r=e,r},eG=async(e,t,n,{exportBackground:i,exportPadding:r=Yh,viewBackgroundColor:s,exportingFrame:o},a=(c,u)=>{const d=document.createElement("canvas");return d.width=c*t.exportScale,d.height=u*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await He.loadElementsFonts(e)})=>{await l();const c=Q$(o??null,t.frameRendering??null);o&&(c.clip=!1);const u=J$({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:c});o&&(r=0);const[d,f,h,m]=U_(o?[o]:c9(u),r),{canvas:p,scale:y=1}=a(h,m),b=Xo(),{imageCache:E}=await KB({imageCache:new Map,fileIds:ZB(u).map(v=>v.fileId),files:n});return q$({canvas:p,rc:Vc.canvas(p),elementsMap:Fo(be(u)),allElementsMap:Fo(be(Gc(e))),visibleElements:u,scale:y,appState:{...t,frameRendering:c,viewBackgroundColor:i?s:null,scrollX:-d+r,scrollY:-f+r,zoom:b.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?Te.DARK:Te.LIGHT},renderConfig:{canvasBackgroundColor:s,imageCache:E,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),p},E1=e=>document.createComment(` ${e} `),p_=async(e,t,n,i)=>{const r=Q$(i?.exportingFrame??null,t.frameRendering??null);let{exportPadding:s=Yh,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:c}=t;const{exportingFrame:u=null}=i||{},d=J$({elements:e,exportingFrame:u,exportWithDarkMode:o,frameRendering:r});u&&(s=0);const[f,h,m,p]=U_(u?[u]:c9(d),s),y=-f+s,b=-h+s,E=document.createElementNS(qe,"svg");E.setAttribute("version","1.1"),E.setAttribute("xmlns",qe),E.setAttribute("viewBox",`0 0 ${m} ${p}`),E.setAttribute("width",`${m*l}`),E.setAttribute("height",`${p*l}`),o&&E.setAttribute("filter",xw);const v=E.ownerDocument.createElementNS(qe,"defs"),w=E.ownerDocument.createElementNS(qe,"metadata");if(E.appendChild(E1("svg-source:excalidraw")),E.appendChild(w),E.appendChild(v),c)try{P6e({metadataElement:w,payload:ag(e,t,n||{},"local")})}catch(R){console.error(R)}const S=l9(e);if(S.length){const R=be(e);for(const P of S){const N=E.ownerDocument.createElementNS(qe,"clipPath");N.setAttribute("id",P.id);const[K,H,z,V]=Le(P,R),$=(z-K)/2-(P.x-K),G=(V-H)/2-(P.y-H),J=E.ownerDocument.createElementNS(qe,"rect");J.setAttribute("transform",`translate(${P.x+y} ${P.y+b}) rotate(${P.angle} ${$} ${G})`),J.setAttribute("width",`${P.width}`),J.setAttribute("height",`${P.height}`),u||(J.setAttribute("rx",`${Rt.radius}`),J.setAttribute("ry",`${Rt.radius}`)),N.appendChild(J),v.appendChild(N)}}const k=i?.skipInliningFonts?[]:await He.generateFontFaceDeclarations(e),_=`
      `,T=E.ownerDocument.createElementNS(qe,"style");if(T.classList.add("style-fonts"),T.appendChild(document.createTextNode(`${_}${k.join(_)}`)),v.appendChild(T),t.exportBackground&&a){const R=E.ownerDocument.createElementNS(qe,"rect");R.setAttribute("x","0"),R.setAttribute("y","0"),R.setAttribute("width",`${m}`),R.setAttribute("height",`${p}`),R.setAttribute("fill",a),E.appendChild(R)}const A=Vc.svg(E),C=i?.renderEmbeddables??!1;return L6e(d,Fo(be(d)),A,E,n||{},{offsetX:y,offsetY:b,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:C,frameRendering:r,canvasBackgroundColor:a,embedsValidationStatus:C?new Map(d.filter(R=>pe(R)).map(R=>[R.id,!0])):new Map,reuseImages:i?.reuseImages??!0}),E},P6e=({payload:e,metadataElement:t})=>{const n=N$(JSON.stringify(F$({text:e})),!0);t.appendChild(E1(`payload-type:${Ue.excalidraw}`)),t.appendChild(E1("payload-version:2")),t.appendChild(E1("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(E1("payload-end"))},F6e=({svg:e})=>{if(e.includes(`payload-type:${Ue.excalidraw}`)){const t=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!t)throw new Error("INVALID");const r=(e.match(/<!-- payload-version:(\d+) -->/)?.[1]||"1")!=="1";try{const s=P$(t[1],r),o=JSON.parse(s);if(!("encoded"in o)){if("type"in o&&o.type===ms.excalidraw)return s;throw new Error("FAILED")}return B$(o)}catch(s){throw console.error(s),new Error("FAILED")}}throw new Error("INVALID")},U_=(e,t)=>{const[n,i,r,s]=ft(e),o=Li(n,r)+t*2,a=Li(i,s)+t*2;return[n,i,o,a]},B6e=(e,t,n)=>{const[,,i,r]=U_(e,t).map(s=>Math.trunc(s*n));return[i,r]},z6e={selection:!0,lasso:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},H6e=e=>Object.keys(Ye).includes(e)?Ye[e]:Hc,Xd=(e,t)=>{if(!t)return null;const n=t.focus||0;return ce(e)?Cb(t)?{...t,focus:n,fixedPoint:g5(t.fixedPoint??[0,0])}:null:{...t,focus:n}},_l=(e,t)=>{const n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||tr(),fillStyle:e.fillStyle||nn.fillStyle,strokeWidth:e.strokeWidth||nn.strokeWidth,strokeStyle:e.strokeStyle??nn.strokeStyle,roughness:e.roughness??nn.roughness,opacity:e.opacity==null?nn.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||nn.strokeColor,backgroundColor:e.backgroundColor||nn.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:_d(e.type)?ln.LEGACY:ln.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??Kh(),link:e.link?Hr(e.link):null,locked:e.locked??!1};("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData);const i={...e,...n,...DB(n),...t};return delete i.strokeSharpness,delete i.boundElementIds,i},V6e=e=>{switch(e={...e},e.type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){const[u,d]=e.font.split(" ");t=parseFloat(u),n=H6e(d)}const i=typeof e.text=="string"&&e.text||"",r=e.lineHeight||(e.height?_oe(e):Tc(e.fontFamily));return e=_l(e,{fontSize:t,fontFamily:n,text:i,textAlign:e.textAlign||Hm,verticalAlign:e.verticalAlign||cb,containerId:e.containerId??null,originalText:e.originalText||i,autoResize:e.autoResize??!0,lineHeight:r}),!i&&!e.isDeleted&&(e={...e,originalText:i,isDeleted:!0},e=wa(e)),e;case"freedraw":return _l(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return _l(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":const{startArrowhead:s=null,endArrowhead:o=null}=e;let a=e.x,l=e.y,c=!Array.isArray(e.points)||e.points.length<2?[I(0,0),I(e.width,e.height)]:e.points;return(c[0][0]!==0||c[0][1]!==0)&&({points:c,x:a,y:l}=Z.getNormalizeElementPointsAndCoords(e)),_l(e,{type:e.type==="draw"?"line":e.type,startBinding:Xd(e,e.startBinding),endBinding:Xd(e,e.endBinding),lastCommittedPoint:null,startArrowhead:s,endArrowhead:o,points:c,x:a,y:l,...sn(e)?{polygon:x7(e.points)?e.polygon??!1:!1}:{},...dh(c)});case"arrow":{const{startArrowhead:u=null,endArrowhead:d="arrow"}=e;let f=e.x,h=e.y,m=!Array.isArray(e.points)||e.points.length<2?[I(0,0),I(e.width,e.height)]:e.points;(m[0][0]!==0||m[0][1]!==0)&&({points:m,x:f,y:h}=Z.getNormalizeElementPointsAndCoords(e));const p={type:e.type,startBinding:Xd(e,e.startBinding),endBinding:Xd(e,e.endBinding),lastCommittedPoint:null,startArrowhead:u,endArrowhead:d,points:m,x:f,y:h,elbowed:e.elbowed,...dh(m)};return ce(e)?_l(e,{...p,elbowed:!0,startBinding:Xd(e,e.startBinding),endBinding:Xd(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):_l(e,p)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return _l(e,{});case"magicframe":case"frame":return _l(e,{name:e.name??null})}return null},$6e=(e,t)=>{if(e.boundElements){const n=e.boundElements.slice(),i=new Set;e.boundElements=n.reduce((r,s)=>{const o=t.get(s.id);if(o&&!i.has(s.id)){if(i.add(s.id),o.isDeleted)return r;r.push(s),le(o)&&!o.containerId&&(o.containerId=e.id)}return r},[])}},G6e=(e,t)=>{const n=e.containerId?t.get(e.containerId):null;if(e.angle=_e(n)?0:n?.angle??0,!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(i=>i.id===e.id)){const i=(n.boundElements||(n.boundElements=[])).slice();i.push({type:"text",id:e.id}),n.boundElements=i}},X6e=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},ad=(e,t,n)=>{const i=new Set,r=t?be(t):null,s=Gc((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!oc(l)){let c=V6e(l);if(c){const u=r?.get(l.id);u&&u.version>c.version&&(c=wa(c,u.version)),i.has(c.id)&&(c={...c,id:tr()}),i.add(c.id),a.push(c)}}return a},[]));if(!n?.repairBindings)return s;const o=be(s);for(const a of s)a.frameId&&X6e(a,o),le(a)&&a.containerId?G6e(a,o):a.boundElements&&$6e(a,o),n.refreshDimensions&&le(a)&&Object.assign(a,GB(a,zn(a,o),o)),we(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!_e(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!_e(a))&&(a.endBinding=null));return s.map(a=>{if(ce(a)&&!GF(a)&&!iB(a.points))return{...a,...qh(a,o,{points:[I(0,0),a.points[a.points.length-1]]}),index:a.index};if(ce(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,c])=>Math.abs(l)>1e6||Math.abs(c)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);const l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[I(0,0),I(0,-10),I(l.width/2+5,-10),I(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},j6e=(e,t,n)=>{const i=t[e];return i!==void 0?i:n[e]},_k={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??j6e("defaultSidebarDockedPreference",e,t)]},tG=(e,t)=>{e=e||{};const n=Xo(),i={};for(const r of Object.keys(_k))if(r in e){const[s,o]=_k[r](e,n);i[s]=o}for(const[r,s]of Object.entries(n)){const o=e[r],a=t?t[r]:void 0;i[r]=o!==void 0?o:a!==void 0?a:s}return{...i,cursorButton:t?.cursorButton||"up",penDetected:t?.penDetected??(e.penMode?e.penDetected??!1:!1),activeTool:{...Xt(n,i.activeTool.type&&z6e[i.activeTool.type]?i.activeTool:{type:"selection"}),lastActiveTool:null,locked:i.activeTool.locked??!1},zoom:{value:ka(K1(e.zoom)?e.zoom:e.zoom?.value??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:ps.name}:i.openSidebar,gridSize:Jce(K1(e.gridSize)?e.gridSize:db),gridStep:oH(K1(e.gridStep)?e.gridStep:nF),editingFrame:null}},ld=(e,t,n,i)=>({elements:ad(e?.elements,n,i),appState:tG(e?.appState,t||null),files:e?.files||{}}),Tk=e=>{const t=ad(Lt(e.elements),null);return t.length?{...e,elements:t}:null},Z5=(e=[],t)=>{const n=[];for(const i of e)if(Array.isArray(i)){const r=Tk({status:t,elements:i,id:tr(),created:Date.now()});r&&n.push(r)}else{const r=i,s=Tk({...r,id:r.id||tr(),status:r.status||t,created:r.created||Date.now()});s&&n.push(s)}return n},nG=async e=>{let t;if(e.type===Ue.png)try{return await(await ge(()=>Promise.resolve().then(()=>LG),void 0)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new Uu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Uu("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{const i=new FileReader;i.readAsText(e,"utf8"),i.onloadend=()=>{i.readyState===FileReader.DONE&&n(i.result)}}),e.type===Ue.svg)try{return F6e({svg:t})}catch(n){throw n.message==="INVALID"?new Uu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Uu("Error: cannot restore image")}return t},iG=e=>e&&e.name.match(/\.(json|excalidraw|png|svg)$/)?.[1]||null,Y6e=e=>e==="png"||e==="svg",b_=e=>{const t=iG(e);return t==="png"||t==="svg"},rG=e=>!!e&&Object.values(ch).includes(e),Fu=e=>{const{type:t}=e||{};return rG(t)},sG=async(e,t,n,i)=>{const r=await nG(e);let s;try{try{s=JSON.parse(r)}catch(o){throw Fu(e)?new Uu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(x6e(s))return{type:Ue.excalidraw,data:ld({elements:lz(s.elements||[]),appState:{theme:t?.theme,fileHandle:i||e.handle||null,...XV(s.appState||{}),...t?W0(s.elements||[],t):{}},files:s.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(G$(s))return{type:Ue.excalidrawlib,data:s};throw new Error("Error: invalid file")}catch(o){throw o instanceof Uu?o:new Error("Error: invalid file")}},y_=async(e,t,n,i)=>{const r=await sG(e,t,n,i);if(r.type!==Ue.excalidraw)throw new Error("Error: invalid file");return r.data},oG=(e,t="unpublished")=>{const n=JSON.parse(e);if(!G$(n))throw new Error("Invalid library");const i=n.libraryItems||n.library;return Z5(i,t)},W6e=async(e,t="unpublished")=>oG(await nG(e),t),am=async e=>new Promise(async(t,n)=>{try{Xm(e)&&(e=await e),e.toBlob(i=>{if(!i)return n(new zde("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(i)})}catch(i){n(i)}}),K6e=async e=>{try{const t=await window.crypto.subtle.digest("SHA-1",await Wl(e));return wF(new Uint8Array(t))}catch(t){return console.error(t),BF(40)}},aG=async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const r=i.result;t(r)},i.onerror=r=>n(r),i.readAsDataURL(e)}),Z6e=(e,t)=>`data:${t};base64,${N$(i6(e),!0)}`,q6e=e=>P$(e.slice(e.indexOf(",")+1)),lG=async(e,t)=>{if(e.type===Ue.svg)return e;const[n,i]=await Promise.all([ge(()=>import("./pica-C72Tcsr8.js").then(s=>s.p),__vite__mapDeps([2,3])).then(s=>s.default),ge(()=>import("./image-blob-reduce.esm-B6b2_-a4.js"),__vite__mapDeps([])).then(s=>s.default)]),r=i({pica:n({features:["js","wasm"]})});if(t.outputType){const{outputType:s}=t;r._create_blob=function(o){return this.pica.toBlob(o.out_canvas,s,.8).then(a=>(o.out_blob=a,o))}}if(!Fu(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await r.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},Sk=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:Ue.svg}),Q6e=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});const i=await n.blob();if(i.type&&Fu(i)){const r=t||i.name||"";return new File([i],r,{type:i.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},J6e=async e=>{const t=e.dataTransfer.files.item(0),n=await e5e(e);return{file:t?await E_(t):null,fileHandle:n}},e5e=async e=>{if(jc)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},Ik=e=>{let t=null;const n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,i={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===i.png?t=Ue.png:n.startsWith(i.jpg)?t=Ue.jpg:n.startsWith(i.gif)&&(t=Ue.gif),t},v1=(e,t,n)=>new File([e],n||"",{type:t}),E_=async e=>{if(e.type){if(Fu(e)){const t=await Wl(e),n=Ik(t);n&&n!==e.type&&(e=v1(t,n,e.name))}}else if(e?.name?.endsWith(".excalidrawlib"))e=v1(await Wl(e),Ue.excalidrawlib,e.name);else if(e?.name?.endsWith(".excalidraw"))e=v1(await Wl(e),Ue.excalidraw,e.name);else{const t=await Wl(e),n=Ik(t);n&&(e=v1(t,n,e.name))}return e},Wl=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const i=new FileReader;i.onload=r=>{if(!r.target?.result)return n(new Error("Couldn't convert blob to ArrayBuffer"));t(r.target.result)},i.readAsArrayBuffer(e)}),Bs=32,At=12,dc=256,cG=50,fu="NOT_SPREADSHEET",lm="VALID_SPREADSHEET",w1=e=>{const t=/^([-+]?)[$€£¥₩]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},IE=(e,t)=>e.slice(1).every(n=>w1(n[t])!==null),xk=e=>{const t=e[0].length;if(t>2)return{type:fu,reason:"More than 2 columns"};if(t===1){if(!IE(e,0))return{type:fu,reason:"Value is not numeric"};const l=w1(e[0][0])===null,c=(l?e.slice(1):e).map(u=>w1(u[0]));return c.length<2?{type:fu,reason:"Less than two rows"}:{type:lm,spreadsheet:{title:l?e[0][0]:null,labels:null,values:c}}}const n=IE(e,0),i=IE(e,1);if(!n&&!i)return{type:fu,reason:"Value is not numeric"};const[r,s]=i?[0,1]:[1,0],o=w1(e[0][s])===null,a=o?e.slice(1):e;return a.length<2?{type:fu,reason:"Less than 2 rows"}:{type:lm,spreadsheet:{title:o?e[0][s]:null,labels:a.map(l=>l[r]),values:a.map(l=>w1(l[s]))}}},t5e=e=>{const t=[];for(let n=0;n<e[0].length;n++){const i=[];for(let r=0;r<e.length;r++)i.push(e[r][n]);t.push(i)}return t},n5e=e=>{let t=e.trim().split(`
`).map(s=>s.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(s=>s.trim().split(","))),t.length===0)return{type:fu,reason:"No values"};const n=t[0].length;if(!t.every(s=>s.length===n))return{type:fu,reason:"All rows don't have same number of columns"};const r=xk(t);if(r.type!==lm){const s=xk(t5e(t));if(s.type===lm)return s}return r},o6=bie(mie),Ws={fillStyle:"hachure",fontFamily:Hc,fontSize:dl,opacity:100,roughness:1,strokeColor:Pe.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:Or.MIDDLE,locked:!1},uG=e=>{const t=(Bs+At)*e.values.length+At,n=dc+At*2;return{chartWidth:t,chartHeight:n}},i5e=(e,t,n,i,r)=>e.labels?.map((s,o)=>Gr({groupIds:[i],backgroundColor:r,...Ws,text:s.length>8?`${s.slice(0,5)}...`:s,x:t+o*(Bs+At)+At*2,y:n+At/2,width:Bs,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"}))||[],r5e=(e,t,n,i,r)=>{const s=Gr({groupIds:[i],backgroundColor:r,...Ws,x:t-At,y:n-At,text:"0",textAlign:"right"}),o=Gr({groupIds:[i],backgroundColor:r,...Ws,x:t-At,y:n-dc-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[s,o]},s5e=(e,t,n,i,r)=>{const{chartWidth:s,chartHeight:o}=uG(e),a=ac({backgroundColor:r,groupIds:[i],...Ws,type:"line",x:t,y:n,width:s,points:[I(0,0),I(s,0)]}),l=ac({backgroundColor:r,groupIds:[i],...Ws,type:"line",x:t,y:n,height:o,points:[I(0,0),I(0,-280)]}),c=ac({backgroundColor:r,groupIds:[i],...Ws,type:"line",x:t,y:n-dc-At,strokeStyle:"dotted",width:s,opacity:cG,points:[I(0,0),I(s,0)]});return[a,l,c]},dG=(e,t,n,i,r,s)=>{const{chartWidth:o}=uG(e),a=e.title?Gr({backgroundColor:r,groupIds:[i],...Ws,text:e.title,x:t+o/2,y:n-dc-At*2-dl,roundness:null,textAlign:"center"}):null;return[...a?[a]:[],...i5e(e,t,n,i,r),...r5e(e,t,n,i,r),...s5e(e,t,n,i,r)]},o5e=(e,t,n)=>{const i=Math.max(...e.values),r=tr(),s=o6[Math.floor(Math.random()*o6.length)];return[...e.values.map((a,l)=>{const c=a/i*dc;return $o({backgroundColor:s,groupIds:[r],...Ws,type:"rectangle",x:t+l*(Bs+At)+At,y:n-c-At,width:Bs,height:c})}),...dG(e,t,n,r,s)]},a5e=(e,t,n)=>{const i=Math.max(...e.values),r=tr(),s=o6[Math.floor(Math.random()*o6.length)];let o=0;const a=[];for(const p of e.values){const y=o*(Bs+At),b=-(p/i)*dc;a.push([y,b]),o++}const l=Math.max(...a.map(p=>p[0])),c=Math.max(...a.map(p=>p[1])),u=Math.min(...a.map(p=>p[0])),d=Math.min(...a.map(p=>p[1])),f=ac({backgroundColor:s,groupIds:[r],...Ws,type:"line",x:t+At+Bs/2,y:n-At,height:c-d,width:l-u,strokeWidth:2,points:a}),h=e.values.map((p,y)=>{const b=y*(Bs+At)+At/2,E=-(p/i)*dc+At/2;return $o({backgroundColor:s,groupIds:[r],...Ws,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+b+Bs/2,y:n+E-At*2,width:At,height:At})}),m=e.values.map((p,y)=>{const b=y*(Bs+At)+At/2,E=p/i*dc+At/2+At;return ac({backgroundColor:s,groupIds:[r],...Ws,type:"line",x:t+b+Bs/2+At/2,y:n-E,height:E,strokeStyle:"dotted",opacity:cG,points:[I(0,0),I(0,E)]})});return[...dG(e,t,n,r,s),f,...m,...h]},l5e=(e,t,n,i)=>e==="line"?a5e(t,n,i):o5e(t,n,i),v_="clipboard"in navigator&&"writeText"in navigator.clipboard,w_="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,c5e=e=>!!([ms.excalidraw,ms.excalidrawClipboard,ms.excalidrawClipboardWithAPI].includes(e?.type)&&Array.isArray(e.elements)),u5e=({types:e,files:t})=>{!e&&!t&&console.warn("createPasteEvent: no types or files provided");const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(const[i,r]of Object.entries(e)){if(typeof r!="string"){t=t||[],t.push(r);continue}try{if(n.clipboardData?.setData(i,r),n.clipboardData?.getData(i)!==r)throw new Error(`Failed to set "${i}" as clipboardData item`)}catch(s){throw new Error(s.message)}}if(t){let i=-1;for(const r of t){i++;try{if(n.clipboardData?.items.add(r),n.clipboardData?.files[i]!==r)throw new Error(`Failed to set file "${r.name}" as clipboardData item`)}catch(s){throw new Error(s.message)}}}return n},d5e=({elements:e,files:t})=>{const n=be(e),i=new Set(e.filter(a=>pe(a)));let r=!1;const s=e.reduce((a,l)=>(Tn(l)&&(r=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});r&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");const o={type:ms.excalidrawClipboard,elements:e.map(a=>{if(Ur(a,n)&&!i.has(Ur(a,n))){const l=xc(a);return fi(l,n,{frameId:null}),l}return a}),files:t?s:void 0};return JSON.stringify(o)},f5e=async(e,t,n)=>{await Yc(d5e({elements:e,files:t}),n)},h5e=e=>{const t=n5e(e);return t.type===lm?{spreadsheet:t.spreadsheet}:null};function fG(e){let t=[];for(const n of e.childNodes)if(n.nodeType===3){const i=n.textContent?.trim();i&&t.push({type:"text",value:i})}else if(n instanceof HTMLImageElement){const i=n.getAttribute("src");i&&i.startsWith("http")&&t.push({type:"imageUrl",value:i})}else t=t.concat(fG(n));return t}const g5e=e=>{const t=e.clipboardData?.getData(Ue.html);if(!t)return null;try{const n=new DOMParser().parseFromString(t,Ue.html),i=fG(n.body);if(i.length)return{type:"mixedContent",value:i}}catch(n){console.error(`error in parseHTMLFromPaste: ${n.message}`)}return null},m5e=async()=>{const e={};let t;try{t=await navigator.clipboard?.read()}catch(n){try{if(navigator.clipboard?.readText){console.warn(`navigator.clipboard.readText() failed (${n.message}). Failling back to navigator.clipboard.read()`);const i=await navigator.clipboard?.readText();if(i)return{[Ue.text]:i}}}catch(i){if(navigator.clipboard?.read)console.warn(`navigator.clipboard.readText() failed (${i.message}). Failling back to navigator.clipboard.read()`);else{if(i.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${i.message}`),e;throw i}}throw n}for(const n of t)for(const i of n.types)if(TF(Die,i))try{if(i===Ue.text||i===Ue.html)e[i]=await(await n.getType(i)).text();else if(rG(i)){const r=await n.getType(i),s=v1(r,i,void 0);e[i]=s}else throw new Vs(`Unsupported clipboard type: ${i}`)}catch(r){console.warn(r instanceof Vs?r.message:`Cannot retrieve ${i} from clipboardItem: ${r.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},p5e=async(e,t=!1)=>{try{const n=!t&&e&&g5e(e);return n?n.value.every(r=>r.type==="text")?{type:"text",value:e.clipboardData?.getData(Ue.text)||n.value.map(r=>r.value).join(`
`).trim()}:n:{type:"text",value:(e.clipboardData?.getData(Ue.text)||"").trim()}}catch{return{type:"text",value:""}}},hG=async(e,t=!1)=>{const n=await p5e(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{const i=!t&&h5e(n.value);if(i)return i}catch(i){console.error(i)}try{const i=JSON.parse(n.value),r=i.type===ms.excalidrawClipboardWithAPI;if(c5e(i))return{elements:i.elements,files:i.files,text:t?JSON.stringify(i.elements,null,2):void 0,programmaticAPI:r}}catch{}return{text:n.value}},U5e=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[Ue.png]:e})])}catch(t){if(Xm(e))await navigator.clipboard.write([new window.ClipboardItem({[Ue.png]:await e})]);else throw t}},Yc=async(e,t)=>{if(v_)try{await navigator.clipboard.writeText(e||"");return}catch(n){console.error(n)}try{if(t){if(t.clipboardData?.setData(Ue.text,e||""),t.clipboardData?.getData(Ue.text)!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(n){console.error(n)}if(!b5e(e))throw new Error("Error copying to clipboard.")},b5e=e=>{e||(e=" ");const t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${i}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let r=!1;try{n.select(),n.setSelectionRange(0,n.value.length),r=document.execCommand("copy")}catch(s){console.error(s)}return n.remove(),r},q5=(e,{selectedElementIds:t},n)=>{e=Lt(e);const i=n&&Hn(e,{selectedElementIds:t});let r=null,s=i?Ne(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return i&&(s.length===1&&pe(s[0])?(r=s[0],s=d9(e,r)):s.length>1&&(s=Ne(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:r,exportedElements:Ba(s)}},Q5=async(e,t,n,i,{exportBackground:r,exportPadding:s=Yh,viewBackgroundColor:o,name:a=n.name||oF,fileHandle:l=null,exportingFrame:c=null})=>{if(t.length===0)throw new Error(M("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){const d=p_(t,{exportBackground:r,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},i,{exportingFrame:c});if(e==="svg")return s6(d.then(f=>new Blob([jie+f.outerHTML],{type:Ue.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[ch.svg],fileHandle:l});if(e==="clipboard-svg"){const f=await d.then(h=>h.outerHTML);try{await Yc(f)}catch{throw new Error(M("errors.copyToSystemClipboardFailed"))}return}}const u=eG(t,n,i,{exportBackground:r,viewBackgroundColor:o,exportPadding:s,exportingFrame:c});if(e==="png"){let d=am(u);return n.exportEmbedScene&&(d=d.then(f=>ge(()=>Promise.resolve().then(()=>LG),void 0).then(({encodePngMetadata:h})=>h({blob:f,metadata:ag(t,n,i,"local")})))),s6(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[ch.png],fileHandle:l})}else if(e==="clipboard")try{const d=am(u);await U5e(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(M("canvasError.canvasTooBig")):P0&&d.name==="TypeError"?new Error(`${M("alerts.couldNotCopyToClipboard")}

${M("hints.firefox_clipboard_write")}`):new Error(M("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},y5e=async(e,t,n,i)=>{const{exportBackground:r,viewBackgroundColor:s,fileHandle:o}=t,a=iG(o);if(!o||!Y6e(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};const{exportedElements:l,exportingFrame:c}=q5(e,t,!1);return await Q5(a,l,t,n,{exportBackground:r,viewBackgroundColor:s,name:i,fileHandle:o,exportingFrame:c}),{fileHandle:o}},E5e=re({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:j.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:i,app:r})=>g(BUe,{label:M("labels.fileTitle"),value:r.getName(),onChange:s=>t(s),ignoreFocus:i?.ignoreFocus??!1})}),v5e=re({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:j.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Lt(e),s=Hn(i,t)?Ne(i,t):i;return g(de,{children:Cw.map(o=>{const[a,l]=B6e(s,Yh,o),c=`${M("imageExportDialog.label.scale")} ${o}x (${a}x${l})`;return g(Be,{size:"small",type:"radio",icon:`${o}x`,name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:o===t.exportScale,onChange:()=>n(o)},o)})})}}),w5e=re({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:j.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(l_,{checked:e.exportBackground,onChange:n=>t(n),children:M("imageExportDialog.label.withBackground")})}),gG=re({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:j.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>O(l_,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[M("imageExportDialog.label.embedScene"),g(il,{label:M("imageExportDialog.tooltip.embedScene"),long:!0,children:g("div",{className:"excalidraw-tooltip-icon",children:wue})})]})}),a6=re({name:"saveToActiveFile",label:"buttons.save",icon:S5,trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{const r=!!t.fileHandle;try{const{fileHandle:s}=b_(t.fileHandle)?await y5e(e,t,i.files,i.getName()):await $$(e,t,i.files,i.getName());return{captureUpdate:j.EVENTUALLY,appState:{...t,fileHandle:s,toast:r?{message:s?.name?M("toast.fileSavedToFilename").replace("{filename}",`"${s.name}"`):M("toast.fileSaved")}:null}}}catch(s){return s?.name!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:j.EVENTUALLY}}},keyTest:e=>e.key===B.S&&e[B.CTRL_OR_CMD]&&!e.shiftKey}),mG=re({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:S5,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,i)=>{try{const{fileHandle:r}=await $$(e,{...t,fileHandle:null},i.files,i.getName());return{captureUpdate:j.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:r,toast:{message:M("toast.fileSaved")}}}}catch(r){return r?.name!=="AbortError"?console.error(r):console.warn(r),{captureUpdate:j.EVENTUALLY}}},keyTest:e=>e.key===B.S&&e.shiftKey&&e[B.CTRL_OR_CMD],PanelComponent:({updateData:e})=>g(Be,{type:"button",icon:pue,title:M("buttons.saveAs"),"aria-label":M("buttons.saveAs"),showAriaLabel:ei().editor.isMobile,hidden:!jc,onClick:()=>e(null),"data-testid":"save-as-button"})}),E4=re({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{try{const{elements:r,appState:s,files:o}=await I6e(t,e);return{elements:r,appState:s,files:o,captureUpdate:j.IMMEDIATELY}}catch(r){return r?.name==="AbortError"?(console.warn(r),!1):{elements:e,appState:{...t,errorMessage:r.message},files:i.files,captureUpdate:j.EVENTUALLY}}},keyTest:e=>e[B.CTRL_OR_CMD]&&e.key===B.O}),_5e=re({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:j.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:g(FUe,{value:e.exportWithDarkMode?Te.DARK:Te.LIGHT,onChange:n=>{t(n===Te.DARK)},title:M("imageExportDialog.label.darkMode")})})});let pG="{}";const T5e=re({name:"copyStyles",label:"labels.copyStyles",icon:TH,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=[],s=e.find(o=>t.selectedElementIds[o.id]);if(r.push(s),s&&nr(s)){const o=Ce(s,i.scene.getNonDeletedElementsMap());r.push(o)}return s&&(pG=JSON.stringify(r)),{appState:{...t,toast:{message:M("toast.copyStyles")}},captureUpdate:j.EVENTUALLY}},keyTest:e=>e[B.CTRL_OR_CMD]&&e.altKey&&e.code===Ke.C}),S5e=re({name:"pasteStyles",label:"labels.pasteStyles",icon:TH,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=JSON.parse(pG),s=r[0],o=r[1];if(!$F(s))return{elements:e,captureUpdate:j.EVENTUALLY};const a=Ne(e,t,{includeBoundTextElement:!0}),l=a.map(c=>c.id);return{elements:e.map(c=>{if(l.includes(c.id)){let u=s;if(le(c)&&c.containerId&&(u=o),!u)return c;let d=Ee(c,{backgroundColor:u?.backgroundColor,strokeWidth:u?.strokeWidth,strokeColor:u?.strokeColor,strokeStyle:u?.strokeStyle,fillStyle:u?.fillStyle,opacity:u?.opacity,roughness:u?.roughness,roundness:u.roundness?yoe(u.roundness.type,c)?u.roundness:Eoe(c):null});if(le(d)){const f=u.fontSize||dl,h=u.fontFamily||Hc;d=Ee(d,{fontSize:f,fontFamily:h,textAlign:u.textAlign||Hm,lineHeight:u.lineHeight||Tc(h)});let m=null;d.containerId&&(m=a.find(p=>le(d)&&p.id===d.containerId)||null),Hi(d,m,i.scene)}return d.type==="arrow"&&_e(u)&&(d=Ee(d,{startArrowhead:u.startArrowhead,endArrowhead:u.endArrowhead})),pe(c)&&(d=Ee(d,{roundness:null,backgroundColor:"transparent"})),d}return c}),captureUpdate:j.IMMEDIATELY}},keyTest:e=>e[B.CTRL_OR_CMD]&&e.altKey&&e.code===Ke.V});re({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},captureUpdate:j.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(Be,{type:"button",icon:fH,"aria-label":M("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});re({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},captureUpdate:j.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>g(Be,{visible:T9(t,Lt(e)),type:"button",icon:Uue,"aria-label":M("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});const __=re({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:hue,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:i})=>(t.openDialog?.name==="help"&&i(),{appState:{...t,openDialog:t.openDialog?.name==="help"?null:{name:"help"}},captureUpdate:j.EVENTUALLY}),keyTest:e=>e.key===B.QUESTION_MARK}),I5e=e=>{if(e.length>=2){const t=e[0].groupIds;for(const n of t)if(e.reduce((i,r)=>i&&V0(r,n),!0))return!0}return!1},Ck=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return i.length>=2&&!I5e(i)&&!EB(i)},x5e=re({name:"group",label:"labels.group",icon:e=>g(jA,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=c9(i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(r.length<2)return{appState:t,elements:e,captureUpdate:j.EVENTUALLY};const s=Pu(t);if(s.length===1){const y=s[0],b=new Set(It(e,y).map(w=>w.id)),E=new Set(r.map(w=>w.id));if(new Set([...Array.from(b),...Array.from(E)]).size===b.size)return{appState:t,elements:e,captureUpdate:j.EVENTUALLY}}let o=[...e];new Set(r.map(y=>y.frameId)).size>1&&qae(r).forEach((b,E)=>{p5(b,i.scene.getNonDeletedElementsMap())});const l=tr(),c=be(r);o=o.map(y=>c.get(y.id)?Ee(y,{groupIds:Xae(y.groupIds,l,t.editingGroupId)}):y);const u=It(o,l),d=u[u.length-1],f=o.lastIndexOf(d),h=o.slice(f+1),m=o.slice(0,f).filter(y=>!V0(y,l)),p=qs([...m,...u,...h],be(u));return{appState:{...t,...dB(l,{...t,selectedGroupIds:{}},Lt(o))},elements:p,captureUpdate:j.IMMEDIATELY}},predicate:(e,t,n,i)=>Ck(e,t,i),keyTest:e=>!e.shiftKey&&e[B.CTRL_OR_CMD]&&e.key===B.G,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Be,{hidden:!Ck(e,t,i),type:"button",icon:g(jA,{theme:t.theme}),onClick:()=>n(null),title:`${M("labels.group")} — ${q("CtrlOrCmd+G")}`,"aria-label":M("labels.group"),visible:Hn(Lt(e),t)})}),C5e=re({name:"ungroup",label:"labels.ungroup",icon:e=>g(YA,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=Pu(t),s=be(e);if(r.length===0)return{appState:t,elements:e,captureUpdate:j.EVENTUALLY};let o=[...e];const a=[];o=o.map(f=>{Ft(f)&&a.push(f.id);const h=jae(f.groupIds,t.selectedGroupIds);return h.length===f.groupIds.length?f:Ee(f,{groupIds:h})});const l=Mi(t,Lt(o),t,null),c=i.scene.getSelectedElements(t),u=new Set(c.filter(f=>f.frameId).map(f=>f.frameId));return l9(e).filter(f=>u.has(f.id)).forEach(f=>{f&&(o=Jh(o,ko(o,f,t,s),f,i))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((f,[h,m])=>(m&&!a.includes(h)&&(f[h]=!0),f),{}),{appState:{...t,...l},elements:o,captureUpdate:j.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[B.CTRL_OR_CMD]&&e.key===B.G.toUpperCase(),predicate:(e,t)=>Pu(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Be,{type:"button",hidden:Pu(t).length===0,icon:g(YA,{theme:t.theme}),onClick:()=>n(null),title:`${M("labels.ungroup")} — ${q("CtrlOrCmd+Shift+G")}`,"aria-label":M("labels.ungroup"),visible:Hn(Lt(e),t)})}),UG=(e,t,n,i,r,s,o)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+i-s,n),e.quadraticCurveTo(t+i,n,t+i,n+s),e.lineTo(t+i,n+r-s),e.quadraticCurveTo(t+i,n+r,t+i-s,n+r),e.lineTo(t+s,n+r),e.quadraticCurveTo(t,n+r,t,n+r-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function A5e(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)-t+i}return t}const J5=(e,t)=>`hsl(${Math.abs(A5e(t?.id||e))%37*10}, 100%, 83%)`,M5e=e=>{const t=e?.trim()?.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},k5e=({context:e,renderConfig:t,appState:n,normalizedWidth:i,normalizedHeight:r})=>{for(const[s,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o;const c=n.collaborators.get(s);a-=n.offsetLeft,l-=n.offsetTop;const u=11,d=14,f=a<0||a>i-u||l<0||l>r-d;a=Math.max(a,0),a=Math.min(a,i-u),l=Math.max(l,0),l=Math.min(l,r-d);const h=J5(s,c);e.save(),e.strokeStyle=h,e.fillStyle=h;const m=t.remotePointerUserStates.get(s),p=f||m===mu.IDLE||m===mu.AWAY;p&&(e.globalAlpha=.3),t.remotePointerButton.get(s)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());const y=n.theme===Te.DARK?"#2f6330":Rie,b=c?.isSpeaking;b&&(e.fillStyle=y,e.strokeStyle=y,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=nU,e.strokeStyle=nU,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),p?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());const E=t.remotePointerUsernames.get(s)||"";if(!f&&E){e.font="600 12px sans-serif";const v=(b?a+0:a)+u/2,w=(b?l+0:l)+d+2,S=5,k=3,_=e.measureText(E),T=_.actualBoundingBoxDescent+_.actualBoundingBoxAscent,A=Math.max(T,12),C=v-1,R=w-1,P=_.width+2+S*2+2,N=A+2+k*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(C,R,P,N,8),e.fillStyle=h,e.fill(),e.strokeStyle=nU,e.stroke(),b&&(e.beginPath(),e.roundRect(C-2,R-2,P+4,N+4,8),e.strokeStyle=y,e.stroke())):UG(e,C,R,P,N,8,nU),e.fillStyle=kie,e.fillText(E,v+S+1,w+k+_.actualBoundingBoxAscent+Math.floor((A-T)/2)+2),b){e.fillStyle=y;const K=8,H=8,z=5;e.fillRect(C+P+H,R+(N/2-K/2),2,K),e.fillRect(C+P+H+z,R+(N/2-K*2/2),2,K*2),e.fillRect(C+P+H+z*2,R+(N/2-K/2),2,K)}}e.restore(),e.closePath()}},Ak=({color:e,onClick:t,name:n,src:i,className:r})=>{const s=M5e(n),[o,a]=D.useState(!1),l=!o&&i,c=l?void 0:{background:e};return g("div",{className:he("Avatar",r),style:c,onClick:t,children:l?g("img",{className:"Avatar-img",src:i,alt:s,referrerPolicy:"no-referrer",onError:()=>a(!0)}):s})};re({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>!n.socketId||t.userToFollow?.socketId===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:j.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:j.EVENTUALLY},PanelComponent:({updateData:e,data:t,appState:n})=>{const{socketId:i,collaborator:r,withName:s,isBeingFollowed:o}=t,a=J5(i,r),l=he({"is-followed":o,"is-current-user":r.isCurrentUser===!0,"is-speaking":r.isSpeaking,"is-in-call":r.isInCall,"is-muted":r.isMuted}),c=r.isInCall?r.isSpeaking?O("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:M("userList.hint.isSpeaking"),children:[g("div",{}),g("div",{}),g("div",{})]}):r.isMuted?g("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:M("userList.hint.micMuted"),children:Ide}):g("div",{title:M("userList.hint.inCall"),children:Sde}):null;return s?O("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(r),children:[g(Ak,{color:a,onClick:()=>{},name:r.username||"",src:r.avatarUrl,className:l}),g("div",{className:"UserList__collaborator-name",children:r.username}),O("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&g("div",{className:"UserList__collaborator-status-icon-is-followed",title:M("userList.hint.followStatus"),children:P9}),c]})]}):O("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[g(Ak,{color:a,onClick:()=>{e(r)},name:r.username||"",src:r.avatarUrl,className:l}),c&&g("div",{className:"UserList__collaborator-status-icon",children:c})]})}});const R5e=re({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(const s of sF)if(r.some(o=>o.type===s))return{captureUpdate:j.EVENTUALLY,appState:{...t,errorMessage:M(`errors.libraryElementTypeError.${s}`)}};return i.library.getLatestLibrary().then(s=>i.library.setLibrary([{id:tr(),status:"unpublished",elements:r.map(xc),created:Date.now()},...s])).then(()=>({captureUpdate:j.EVENTUALLY,appState:{...t,toast:{message:M("toast.addedToLibrary")}}})).catch(s=>({captureUpdate:j.EVENTUALLY,appState:{...t,errorMessage:s.message}}))},label:"labels.addToLibrary"}),Xr=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>pe(i))},lg=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=Tle(r,i,n.scene),o=be(s);return Uh(e.map(a=>o.get(a.id)||a),t,n)};re({name:"alignTop",label:"labels.alignTop",icon:zA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Xr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"start",axis:"y"}),captureUpdate:j.IMMEDIATELY}),keyTest:e=>e[B.CTRL_OR_CMD]&&e.shiftKey&&e.key===B.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Be,{hidden:!Xr(t,i),type:"button",icon:zA,onClick:()=>n(null),title:`${M("labels.alignTop")} — ${q("CtrlOrCmd+Shift+Up")}`,"aria-label":M("labels.alignTop"),visible:Hn(Lt(e),t)})});re({name:"alignBottom",label:"labels.alignBottom",icon:HA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Xr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"end",axis:"y"}),captureUpdate:j.IMMEDIATELY}),keyTest:e=>e[B.CTRL_OR_CMD]&&e.shiftKey&&e.key===B.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Be,{hidden:!Xr(t,i),type:"button",icon:HA,onClick:()=>n(null),title:`${M("labels.alignBottom")} — ${q("CtrlOrCmd+Shift+Down")}`,"aria-label":M("labels.alignBottom"),visible:Hn(Lt(e),t)})});re({name:"alignLeft",label:"labels.alignLeft",icon:VA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Xr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"start",axis:"x"}),captureUpdate:j.IMMEDIATELY}),keyTest:e=>e[B.CTRL_OR_CMD]&&e.shiftKey&&e.key===B.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Be,{hidden:!Xr(t,i),type:"button",icon:VA,onClick:()=>n(null),title:`${M("labels.alignLeft")} — ${q("CtrlOrCmd+Shift+Left")}`,"aria-label":M("labels.alignLeft"),visible:Hn(Lt(e),t)})});re({name:"alignRight",label:"labels.alignRight",icon:$A,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Xr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"end",axis:"x"}),captureUpdate:j.IMMEDIATELY}),keyTest:e=>e[B.CTRL_OR_CMD]&&e.shiftKey&&e.key===B.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Be,{hidden:!Xr(t,i),type:"button",icon:$A,onClick:()=>n(null),title:`${M("labels.alignRight")} — ${q("CtrlOrCmd+Shift+Right")}`,"aria-label":M("labels.alignRight"),visible:Hn(Lt(e),t)})});re({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:GA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Xr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"center",axis:"y"}),captureUpdate:j.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Be,{hidden:!Xr(t,i),type:"button",icon:GA,onClick:()=>n(null),title:M("labels.centerVertically"),"aria-label":M("labels.centerVertically"),visible:Hn(Lt(e),t)})});re({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:XA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Xr(t,i),perform:(e,t,n,i)=>({appState:t,elements:lg(e,t,i,{position:"center",axis:"x"}),captureUpdate:j.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Be,{hidden:!Xr(t,i),type:"button",icon:XA,onClick:()=>n(null),title:M("labels.centerHorizontally"),"aria-label":M("labels.centerHorizontally"),visible:Hn(Lt(e),t)})});const bG=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>pe(i))},yG=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=zle(r,n.scene.getNonDeletedElementsMap(),i),o=be(s);return Uh(e.map(a=>o.get(a.id)||a),t,n)};re({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:yG(e,t,i,{axis:"x"}),captureUpdate:j.IMMEDIATELY}),keyTest:e=>!e[B.CTRL_OR_CMD]&&e.altKey&&e.code===Ke.H,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Be,{hidden:!bG(t,i),type:"button",icon:xue,onClick:()=>n(null),title:`${M("labels.distributeHorizontally")} — ${q("Alt+H")}`,"aria-label":M("labels.distributeHorizontally"),visible:Hn(Lt(e),t)})});re({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:yG(e,t,i,{axis:"y"}),captureUpdate:j.IMMEDIATELY}),keyTest:e=>!e[B.CTRL_OR_CMD]&&e.altKey&&e.code===Ke.V,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Be,{hidden:!bG(t,i),type:"button",icon:Cue,onClick:()=>n(null),title:`${M("labels.distributeVertically")} — ${q("Alt+V")}`,"aria-label":M("labels.distributeVertically"),visible:Hn(Lt(e),t)})});const D5e=re({name:"flipHorizontal",label:"labels.flipHorizontal",icon:Mde,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Uh(EG(e,i.scene.getNonDeletedElementsMap(),t,"horizontal",i),t,i),appState:t,captureUpdate:j.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Ke.H}),L5e=re({name:"flipVertical",label:"labels.flipVertical",icon:Ade,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Uh(EG(e,i.scene.getNonDeletedElementsMap(),t,"vertical",i),t,i),appState:t,captureUpdate:j.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Ke.V&&!e[B.CTRL_OR_CMD]}),EG=(e,t,n,i,r)=>{const s=Ne(Lt(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=O5e(s,t,n,i,r),a=be(o);return e.map(l=>a.get(l.id)||l)},O5e=(e,t,n,i,r)=>{if(e.every(h=>_e(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{const m=h;return Ee(m,{startArrowhead:m.endArrowhead,endArrowhead:m.startArrowhead})});const{midX:s,midY:o}=Us(e);qB(e,t,"nw",r.scene,new Map(Array.from(t.values()).map(h=>[h.id,xc(h)])),{flipByX:i==="horizontal",flipByY:i==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),Db(e.filter(we),Nu(n),[],r.scene,n.zoom);const{elbowArrows:a,otherElements:l}=e.reduce((h,m)=>ce(m)?{...h,elbowArrows:h.elbowArrows.concat(m)}:{...h,otherElements:h.otherElements.concat(m)},{elbowArrows:[],otherElements:[]}),{midX:c,midY:u}=Us(e),[d,f]=[s-c,o-u];return l.forEach(h=>r.scene.mutateElement(h,{x:h.x+d,y:h.y+f})),a.forEach(h=>r.scene.mutateElement(h,{x:h.x+d,y:h.y+f})),e},w2=re({name:"copy",label:"labels.copy",icon:e4,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await f5e(r,i.files,n)}catch(s){return{captureUpdate:j.EVENTUALLY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:j.EVENTUALLY}},keyTest:void 0}),Mk=re({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,i)=>{let r;try{r=await m5e()}catch(s){return s.name==="AbortError"||s.name==="NotAllowedError"?!1:(console.error(`actionPaste ${s.name}: ${s.message}`),P0?{captureUpdate:j.EVENTUALLY,appState:{...t,errorMessage:M("hints.firefox_clipboard_write")}}:{captureUpdate:j.EVENTUALLY,appState:{...t,errorMessage:M("errors.asyncPasteFailedOnRead")}})}try{i.pasteFromClipboard(u5e({types:r}))}catch(s){return console.error(s),{captureUpdate:j.EVENTUALLY,appState:{...t,errorMessage:M("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:j.EVENTUALLY}},keyTest:void 0}),kk=re({name:"cut",label:"labels.cut",icon:fde,trackEvent:{category:"element"},perform:(e,t,n,i)=>(w2.perform(e,t,n,i),LH.perform(e,t,null,i)),keyTest:e=>e[B.CTRL_OR_CMD]&&e.key===B.X}),Rk=re({name:"copyAsSvg",label:"labels.copyAsSvg",icon:kde,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:j.EVENTUALLY};const{exportedElements:r,exportingFrame:s}=q5(e,t,!0);try{await Q5("clipboard-svg",r,t,i.files,{...t,exportingFrame:s,name:i.getName()});const o=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:M("toast.copyToClipboardAsSvg",{exportSelection:o.length?M("toast.selection"):M("toast.canvas"),exportColorScheme:t.exportWithDarkMode?M("buttons.darkMode"):M("buttons.lightMode")})}},captureUpdate:j.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:j.EVENTUALLY}}},predicate:e=>v_&&e.length>0,keywords:["svg","clipboard","copy"]}),Dk=re({name:"copyAsPng",label:"labels.copyAsPng",icon:Rde,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:j.EVENTUALLY};const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:o}=q5(e,t,!0);try{return await Q5("clipboard",s,t,i.files,{...t,exportingFrame:o,name:i.getName()}),{appState:{...t,toast:{message:M("toast.copyToClipboardAsPng",{exportSelection:r.length?M("toast.selection"):M("toast.canvas"),exportColorScheme:t.exportWithDarkMode?M("buttons.darkMode"):M("buttons.lightMode")})}},captureUpdate:j.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:j.EVENTUALLY}}},predicate:e=>w_&&e.length>0,keyTest:e=>e.code===Ke.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),Lk=re({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{Yc(qF(r))}catch{throw new Error(M("errors.copyToSystemClipboardFailed"))}return{captureUpdate:j.EVENTUALLY}},predicate:(e,t,n,i)=>v_&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(le),keywords:["text","clipboard","copy"]}),Ok=re({name:"gridMode",icon:Nde,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:j.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[B.CTRL_OR_CMD]&&e.code===Ke.QUOTE}),v4=re({name:"zenMode",label:"buttons.zenMode",icon:Lde,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:j.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[B.CTRL_OR_CMD]&&e.altKey&&e.code===Ke.Z}),N5e=re({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:Dde,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:j.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[B.CTRL_OR_CMD]&&e.altKey&&e.code===Ke.S}),w4=re({name:"stats",label:"stats.fullTitle",icon:Cde,viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:j.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[B.CTRL_OR_CMD]&&e.altKey&&e.code===Ke.SLASH}),P5e=re({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>i.scene.getSelectedElements(t).some(s=>nr(s)),perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=i.scene.getNonDeletedElementsMap();return r.forEach(o=>{const a=Ce(o,s);if(a){const{width:l,height:c}=Bn(a.originalText,ot(a),a.lineHeight),u=voe(o.id);YF(o.id);const{x:d,y:f}=Zh(o,a,s);i.scene.mutateElement(a,{containerId:null,width:l,height:c,text:a.originalText,x:d,y:f}),i.scene.mutateElement(o,{boundElements:o.boundElements?.filter(h=>h.id!==a.id),height:u||o.height})}}),{elements:e,appState:t,captureUpdate:j.IMMEDIATELY}}}),F5e=re({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);if(r.length===2){const s=le(r[0])||le(r[1]);let o;if(Ou(r[0])?o=r[0]:Ou(r[1])&&(o=r[1]),s&&o&&Ce(o,i.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);let s,o;le(r[0])&&Ou(r[1])?(s=r[0],o=r[1]):(s=r[1],o=r[0]),i.scene.mutateElement(s,{containerId:o.id,verticalAlign:Or.MIDDLE,textAlign:B0.CENTER,autoResize:!0,angle:_e(o)?0:o?.angle??0}),i.scene.mutateElement(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:s.id})});const a=o.height;return Hi(s,o,i.scene),Ab(o.id,a),{elements:B5e(e,o,s),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:j.IMMEDIATELY}}}),B5e=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===n.id);i.splice(r,1);const s=i.findIndex(o=>o.id===t.id);return i.splice(s+1,0,n),qs(i,be([t,n])),i},z5e=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===t.id);i.splice(r,1);const s=i.findIndex(o=>o.id===n.id);return i.splice(s,0,t),qs(i,be([t,n])),i},H5e=re({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=r.some(o=>le(o));return r.length>0&&s},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);let s=e.slice();const o={};for(const a of r)if(le(a)){const l=$o({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...a.boundElements||[],{id:a.id,type:"text"}],angle:a.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:_d("rectangle")?ln.ADAPTIVE_RADIUS:ln.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:a.x-Nn,y:a.y-Nn,width:Ju(a.width,"rectangle"),height:Ju(a.height,"rectangle"),groupIds:a.groupIds,frameId:a.frameId});if(a.boundElements?.length){const c=a.boundElements.filter(d=>d.type==="arrow").map(d=>d.id);s.filter(d=>c.includes(d.id)).forEach(d=>{let f=d.startBinding,h=d.endBinding;f?.elementId===a.id&&(f={...f,elementId:l.id}),h?.elementId===a.id&&(h={...h,elementId:l.id}),(f||h)&&i.scene.mutateElement(d,{startBinding:f,endBinding:h})})}i.scene.mutateElement(a,{containerId:l.id,verticalAlign:Or.MIDDLE,boundElements:null,textAlign:B0.CENTER,autoResize:!0}),Hi(a,l,i.scene),s=z5e([...s,l],l,a),o[l.id]=!0}return{elements:s,appState:{...t,selectedElementIds:o},captureUpdate:j.IMMEDIATELY}}}),T_=380,V5e=42,_4=5,vG=85,$5e=500;let T4=!1;const TU=new Map,G5e=({element:e,scene:t,setAppState:n,onLinkOpen:i,setToast:r,updateEmbedValidationStatus:s})=>{const o=t.getNonDeletedElementsMap(),a=up(),l=cp(),c=ei(),u=e.link||"",[d,f]=D.useState(u),h=D.useRef(null),m=a.showHyperlinkPopup==="editor",p=D.useCallback(()=>{if(!h.current)return;const w=Hr(h.current.value)||null;if(!e.link&&w&&tt("hyperlink","create"),ur(e)){if(a.activeEmbeddable?.element===e&&n({activeEmbeddable:null}),!w){t.mutateElement(e,{link:null}),s(e,!1);return}if(!l2(w,l.validateEmbeddable))w&&r({message:M("toast.unableToEmbed"),closable:!0}),e.link&&TU.set(e.id,e.link),t.mutateElement(e,{link:w}),s(e,!1);else{const{width:S,height:k}=e,_=If(w);_?.error instanceof URIError&&r({message:M("toast.unrecognizedLinkFormat"),closable:!0});const T=_?_.intrinsicSize.w/_.intrinsicSize.h:1,A=TU.get(e.id)!==e.link;t.mutateElement(e,{...A?{width:_?.type==="video"?S>k?S:k*T:S,height:_?.type==="video"&&S>k?S/T:k}:{},link:w}),s(e,!0),TU.has(e.id)&&TU.delete(e.id)}}else t.mutateElement(e,{link:w})},[e,t,r,l.validateEmbeddable,a.activeEmbeddable,n,s]);D.useLayoutEffect(()=>()=>{p()},[p]),D.useEffect(()=>{m&&h?.current&&!(c.viewport.isMobile||c.isTouchScreen)&&h.current.select()},[m,c.viewport.isMobile,c.isTouchScreen]),D.useEffect(()=>{let w=null;const S=k=>{if(m)return;w&&clearTimeout(w),Y5e(e,o,a,I(k.clientX,k.clientY))&&(w=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},$5e))};return window.addEventListener(ee.POINTER_MOVE,S,!1),()=>{window.removeEventListener(ee.POINTER_MOVE,S,!1),w&&clearTimeout(w)}},[a,e,m,n,o]);const y=D.useCallback(()=>{tt("hyperlink","delete"),t.mutateElement(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e,t]),b=()=>{tt("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x:E,y:v}=wG(e,a,o);return a.contextMenu||a.selectedElementsAreBeingDragged||a.resizingElement||a.isRotating||a.openMenu||a.viewModeEnabled?null:O("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${v}px`,left:`${E}px`,width:T_,padding:_4},children:[m?g("input",{className:he("excalidraw-hyperlinkContainer-input"),placeholder:M("labels.link.hint"),ref:h,value:d,onChange:w=>f(w.target.value),autoFocus:!0,onKeyDown:w=>{w.stopPropagation(),w[B.CTRL_OR_CMD]&&w.key===B.K&&w.preventDefault(),(w.key===B.ENTER||w.key===B.ESCAPE)&&(p(),n({showHyperlinkPopup:"info"}))}}):e.link?g("a",{href:Hr(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:AF(e.link)?"_self":"_blank",onClick:w=>{if(e.link&&i){const S=_F(ee.EXCALIDRAW_LINK,w.nativeEvent);i({...e,link:Hr(e.link)},S),S.defaultPrevented&&w.preventDefault()}},rel:"noopener noreferrer",children:e.link}):g("div",{className:"excalidraw-hyperlinkContainer-link",children:M("labels.link.empty")}),O("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!m&&g(Be,{type:"button",title:M("buttons.edit"),"aria-label":M("buttons.edit"),label:M("buttons.edit"),onClick:b,className:"excalidraw-hyperlinkContainer--edit",icon:T5}),g(Be,{type:"button",title:M("labels.linkToElement"),"aria-label":M("labels.linkToElement"),label:M("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:kH}),u&&!ur(e)&&g(Be,{type:"button",title:M("buttons.remove"),"aria-label":M("buttons.remove"),label:M("buttons.remove"),onClick:y,className:"excalidraw-hyperlinkContainer--remove",icon:Cc})]})]})},wG=(e,t,n)=>{const[i,r]=Le(e,n),{x:s,y:o}=Nr({sceneX:i+e.width/2,sceneY:r},t),a=s-t.offsetLeft-T_/2,l=o-t.offsetTop-vG;return{x:a,y:l}},Nk=(e,t)=>{const n=Ne(e,t);return ur(n[0])?"labels.link.editEmbed":n[0]?.link?"labels.link.edit":"labels.link.create"};let u0=null;const X5e=(e,t,n)=>{u0&&clearTimeout(u0),u0=window.setTimeout(()=>j5e(e,t,n),zie)},j5e=(e,t,n)=>{if(!e.link)return;const i=s0();i.classList.add("excalidraw-tooltip--visible"),i.style.maxWidth="20rem",i.textContent=Hf(e.link)?M("labels.link.goToElement"):e.link;const[r,s,o,a]=Le(e,n),[l,c,u,d]=m_([r,s,o,a],e.angle,t),f=Nr({sceneX:l,sceneY:c},t);jV(i,{left:f.x,top:f.y,width:u,height:d},"top"),tt("hyperlink","tooltip","link-icon"),T4=!0},Pk=()=>{u0&&clearTimeout(u0),T4&&(T4=!1,s0().classList.remove("excalidraw-tooltip--visible"))},Y5e=(e,t,n,[i,r])=>{const{x:s,y:o}=Tt({clientX:i,clientY:r},n),a=15/n.zoom.value;if(h5(I(s,o),e,t))return!1;const[l,c,u]=Le(e,t);if(s>=l&&s<=u&&o>=c-vG&&o<=c)return!1;const{x:d,y:f}=wG(e,n,t);return!(i>=d-a&&i<=d+T_+_4*2+a&&r>=f-a&&r<=f+a+_4*2+V5e)},_G=re({name:"hyperlink",label:(e,t)=>Nk(e,t),icon:jb,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:j.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[B.CTRL_OR_CMD]&&e.key===B.K,predicate:(e,t)=>Ne(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Ne(e,t);return g(Be,{type:"button",icon:jb,"aria-label":M(Nk(e,t)),title:`${ur(e[0])?M("labels.link.labelEmbed"):M("labels.link.label")} - ${q("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:i.length===1&&!!i[0].link})}}),xE=e=>e.every(t=>!t.locked),TG=re({name:"toggleElementLock",label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return xE(i)?"labels.elementLock.lock":"labels.elementLock.unlock"},icon:(e,t)=>{const n=Ne(t,e);return xE(n)?M9:_5},trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return r.length>0&&!r.some(s=>s.locked&&s.frameId)},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!r.length)return!1;const s=xE(r),o=be(r),a=r.length>1&&i9(r),c=r.length===1||a?null:tr();let u={...t.lockedMultiSelections};if(s)u={...t.lockedMultiSelections,...c?{[c]:!0}:{}};else if(a){const b=r[0].groupIds.at(-1);delete u[b]}const d=e.map(b=>{if(!o.has(b.id))return b;let E=b.groupIds;return s?c&&(E=[...E,c]):E=E.filter(v=>!t.lockedMultiSelections[v]),Ee(b,{locked:s,groupIds:E.length!==b.groupIds.length?E:b.groupIds})}),f=be(d),h=s?{}:Object.fromEntries(r.map(b=>[b.id,!0])),m=r.map(b=>f.get(b.id)||b),p=s?{}:Jm(m,t),y=s?c||(a?r[0].groupIds.at(-1):r[0].id):null;return{elements:d,appState:{...t,selectedElementIds:h,selectedGroupIds:p,selectedLinearElement:s?null:t.selectedLinearElement,lockedMultiSelections:u,activeLockedId:y},captureUpdate:j.IMMEDIATELY}},keyTest:(e,t,n,i)=>e.key.toLocaleLowerCase()===B.L&&e[B.CTRL_OR_CMD]&&e.shiftKey&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),W5e=re({name:"unlockAllElements",trackEvent:{category:"canvas"},viewMode:!1,icon:_5,predicate:(e,t)=>Ne(e,t).length===0&&e.some(i=>i.locked),perform:(e,t)=>{const n=e.filter(o=>o.locked),i=e.map(o=>{if(o.locked){const a=o.groupIds.filter(l=>!t.lockedMultiSelections[l]);return Ee(o,{locked:!1,groupIds:o.groupIds.length!==a.length?a:o.groupIds})}return o}),r=be(i),s=n.map(o=>r.get(o.id)||o);return{elements:i,appState:{...t,selectedElementIds:Object.fromEntries(n.map(o=>[o.id,!0])),selectedGroupIds:Jm(s,t),lockedMultiSelections:{},activeLockedId:null},captureUpdate:j.IMMEDIATELY}},label:"labels.elementLock.unlockAll"});var SG={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(i,r){return r.filter(function(s){return n.test(i,s)})},n.test=function(i,r){return n.match(i,r)!==null},n.match=function(i,r,s){s=s||{};var o=0,a=[],l=r.length,c=0,u=0,d=s.pre||"",f=s.post||"",h=s.caseSensitive&&r||r.toLowerCase(),m;i=s.caseSensitive&&i||i.toLowerCase();for(var p=0;p<l;p++)m=r[p],h[p]===i[o]?(m=d+m+f,o+=1,u+=1+u):u=0,c+=u,a[a.length]=m;return o===i.length?(c=h===i?1/0:c,{rendered:a.join(""),score:c}):null},n.filter=function(i,r,s){return!r||r.length===0?[]:typeof i!="string"?r:(s=s||{},r.reduce(function(o,a,l,c){var u=a;s.extract&&(u=s.extract(a));var d=n.match(i,u,s);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()})(SG);var K5e=SG.exports;const Z5e=ll(K5e),q5e=8,Q5e=10,_1=["rectangle","diamond","ellipse"],T1=["line","sharpArrow","curvedArrow","elbowArrow"],J5e=new Set(_1),eye=new Set(T1),Th=e=>J5e.has(e),l6=e=>e==="arrow"||eye.has(e),ma=$t(null),cm=new Map,um=new Map,tye=({app:e})=>{const t=e.scene.getSelectedElements(e.state),n=D.useRef(null);return D.useEffect(()=>{if(t.length===0){e.updateEditorAtom(ma,null);return}const i=ey(t);i&&!n.current?n.current=i:(n.current&&!i||n.current&&i!==n.current)&&(e.updateEditorAtom(ma,null),n.current=null)},[t,e]),D.useEffect(()=>()=>{cm.clear(),um.clear()},[]),g(nye,{app:e,elements:t})},nye=({app:e,elements:t})=>{const n=ey(t),i=D.useMemo(()=>n==="generic"?CG(t):[],[n,t]),r=D.useMemo(()=>n==="linear"?I4(t):[],[n,t]),s=n==="generic"?i.every(d=>d.type===i[0].type):n==="linear"?r.every(d=>Ff(d)===Ff(r[0])):!1,[o,a]=D.useState({x:0,y:0}),l=D.useRef(""),c=D.useRef(null);D.useEffect(()=>{const d=[...i,...r].sort((y,b)=>y.id.localeCompare(b.id)),f=`
      ${e.state.scrollX}${e.state.scrollY}${e.state.offsetTop}${e.state.offsetLeft}${e.state.zoom.value}${d.map(y=>y.id).join(",")}`;if(f===l.current)return;l.current=f;let h;if(d.length===1){const[y,,,b,E,v]=Le(d[0],e.scene.getNonDeletedElementsMap());h=W(I(y,b),I(E,v),d[0].angle)}else{const{minX:y,maxY:b}=Us(d);h=I(y,b)}const{x:m,y:p}=Nr({sceneX:h[0],sceneY:h[1]},e.state);a({x:m,y:p})},[i,r,e.scene,e.state]),D.useEffect(()=>{for(const d of r){const f=S4(d.id,aye(d));um.has(f)||um.set(f,d)}},[r]),D.useEffect(()=>{for(const d of i)if(!cm.has(d.id)){const f=Ce(d,e.scene.getNonDeletedElementsMap());f&&cm.set(d.id,{fontSize:f.fontSize})}},[i,e.scene]);const u=n==="linear"?[["line",dH],["sharpArrow",xH],["curvedArrow",AH],["elbowArrow",CH]]:n==="generic"?[["rectangle",lH],["diamond",cH],["ellipse",uH]]:[];return g("div",{ref:c,tabIndex:-1,style:{position:"absolute",top:`${o.y+(Q5e+8)*e.state.zoom.value-e.state.offsetTop}px`,left:`${o.x-e.state.offsetLeft-q5e}px`,zIndex:2},className:_c.CONVERT_ELEMENT_TYPE_POPUP,children:u.map(([d,f])=>{const h=s&&(n==="generic"&&i[0].type===d||n==="linear"&&Ff(r[0])===d);return g(Be,{className:"Shape",type:"radio",icon:f,checked:h,name:"convertElementType-option",title:d,keyBindingLabel:"","aria-label":d,"data-testid":`toolbar-${d}`,onChange:()=>{e.state.activeTool.type!==d&&tt("convertElementType",d,"ui"),IG(e,{conversionType:n,nextType:d}),c.current?.focus()}},`${t[0].id}${t[0].version}_${d}`)})})},iye=(e,t,n)=>{const i=Ho(e,t),r=qm(e,t),s=$c(t.text,ot(t),i);let o=Bn(s,ot(t),t.lineHeight),a=t.fontSize;for(;(o.width>i||o.height>r)&&a>0;){a-=1;const l={...t,fontSize:a};o=Bn(t.text,ot(l),t.lineHeight)}fi(t,n.getNonDeletedElementsMap(),{fontSize:a,width:o.width,height:o.height}),Hi(t,e,n)},IG=(e,{conversionType:t,nextType:n,direction:i="right"})=>{if(!t)return!1;const r=e.scene.getSelectedElements(e.state),s=r.reduce((a,l)=>({...a,[l.id]:!0}),{}),o=i==="right"?1:-1;if(t==="generic"){const a=CG(r),c=a.every(u=>u.type===a[0].type)?_1.indexOf(a[0].type):-1;if(n=n??_1[(c+_1.length+o)%_1.length],n&&Th(n)){const u={};for(const f of a){const h=Bk(f,n,e);u[h.id]=h}const d=[];for(const f of e.scene.getElementsIncludingDeleted())u[f.id]?d.push(u[f.id]):d.push(f);e.scene.replaceAllElements(d);for(const f of Object.values(u)){const h=Ce(f,e.scene.getNonDeletedElementsMap());h&&(cm.get(f.id)&&fi(h,e.scene.getNonDeletedElementsMap(),{fontSize:cm.get(f.id)?.fontSize??h.fontSize}),iye(f,h,e.scene))}e.setState(f=>({selectedElementIds:s,activeTool:Xt(f,{type:"selection"})}))}}if(t==="linear"){const a=I4(r);if(!n){const c=xF(a,Ff),u=c?T1.indexOf(c):-1;n=T1[(u+T1.length+o)%T1.length]}if(l6(n)){const c=[],u=e.scene.getElementsMapIncludingDeleted();for(const d of a){const f=um.get(S4(d.id,n));if(f&&Ff(f)===n)u.set(f.id,f),c.push(f);else{const h=Bk(d,n,e);u.set(h.id,h),c.push(h)}}e.scene.replaceAllElements(u);for(const d of c)if(we(d))if(ce(d)){const f=rye(d);if(f.length<2)continue;const h=[];for(let p=1;p<f.length-2;p++)h.push({start:f[p],end:f[p+1],index:p+1});const m=qh(d,e.scene.getNonDeletedElementsMap(),{points:f,fixedSegments:h});fi(d,e.scene.getNonDeletedElementsMap(),{...m,endArrowhead:"arrow"})}else{const f=Are(["line","sharpArrow","curvedArrow"],h=>um.get(S4(d.id,h)));if(f){const h=f.points;e.scene.mutateElement(d,{points:h})}}}const l=I4(e.scene.getSelectedElements(e.state));e.setState(c=>({selectedElementIds:s,selectedLinearElement:l.length===1?new Z(l[0],e.scene.getNonDeletedElementsMap()):null,activeTool:Xt(c,{type:"selection"})}))}return!0},ey=e=>{if(e.length===0)return null;let t=!1;for(const n of e){if(Th(n.type))return"generic";xG(n)&&(t=!0)}return t?"linear":null},xG=e=>we(e)&&(!_e(e)||!GF(e)&&!nr(e)),S4=(e,t)=>`${e}:${t}`,CG=e=>e.filter(t=>Th(t.type)),I4=e=>e.filter(t=>xG(t)),SU=20,nf=(e,t)=>e[0]===t[0],CE=(e,t)=>e[1]===t[1],Fk=(e,t)=>nf(e,t)?Math.abs(e[1]-t[1]):Math.abs(e[0]-t[0]),rye=e=>{const t=[e.points[0]],n=sye(e.points);for(let s=1;s<n.length;++s){const o=t[t.length-1],a=[...n[s]];Math.abs(a[0]-o[0])<SU?a[0]=o[0]:Math.abs(a[1]-o[1])<SU&&(a[1]=o[1]),nf(o,a)||CE(o,a)||t.push(I(o[0],a[1])),t.push(a)}const i=[t[0]];for(let s=1;s<t.length-1;++s)nf(t[s-1],t[s])&&nf(t[s],t[s+1])||CE(t[s-1],t[s])&&CE(t[s],t[s+1])||i.push(t[s]);i.push(t[t.length-1]);const r=[i[0]];for(let s=1;s<i.length-1;++s){const o=r[r.length-1],a=i[s],l=i[s+1],c=nf(o,a),u=nf(a,l);if(c!==u){const d=Fk(o,a),f=Fk(a,l);if(d<SU||f<SU){if(f<d)c?l[0]=o[0]:l[1]=o[1];else if(u)for(let h=r.length-1;h>=0&&r[h][0]===o[0];--h)r[h][0]=a[0];else for(let h=r.length-1;h>=0&&r[h][1]===o[1];--h)r[h][1]=a[1];continue}}r.push(a)}return r.push(i[i.length-1]),r},sye=e=>{if(e.length===0)return[];const t=[e[0]];for(let n=1;n<e.length;n++){const[i,r]=t[t.length-1],[s,o]=e[n];(i!==s||r!==o)&&t.push(e[n])}return t},Bk=(e,t,n)=>{if(!oye(e.type,t)||e.type===t)return e;if(Et.delete(e),Th(t)){const i=wa($o({...e,type:t,roundness:t==="diamond"&&e.roundness?{type:_d(t)?ln.ADAPTIVE_RADIUS:ln.PROPORTIONAL_RADIUS}:e.roundness}));return H0(i,n.scene),i}if(l6(t))switch(t){case"line":return wa(ac({...e,type:"line"}));case"sharpArrow":return wa(Vf({...e,type:"arrow",elbowed:!1,roundness:null,startArrowhead:n.state.currentItemStartArrowhead,endArrowhead:n.state.currentItemEndArrowhead}));case"curvedArrow":return wa(Vf({...e,type:"arrow",elbowed:!1,roundness:{type:ln.PROPORTIONAL_RADIUS},startArrowhead:n.state.currentItemStartArrowhead,endArrowhead:n.state.currentItemEndArrowhead}));case"elbowArrow":return wa(Vf({...e,type:"arrow",elbowed:!0,fixedSegments:null,roundness:null}))}return Po(t,`unhandled conversion type: ${t}`),e},oye=(e,t)=>!!(Th(e)&&Th(t)||l6(e)&&l6(t)),aye=e=>we(e)?Ff(e):e.type,lye=re({name:"toggleShapeSwitch",label:"labels.shapeSwitch",icon:()=>null,viewMode:!0,trackEvent:{category:"shape_switch",action:"toggle"},keywords:["change","switch","swap"],perform(e,t,n,i){return Rr.set(ma,{type:"panel"}),{captureUpdate:j.NEVER}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>ey(e)!==null}),AG=re({name:"copyElementLink",label:"labels.copyElementLink",icon:np,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=Ne(e,t);try{if(window.location){const s=VB(r,t);return s?(await Yc(i.props.generateLinkForSelection?i.props.generateLinkForSelection(s.id,s.type):HB(s.id,s.type)),{appState:{toast:{message:M("toast.elementLinkCopied"),closable:!0}},captureUpdate:j.EVENTUALLY}):{appState:t,elements:e,app:i,captureUpdate:j.EVENTUALLY}}}catch(s){console.error(s)}return{appState:t,elements:e,app:i,captureUpdate:j.EVENTUALLY}},predicate:(e,t)=>Gb(Ne(e,t))}),cye=re({name:"linkToElement",label:"labels.linkToElement",icon:kH,perform:(e,t,n,i)=>{const r=Ne(e,t);return r.length!==1||!Gb(r)?{elements:e,appState:t,app:i,captureUpdate:j.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:Ne(e,t)[0].id}},captureUpdate:j.IMMEDIATELY}},predicate:(e,t,n,i)=>{const r=Ne(e,t);return t.openDialog?.name!=="elementLinkSelector"&&r.length===1&&Gb(r)},trackEvent:!1}),uye={toggleTheme:[q("Shift+Alt+D")],saveScene:[q("CtrlOrCmd+S")],loadScene:[q("CtrlOrCmd+O")],clearCanvas:[q("CtrlOrCmd+Delete")],imageExport:[q("CtrlOrCmd+Shift+E")],commandPalette:[q("CtrlOrCmd+/"),q("CtrlOrCmd+Shift+P")],cut:[q("CtrlOrCmd+X")],copy:[q("CtrlOrCmd+C")],paste:[q("CtrlOrCmd+V")],copyStyles:[q("CtrlOrCmd+Alt+C")],pasteStyles:[q("CtrlOrCmd+Alt+V")],selectAll:[q("CtrlOrCmd+A")],deleteSelectedElements:[q("Delete")],duplicateSelection:[q("CtrlOrCmd+D"),q(`Alt+${M("helpDialog.drag")}`)],sendBackward:[q("CtrlOrCmd+[")],bringForward:[q("CtrlOrCmd+]")],sendToBack:[q(No?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[q(No?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[q("Shift+Alt+C")],group:[q("CtrlOrCmd+G")],ungroup:[q("CtrlOrCmd+Shift+G")],gridMode:[q("CtrlOrCmd+'")],zenMode:[q("Alt+Z")],objectsSnapMode:[q("Alt+S")],stats:[q("Alt+/")],addToLibrary:[],flipHorizontal:[q("Shift+H")],flipVertical:[q("Shift+V")],viewMode:[q("Alt+R")],hyperlink:[q("CtrlOrCmd+K")],toggleElementLock:[q("CtrlOrCmd+Shift+L")],resetZoom:[q("CtrlOrCmd+0")],zoomOut:[q("CtrlOrCmd+-")],zoomIn:[q("CtrlOrCmd++")],zoomToFitSelection:[q("Shift+3")],zoomToFit:[q("Shift+1")],zoomToFitSelectionInViewport:[q("Shift+2")],toggleEraserTool:[q("E")],toggleHandTool:[q("H")],setFrameAsActiveTool:[q("F")],saveFileToDisk:[q("CtrlOrCmd+S")],saveToActiveFile:[q("CtrlOrCmd+S")],toggleShortcuts:[q("?")],searchMenu:[q("CtrlOrCmd+F")],wrapSelectionInFrame:[]},zi=(e,t=0)=>{const n=uye[e];return n&&n.length>0?n[t]||n[0]:""},dye="\\u0300-\\u036f",fye="\\ufe20-\\ufe2f",hye="\\u20d0-\\u20ff",gye=dye+fye+hye,mye=`[${gye}]`,pye=RegExp(mye,"g"),Uye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bye={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"E",æ:"e",Þ:"T",þ:"t",ß:"s",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"I",ĳ:"i",Œ:"E",œ:"e",ŉ:"n",ſ:"s"},zk=e=>e.replace(Uye,t=>bye[t]||t).replace(pye,""),MG=()=>{const[e,t]=D.useState(null),n=D.useCallback(i=>t(i),[]);return[e,n]};var ty={},yye=Eye;function Eye(e,t){if(e=String(e),t=String(t),!/^[\x00-\xFF]+$/.test(e)||!/^[\x00-\xFF]+$/.test(t))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(e.length>=80)throw new Error('Keyword "'+e+'" is longer than the 79-character limit imposed by the PNG specification');for(var n=e.length+t.length+1,i=new Uint8Array(n),r=0,s,o=0;o<e.length;o++){if(!(s=e.charCodeAt(o)))throw new Error("0x00 character is not permitted in tEXt keywords");i[r++]=s}i[r++]=0;for(var a=0;a<t.length;a++){if(!(s=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt content");i[r++]=s}return{name:"tEXt",data:i}}var vye=wye;function wye(e){e.data&&e.name&&(e=e.data);for(var t=!0,n="",i="",r=0;r<e.length;r++){var s=e[r];if(t)s?i+=String.fromCharCode(s):t=!1;else if(s)n+=String.fromCharCode(s);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:n}}ty.encode=yye;ty.decode=vye;var _ye=function(e,t,n){var i=[],r=e.length;if(r===0)return i;var s=t<0?Math.max(0,t+r):t||0;for(n!==void 0&&(r=n<0?n+r:n);r-- >s;)i[r-s]=e[r];return i},S_={};(function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var c=0,u=new Array(256),d=0;d!=256;++d)c=d,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,u[d]=c;return typeof Int32Array<"u"?new Int32Array(u):u}var i=n(),r=typeof Buffer<"u";function s(c){if(c.length>32768&&r)return a(new Buffer(c));for(var u=-1,d=c.length-1,f=0;f<d;)u=i[(u^c.charCodeAt(f++))&255]^u>>>8,u=i[(u^c.charCodeAt(f++))&255]^u>>>8;return f===d&&(u=u>>>8^i[(u^c.charCodeAt(f))&255]),u^-1}function o(c){if(c.length>1e4)return a(c);for(var u=-1,d=0,f=c.length-3;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+3;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function a(c){for(var u=-1,d=0,f=c.length-7;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+7;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function l(c){for(var u=-1,d=0,f=c.length,h,m;d<f;)h=c.charCodeAt(d++),h<128?u=u>>>8^i[(u^h)&255]:h<2048?(u=u>>>8^i[(u^(192|h>>6&31))&255],u=u>>>8^i[(u^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,m=c.charCodeAt(d++)&1023,u=u>>>8^i[(u^(240|h>>8&7))&255],u=u>>>8^i[(u^(128|h>>2&63))&255],u=u>>>8^i[(u^(128|m>>6&15|h&3))&255],u=u>>>8^i[(u^(128|m&63))&255]):(u=u>>>8^i[(u^(224|h>>12&15))&255],u=u>>>8^i[(u^(128|h>>6&63))&255],u=u>>>8^i[(u^(128|h&63))&255]);return u^-1}t.table=i,t.bstr=s,t.buf=o,t.str=l})})(S_);var Tye=_ye,Sye=S_,Iye=Aye,go=new Uint8Array(4),xye=new Int32Array(go.buffer),Cye=new Uint32Array(go.buffer);function Aye(e){var t=8,n=t,i;for(i=0;i<e.length;i++)t+=e[i].data.length,t+=12;var r=new Uint8Array(t);for(r[0]=137,r[1]=80,r[2]=78,r[3]=71,r[4]=13,r[5]=10,r[6]=26,r[7]=10,i=0;i<e.length;i++){var s=e[i],o=s.name,a=s.data,l=a.length,c=[o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(3)];Cye[0]=l,r[n++]=go[3],r[n++]=go[2],r[n++]=go[1],r[n++]=go[0],r[n++]=c[0],r[n++]=c[1],r[n++]=c[2],r[n++]=c[3];for(var u=0;u<l;)r[n++]=a[u++];var d=c.concat(Tye(a)),f=Sye.buf(d);xye[0]=f,r[n++]=go[3],r[n++]=go[2],r[n++]=go[1],r[n++]=go[0]}return r}const Mye=ll(Iye);var kye=S_,Rye=Oye,mo=new Uint8Array(4),Dye=new Int32Array(mo.buffer),Lye=new Uint32Array(mo.buffer);function Oye(e){if(e[0]!==137)throw new Error("Invalid .png file header");if(e[1]!==80)throw new Error("Invalid .png file header");if(e[2]!==78)throw new Error("Invalid .png file header");if(e[3]!==71)throw new Error("Invalid .png file header");if(e[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[6]!==26)throw new Error("Invalid .png file header");if(e[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var t=!1,n=[],i=8;i<e.length;){mo[3]=e[i++],mo[2]=e[i++],mo[1]=e[i++],mo[0]=e[i++];var r=Lye[0]+4,s=new Uint8Array(r);s[0]=e[i++],s[1]=e[i++],s[2]=e[i++],s[3]=e[i++];var o=String.fromCharCode(s[0])+String.fromCharCode(s[1])+String.fromCharCode(s[2])+String.fromCharCode(s[3]);if(!n.length&&o!=="IHDR")throw new Error("IHDR header missing");if(o==="IEND"){t=!0,n.push({name:o,data:new Uint8Array(0)});break}for(var a=4;a<r;a++)s[a]=e[i++];mo[3]=e[i++],mo[2]=e[i++],mo[1]=e[i++],mo[0]=e[i++];var l=Dye[0],c=kye.buf(s);if(c!==l)throw new Error("CRC values for "+o+" header do not match, PNG file is likely corrupted");var u=new Uint8Array(s.buffer.slice(4));n.push({name:o,data:u})}if(!t)throw new Error(".png file ended prematurely: no IEND header was found");return n}const kG=ll(Rye),RG=async e=>{const n=kG(new Uint8Array(await Wl(e))).find(i=>i.name==="tEXt");return n?ty.decode(n.data):null},DG=async({blob:e,metadata:t})=>{const n=kG(new Uint8Array(await Wl(e))),i=ty.encode(Ue.excalidraw,JSON.stringify(F$({text:t,compress:!0})));return n.splice(-1,0,i),new Blob([Mye(n)],{type:Ue.png})},Nye=async e=>{const t=await RG(e);if(t?.keyword===Ue.excalidraw)try{const n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===ms.excalidraw)return t.text;throw new Error("FAILED")}return B$(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},LG=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:Nye,encodePngMetadata:DG,getTEXtChunk:RG},Symbol.toStringTag,{value:"Module"})),ny=({elements:e,appState:t,files:n,maxWidthOrHeight:i,getDimensions:r,exportPadding:s,exportingFrame:o})=>{const{elements:a,appState:l}=ld({elements:e,appState:t},null,null),{exportBackground:c,viewBackgroundColor:u}=l;return eG(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:c,exportPadding:s,viewBackgroundColor:u,exportingFrame:o},(d,f)=>{const h=document.createElement("canvas");if(i){typeof r=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");const p=Math.max(d,f),y=i<p?i/p:t?.exportScale??1;return h.width=d*y,h.height=f*y,{canvas:h,scale:y}}const m=r?.(d,f)||{width:d,height:f};return h.width=m.width,h.height=m.height,{canvas:h,scale:m.scale??1}})},Pye=async e=>{let{mimeType:t=Ue.png,quality:n}=e;t===Ue.png&&typeof n=="number"&&console.warn(`"quality" will be ignored for "${Ue.png}" mimeType`),t==="image/jpg"&&(t=Ue.jpg),t===Ue.jpg&&!e.appState?.exportBackground&&(console.warn(`Defaulting "exportBackground" to "true" for "${Ue.jpg}" mimeType`),e={...e,appState:{...e.appState,exportBackground:!0}});const i=await ny(e);return n=n||(/image\/jpe?g/.test(t)?.92:.8),new Promise((r,s)=>{i.toBlob(async o=>{if(!o)return s(new Error("couldn't export to blob"));o&&t===Ue.png&&e.appState?.exportEmbedScene&&(o=await DG({blob:o,metadata:ag(e.elements,e.appState,e.files||{},"local")})),r(o)},t,n)})},OG=async({elements:e,appState:t=Xo(),files:n={},exportPadding:i,renderEmbeddables:r,exportingFrame:s,skipInliningFonts:o,reuseImages:a})=>{const{elements:l,appState:c}=ld({elements:e,appState:t},null,null),u={...c,exportPadding:i};return p_(l,u,n,{exportingFrame:s,renderEmbeddables:r,skipInliningFonts:o,reuseImages:a})},NG=$t(new Map),Hk=async e=>await OG({elements:e,appState:{exportBackground:!1,viewBackgroundColor:Pe.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),Fye=(e,t,n)=>{const[i,r]=D.useState();return D.useEffect(()=>{if(t)if(e){const s=n.get(e);s?r(s):(async()=>{const o=await Hk(t);o.querySelector(".style-fonts")?.remove(),o&&(n.set(e,o),r(o))})()}else(async()=>{const s=await Hk(t);r(s)})()},[e,t,n,r]),i},PG=()=>{const[e]=cn(NG);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:i=>{i.forEach(r=>e.delete(r))},svgCache:e}},Bye=["excalidraw.com","raw.githubusercontent.com/excalidraw/excalidraw-libraries"],FG=new Ns,dm=$t({status:"loaded",isInitialized:!1,libraryItems:[]}),Yg=e=>Ba(e),zye=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((i,r)=>i.id===t.elements[r].id&&i.versionNonce===t.elements[r].versionNonce)),Hye=(e,t)=>{const n=[];for(const i of t)zye(e,i)&&n.push(i);return[...n,...e]},BG=(e,t)=>{const n=be(t),i={deletedItems:new Map,addedItems:new Map};for(const s of e)n.has(s.id)||i.deletedItems.set(s.id,s);const r=be(e);for(const s of t)r.has(s.id)||i.addedItems.set(s.id,s);return i};class Vye{constructor(t){this.currLibraryItems=[],this.prevLibraryItems=Yg(this.currLibraryItems),this.updateQueue=[],this.getLastUpdateTask=()=>this.updateQueue[this.updateQueue.length-1],this.notifyListeners=()=>{if(this.updateQueue.length>0)Rr.set(dm,n=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:n.isInitialized}));else{Rr.set(dm,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{const n=this.prevLibraryItems;this.prevLibraryItems=Yg(this.currLibraryItems);const i=Yg(this.currLibraryItems);this.app.props.onLibraryChange?.(i),FG.trigger(BG(n,i),i)}catch(n){console.error(n)}}},this.destroy=()=>{this.updateQueue=[],this.currLibraryItems=[],Rr.set(NG,new Map)},this.resetLibrary=()=>this.setLibrary([]),this.getLatestLibrary=()=>new Promise(async n=>{try{const i=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?n(this.getLatestLibrary()):n(Yg(i))}catch{return n(this.currLibraryItems)}}),this.updateLibrary=async({libraryItems:n,prompt:i=!1,merge:r=!1,openLibraryMenu:s=!1,defaultStatus:o="unpublished"})=>(s&&this.app.setState({openSidebar:{name:ps.name,tab:fb}}),this.setLibrary(()=>new Promise(async(a,l)=>{try{const c=await(typeof n=="function"&&!(n instanceof Blob)?n(this.currLibraryItems):n);let u;c instanceof Blob?u=await W6e(c,o):u=Z5(c,o),!i||window.confirm(M("alerts.confirmAddLibrary",{numShapes:u.length}))?(i&&this.app.focusContainer(),a(r?Hye(this.currLibraryItems,u):u)):l(new Eh)}catch(c){l(c)}}))),this.setLibrary=n=>{const i=new Promise(async(r,s)=>{try{await this.getLastUpdateTask(),typeof n=="function"&&(n=n(this.currLibraryItems)),this.currLibraryItems=Yg(await n),r(this.currLibraryItems)}catch(o){s(o)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==i),this.notifyListeners()});return this.updateQueue.push(i),this.notifyListeners(),i},this.app=t}}const zG=e=>{const n=Math.ceil(Math.sqrt(e.length)),i=[],r=h=>e.slice(h*n,h*n+n).reduce((p,y)=>{const{height:b}=Us(y.elements);return Math.max(p,b)},0),s=h=>{let m=0,p=0,y=0;for(const b of e){if(m%n===0&&(p=0),p===h){const{width:E}=Us(b.elements);y=Math.max(y,E)}m++,p++}return y};let o=0,a=0,l=0,c=0,u=0,d=0,f=0;for(const h of e){u&&u%n===0&&(a+=l+50,o=0,d=0,f++),d===0&&(l=r(f)),c=s(d);const{minX:m,minY:p,width:y,height:b}=Us(h.elements),E=(c-y)/2,v=(l-b)/2;i.push(...h.elements.map(w=>({...w,x:w.x+o+E-m,y:w.y+a+v-p}))),o+=c+50,u++,d++}return i},$ye=(e,t=Bye)=>{if(typeof t=="function"?t(e):t.some(n=>{const i=new URL(`https://${n.replace(/^https?:\/\//,"")}`),{hostname:r,pathname:s}=new URL(e);return new RegExp(`(^|\\.)${i.hostname}$`).test(r)&&new RegExp(`^${i.pathname.replace(/\/+$/,"")}(/+|$)`).test(s)}))return!0;throw new Error(`Invalid or disallowed library URL: "${e}"`)},x4=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get(U7.addLibrary)||new URLSearchParams(window.location.search).get(p7.addLibrary),t=e?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return e?{libraryUrl:e,idToken:t}:null};class Ra{static{this.queue=new Qie}static async getLibraryItems(t,n,i=!0){const r=()=>new Promise(async(s,o)=>{try{const a=await t.load({source:n});s(Z5(a?.libraryItems||[],"published"))}catch(a){o(a)}});return i?Ra.queue.push(r):r()}static{this.run=async(t,n)=>{const i=new Ra(t);return Ra.queue.push(()=>n(i))}}constructor(t){this.adapter=t}getLibraryItems(t){return Ra.getLibraryItems(this.adapter,t,!1)}}let d0=0,c6=0;const C4=e=>S9(e.map(t=>`${t.id}:${az(t.elements)}`).sort().join()),Vk=async(e,t)=>{try{return c6++,await Ra.run(e,async n=>{const i=be(await n.getLibraryItems("save"));for(const[a]of t.deletedItems)i.delete(a);const r=[];for(const[a,l]of t.addedItems)i.has(a)?i.set(a,l):r.push(l);const s=r.concat(Array.from(i.values())),o=C4(s);return o!==d0&&await e.save({libraryItems:s}),d0=o,s})}finally{c6--}},Gye=e=>{const{excalidrawAPI:t}=e,n=D.useRef(e);n.current=e;const i=D.useRef(!1);D.useEffect(()=>{if(!t)return;i.current=!1;const r=async({libraryUrl:a,idToken:l})=>{const c=new Promise(async(d,f)=>{try{a=decodeURIComponent(a),a=Pw(a),$ye(a,n.current.validateLibraryUrl);const m=await(await fetch(a)).blob();d(m)}catch(h){f(h)}}),u=l!==t.id;await(u&&document.hidden?new Promise(d=>{window.addEventListener("focus",()=>d(),{once:!0})}):null);try{await t.updateLibrary({libraryItems:c,prompt:u,merge:!0,defaultStatus:"published",openLibraryMenu:!0})}catch(d){throw t.updateScene({appState:{errorMessage:d.message}}),d}finally{if(window.location.hash.includes(U7.addLibrary)){const d=new URLSearchParams(window.location.hash.slice(1));d.delete(U7.addLibrary),window.history.replaceState({},Na,`#${d.toString()}`)}else if(window.location.search.includes(p7.addLibrary)){const d=new URLSearchParams(window.location.search);d.delete(p7.addLibrary),window.history.replaceState({},Na,`?${d.toString()}`)}}},s=a=>{a.preventDefault();const l=x4();l&&(a.stopImmediatePropagation(),window.history.replaceState({},"",a.oldURL),r(l))},o=x4();if(o&&r(o),"getInitialLibraryItems"in n.current&&n.current.getInitialLibraryItems&&(console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),Promise.resolve(n.current.getInitialLibraryItems()).then(a=>{t.updateLibrary({libraryItems:a,merge:!0})}).catch(a=>{console.error(`UseHandeLibrary getInitialLibraryItems failed: ${a?.message}`)})),"adapter"in n.current&&n.current.adapter){const a=n.current.adapter,l=n.current.migrationAdapter,c=c5();l?c.resolve(Sc(l.load).then(async u=>{let d=null;try{if(!u)return Ra.getLibraryItems(a,"load");d=Z5(u.libraryItems||[],"published");const f=await Vk(a,BG([],d));try{await l.clear()}catch(h){console.error(`couldn't delete legacy library data: ${h.message}`)}return f}catch(f){return console.error(`couldn't migrate legacy library data: ${f.message}`),d}}).catch(u=>(console.error(`error during library migration: ${u.message}`),Ra.getLibraryItems(a,"load")))):c.resolve(Sc(Ra.getLibraryItems,a,"load")),t.updateLibrary({libraryItems:c.then(u=>{const d=u||[];return d0=C4(d),d}),merge:!0}).finally(()=>{i.current=!0})}return window.addEventListener(ee.HASHCHANGE,s),()=>{window.removeEventListener(ee.HASHCHANGE,s)}},[t]),D.useEffect(()=>{const r=FG.on(async(o,a)=>{const l=i.current,c="adapter"in n.current&&n.current.adapter||null;try{c&&d0!==C4(a)&&await Vk(c,o)}catch(u){console.error(`couldn't persist library update: ${u.message}`,o),l&&n.current.excalidrawAPI&&n.current.excalidrawAPI.updateScene({appState:{errorMessage:M("errors.saveLibraryError")}})}}),s=o=>{c6&&Lw(o)};return window.addEventListener(ee.BEFORE_UNLOAD,s),()=>{window.removeEventListener(ee.BEFORE_UNLOAD,s),r(),d0=0,c6=0}},[])},Xye=({theme:e,id:t,libraryReturnUrl:n})=>{const i=n||window.location.origin+window.location.pathname;return g("a",{className:"library-menu-browse-button",href:`https://libraries.excalidraw.com?target=${window.name||"_blank"}&referrer=${i}&useHash=true&token=${t}&theme=${e}&version=${s5.excalidrawLibrary}`,target:"_excalidraw_libraries",children:M("labels.libraries")})},HG=({libraryReturnUrl:e,theme:t,id:n,style:i,children:r,className:s})=>O("div",{className:he("library-menu-control-buttons",s),style:i,children:[g(Xye,{id:n,libraryReturnUrl:e,theme:t}),r]}),jye=$t(0),Yye=e=>{const[t,n]=cn(jye);return D.useEffect(()=>{const{current:i}=e;if(!i)return;const r=So(()=>{const{scrollTop:s}=i;n(s)},200);return i.addEventListener("scroll",r),()=>{r.cancel(),i.removeEventListener("scroll",r)}},[e,n]),t},Sh=({label:e,onClick:t,className:n,children:i,actionType:r,type:s="button",isLoading:o,...a})=>{const l=r?`Dialog__action-button--${r}`:"";return O("button",{className:he("Dialog__action-button",l,n),type:s,"aria-label":e,onClick:t,...a,children:[i&&g("div",{style:o?{visibility:"hidden"}:{},children:i}),g("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&g("div",{style:{position:"absolute",inset:0},children:g(Ja,{})})]})},VG=e=>{const{onConfirm:t,onCancel:n,children:i,confirmText:r=M("buttons.confirm"),cancelText:s=M("buttons.cancel"),className:o="",...a}=e,l=bn(),c=v5(I_),{container:u}=Qo();return O(jr,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[i,O("div",{className:"confirm-dialog-buttons",children:[g(Sh,{label:s,onClick:()=>{l({openMenu:null}),c(!1),vn.flushSync(()=>{n()}),u?.focus()}}),g(Sh,{label:r,onClick:()=>{l({openMenu:null}),c(!1),vn.flushSync(()=>{t()}),u?.focus()},actionType:"danger"})]})]})};class f0{static has(t){try{return!!window.localStorage.getItem(t)}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),!1}}static get(t){try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):null}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),null}}static set=(t,n)=>{try{return window.localStorage.setItem(t,JSON.stringify(n)),!0}catch(i){return console.warn(`localStorage.setItem error: ${i.message}`),!1}};static delete=t=>{try{window.localStorage.removeItem(t)}catch(n){console.warn(`localStorage.removeItem error: ${n.message}`)}}}const Wye=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,Kye=/{{([\w-]+)}}/,Zye=/<([\w-]+)>/,qye=/<\/([\w-]+)>/,Qye=(e,t)=>{const n=[{name:"",children:[]}];return e.split(Wye).filter(Boolean).forEach(i=>{const r=i.match(Zye),s=i.match(qye),o=i.match(Kye);if(r!==null){const a=r[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(s!==null)if(s[1]===n[n.length-1].name){const l=n.pop(),c=se.createElement(se.Fragment,{},...l.children),u=t[l.name];typeof u=="function"&&n[n.length-1].children.push(u(c))}else console.warn(`Trans: unexpected end tag ${i} for interpolating ${e}`);else if(o!==null){const a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(i)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},mr=({i18nKey:e,children:t,...n})=>{const{t:i}=un();return se.createElement(se.Fragment,{},...Qye(i(e),n))},Jye=async e=>{const i=Math.round(8),r=Math.max(Math.round(128/64),2),s=Sre(e,6),o=document.createElement("canvas");o.width=s[0].length*128+(s[0].length+1)*(i*2)-i*2,o.height=s.length*128+(s.length+1)*(i*2)-i*2;const a=o.getContext("2d");a.fillStyle=ci.white,a.fillRect(0,0,o.width,o.height);for(const[l,c]of e.entries()){const u=await ny({elements:c.elements,files:null,maxWidthOrHeight:128}),{width:d,height:f}=u,h=Math.floor(l/6)*(128+i*2),m=l%6*(128+i*2);a.drawImage(u,m+(128-d)/2+i,h+(128-f)/2+i),a.lineWidth=r,a.strokeStyle=ci.gray[4],a.strokeRect(m+i/2,h+i/2,128+i,128+i)}return await lG(new File([await am(o)],"preview",{type:Ue.png}),{outputType:Ue.jpg,maxWidthOrHeight:5e3})},e8e=({libItem:e,appState:t,index:n,onChange:i,onRemove:r})=>{const s=D.useRef(null),o=D.useRef(null);return D.useEffect(()=>{const a=s.current;a&&(async()=>{const l=await OG({elements:e.elements,appState:{...t,viewBackgroundColor:ci.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),O("div",{className:"single-library-item",children:[e.status==="published"&&g("span",{className:"single-library-item-status",children:M("labels.statusPublished")}),g("div",{ref:s,className:"single-library-item__svg"}),g(Be,{"aria-label":M("buttons.remove"),type:"button",icon:Sd,className:"single-library-item--remove",onClick:r.bind(null,e.id),title:M("buttons.remove")}),O("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[O("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[O("div",{style:{padding:"0.5em 0"},children:[g("span",{style:{fontWeight:500,color:ci.gray[6]},children:M("publishDialog.itemName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{i(a.target.value,n)}})]}),g("span",{className:"error",children:e.error})]})]})},t8e=({onClose:e,libraryItems:t,appState:n,onSuccess:i,onError:r,updateItemsInStorage:s,onRemove:o})=>{const[a,l]=D.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[c,u]=D.useState(!1);D.useEffect(()=>{const v=f0.get(Y1.PUBLISH_LIBRARY);v&&l(v)},[]);const[d,f]=D.useState(t.slice());D.useEffect(()=>{f(t.slice())},[t]);const h=v=>{l({...a,[v.target.name]:v.target.value})},m=async v=>{v.preventDefault(),u(!0);const w=[];let S=!1;if(d.forEach(R=>{let P="";R.name||(P=M("publishDialog.errors.required"),S=!0),w.push({...R,error:P})}),S){f(w),u(!1);return}const k=await Jye(d),_={type:ms.excalidrawLibrary,version:s5.excalidrawLibrary,source:Tw(),libraryItems:d},T=JSON.stringify(_,null,2),A=new Blob([T],{type:"application/json"}),C=new FormData;C.append("excalidrawLib",A),C.append("previewImage",k),C.append("previewImageType",k.type),C.append("title",a.name),C.append("authorName",a.authorName),C.append("githubHandle",a.githubHandle),C.append("name",a.name),C.append("description",a.description),C.append("twitterHandle",a.twitterHandle),C.append("website",a.website),fetch("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries/submit",{method:"post",body:C}).then(R=>R.ok?R.json().then(({url:P})=>{f0.delete(Y1.PUBLISH_LIBRARY),i({url:P,authorName:a.authorName,items:d})}):R.json().catch(()=>{throw new Error(R.statusText||"something went wrong")}).then(P=>{throw new Error(P.message||R.statusText||"something went wrong")}),R=>{console.error(R),r(R),u(!1)}).catch(R=>{console.error(R),r(R),u(!1)})},p=()=>{const v=[];return d.forEach((w,S)=>{v.push(g("div",{className:"single-library-item-wrapper",children:g(e8e,{libItem:w,appState:n,index:S,onChange:(k,_)=>{const T=d.slice();T[_].name=k,f(T)},onRemove:o})},S))}),g("div",{className:"selected-library-items",children:v})},y=D.useCallback(()=>{s(d),f0.set(Y1.PUBLISH_LIBRARY,a),e()},[d,e,s,a]),b=!!t.length,E=t.some(v=>v.status==="published");return g(jr,{onCloseRequest:y,title:M("publishDialog.title"),className:"publish-library",children:b?O("form",{onSubmit:m,children:[g("div",{className:"publish-library-note",children:g(mr,{i18nKey:"publishDialog.noteDescription",link:v=>g("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener",children:v})})}),g("span",{className:"publish-library-note",children:g(mr,{i18nKey:"publishDialog.noteGuidelines",link:v=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:v})})}),g("div",{className:"publish-library-note",children:M("publishDialog.noteItems")}),E&&g("span",{className:"publish-library-note publish-library-warning",children:M("publishDialog.republishWarning")}),p(),O("div",{className:"publish-library__fields",children:[O("label",{children:[O("div",{children:[g("span",{children:M("publishDialog.libraryName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:M("publishDialog.placeholder.libraryName")})]}),O("label",{style:{alignItems:"flex-start"},children:[O("div",{children:[g("span",{children:M("publishDialog.libraryDesc")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:M("publishDialog.placeholder.libraryDesc")})]}),O("label",{children:[O("div",{children:[g("span",{children:M("publishDialog.authorName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:M("publishDialog.placeholder.authorName")})]}),O("label",{children:[g("span",{children:M("publishDialog.githubUsername")}),g("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:M("publishDialog.placeholder.githubHandle")})]}),O("label",{children:[g("span",{children:M("publishDialog.twitterUsername")}),g("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:M("publishDialog.placeholder.twitterHandle")})]}),O("label",{children:[g("span",{children:M("publishDialog.website")}),g("input",{type:"text",name:"website",pattern:"https?://.+",title:M("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:M("publishDialog.placeholder.website")})]}),g("span",{className:"publish-library-note",children:g(mr,{i18nKey:"publishDialog.noteLicense",link:v=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:v})})})]}),O("div",{className:"publish-library__buttons",children:[g(Sh,{label:M("buttons.cancel"),onClick:y,"data-testid":"cancel-clear-canvas-button"}),g(Sh,{type:"submit",label:M("buttons.submit"),actionType:"primary",isLoading:c})]})]}):g("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:M("publishDialog.atleastOneLibItem")})})},n8e=D.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:he("Stack Stack_horizontal",r),style:{"--gap":t,alignItems:n,justifyContent:i,...s},ref:o,children:e})),i8e=D.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:he("Stack Stack_vertical",r),style:{"--gap":t,justifyItems:n,justifyContent:i,...s},ref:o,children:e})),fs={Row:n8e,Col:i8e},$G=({children:e,onClickOutside:t,className:n="",onSelect:i,style:r})=>{const s=ei(),o=D.useRef(null),a=L5({onClickOutside:t});e_(o,()=>{a.onClickOutside?.()}),D.useEffect(()=>{const c=d=>{d.key===B.ESCAPE&&(d.stopImmediatePropagation(),a.onClickOutside?.())},u={capture:!0};return document.addEventListener(ee.KEYDOWN,c,u),()=>{document.removeEventListener(ee.KEYDOWN,c,u)}},[a]);const l=he(`dropdown-menu ${n}`,{"dropdown-menu--mobile":s.editor.isMobile}).trim();return g(BV.Provider,{value:{onSelect:i},children:g("div",{ref:o,className:l,style:r,"data-testid":"dropdown-menu",children:s.editor.isMobile?g(fs.Col,{className:"dropdown-menu-container",children:e}):g(js,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};$G.displayName="DropdownMenuContent";const r8e=({children:e,className:t="",selected:n,...i})=>g("div",{...i,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),h0=({icon:e,shortcut:t,href:n,children:i,onSelect:r,className:s="",selected:o,rel:a="noopener",...l})=>{const c=HV(l.onClick,r);return g("a",{...l,href:n,target:"_blank",rel:a||"noopener",className:zV(s,o),title:l.title??l["aria-label"],onClick:c,children:g(FV,{icon:e,shortcut:t,children:i})})};h0.displayName="DropdownMenuItemLink";const GG=()=>g("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}});GG.displayName="DropdownMenuSeparator";const XG=({className:e="",children:t,onToggle:n,title:i,...r})=>{const s=ei(),o=he(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":s.editor.isMobile}).trim();return g("button",{"data-prevent-outside-click":!0,className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:i,...r,children:t})};XG.displayName="DropdownMenuTrigger";const s8e=e=>{const t=se.Children.toArray(e).find(n=>se.isValidElement(n)&&typeof n.type!="string"&&n?.type.displayName&&n.type.displayName==="DropdownMenuTrigger");return t||null},o8e=e=>{const t=se.Children.toArray(e).find(n=>se.isValidElement(n)&&typeof n.type!="string"&&n?.type.displayName&&n.type.displayName==="DropdownMenuContent");return t||null},We=({children:e,open:t})=>{const n=s8e(e),i=o8e(e);return O(de,{children:[n,t&&i]})};We.Trigger=XG;We.Content=$G;We.Item=or;We.ItemLink=h0;We.ItemCustom=r8e;We.Group=Qb;We.Separator=GG;We.displayName="DropdownMenu";const a8e=(e,t)=>e.filter(n=>t.includes(n.id)),l8e=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:i,resetLibrary:r,onSelectItems:s,appState:o,className:a})=>{const[l]=cn(dm),[c,u]=cn(I_),d=()=>{const C=t.length?M("alerts.removeItemsFromsLibrary",{count:t.length}):M("alerts.resetLibrary"),R=t.length?M("confirmDialog.removeItemsFromLib"):M("confirmDialog.resetLibrary");return g(VG,{onConfirm:()=>{t.length?i():r(),h(!1)},onCancel:()=>{h(!1)},title:R,children:g("p",{children:C})})},[f,h]=D.useState(!1),m=!!t.length,p=m?l.libraryItems.filter(C=>t.includes(C.id)):l.libraryItems,y=M(m?"buttons.remove":"buttons.resetLibrary"),[b,E]=D.useState(!1),[v,w]=D.useState(null),S=D.useCallback(()=>O(jr,{onCloseRequest:()=>w(null),title:M("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[g("p",{children:g(mr,{i18nKey:"publishSuccessDialog.content",authorName:v.authorName,link:C=>g("a",{href:v?.url,target:"_blank",rel:"noopener noreferrer",children:C})})}),g(Be,{type:"button",title:M("buttons.close"),"aria-label":M("buttons.close"),label:M("buttons.close"),onClick:()=>w(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[w,v]),k=(C,R)=>{E(!1),w({url:C.url,authorName:C.authorName});const P=R.slice();P.forEach(N=>{t.includes(N.id)&&(N.status="published")}),n.setLibrary(P)},_=async()=>{try{await n.updateLibrary({libraryItems:g_({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(C){if(C?.name==="AbortError"){console.warn(C);return}e({errorMessage:M("errors.importLibraryError")})}},T=async()=>{const C=m?p:await n.getLatestLibrary();C6e(C).catch(EF).catch(R=>{e({errorMessage:R.message})})},A=()=>O(We,{open:c,children:[g(We.Trigger,{onToggle:()=>u(!c),children:tue}),O(We.Content,{onClickOutside:()=>u(!1),onSelect:()=>u(!1),className:"library-menu",children:[!m&&g(We.Item,{onSelect:_,icon:L9,"data-testid":"lib-dropdown--load",children:M("buttons.load")}),!!p.length&&g(We.Item,{onSelect:T,icon:S5,"data-testid":"lib-dropdown--export",children:M("buttons.export")}),!!p.length&&g(We.Item,{onSelect:()=>h(!0),icon:Cc,children:y}),m&&g(We.Item,{icon:dde,onSelect:()=>E(!0),"data-testid":"lib-dropdown--remove",children:M("buttons.publishLibrary")})]})]});return O("div",{className:he("library-menu-dropdown-container",a),children:[A(),t.length>0&&g("div",{className:"library-actions-counter",children:t.length}),f&&d(),b&&g(t8e,{onClose:()=>E(!1),libraryItems:a8e(l.libraryItems,t),appState:o,onSuccess:C=>k(C,l.libraryItems),onError:C=>window.alert(C),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:C=>s(t.filter(R=>R!==C))}),v&&S()]})},$k=({selectedItems:e,onSelectItems:t,className:n})=>{const{library:i}=ro(),{clearLibraryCache:r,deleteItemsFromLibraryCache:s}=PG(),o=hi(),a=bn(),[l]=cn(dm),c=async d=>{const f=d.filter(h=>!e.includes(h.id));i.setLibrary(f).catch(()=>{a({errorMessage:M("alerts.errorRemovingFromLibrary")})}),s(e),t([])};return g(l8e,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:i,onRemoveFromLibrary:()=>c(l.libraryItems),resetLibrary:()=>{i.resetLibrary(),r()},className:n})};function c8e(){return[!1,D.useCallback(t=>t(),[])]}const u8e=se.useTransition||c8e,d8e=D.memo(({id:e,elements:t,isPending:n,onClick:i,selected:r,onToggle:s,onDrag:o,svgCache:a})=>{const l=D.useRef(null),c=Fye(e,t,a);D.useEffect(()=>{const m=l.current;if(m)return c&&(m.innerHTML=c.outerHTML),()=>{m.innerHTML=""}},[c]);const[u,d]=D.useState(!1),f=ei().editor.isMobile,h=n&&g("div",{className:"library-unit__adder",children:eue});return O("div",{className:he("library-unit",{"library-unit__active":t,"library-unit--hover":t&&u,"library-unit--selected":r,"library-unit--skeleton":!c}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[g("div",{className:he("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?m=>{e&&m.shiftKey?s(e,m):i(e)}:void 0,onDragStart:m=>{if(!e){m.preventDefault();return}d(!1),o(e,m)}}),h,e&&t&&(u||f||r)&&g(l_,{checked:r,onChange:(m,p)=>s(e,p),className:"library-unit__checkbox"})]})}),f8e=()=>g("div",{className:"library-unit library-unit--skeleton"}),Gk=({children:e})=>g("div",{className:"library-menu-items-container__grid",children:e}),AE=D.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:i,onClick:r,svgCache:s,itemsRenderedPerBatch:o})=>{const[,a]=u8e(),[l,c]=D.useState(0);return D.useEffect(()=>{l<e.length&&a(()=>{c(l+o)})},[l,e.length,a,o]),g(de,{children:e.map((u,d)=>d<l?g(d8e,{elements:u?.elements,isPending:!u?.id&&!!u?.elements,onClick:r,svgCache:s,id:u?.id,selected:i(u.id),onToggle:t,onDrag:n},u?.id??d):g(f8e,{},d))})}),h8e=17,g8e=64;function m8e({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:i,pendingElements:r,theme:s,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:c}){const u=D.useRef(null),d=Yye(u);D.useEffect(()=>{d>0&&u.current?.scrollTo(0,d)},[]);const{svgCache:f}=PG(),h=D.useMemo(()=>t.filter(C=>C.status!=="published"),[t]),m=D.useMemo(()=>t.filter(C=>C.status==="published"),[t]),p=!t.length&&!r.length,y=!r.length&&!h.length&&!m.length,[b,E]=D.useState(null),v=D.useCallback((C,R)=>{const P=!c.includes(C),N=[...h,...m];if(P){if(R.shiftKey&&b){const K=N.findIndex($=>$.id===b),H=N.findIndex($=>$.id===C);if(K===-1||H===-1){l([...c,C]);return}const z=be(c),V=N.reduce(($,G,J)=>((J>=K&&J<=H||z.has(G.id))&&$.push(G.id),$),[]);l(V)}else l([...c,C]);E(C)}else E(null),l(c.filter(K=>K!==C))},[b,l,m,c,h]),w=D.useCallback(C=>{let R;return c.includes(C)?R=t.filter(P=>c.includes(P.id)):R=t.filter(P=>P.id===C),R.map(P=>({...P,elements:Vb({type:"everything",elements:P.elements,randomizeSeed:!0}).duplicatedElements}))},[t,c]),S=D.useCallback((C,R)=>{R.dataTransfer.setData(Ue.excalidrawlib,X$(w(C)))},[w]),k=D.useCallback(C=>C?c.includes(C):!1,[c]),_=D.useCallback(()=>{n(r)},[r,n]),T=D.useCallback(C=>{C&&i(w(C))},[w,i]),A=f.size>=t.length?g8e:h8e;return O("div",{className:"library-menu-items-container",style:r.length||h.length||m.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!y&&g($k,{selectedItems:c,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),O(fs.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:m.length>0?1:"0 1 auto",marginBottom:0},ref:u,children:[O(de,{children:[!y&&g("div",{className:"library-menu-items-container__header",children:M("labels.personalLib")}),e&&g("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:g(Ja,{})}),!r.length&&!h.length?O("div",{className:"library-menu-items__no-items",children:[g("div",{className:"library-menu-items__no-items__label",children:M("library.noItems")}),g("div",{className:"library-menu-items__no-items__hint",children:m.length>0?M("library.hint_emptyPrivateLibrary"):M("library.hint_emptyLibrary")})]}):O(Gk,{children:[r.length>0&&g(AE,{itemsRenderedPerBatch:A,items:[{id:null,elements:r}],onItemSelectToggle:v,onItemDrag:S,onClick:_,isItemSelected:k,svgCache:f}),g(AE,{itemsRenderedPerBatch:A,items:h,onItemSelectToggle:v,onItemDrag:S,onClick:T,isItemSelected:k,svgCache:f})]})]}),O(de,{children:[(m.length>0||r.length>0||h.length>0)&&g("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:M("labels.excalidrawLib")}),m.length>0?g(Gk,{children:g(AE,{itemsRenderedPerBatch:A,items:m,onItemSelectToggle:v,onItemDrag:S,onClick:T,isItemSelected:k,svgCache:f})}):h.length>0?g("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:M("library.noItems")}):null]}),p&&g(HG,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:s,children:g($k,{selectedItems:c,onSelectItems:l})})]})]})}const I_=$t(!1),Xk=({children:e})=>g("div",{className:"layer-ui__library",children:e}),p8e=D.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:i,libraryReturnUrl:r,library:s,id:o,theme:a,selectedItems:l,onSelectItems:c})=>{const[u]=cn(dm),d=D.useCallback(m=>{(async(y,b)=>{tt("element","addToLibrary","ui");for(const v of sF)if(y.some(w=>w.type===v))return i({errorMessage:M(`errors.libraryElementTypeError.${v}`)});const E=[{status:"unpublished",elements:y,id:tr(),created:Date.now()},...b];n(),s.setLibrary(E).catch(()=>{i({errorMessage:M("alerts.errorAddingToLibrary")})})})(m,u.libraryItems)},[n,s,i,u.libraryItems]),f=D.useMemo(()=>u.libraryItems,[u]);if(u.status==="loading"&&!u.isInitialized)return g(Xk,{children:g("div",{className:"layer-ui__library-message",children:O("div",{children:[g(Ja,{size:"2em"}),g("span",{children:M("labels.libraryLoadingMessage")})]})})});const h=u.libraryItems.length>0||t.length>0;return O(Xk,{children:[g(m8e,{isLoading:u.status==="loading",libraryItems:f,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:r,theme:a,onSelectItems:c,selectedItems:l}),h&&g(HG,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:r,theme:a})]})}),ME=(e,t)=>({elements:e,pending:Ne(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),U8e=(e,t)=>{const n=ay(),[i,r]=D.useState(()=>ME(n,e.selectedElementIds)),s=D.useRef(new Map);return D.useEffect(()=>{for(const o of i.pending)s.current.set(o.id,o.version)},[i.pending]),D.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&r(o=>{if(!Bi(o.selectedElementIds,e.selectedElementIds))return s.current.clear(),ME(n,e.selectedElementIds);const a=t.scene.getNonDeletedElementsMap();for(const l of Object.keys(e.selectedElementIds)){const c=a.get(l)?.version;if(c&&c!==s.current.get(l))return ME(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),i.pending},b8e=D.memo(()=>{const e=ro(),{onInsertElements:t}=e,n=cp(),i=hi(),r=bn(),[s,o]=D.useState([]),a=D.useMemo(()=>e.library,[e.library]),l=U8e(i,e),c=D.useCallback(d=>{t(zG(d))},[t]),u=D.useCallback(()=>{r({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[r]);return g(p8e,{pendingElements:l,onInsertLibraryItems:c,onAddToLibrary:u,setAppState:r,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:i.theme,selectedItems:s,onSelectItems:o})}),y8e=e=>{const{closeOnClickOutside:t=!0}=e,n=DV({className:"excalidraw-modal-container"}),i=D.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;const r=s=>{s.key===B.ESCAPE&&(s.nativeEvent.stopImmediatePropagation(),s.stopPropagation(),e.onCloseRequest())};return vn.createPortal(O("div",{className:he("Modal",e.className,{"animations-disabled":i.current}),role:"dialog","aria-modal":"true",onKeyDown:r,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[g("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),g("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)};function E8e(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}const jr=e=>{const[t,n]=MG(),[i]=D.useState(document.activeElement),{id:r}=Qo(),s=ei().viewport.isMobile;D.useEffect(()=>{if(!t)return;const c=v7(t);setTimeout(()=>{c.length>0&&e.autofocus!==!1&&(c[1]||c[0]).focus()});const u=d=>{if(d.key===B.TAB){const f=v7(t),{activeElement:h}=document,m=f.findIndex(p=>p===h);m===0&&d.shiftKey?(f[f.length-1].focus(),d.preventDefault()):m===f.length-1&&!d.shiftKey&&(f[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",u),()=>t.removeEventListener("keydown",u)},[t,e.autofocus]);const o=bn(),a=v5(I_),l=()=>{o({openMenu:null}),a(!1),i.focus(),e.onCloseRequest()};return g(y8e,{className:he("Dialog",e.className,{"Dialog--fullscreen":s}),labelledBy:"dialog-title",maxWidth:E8e(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:O(js,{ref:n,children:[e.title&&g("h2",{id:`${r}-dialog-title`,className:"Dialog__title",children:g("span",{className:"Dialog__titleContent",children:e.title})}),s&&g("button",{className:"Dialog__close",onClick:l,title:M("buttons.close"),"aria-label":M("buttons.close"),type:"button",children:Sd}),g("div",{className:"Dialog__content",children:e.children})]})})},cd=({type:e="button",onSelect:t,selected:n,children:i,className:r="",...s})=>g("button",{onClick:u5(s.onClick,o=>{t()}),type:e,className:he("excalidraw-button",r,{selected:n}),...s,children:i}),Ih=D.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:i,readonly:r,selectOnRender:s,onKeyDown:o,isRedacted:a=!1,icon:l,className:c,...u},d)=>{const f=D.useRef(null);D.useImperativeHandle(d,()=>f.current),D.useLayoutEffect(()=>{s&&(f.current?.focus(),f.current?.select())},[s]);const[h,m]=D.useState(!1);return O("div",{className:he("ExcTextField",c,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{f.current?.focus()},children:[l,t&&g("div",{className:"ExcTextField__label",children:t}),O("div",{className:he("ExcTextField__input",{"ExcTextField__input--readonly":r}),children:[g("input",{className:he({"is-redacted":"value"in u&&u.value&&a&&!h}),readOnly:r,value:"value"in u?u.value:void 0,defaultValue:"defaultValue"in u?u.defaultValue:void 0,placeholder:i,ref:f,onChange:p=>e?.(p.target.value),onKeyDown:o}),a&&g(cd,{onSelect:()=>m(!h),style:{border:0,userSelect:"none"},children:h?vde:P9})]})]})}),x_=[{icon:aue,value:"selection",key:B.V,numericKey:B[1],fillable:!0},{icon:lH,value:"rectangle",key:B.R,numericKey:B[2],fillable:!0},{icon:cH,value:"diamond",key:B.D,numericKey:B[3],fillable:!0},{icon:uH,value:"ellipse",key:B.O,numericKey:B[4],fillable:!0},{icon:lue,value:"arrow",key:B.A,numericKey:B[5],fillable:!0},{icon:dH,value:"line",key:B.L,numericKey:B[6],fillable:!0},{icon:T5,value:"freedraw",key:[B.P,B.X],numericKey:B[7],fillable:!1},{icon:k9,value:"text",key:B.T,numericKey:B[8],fillable:!1},{icon:uue,value:"image",key:null,numericKey:B[9],fillable:!1},{icon:due,value:"eraser",key:B.E,numericKey:B[0],fillable:!1}],v8e=e=>x_.find((n,i)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e)))?.value||null;var w8e={};const jk=e=>{let t;const n=new Set,i=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,h))}},r=()=>t,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(w8e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(i,r,l);return l},_8e=e=>e?jk(e):jk;var jG={exports:{}},YG={},WG={exports:{}},KG={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh=D;function T8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var S8e=typeof Object.is=="function"?Object.is:T8e,I8e=xh.useState,x8e=xh.useEffect,C8e=xh.useLayoutEffect,A8e=xh.useDebugValue;function M8e(e,t){var n=t(),i=I8e({inst:{value:n,getSnapshot:t}}),r=i[0].inst,s=i[1];return C8e(function(){r.value=n,r.getSnapshot=t,kE(r)&&s({inst:r})},[e,n,t]),x8e(function(){return kE(r)&&s({inst:r}),e(function(){kE(r)&&s({inst:r})})},[e]),A8e(n),n}function kE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!S8e(e,n)}catch{return!0}}function k8e(e,t){return t()}var R8e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?k8e:M8e;KG.useSyncExternalStore=xh.useSyncExternalStore!==void 0?xh.useSyncExternalStore:R8e;WG.exports=KG;var D8e=WG.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy=D,L8e=D8e;function O8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var N8e=typeof Object.is=="function"?Object.is:O8e,P8e=L8e.useSyncExternalStore,F8e=iy.useRef,B8e=iy.useEffect,z8e=iy.useMemo,H8e=iy.useDebugValue;YG.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var s=F8e(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=z8e(function(){function l(h){if(!c){if(c=!0,u=h,h=i(h),r!==void 0&&o.hasValue){var m=o.value;if(r(m,h))return d=m}return d=h}if(m=d,N8e(u,h))return m;var p=i(h);return r!==void 0&&r(m,p)?(u=h,m):(u=h,d=p)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,i,r]);var a=P8e(e,s[0],s[1]);return B8e(function(){o.hasValue=!0,o.value=a},[a]),H8e(a),a};jG.exports=YG;var V8e=jG.exports;const $8e=ll(V8e);var ZG={};const{useDebugValue:G8e}=se,{useSyncExternalStoreWithSelector:X8e}=$8e;let Yk=!1;const j8e=e=>e;function Y8e(e,t=j8e,n){(ZG?"production":void 0)!=="production"&&n&&!Yk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Yk=!0);const i=X8e(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return G8e(i),i}const Wk=e=>{(ZG?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?_8e(e):e,n=(i,r)=>Y8e(t,i,r);return Object.assign(n,t),n},W8e=e=>e?Wk(e):Wk;var Kk,Zk;const qk=typeof window<"u"&&((Kk=window.document)!=null&&Kk.createElement||((Zk=window.navigator)==null?void 0:Zk.product)==="ReactNative")?se.useLayoutEffect:se.useEffect;function co(){const e=W8e(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(r=>r.set),i=e(r=>r.version);return qk(()=>{n(r=>({version:r.version+1}))},[]),qk(()=>(n(({current:r})=>({current:[...r,t]})),()=>n(({current:r})=>({current:r.filter(s=>s!==t)}))),[t,i]),null},Out:()=>{const t=e(n=>n.current);return se.createElement(se.Fragment,null,t)}}}const qG=se.createContext(null),ar=()=>se.useContext(qG),K8e=mz(),Z8e=()=>se.useMemo(()=>({MainMenuTunnel:co(),WelcomeScreenMenuHintTunnel:co(),WelcomeScreenToolbarHintTunnel:co(),WelcomeScreenHelpHintTunnel:co(),WelcomeScreenCenterTunnel:co(),FooterCenterTunnel:co(),DefaultSidebarTriggerTunnel:co(),DefaultSidebarTabTriggersTunnel:co(),OverwriteConfirmDialogTunnel:co(),TTDDialogTriggerTunnel:co(),tunnelsJotai:K8e}),[]),QG=(e,t)=>{let n=t[0]?.type||null;for(const i of t)if(i.type!==n){n=null;break}return R7(e.activeTool.type)&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(i=>R7(i.type))},JG=(e,t)=>bh(e.activeTool.type)||t.some(n=>bh(n.type)),eX=({appState:e,elementsMap:t,renderAction:n,app:i})=>{const r=mB(t,e);let s=!1;r.length===2&&(nr(r[0])||nr(r[1]))&&(s=!0);const o=!!(e.editingTextElement||e.newElement),a=ei(),l=document.documentElement.getAttribute("dir")==="rtl",c=bh(e.activeTool.type)&&!ds(e.currentItemBackgroundColor)||r.some(m=>bh(m.type)&&!ds(m.backgroundColor)),u=r.length===1||s,d=!e.editingLinearElement&&r.length===1&&we(r[0])&&!ce(r[0]),f=!e.croppingElementId&&r.length===1&&yt(r[0]),h=!s&&Xr(e,i);return O("div",{className:"selected-shape-actions",children:[g("div",{children:QG(e,r)&&n("changeStrokeColor")}),JG(e,r)&&g("div",{children:n("changeBackgroundColor")}),c&&n("changeFillStyle"),($C(e.activeTool.type)||r.some(m=>$C(m.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||r.some(m=>m.type==="freedraw"))&&n("changeStrokeShape"),(GC(e.activeTool.type)||r.some(m=>GC(m.type)))&&O(de,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(D7(e.activeTool.type)||r.some(m=>D7(m.type)))&&g(de,{children:n("changeRoundness")}),(XC(e.activeTool.type)||r.some(m=>XC(m.type)))&&g(de,{children:n("changeArrowType")}),(e.activeTool.type==="text"||r.some(le))&&O(de,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||zoe(r,t))&&n("changeTextAlign")]}),Boe(r,t)&&n("changeVerticalAlign"),(Bb(e.activeTool.type)||r.some(m=>Bb(m.type)))&&g(de,{children:n("changeArrowhead")}),n("changeOpacity"),O("fieldset",{children:[g("legend",{children:M("labels.layers")}),O("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!s&&O("fieldset",{children:[g("legend",{children:M("labels.align")}),O("div",{className:"buttonList",children:[l?O(de,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):O(de,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),r.length>2&&n("distributeHorizontally"),g("div",{style:{flexBasis:"100%",height:0}}),O("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),r.length>2&&n("distributeVertically")]})]})]}),!o&&r.length>0&&O("fieldset",{children:[g("legend",{children:M("labels.actions")}),O("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),u&&n("hyperlink"),f&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},tX=({activeTool:e,appState:t,app:n,UIOptions:i})=>{const[r,s]=D.useState(!1),o=e.type==="frame",a=e.type==="laser",l=e.type==="lasso",c=e.type==="embeddable",{TTDDialogTriggerTunnel:u}=ar();return O(de,{children:[x_.map(({value:d,icon:f,key:h,numericKey:m,fillable:p},y)=>{if(i.tools?.[d]===!1)return null;const b=M(`toolBar.${d}`),E=h&&q1(typeof h=="string"?h:h[0]),v=E?`${E} ${M("helpDialog.or")} ${m}`:`${m}`;return g(Be,{className:he("Shape",{fillable:p}),type:"radio",icon:f,checked:e.type===d,name:"editor-current-shape",title:`${q1(b)} — ${v}`,keyBindingLabel:m||E,"aria-label":q1(b),"aria-keyshortcuts":v,"data-testid":`toolbar-${d}`,onPointerDown:({pointerType:w})=>{!t.penDetected&&w==="pen"&&n.togglePenMode(!0),d==="selection"&&(t.activeTool.type==="selection"?n.setActiveTool({type:"lasso"}):n.setActiveTool({type:"selection"}))},onChange:({pointerType:w})=>{t.activeTool.type!==d&&tt("toolbar",d,"ui"),d==="image"?n.setActiveTool({type:d}):n.setActiveTool({type:d})}},d)}),g("div",{className:"App-toolbar__divider"}),O(We,{open:r,children:[g(We.Trigger,{className:he("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||c||l||a&&!n.props.isCollaborating}),onToggle:()=>s(!r),title:M("toolBar.extraTools"),children:o?Yb:c?RA:a&&!n.props.isCollaborating?s4:l?J7:yde}),O(We.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[g(We.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:Yb,shortcut:B.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:M("toolBar.frame")}),g(We.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:RA,"data-testid":"toolbar-embeddable",selected:c,children:M("toolBar.embeddable")}),g(We.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:s4,"data-testid":"toolbar-laser",selected:a,shortcut:B.K.toLocaleUpperCase(),children:M("toolBar.laser")}),g(We.Item,{onSelect:()=>n.setActiveTool({type:"lasso"}),icon:J7,"data-testid":"toolbar-lasso",selected:l,children:M("toolBar.lasso")}),g("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&g(u.Out,{}),g(We.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:wH,"data-testid":"toolbar-embeddable",children:M("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&g(de,{children:O(We.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:_H,"data-testid":"toolbar-magicframe",children:[M("toolBar.magicframe"),g(We.Item.Badge,{children:"AI"})]})})]})]})]})},q8e=({renderAction:e,zoom:t})=>g(fs.Col,{gap:1,className:_c.ZOOM_ACTIONS,children:O(fs.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),Q8e=({renderAction:e,className:t})=>O("div",{className:`undo-redo-buttons ${t}`,children:[g("div",{className:"undo-button-container",children:g(il,{label:M("buttons.undo"),children:e("undo")})}),g("div",{className:"redo-button-container",children:O(il,{label:M("buttons.redo"),children:[" ",e("redo")]})})]}),J8e=({actionManager:e,showExitZenModeBtn:t})=>g("button",{type:"button",className:he("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(v4),children:M("buttons.exitZenMode")}),eEe=({renderAction:e,className:t})=>g("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),Qk=e=>{const t=D.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},ry=$t(null),tEe=()=>{const[e,t]=cn(ry),n=wr();return e&&e==="clearCanvas"?g(VG,{onConfirm:()=>{n.executeAction(o0),t(null)},onCancel:()=>t(null),title:M("clearCanvasDialog.title"),children:O("p",{className:"clear-canvas__content",children:[" ",M("alerts.clearReset")]})}):null},nEe={...Jb,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(Jb,"commandPalette")}},iEe=Object.freeze(Object.defineProperty({__proto__:null,toggleTheme:nEe},Symbol.toStringTag,{value:"Module"})),rEe=$t(null),Qe={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},sEe=e=>{switch(e){case Qe.app:return 1;case Qe.export:return 2;case Qe.editor:return 3;case Qe.tools:return 4;case Qe.elements:return 5;case Qe.links:return 6;default:return 10}},_2=({shortcut:e,className:t,children:n})=>{const i=e.replace("++","+$").split("+");return O("div",{className:he("shortcut",t),children:[i.map((r,s)=>g("div",{className:"shortcut-wrapper",children:g("div",{className:"shortcut-key",children:r==="$"?"+":r})},r)),g("div",{className:"shortcut-desc",children:n})]})},nX=e=>!e.altKey&&e[B.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===B.P||e.key===B.SLASH),Jk=Object.assign(e=>{const t=hi(),n=bn();return D.useEffect(()=>{const i=r=>{nX(r)&&(r.preventDefault(),r.stopPropagation(),n(s=>{const o=s.openDialog?.name==="commandPalette"?null:{name:"commandPalette"};return o&&tt("command_palette","open","shortcut"),{openDialog:o}}))};return window.addEventListener(ee.KEYDOWN,i,{capture:!0}),()=>window.removeEventListener(ee.KEYDOWN,i,{capture:!0})},[n]),t.openDialog?.name!=="commandPalette"?null:g(oEe,{...e})},{defaultItems:iEe});function oEe({customCommandPaletteItems:e}){const t=ro(),n=hi(),i=bn(),r=cp(),s=wr(),[o,a]=cn(rEe),[l,c]=D.useState(null),u=D.useRef(null),d=L5({uiAppState:n,customCommandPaletteItems:e,appProps:r});D.useEffect(()=>{const{uiAppState:k,customCommandPaletteItems:_,appProps:T}=d,A=N=>{let K="";return N.label&&(typeof N.label=="function"?K=M(N.label(t.scene.getNonDeletedElements(),k,t)):K=M(N.label)),K},C=N=>typeof N.icon=="function"?N.icon(k,t.scene.getNonDeletedElements()):N.icon;let R=[];const P=(N,K,H)=>{const z={label:A(N),icon:C(N),category:K,shortcut:zi(N.name),keywords:N.keywords,predicate:N.predicate,viewMode:N.viewMode,perform:()=>{s.executeAction(N,"commandPalette")}};return H?H(z,N):z};if(k&&t.scene&&s){const N=[s.actions.group,s.actions.ungroup,s.actions.cut,s.actions.copy,s.actions.deleteSelectedElements,s.actions.wrapSelectionInFrame,s.actions.copyStyles,s.actions.pasteStyles,s.actions.bringToFront,s.actions.bringForward,s.actions.sendBackward,s.actions.sendToBack,s.actions.alignTop,s.actions.alignBottom,s.actions.alignLeft,s.actions.alignRight,s.actions.alignVerticallyCentered,s.actions.alignHorizontallyCentered,s.actions.duplicateSelection,s.actions.flipHorizontal,s.actions.flipVertical,s.actions.zoomToFitSelection,s.actions.zoomToFitSelectionInViewport,s.actions.increaseFontSize,s.actions.decreaseFontSize,s.actions.toggleLinearEditor,s.actions.cropEditor,s.actions.togglePolygon,_G,AG,cye].map(G=>P(G,Qe.elements,(J,Ae)=>({...J,predicate:Ae.predicate?Ae.predicate:(ye,ke,wt,Ot)=>Ne(ye,ke).length>0}))),K=[s.actions.toggleHandTool,s.actions.setFrameAsActiveTool,s.actions.toggleLassoTool].map(G=>P(G,Qe.tools)),H=[s.actions.undo,s.actions.redo,s.actions.zoomIn,s.actions.zoomOut,s.actions.resetZoom,s.actions.zoomToFit,s.actions.zenMode,s.actions.viewMode,s.actions.gridMode,s.actions.objectsSnapMode,s.actions.toggleShortcuts,s.actions.selectAll,s.actions.toggleElementLock,s.actions.unlockAllElements,s.actions.stats].map(G=>P(G,Qe.editor)),z=[s.actions.saveToActiveFile,s.actions.saveFileToDisk,s.actions.copyAsPng,s.actions.copyAsSvg].map(G=>P(G,Qe.export));R=[...N,...H,{label:A(o0),icon:C(o0),shortcut:zi(o0.name),category:Qe.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{Rr.set(ry,"clearCanvas")}},{label:M("buttons.exportImage"),category:Qe.export,icon:mH,shortcut:zi("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{i({openDialog:{name:"imageExport"}})}},...z];const V=[{label:M("toolBar.library"),category:Qe.app,icon:A9,viewMode:!1,perform:()=>{k.openSidebar?i({openSidebar:null}):i({openSidebar:{name:ps.name,tab:ps.defaultTab}})}},{label:M("search.title"),category:Qe.app,icon:ed,viewMode:!0,perform:()=>{s.executeAction(iX)}},{label:M("labels.shapeSwitch"),category:Qe.elements,icon:o4,perform:()=>{s.executeAction(lye)}},{label:M("labels.changeStroke"),keywords:["color","outline"],category:Qe.elements,icon:K8,viewMode:!1,predicate:(G,J)=>{const Ae=Ne(G,J);return Ae.length>0&&QG(J,Ae)},perform:()=>{i(G=>({openMenu:G.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:M("labels.changeBackground"),keywords:["color","fill"],icon:K8,category:Qe.elements,viewMode:!1,predicate:(G,J)=>{const Ae=Ne(G,J);return Ae.length>0&&JG(J,Ae)},perform:()=>{i(G=>({openMenu:G.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:M("labels.canvasBackground"),keywords:["color"],icon:K8,category:Qe.editor,viewMode:!1,perform:()=>{i(G=>({openMenu:G.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...x_.reduce((G,J)=>{const{value:Ae,icon:ye,key:ke,numericKey:wt}=J;if(T.UIOptions.tools?.[Ae]===!1)return G;const xn=ke&&q1(typeof ke=="string"?ke:ke[0])||wt,en={label:M(`toolBar.${Ae}`),category:Qe.tools,shortcut:xn,icon:ye,keywords:["toolbar"],viewMode:!1,perform:({event:gi})=>{Ae==="image"?t.setActiveTool({type:Ae}):t.setActiveTool({type:Ae})}};return G.push(en),G},[]),...K,{label:M("toolBar.lock"),category:Qe.tools,icon:k.activeTool.locked?M9:_5,shortcut:B.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${M("labels.textToDiagram")}...`,category:Qe.tools,icon:_de,viewMode:!1,predicate:T.aiEnabled,perform:()=>{i(G=>({...G,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${M("toolBar.mermaidToExcalidraw")}...`,category:Qe.tools,icon:wH,viewMode:!1,predicate:T.aiEnabled,perform:()=>{i(G=>({...G,openDialog:{name:"ttd",tab:"mermaid"}}))}}],$=[...R,...V,..._||[]].map(G=>({...G,icon:G.icon||o4,order:G.order??sEe(G.category),haystack:`${zk(G.label.toLocaleLowerCase())} ${G.keywords?.join(" ")||""}`}));c($),a($.find(G=>G.label===o?.label)??null)}},[d,t,s,c,o?.label,a,i]);const[f,h]=D.useState(""),[m,p]=D.useState(null),[y,b]=D.useState({}),E=k=>{i({openDialog:null},k),h("")},v=(k,_)=>{n.openDialog?.name==="commandPalette"&&(_.stopPropagation(),_.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),E(()=>{k.perform({actionManager:s,event:_}),a(k),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},w=Qk(k=>k.viewMode===!1&&n.viewModeEnabled?!1:typeof k.predicate=="function"?k.predicate(t.scene.getNonDeletedElements(),n,r,t):k.predicate===void 0||k.predicate),S=Qk(k=>{const _=uu(k.target)||nX(k)||k.key===B.ESCAPE;if(_&&k.key!==B.ARROW_UP&&k.key!==B.ARROW_DOWN&&k.key!==B.ENTER)return;const T=Object.values(y).flat(),A=o&&!f&&w(o);if(k.key===B.ARROW_UP){k.preventDefault();const C=T.findIndex(N=>N.label===m?.label);if(A){if(C===0){p(o);return}if(m===o){const N=T[T.length-1];N&&p(N);return}}let R;C===-1?R=T.length-1:R=C===0?T.length-1:(C-1)%T.length;const P=T[R];P&&p(P);return}if(k.key===B.ARROW_DOWN){k.preventDefault();const C=T.findIndex(N=>N.label===m?.label);if(A){if(!m||C===T.length-1){p(o);return}if(m===o){const N=T[0];N&&p(N);return}}const R=(C+1)%T.length,P=T[R];P&&p(P);return}if(k.key===B.ENTER&&m&&setTimeout(()=>{v(m,k)}),!_){if(k.stopPropagation(),/^[a-zA-Z0-9]$/.test(k.key)){u?.current?.focus();return}k.preventDefault()}});return D.useEffect(()=>(window.addEventListener(ee.KEYDOWN,S,{capture:!0}),()=>window.removeEventListener(ee.KEYDOWN,S,{capture:!0})),[S]),D.useEffect(()=>{if(!l)return;const k=C=>{const R={};for(const P of C)R[P.category]?R[P.category].push(P):R[P.category]=[P];return R};let _=l.filter(w).sort((C,R)=>C.order-R.order);const T=!f&&o&&w(o);if(!f){b(k(T?_.filter(C=>C.label!==o?.label):_)),p(T?o:_[0]||null);return}const A=zk(f.toLocaleLowerCase().replace(/[<>_| -]/g,""));_=Z5e.filter(A,_,{extract:C=>C.haystack}).sort((C,R)=>R.score-C.score).map(C=>C.original),b(k(_)),p(_[0]??null)},[f,l,w,o]),O(jr,{onCloseRequest:()=>E(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[g(Ih,{value:f,placeholder:M("commandPalette.search.placeholder"),onChange:k=>{h(k)},selectOnRender:!0,ref:u}),!t.device.viewport.isMobile&&O("div",{className:"shortcuts-wrapper",children:[g(_2,{shortcut:"↑↓",children:M("commandPalette.shortcuts.select")}),g(_2,{shortcut:"↵",children:M("commandPalette.shortcuts.confirm")}),g(_2,{shortcut:q("Esc"),children:M("commandPalette.shortcuts.close")})]}),O("div",{className:"commands",children:[o&&!f&&O("div",{className:"command-category",children:[O("div",{className:"command-category-title",children:[M("commandPalette.recents"),g("div",{className:"icon",style:{marginLeft:"6px"},children:Tde})]}),g(eR,{command:o,isSelected:o.label===m?.label,onClick:k=>v(o,k),disabled:!w(o),onMouseMove:()=>p(o),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(y).length>0?Object.keys(y).map((k,_)=>O("div",{className:"command-category",children:[g("div",{className:"command-category-title",children:k}),y[k].map(T=>g(eR,{command:T,isSelected:T.label===m?.label,onClick:A=>v(T,A),onMouseMove:()=>p(T),showShortcut:!t.device.viewport.isMobile,appState:n},T.label))]},k)):l?O("div",{className:"no-match",children:[g("div",{className:"icon",children:ed})," ",M("commandPalette.search.noMatch")]}):null]})]})}const eR=({command:e,isSelected:t,disabled:n,onMouseMove:i,onClick:r,showShortcut:s,appState:o})=>{const a=()=>{};return O("div",{className:he("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{t&&!n&&l?.scrollIntoView?.({block:"nearest"})},onClick:n?a:r,onMouseMove:n?a:i,title:n?M("commandPalette.itemNotAvailable"):"",children:[O("div",{className:"name",children:[e.icon&&g(P5,{icon:typeof e.icon=="function"?e.icon(o):e.icon}),e.label]}),s&&e.shortcut&&g(_2,{shortcut:e.shortcut})]})},aEe=re({name:"toggleLinearEditor",category:Qe.elements,label:(e,t,n)=>n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0]?.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit",keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&r.length===1&&we(r[0])&&!ce(r[0]))},perform(e,t,n,i){const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],s=t.editingLinearElement?.elementId===r.id?null:new Z(r,be(e));return{appState:{...t,editingLinearElement:s},captureUpdate:j.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],r=M(i.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return g(Be,{type:"button",icon:Pde,title:r,"aria-label":r,onClick:()=>t(null)})}});re({name:"togglePolygon",category:Qe.elements,icon:AA,keywords:["loop"],label:(e,t,n)=>!n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds}).some(s=>!sn(s)||!s.polygon)?"labels.polygon.breakPolygon":"labels.polygon.convertToPolygon",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds});return r.length>0&&r.every(s=>sn(s)&&s.points.length>=4)},perform(e,t,n,i){const r=i.scene.getSelectedElements(t);if(r.some(l=>!sn(l)))return!1;const s=r,o=s.some(l=>!l.polygon),a=be(s);return{elements:e.map(l=>!a.has(l.id)||!sn(l)?l:Ee(l,{backgroundColor:o?l.backgroundColor:"transparent",...f9(l,o)})),appState:t,captureUpdate:j.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds});if(i.length===0||i.some(o=>!sn(o)||!o.polygon||o.points.length<3))return null;const r=i.every(o=>sn(o)&&o.polygon),s=M(r?"labels.polygon.breakPolygon":"labels.polygon.convertToPolygon");return g(B9,{icon:AA,title:s,"aria-label":s,active:r,onClick:()=>t(null),style:{marginLeft:"auto"}})}});const iX=re({name:"searchMenu",icon:ed,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,i){if(t.openDialog)return!1;if(t.openSidebar?.name===ps.name&&t.openSidebar.tab===Ru){const r=i.excalidrawContainerValue.container?.querySelector(`.${_c.SEARCH_MENU_INPUT_WRAPPER} input`);return r?.focus(),r?.select(),!1}return{appState:{...t,openSidebar:{name:ps.name,tab:Ru},openDialog:null},captureUpdate:j.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[B.CTRL_OR_CMD]&&e.key===B.F}),lEe=re({name:"cropEditor",label:"helpDialog.cropStart",icon:KA,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,i){const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:r.id},captureUpdate:j.IMMEDIATELY}},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.croppingElementId&&r.length===1&&yt(r[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=M("helpDialog.cropStart");return g(Be,{type:"button",icon:KA,title:i,"aria-label":i,onClick:()=>t(null)})}}),rX=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length===1&&pe(n[0])},cEe=re({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;if(pe(r)){const s=Ss(Lt(e),r.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:s.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:j.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:j.EVENTUALLY}},predicate:(e,t,n,i)=>rX(t,i)}),uEe=re({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;return pe(r)?{elements:bB(e,r),appState:{...t,selectedElementIds:{[r.id]:!0}},captureUpdate:j.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:j.EVENTUALLY}},predicate:(e,t,n,i)=>rX(t,i)});re({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:j.EVENTUALLY}),checked:e=>e.frameRendering.enabled});re({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:Yb,viewMode:!1,perform:(e,t,n,i)=>{const r=Xt(t,{type:"frame"});return ho(i.interactiveCanvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:Xt(t,{type:"frame"})},captureUpdate:j.EVENTUALLY}},keyTest:e=>!e[B.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===B.F});const dEe=re({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=Ne(e,t);return r.length>0&&!r.some(s=>pe(s))},perform:(e,t,n,i)=>{const r=Ne(e,t),s=i.scene.getNonDeletedElementsMap(),[o,a,l,c]=ft(r,s),u=16,d=y9({x:o-u,y:a-u,width:l-o+u*2,height:c-a+u*2});if(t.editingGroupId){const h=It(r,t.editingGroupId);for(const m of h){const p=m.groupIds.indexOf(t.editingGroupId);fi(m,s,{groupIds:m.groupIds.slice(0,p)})}}return{elements:e0([...i.scene.getElementsIncludingDeleted(),d],r,d,t),appState:{selectedElementIds:{[d.id]:!0}},captureUpdate:j.IMMEDIATELY}}});class IU extends OB{applyTo(t,n,i){const[r,s]=this.elements.applyTo(t,i.elements,{excludedProperties:new Set(["version","versionNonce"])}),[o,a]=this.appState.applyTo(n,r);return[r,o,s||a]}static calculate(t,n){return super.calculate(t,n)}static inverse(t){return super.inverse(t)}static applyLatestChanges(t,n,i,r){return super.applyLatestChanges(t,n,i,r)}}class u6{constructor(t=!0,n=!0){this.isUndoStackEmpty=t,this.isRedoStackEmpty=n}}class vu{constructor(t){this.store=t}onHistoryChangedEmitter=new Ns;undoStack=[];redoStack=[];get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t){if(t.isEmpty()||t instanceof IU)return;const n=IU.inverse(t);this.undoStack.push(n),n.elements.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new u6(this.isUndoStackEmpty,this.isRedoStackEmpty))}undo(t,n){return this.perform(t,n,()=>vu.pop(this.undoStack),i=>vu.push(this.redoStack,i))}redo(t,n){return this.perform(t,n,()=>vu.pop(this.redoStack),i=>vu.push(this.undoStack,i))}perform(t,n,i,r){try{let s=i();if(s===null)return;const o=j.IMMEDIATELY;let a=this.store.snapshot,l=t,c=n,u=!1;for(;s;){try{[l,c,u]=s.applyTo(l,c,a);const d=a.elements,f=a.maybeClone(o,l,c),h=Bf.create(a,f),m=IU.applyLatestChanges(s,d,l);m.isEmpty()||(this.store.scheduleMicroAction({action:o,change:h,delta:m}),s=m),a=f}finally{r(s)}if(u)break;s=i()}return[l,c]}finally{this.onHistoryChangedEmitter.trigger(new u6(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;const n=t.pop();return n!==void 0?n:null}static push(t,n){const i=IU.inverse(n);return t.push(i)}}const sX=(e,t)=>{const[n,i]=D.useState(t);return D.useEffect(()=>{const r=e.on(s=>{i(s)});return()=>{r()}},[e]),n},oX=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){const i=n();if(!i)return{captureUpdate:j.EVENTUALLY};const[r,s]=i,o=U9(Array.from(r.values()));return{appState:s,elements:o,captureUpdate:j.NEVER}}return{captureUpdate:j.EVENTUALLY}},fEe=e=>({name:"undo",label:"buttons.undo",icon:LA,trackEvent:{category:"history"},viewMode:!1,perform:(t,n,i,r)=>oX(r,n,()=>e.undo(be(t),n)),keyTest:t=>t[B.CTRL_OR_CMD]&&b7(t,B.Z)&&!t.shiftKey,PanelComponent:({updateData:t,data:n})=>{const{isUndoStackEmpty:i}=sX(e.onHistoryChangedEmitter,new u6(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(Be,{type:"button",icon:LA,"aria-label":M("buttons.undo"),onClick:t,size:n?.size||"medium",disabled:i,"data-testid":"button-undo"})}}),hEe=e=>({name:"redo",label:"buttons.redo",icon:OA,trackEvent:{category:"history"},viewMode:!1,perform:(t,n,i,r)=>oX(r,n,()=>e.redo(be(t),n)),keyTest:t=>t[B.CTRL_OR_CMD]&&t.shiftKey&&b7(t,B.Z)||KP&&t.ctrlKey&&!t.shiftKey&&b7(t,B.Y),PanelComponent:({updateData:t,data:n})=>{const{isRedoStackEmpty:i}=sX(e.onHistoryChangedEmitter,new u6(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(Be,{type:"button",icon:OA,"aria-label":M("buttons.redo"),onClick:t,size:n?.size||"medium",disabled:i,"data-testid":"button-redo"})}}),gEe=re({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=Ne(e,t);return r.length===1&&le(r[0])&&!r[0].autoResize},perform:(e,t,n,i)=>{const r=Ne(e,t);return{appState:t,elements:e.map(s=>{if(s.id===r[0].id&&le(s)){const o=Bn(s.originalText,ot(s),s.lineHeight);return Ee(s,{autoResize:!0,width:o.width,height:o.height,text:s.originalText})}return s}),captureUpdate:j.IMMEDIATELY}}}),tR=re({name:"viewMode",label:"labels.viewMode",icon:P9,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:j.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[B.CTRL_OR_CMD]&&e.altKey&&e.code===Ke.R}),RE=(e,t,n,i,r,s)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,i,s))&&tt(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${r.device.editor.isMobile?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}};class mEe{actions={};updater;getAppState;getElementsIncludingDeleted;app;constructor(t,n,i,r){this.updater=s=>{if(Xm(s))s.then(o=>t(o));else return t(s)},this.getAppState=n,this.getElementsIncludingDeleted=i,this.app=r}registerAction(t){this.actions[t.name]=t}registerAll(t){t.forEach(n=>this.registerAction(n))}handleKeyDown(t){const n=this.app.props.UIOptions.canvasActions,i=Object.values(this.actions).sort((l,c)=>(c.keyPriority||0)-(l.keyPriority||0)).filter(l=>(l.name in n?n[l.name]:!0)&&l.keyTest&&l.keyTest(t,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(i.length!==1)return i.length>1&&console.warn("Canceling as multiple actions match this shortcut",i),!1;const r=i[0];if(this.getAppState().viewModeEnabled&&r.viewMode!==!0)return!1;const s=this.getElementsIncludingDeleted(),o=this.getAppState(),a=null;return RE(r,"keyboard",o,s,this.app,null),t.preventDefault(),t.stopPropagation(),this.updater(i[0].perform(s,o,a,this.app)),!0}executeAction(t,n="api",i=null){const r=this.getElementsIncludingDeleted(),s=this.getAppState();RE(t,n,s,r,this.app,i),this.updater(t.perform(r,s,i,this.app))}renderAction=(t,n)=>{const i=this.app.props.UIOptions.canvasActions;if(this.actions[t]&&"PanelComponent"in this.actions[t]&&(!(t in i)||i[t])){const r=this.actions[t],s=r.PanelComponent;s.displayName="PanelComponent";const o=this.getElementsIncludingDeleted(),a=this.getAppState(),l=c=>{RE(r,"ui",a,o,this.app,c),this.updater(r.perform(this.getElementsIncludingDeleted(),this.getAppState(),c,this.app))};return g(s,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:l,appProps:this.app.props,app:this.app,data:n,renderAction:this.renderAction})}return null};isActionEnabled=t=>{const n=this.getElementsIncludingDeleted(),i=this.getAppState();return!t.predicate||t.predicate(n,i,this.app.props,this.app)}}class pEe{targets=new WeakMap;rafIds=new WeakMap;register(t,n){this.targets.set(t,{callback:n,stopped:!0})}start(t){const n=this.targets.get(t);n&&(this.rafIds.has(t)||(this.targets.set(t,{...n,stopped:!1}),this.scheduleFrame(t)))}stop(t){const n=this.targets.get(t);n&&!n.stopped&&this.targets.set(t,{...n,stopped:!0}),this.cancelFrame(t)}constructFrame(t){return n=>{const i=this.targets.get(t);if(!i)return;const r=this.onFrame(i,n);!i.stopped&&!r?this.scheduleFrame(t):this.cancelFrame(t)}}scheduleFrame(t){const n=requestAnimationFrame(this.constructFrame(t));this.rafIds.set(t,n)}cancelFrame(t){if(this.rafIds.has(t)){const n=this.rafIds.get(t);cancelAnimationFrame(n)}this.rafIds.delete(t)}onFrame(t,n){return t.callback(n)??!1}}const nR=e=>{const t=Array.from(e.values());return{x:rR(t,n=>n.x)/t.length,y:rR(t,n=>n.y)/t.length}},iR=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),rR=(e,t)=>e.reduce((n,i)=>n+t(i),0),UEe=8,sR=99999,sy=e=>UEe/e;class Di{static referenceSnapPoints=null;static visibleGaps=null;static setReferenceSnapPoints=t=>{Di.referenceSnapPoints=t};static getReferenceSnapPoints=()=>Di.referenceSnapPoints;static setVisibleGaps=t=>{Di.visibleGaps=t};static getVisibleGaps=()=>Di.visibleGaps;static destroy=()=>{Di.referenceSnapPoints=null,Di.visibleGaps=null}}const fm=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,Rc=({event:e,app:t,selectedElements:n})=>e?t.state.activeTool.type!=="lasso"&&(t.state.objectsSnapModeEnabled&&!e[B.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[B.CTRL_OR_CMD]&&!fm(t)):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,bEe=(e,t,n=.01)=>Math.abs(e-t)<=n,hm=(e,t,{omitCenter:n,boundingBoxCorners:i,dragOffset:r}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(e.length===1){const o=e[0];let[a,l,c,u,d,f]=Le(o,t);r&&(a+=r.x,c+=r.x,d+=r.x,l+=r.y,u+=r.y,f+=r.y);const h=(c-a)/2,m=(u-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!i){const p=W(I(a,l+m),I(d,f),o.angle),y=W(I(a+h,l),I(d,f),o.angle),b=W(I(c,l+m),I(d,f),o.angle),E=W(I(a+h,u),I(d,f),o.angle),v=I(d,f);s=n?[p,y,b,E]:[p,y,b,E,v]}else{const p=W(I(a,l),I(d,f),o.angle),y=W(I(c,l),I(d,f),o.angle),b=W(I(a,u),I(d,f),o.angle),E=W(I(c,u),I(d,f),o.angle),v=I(d,f);s=n?[p,y,b,E]:[p,y,b,E,v]}}else if(e.length>1){const[o,a,l,c]=m9(e,r??{x:0,y:0}),u=l-o,d=c-a,f=I(o,a),h=I(l,a),m=I(o,c),p=I(l,c),y=I(o+u/2,a+d/2);s=n?[f,h,m,p]:[f,h,m,p,y]}return s.map(o=>I(qt(o[0]),qt(o[1])))},aX=(e,t,n,i)=>{const r=t.filter(s=>pe(s)).map(s=>s.id);return gB(e,t,n,i).filter(s=>!(s.frameId&&r.includes(s.frameId)))},yEe=(e,t,n,i)=>{const r=aX(e,t,n,i),s=m5(r,i).filter(d=>!(d.length===1&&Ft(d[0]))).map(d=>ft(d).map(f=>qt(f))),o=s.sort((d,f)=>d[0]-f[0]),a=[];let l=0;e:for(let d=0;d<o.length;d++){const f=o[d];for(let h=d+1;h<o.length;h++){if(++l>sR)break e;const m=o[h],[,p,y,b]=f,[E,v,,w]=m;y<E&&Eb(ki(p,b),ki(v,w))&&a.push({startBounds:f,endBounds:m,startSide:[I(y,p),I(y,b)],endSide:[I(E,v),I(E,w)],length:E-y,overlap:vb(ki(p,b),ki(v,w))})}}const c=s.sort((d,f)=>d[1]-f[1]),u=[];l=0;e:for(let d=0;d<c.length;d++){const f=c[d];for(let h=d+1;h<c.length;h++){if(++l>sR)break e;const m=c[h],[p,,y,b]=f,[E,v,w]=m;b<v&&Eb(ki(p,y),ki(E,w))&&u.push({startBounds:f,endBounds:m,startSide:[I(p,b),I(y,b)],endSide:[I(E,v),I(w,v)],length:v-b,overlap:vb(ki(p,y),ki(E,w))})}}return{horizontalGaps:a,verticalGaps:u}},oR=(e,t,n,i,r,s,o)=>{if(!Rc({app:n,event:i,selectedElements:e}))return[];if(e.length===0)return[];const a=Di.getVisibleGaps();if(a){const{horizontalGaps:l,verticalGaps:c}=a,[u,d,f,h]=m9(e,t).map(y=>qt(y)),m=(u+f)/2,p=(d+h)/2;for(const y of l){if(!Eb(ki(d,h),y.overlap))continue;const b=y.startSide[0][0]+y.length/2,E=qt(b-m);if(y.length>f-u&&Math.abs(E)<=o.x){Math.abs(E)<o.x&&(r.length=0),o.x=Math.abs(E);const C={type:"gap",direction:"center_horizontal",gap:y,offset:E};r.push(C);continue}const[,,w]=y.endBounds,S=u-w,k=qt(y.length-S);if(Math.abs(k)<=o.x){Math.abs(k)<o.x&&(r.length=0),o.x=Math.abs(k);const C={type:"gap",direction:"side_right",gap:y,offset:k};r.push(C);continue}const[_,,,]=y.startBounds,T=_-f,A=qt(T-y.length);if(Math.abs(A)<=o.x){Math.abs(A)<o.x&&(r.length=0),o.x=Math.abs(A);const C={type:"gap",direction:"side_left",gap:y,offset:A};r.push(C);continue}}for(const y of c){if(!Eb(ki(u,f),y.overlap))continue;const b=y.startSide[0][1]+y.length/2,E=qt(b-p);if(y.length>h-d&&Math.abs(E)<=o.y){Math.abs(E)<o.y&&(s.length=0),o.y=Math.abs(E);const C={type:"gap",direction:"center_vertical",gap:y,offset:E};s.push(C);continue}const[,w,,]=y.startBounds,S=w-h,k=qt(S-y.length);if(Math.abs(k)<=o.y){Math.abs(k)<o.y&&(s.length=0),o.y=Math.abs(k);const C={type:"gap",direction:"side_top",gap:y,offset:k};s.push(C);continue}const[,,,_]=y.endBounds,T=qt(d-_),A=y.length-T;if(Math.abs(A)<=o.y){Math.abs(A)<o.y&&(s.length=0),o.y=Math.abs(A);const C={type:"gap",direction:"side_bottom",gap:y,offset:A};s.push(C);continue}}}},EEe=(e,t,n,i)=>{const r=aX(e,t,n,i);return m5(r,i).filter(s=>!(s.length===1&&Ft(s[0]))).flatMap(s=>hm(s,i))},Ch=(e,t,n,i,r,s,o)=>{if(!Rc({app:n,event:i,selectedElements:e})||e.length===0&&t.length===0)return[];const a=Di.getReferenceSnapPoints();if(a)for(const l of t)for(const c of a){const u=c[0]-l[0],d=c[1]-l[1];Math.abs(u)<=o.x&&(Math.abs(u)<o.x&&(r.length=0),r.push({type:"point",points:[l,c],offset:u}),o.x=Math.abs(u)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(s.length=0),s.push({type:"point",points:[l,c],offset:d}),o.y=Math.abs(d))}},vEe=(e,t,n,i,r)=>{const s=n.state,o=Ne(e,s);if(!Rc({app:n,event:i,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=qt(t.x),t.y=qt(t.y);const a=[],l=[],c=sy(s.zoom.value),u={x:c,y:c},d=hm(o,r,{dragOffset:t});Ch(o,d,n,i,a,l,u),oR(o,t,n,i,a,l,u);const f={x:a[0]?.offset??0,y:l[0]?.offset??0};u.x=0,u.y=0,a.length=0,l.length=0;const h={x:qt(t.x+f.x),y:qt(t.y+f.y)};Ch(o,hm(o,r,{dragOffset:h}),n,i,a,l,u),oR(o,h,n,i,a,l,u);const m=C_(a,l),p=_Ee(o,h,[...a,...l].filter(y=>y.type==="gap"));return{snapOffset:f,snapLines:[...m,...p]}},qt=e=>Math.round(e*10**6)/10**6,aR=e=>{const t=new Map;for(const n of e){const i=n.join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},C_=(e,t)=>{const n={},i={};if(e.length>0){for(const r of e)if(r.type==="point"){const s=qt(r.points[0][0]);n[s]||(n[s]=[]),n[s].push(...r.points.map(o=>I(qt(o[0]),qt(o[1]))))}}if(t.length>0){for(const r of t)if(r.type==="point"){const s=qt(r.points[0][1]);i[s]||(i[s]=[]),i[s].push(...r.points.map(o=>I(qt(o[0]),qt(o[1]))))}}return Object.entries(n).map(([r,s])=>({type:"points",points:aR(s.map(o=>I(Number(r),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(i).map(([r,s])=>({type:"points",points:aR(s.map(o=>I(o[0],Number(r))).sort((o,a)=>o[0]-a[0]))})))},wEe=e=>{const t=new Map;for(const n of e){const i=n.points.flat().map(r=>[qt(r)]).join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},_Ee=(e,t,n)=>{const[i,r,s,o]=m9(e,t),a=[];for(const l of n){const[c,u,d,f]=l.gap.startBounds,[h,m,p,y]=l.gap.endBounds,b=vb(ki(r,o),l.gap.overlap),E=vb(ki(i,s),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(b){const v=(b[0]+b[1])/2;a.push({type:"gap",direction:"horizontal",points:[I(l.gap.startSide[0][0],v),I(i,v)]},{type:"gap",direction:"horizontal",points:[I(s,v),I(l.gap.endSide[0][0],v)]})}break}case"center_vertical":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[I(v,l.gap.startSide[0][1]),I(v,r)]},{type:"gap",direction:"vertical",points:[I(v,o),I(v,l.gap.endSide[0][1])]})}break}case"side_right":{if(b){const v=(b[0]+b[1])/2;a.push({type:"gap",direction:"horizontal",points:[I(d,v),I(h,v)]},{type:"gap",direction:"horizontal",points:[I(p,v),I(i,v)]})}break}case"side_left":{if(b){const v=(b[0]+b[1])/2;a.push({type:"gap",direction:"horizontal",points:[I(s,v),I(c,v)]},{type:"gap",direction:"horizontal",points:[I(d,v),I(h,v)]})}break}case"side_top":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[I(v,o),I(v,u)]},{type:"gap",direction:"vertical",points:[I(v,f),I(v,m)]})}break}case"side_bottom":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[I(v,f),I(v,m)]},{type:"gap",direction:"vertical",points:[I(v,y),I(v,r)]})}break}}}return wEe(a.map(l=>({...l,points:l.points.map(c=>I(qt(c[0]),qt(c[1])))})))},lR=(e,t,n,i,r,s)=>{if(!Rc({event:i,selectedElements:e,app:n})||e.length===0||e.length===1&&!bEe(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,c]=ft(t);s&&(s.includes("e")?l+=r.x:s.includes("w")&&(o+=r.x),s.includes("n")?a+=r.y:s.includes("s")&&(c+=r.y));const u=[];if(s)switch(s){case"e":{u.push(I(l,a),I(l,c));break}case"w":{u.push(I(o,a),I(o,c));break}case"n":{u.push(I(o,a),I(l,a));break}case"s":{u.push(I(o,c),I(l,c));break}case"ne":{u.push(I(l,a));break}case"nw":{u.push(I(o,a));break}case"se":{u.push(I(l,c));break}case"sw":{u.push(I(o,c));break}}const d=sy(n.state.zoom.value),f={x:d,y:d},h=[],m=[];Ch(t,u,n,i,h,m,f);const p={x:h[0]?.offset??0,y:m[0]?.offset??0};f.x=0,f.y=0,h.length=0,m.length=0;const[y,b,E,v]=ft(e).map(k=>qt(k)),w=[I(y,b),I(y,v),I(E,b),I(E,v)];Ch(e,w,n,i,h,m,f);const S=C_(h,m);return{snapOffset:p,snapLines:S}},TEe=(e,t,n,i,r,s)=>{if(!Rc({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};const o=[I(i.x+r.x,i.y+r.y)],a=sy(t.state.zoom.value),l={x:a,y:a},c=[],u=[];Ch([e],o,t,n,c,u,l);const d={x:c[0]?.offset??0,y:u[0]?.offset??0};l.x=0,l.y=0,c.length=0,u.length=0;const f=hm([e],s,{boundingBoxCorners:!0,omitCenter:!0});Ch([e],f,t,n,c,u,l);const h=C_(c,u);return{snapOffset:d,snapLines:h}},SEe=(e,t,n,i,r)=>{if(!Rc({event:i,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};const s=gB(e,[],t.state,r),o=sy(t.state.zoom.value),a={x:o,y:o},l=[],c=[];for(const u of s){const d=hm([u],r);for(const f of d){const h=f[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(c.length=0),c.push({type:"pointer",points:[f,I(f[0],n.y)],direction:"vertical"}),a.x=h);const m=f[1]-n.y;Math.abs(m)<=Math.abs(a.y)&&(Math.abs(m)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[f,I(n.x,f[1])],direction:"horizontal"}),a.y=m)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...c,...l]}},IEe=e=>e===Xn.rectangle||e===Xn.ellipse||e===Xn.diamond||e===Xn.frame||e===Xn.magicframe||e===Xn.image||e===Xn.text,xU={width:100,height:0},Kl=100,xEe=(e,t,n)=>{const i=Gr({x:0,y:0,textAlign:B0.CENTER,verticalAlign:Or.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:i.id})}),Hi(i,e,n),[e,i]},cR=(e,t,n,i,r)=>{let s,o;if(Object.assign(e,{startBinding:e?.startBinding||null,endBinding:e.endBinding||null}),t){const u=t?.width??Kl,d=t?.height??Kl;let f;t.id&&(f=i.getElement(t.id),f||console.error(`No element for start binding with id ${t.id} found`));const h=t.x||e.x-u,m=t.y||e.y-d/2,p=f?f.type:t.type;if(p){if(p==="text"){let y="";f&&f.type==="text"?y=f.text:t.type==="text"&&(y=t.text),y||console.error(`No text found for start binding text element for ${e.id}`),s=Gr({x:h,y:m,type:"text",...f,...t,text:y}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{s=$o({x:h,y:m,width:u,height:d,...f,...t,type:p});break}default:Po(e,`Unhandled element start type "${t.type}"`,!0)}Vo(e,s,"start",r)}}if(n){const u=n?.height??Kl,d=n?.width??Kl;let f;n.id&&(f=i.getElement(n.id),f||console.error(`No element for end binding with id ${n.id} found`));const h=n.x||e.x+e.width,m=n.y||e.y-u/2,p=f?f.type:n.type;if(p){if(p==="text"){let y="";f&&f.type==="text"?y=f.text:n.type==="text"&&(y=n.text),y||console.error(`No text found for end binding text element for ${e.id}`),o=Gr({x:h,y:m,type:"text",...f,...n,text:y}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{o=$o({x:h,y:m,width:d,height:u,...f,...n,type:p});break}default:Po(e,`Unhandled element end type "${p}"`,!0)}Vo(e,o,"end",r)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:o};const a=e.points.length-1,l=.5,c=Ba(e.points);return e.points[a][0]>e.points[a-1][0]&&(c[0][0]=l,c[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(c[0][0]=-.5,c[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(c[0][1]=l,c[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(c[0][1]=-.5,c[a][1]+=l),Object.assign(e,Z.getNormalizeElementPointsAndCoords({...e,points:c})),{linearElement:e,startBoundElement:s,endBoundElement:o}};class CEe{excalidrawElements=new Map;add=t=>{t&&this.excalidrawElements.set(t.id,t)};getElements=()=>Gc(Array.from(this.excalidrawElements.values()));getElementsMap=()=>Fo(be(this.getElements()));getElement=t=>this.excalidrawElements.get(t)}const A4=(e,t)=>{if(!e)return[];const n=Ba(e),i=new CEe,r=new Map,s=new Map;for(const l of n){let c;const u=l.id;switch(t?.regenerateIds!==!1&&Object.assign(l,{id:tr()}),l.type){case"rectangle":case"ellipse":case"diamond":{const f=l?.label?.text&&l.width===void 0?0:l?.width||Kl,h=l?.label?.text&&l.height===void 0?0:l?.height||Kl;c=$o({...l,width:f,height:h});break}case"line":{const f=l.width||xU.width,h=l.height||xU.height;c=ac({width:f,height:h,points:[I(0,0),I(f,h)],...l});break}case"arrow":{const f=l.width||xU.width,h=l.height||xU.height;c=Vf({width:f,height:h,endArrowhead:"arrow",points:[I(0,0),I(f,h)],...l,type:"arrow"}),Object.assign(c,dh(c.points));break}case"text":{const f=l?.fontFamily||Hc,h=l?.fontSize||dl,m=l?.lineHeight||Tc(f),p=l.text??"",y=gh(p),b=Bn(y,ot({fontFamily:f,fontSize:h}),m);c=Gr({width:b.width,height:b.height,fontFamily:f,fontSize:h,...l});break}case"image":{c=XB({width:l?.width||Kl,height:l?.height||Kl,...l});break}case"frame":{c=y9({x:0,y:0,...l});break}case"magicframe":{c=B7({x:0,y:0,...l});break}case"freedraw":case"iframe":case"embeddable":{c=l;break}default:c=l,Po(l,`Unhandled element type "${l.type}"`,!0)}i.getElement(c.id)?console.error(`Duplicate id found for ${c.id}`):(i.add(c),r.set(c.id,l),u&&s.set(u,c.id))}const o=i.getElementsMap(),a=new $b(o);for(const[l,c]of r){const u=i.getElement(l);switch(c.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if(c.label?.text){let[d,f]=xEe(u,c?.label,a);if(i.add(d),i.add(f),_e(d)){const h=c.type==="arrow"?c?.start:void 0,m=c.type==="arrow"?c?.end:void 0;if(h&&h.id){const E=s.get(h.id);E&&Object.assign(h,{id:E})}if(m&&m.id){const E=s.get(m.id);E&&Object.assign(m,{id:E})}const{linearElement:p,startBoundElement:y,endBoundElement:b}=cR(d,h,m,i,a);d=p,i.add(p),i.add(y),i.add(b)}}else switch(c.type){case"arrow":{const{start:d,end:f}=c;if(d&&d.id){const y=s.get(d.id);Object.assign(d,{id:y})}if(f&&f.id){const y=s.get(f.id);Object.assign(f,{id:y})}const{linearElement:h,startBoundElement:m,endBoundElement:p}=cR(u,d,f,i,a);i.add(h),i.add(m),i.add(p);break}}break}}}for(const[l,c]of r){if(c.type!=="frame"&&c.type!=="magicframe")continue;const u=i.getElement(l);if(!u)throw new Error(`Excalidraw element with id ${l} doesn't exist`);const d=[];c.children.forEach(S=>{const k=s.get(S);if(!k)throw new Error(`Element with ${S} wasn't mapped correctly`);const _=i.getElement(k);if(!_)throw new Error(`Frame element with id ${k} doesn't exist`);Object.assign(_,{frameId:u.id}),_?.boundElements?.forEach(T=>{const A=i.getElement(T.id);if(!A)throw new Error(`Bound element with id ${T.id} doesn't exist`);Object.assign(A,{frameId:u.id}),d.push(A)}),d.push(_)});let[f,h,m,p]=ft(d);const y=10;f=f-y,h=h-y,m=m+y,p=p+y;const b=u?.x||f,E=u?.y||h,v=u?.width||m-f,w=u?.height||p-h;Object.assign(u,{x:b,y:E,width:v,height:w})}return i.getElements()},AEe="#ff6b6b",MEe="#ff0000",uR=1,dR=2,kEe=(e,t)=>{if(!t.snapLines.length)return;const n=t.theme===Te.LIGHT||t.zenModeEnabled?AEe:MEe,i=(t.zenModeEnabled?uR*1.5:uR)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(const r of t.snapLines)r.type==="pointer"?(e.lineWidth=i,e.strokeStyle=n,DEe(r,e,t)):r.type==="gap"?(e.lineWidth=i,e.strokeStyle=n,LEe(r.points[0],r.points[1],r.direction,t,e)):r.type==="points"&&(e.lineWidth=i,e.strokeStyle=n,REe(r,e,t));e.restore()},REe=(e,t,n)=>{if(!n.zenModeEnabled){const i=e.points[0],r=e.points[e.points.length-1];Zr(i,r,t)}for(const i of e.points)lX(i,n,t)},DEe=(e,t,n)=>{lX(e.points[0],n,t),n.zenModeEnabled||Zr(e.points[0],e.points[1],t)},lX=([e,t],n,i)=>{i.save();const r=(n.zenModeEnabled?dR*1.5:dR)/n.zoom.value;i.beginPath(),i.moveTo(e-r,t-r),i.lineTo(e+r,t+r),i.moveTo(e+r,t-r),i.lineTo(e-r,t+r),i.stroke(),i.restore()},Zr=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},LEe=(e,t,n,i,r)=>{const s=8/i.zoom.value,o=s/2,a=s/4;if(n==="horizontal"){const l=[(e[0]+t[0])/2,e[1]];i.zenModeEnabled||Zr(I(e[0],e[1]-s),I(e[0],e[1]+s),r),Zr(I(l[0]-a,l[1]-o),I(l[0]-a,l[1]+o),r),Zr(I(l[0]+a,l[1]-o),I(l[0]+a,l[1]+o),r),i.zenModeEnabled||(Zr(I(t[0],t[1]-s),I(t[0],t[1]+s),r),Zr(e,t,r))}else{const l=[e[0],(e[1]+t[1])/2];i.zenModeEnabled||Zr(I(e[0]-s,e[1]),I(e[0]+s,e[1]),r),Zr(I(l[0]-o,l[1]-a),I(l[0]+o,l[1]-a),r),Zr(I(l[0]-o,l[1]+a),I(l[0]+o,l[1]+a),r),i.zenModeEnabled||(Zr(I(t[0]-s,t[1]),I(t[0]+s,t[1]),r),Zr(e,t,r))}},bo=4,es=6,OEe="rgba(0,0,0,0.3)",NEe=(e,t,n,i)=>{if(!e.size)return{horizontal:null,vertical:null};const[r,s,o,a]=ft(e),l=t/i.zoom.value,c=n/i.zoom.value,u={top:parseInt(sU("sat"))||0,bottom:parseInt(sU("sab"))||0,left:parseInt(sU("sal"))||0,right:parseInt(sU("sar"))||0},d=Y0().rtl,f=-i.scrollX+u.left,h=-i.scrollY+u.top,m=f+l-u.right,p=h+c-u.bottom,y=Math.min(r,f),b=Math.min(s,h),E=Math.max(o,m),v=Math.max(a,p),w=o-r,S=a-s,k=E-y,_=v-b,T=Math.max(bo*2,u.left+u.right)+es*2,A=t*(l/k)-T,C=Math.max(bo*2,u.top+u.bottom)+es*2,R=n*(c/_)-C,P=k>w?k*i.zoom.value/(A+T):t/(A+T),N=_>S?_*i.zoom.value/(R+C):n/(R+C);return{horizontal:f===y&&m===E?null:{x:Math.max(u.left,bo)+es+(f-y)/k*t,y:n-es-Math.max(bo,u.bottom),width:A,height:es,deltaMultiplier:P},vertical:h===b&&p===v?null:{x:d?Math.max(u.left,bo):t-es-Math.max(u.right,bo),y:Math.max(u.top,bo)+es+(h-b)/_*n,width:es,height:R,deltaMultiplier:N}}},fR=(e,t,n)=>{const[i,r]=[e.horizontal,e.vertical].map(o=>o!=null&&o.x<=t&&t<=o.x+o.width&&o.y<=n&&n<=o.y+o.height);return{isOverEither:i||r,isOverHorizontal:i,isOverVertical:r}},PEe=(e,t)=>{jn(t.selectedLinearElement,"selectedLinearElement is null");const{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;jn(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),cX(n,e,t),e.restore()},FEe=(e,t,n)=>{const{elementId:i,hoverPointIndex:r}=t.selectedLinearElement;if(t.editingLinearElement?.selectedPointsIndices?.includes(r))return;const s=Z.getElement(i,n);if(!s)return;const o=Z.getPointAtIndexGlobalCoordinates(s,r,n);e.save(),e.translate(t.scrollX,t.scrollY),cX(o,e,t),e.restore()},cX=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",j5(t,e[0],e[1],Z.POINT_HANDLE_SIZE/n.zoom.value,!1)},DE=(e,t,n,i,r,s,o)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",r?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),j5(e,n[0],n[1],(o?i*(t.editingLinearElement?1.5:2):i)/t.zoom.value,!s,!o||r)},BEe=(e,t,n,i)=>{const r=Qh(t,t.width,t.height,i);switch(e.fillStyle="rgba(0,0,0,.05)",t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":M6e(e,t,n,r);break;case"diamond":R6e(e,r,t,n);break;case"ellipse":{const[s,o,a,l]=Le(t,n),c=a-s,u=l-o;e.strokeStyle="rgba(0,0,0,.05)",e.lineWidth=r-St,k6e(e,c+r+St,u+r+St,s+c/2,o+u/2,t.angle);break}}},zEe=(e,t,n,i)=>{const[r,s,o]=t,a=Qh(o,o.width,o.height,i);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(s==="both"?[0,-1]:s==="start"?[0]:[-1]).forEach(c=>{const[u,d]=Z.getPointAtIndexGlobalCoordinates(r,c,n);j5(e,u,d,a,!0)})},uX=(e,t,n)=>{const{angle:i,x1:r,y1:s,x2:o,y2:a,selectionColors:l,cx:c,cy:u,dashed:d,activeEmbeddable:f}=n,h=o-r,m=a-s,y=(n.padding??qu*2)/t.zoom.value,b=8/t.zoom.value,E=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(f?4:1)/t.zoom.value;const v=l.length;for(let w=0;w<v;++w)e.strokeStyle=l[w],d&&e.setLineDash([b,E+(b+E)*(v-1)]),e.lineDashOffset=(b+E)*w,K5(e,r-y,s-y,h+y*2,m+y*2,c,u,i);e.restore()},HEe=(e,t,n,i)=>{const r=Array.isArray(n)?zEe:BEe;e.save(),e.translate(t.scrollX,t.scrollY),r(e,n,i,t.zoom),e.restore()},VEe=(e,t,n,i)=>{const[r,s,o,a]=Le(n,i),l=o-r,c=a-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=Rt.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),K5(e,r,s,l,c,r+l/2,s+c/2,n.angle,!1,Rt.radius/t.zoom.value),e.restore()},hR=(e,t,n,i)=>{const{colors:r=["rgb(0,118,255)"],dashed:s=!1}=i||{},o=n.filter(u=>u.groupIds.length===0),a=n.filter(u=>u.groupIds.length>0),l=u=>{const[d,f,h,m]=ft(u);return{angle:0,x1:d,x2:h,y1:f,y2:m,selectionColors:r,dashed:s,cx:d+(h-d)/2,cy:f+(m-f)/2,activeEmbeddable:!1}},c=u=>{const d=It(n,u);return l(d)};Object.entries(Jm(a,t)).filter(([u,d])=>d).map(([u,d])=>u).map(u=>c(u)).concat(o.map(u=>l([u]))).forEach(u=>uX(e,t,u))},LE=(e,t,n,i)=>{if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;const r=Z.getPointsGlobalCoordinates(n,i),{POINT_HANDLE_SIZE:s}=Z,o=t.editingLinearElement?s:s/2,a=ce(n),l=sn(n);if(r.forEach((c,u)=>{if(a&&u!==0&&u!==r.length-1)return;const d=u>0&&(u!==r.length-1||!l||!n.polygon)&&_s(c,u===r.length-1?r[0]:r[u-1],2/t.zoom.value);let f=!!t.editingLinearElement?.selectedPointsIndices?.includes(u);l&&n.polygon&&!f&&u===n.points.length-1&&t.editingLinearElement?.selectedPointsIndices?.includes(0)&&(f=!0),DE(e,t,c,o,f,!1,d)}),ce(n)){const c=n.fixedSegments?.map(u=>u.index)||[];r.slice(0,-1).forEach((u,d)=>{Z.isSegmentTooShort(n,r[d+1],r[d],d,t.zoom)||DE(e,t,I((u[0]+r[d+1][0])/2,(u[1]+r[d+1][1])/2),s/2,!1,!c.includes(d+1),!1)})}else Z.getEditorMidPoints(n,i,t).filter((u,d,f)=>u!==null&&!(ce(n)&&(d===0||d===f.length-1))).forEach(u=>{(t.editingLinearElement||r.length===2)&&DE(e,t,u,s/2,!1,!0,!1)});e.restore()},gR=(e,t,n,i,r)=>{Object.keys(i).forEach(s=>{const o=i[s];if(o!==void 0){const[a,l,c,u]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),s==="rotation"?j5(e,a+c/2,l+u/2,c/2,!0):e.roundRect?(e.beginPath(),e.roundRect(a,l,c,u,2/n.zoom.value),e.fill(),e.stroke()):K5(e,a,l,c,u,a+c/2,l+u/2,r,!0),e.restore()}})},$Ee=(e,t,n,i,r)=>{const[s,o,,,a,l]=Le(i,r),c=3,u=20,d=c/n.zoom.value,f=d/2,h=a-s+d,m=l-o+d,p=Math.min(u/n.zoom.value,h),y=Math.min(u/n.zoom.value,m);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-m],[0,f],[p,f],[f,0],[f,y]],[[h-f,-m],[f,f],[-p+f,f],[0,0],[0,y]],[[-h,m],[0,-f],[p,-f],[f,0],[f,-y]],[[h-f,m],[f,-f],[-p+f,-f],[0,0],[0,-y]]].forEach(E=>{const[[v,w],[S,k],[_,T],[A,C],[R,P]]=E;e.save(),e.translate(a,l),e.rotate(i.angle),e.beginPath(),e.moveTo(v+S,w+k),e.lineTo(v+_,w+T),e.stroke(),e.beginPath(),e.moveTo(v+A,w+C),e.lineTo(v+R,w+P),e.stroke(),e.restore()}),e.restore()},GEe=(e,t,n,i)=>{t.save();const r=qu*2/n.zoom.value,s=e.width+r*2,o=e.height+r*2,a=e.x+s/2,l=e.y+o/2,c=-(s/2+r),u=-(o/2+r);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(c,u,s,o),t.restore()},dX=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:i,allElementsMap:r,scale:s,appState:o,renderConfig:a,device:l})=>{if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};const[c,u]=Y5(e,s),d=W5({canvas:e,scale:s,normalizedWidth:c,normalizedHeight:u});d.save(),d.scale(o.zoom.value,o.zoom.value);let f;if(n.forEach(p=>{o.editingLinearElement?.elementId===p.id&&p&&(f=p)}),f&&LE(d,o,f,t),o.selectionElement&&!o.isCropping)try{sle(o.selectionElement,d,o,a.selectionColor)}catch(p){console.error(p)}if(o.editingTextElement&&le(o.editingTextElement)){const p=r.get(o.editingTextElement.id);p&&!p.autoResize&&GEe(p,d,o,a.selectionColor)}if(o.isBindingEnabled&&o.suggestedBindings.filter(p=>p!=null).forEach(p=>{HEe(d,o,p,t)}),o.frameToHighlight&&VEe(d,o,o.frameToHighlight,t),o.elementsToHighlight&&hR(d,o,o.elementsToHighlight),o.activeLockedId){const p=r.get(o.activeLockedId),y=p?[p]:It(r,o.activeLockedId);hR(d,o,y,{colors:["#ced4da"],dashed:!0})}const h=i.some(p=>pe(p));if(i.length===1&&o.editingLinearElement?.elementId===i[0].id&&LE(d,o,i[0],t),o.selectedLinearElement){const p=o.selectedLinearElement,y=i.find(b=>b.id===p.elementId);p.segmentMidPointHoveredCoords?PEe(d,o):(ce(y)?p.hoverPointIndex===0||p.hoverPointIndex===y.points.length-1:p.hoverPointIndex>=0)&&FEe(d,o,t)}if(!o.multiElement&&!o.editingLinearElement){const p=ez(i,o),y=i.length===1&&we(i[0]);y&&o.selectedLinearElement?.elementId===i[0].id&&!i[0].locked&&LE(d,o,i[0],t);const b=a.selectionColor||ci.black;if(p){const E=be(i),v=[];for(const S of t.values()){const k=[],_=a.remoteSelectedElementIds.get(S.id);if(y&&ce(S)&&(S.startBinding||S.endBinding)||(E.has(S.id)&&!fB(o,S)&&k.push(b),_&&k.push(..._.map(T=>J5(T,o.collaborators.get(T))))),k.length){const[T,A,C,R,P,N]=Le(S,t,!0);v.push({angle:S.angle,x1:T,y1:A,x2:C,y2:R,selectionColors:S.locked?["#ced4da"]:k,dashed:!!_||S.locked,cx:P,cy:N,activeEmbeddable:o.activeEmbeddable?.element===S&&o.activeEmbeddable.state==="active",padding:S.id===o.croppingElementId||yt(S)?0:void 0})}}const w=S=>{const k=It(t,S),[_,T,A,C]=ft(k);v.push({angle:0,x1:_,x2:A,y1:T,y2:C,selectionColors:k.some(R=>R.locked)?["#ced4da"]:[ci.black],dashed:!0,cx:_+(A-_)/2,cy:T+(C-T)/2,activeEmbeddable:!1})};for(const S of Pu(o))w(S);o.editingGroupId&&w(o.editingGroupId),v.forEach(S=>uX(d,o,S))}if(d.save(),d.translate(o.scrollX,o.scrollY),i.length===1){d.fillStyle=ci.white;const E=JB(i[0],o.zoom,t,"mouse",n0(l));if(!o.viewModeEnabled&&p&&!le(o.editingTextElement)&&!o.croppingElementId&&gR(d,a,o,E,i[0].angle),o.croppingElementId&&!o.isCropping){const v=t.get(o.croppingElementId);v&&yt(v)&&$Ee(d,a,o,v,t)}}else if(i.length>1&&!o.isRotating&&!i.some(E=>E.locked)){const E=qu*2/o.zoom.value;d.fillStyle=ci.white;const[v,w,S,k]=ft(i,t),_=d.getLineDash();d.setLineDash([2/o.zoom.value]);const T=d.lineWidth;d.lineWidth=1/o.zoom.value,d.strokeStyle=b,K5(d,v-E,w-E,S-v+E*2,k-w+E*2,(v+S)/2,(w+k)/2,0),d.lineWidth=T,d.setLineDash(_);const A=_9([v,w,S,k,(v+S)/2,(w+k)/2],0,o.zoom,"mouse",h?{...n0(l),rotation:!0}:n0(l));i.some(C=>!C.locked)&&gR(d,a,o,A,0)}d.restore()}o.searchMatches?.matches.forEach(({id:p,focus:y,matchedLines:b})=>{const E=t.get(p);if(E){const[v,w,,,S,k]=Le(E,t,!0);d.save(),o.theme===Te.LIGHT?y?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":y?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)";const _=pe(E)?o.zoom.value:1;d.translate(o.scrollX,o.scrollY),d.translate(S,k),d.rotate(E.angle),b.forEach(T=>{(T.showOnCanvas||y)&&d.fillRect(v+T.offsetX/_-S,w+T.offsetY/_-k,T.width/_,T.height/_)}),d.restore()}}),kEe(d,o),d.restore(),k5e({context:d,renderConfig:a,appState:o,normalizedWidth:c,normalizedHeight:u});let m;return a.renderScrollbars&&(m=NEe(t,c,u,o),d.save(),d.fillStyle=OEe,d.strokeStyle="rgba(255,255,255,0.8)",[m.horizontal,m.vertical].forEach(p=>{p&&UG(d,p.x,p.y,p.width,p.height,es/2)}),d.restore()),{scrollBars:m,atLeastOneVisibleElement:n.length>0,elementsMap:t}},fX=Wh(e=>{const t=dX(e);e.callback?.(t)},{trailing:!0}),XEe=(e,t)=>{if(t){fX(e);return}const n=dX(e);return e.callback(n),n};class mR{scene;constructor(t){this.scene=t}getRenderableElements=(()=>{const t=({elementsMap:i,zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l,height:c,width:u})=>{const d=[];for(const f of i.values())Hb(f,u,c,{zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l},i)&&d.push(f);return d},n=({elements:i,editingTextElement:r,newElementId:s})=>{const o=Fo(new Map);for(const a of i)s!==a.id&&(!r||r.type!=="text"||a.id!==r.id)&&o.set(a.id,a);return o};return Fre(({zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c,editingTextElement:u,newElementId:d,sceneNonce:f})=>{const h=this.scene.getNonDeletedElements(),m=n({elements:h,editingTextElement:u,newElementId:d}),p=t({elementsMap:m,zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c});return{elementsMap:m,visibleElements:p}})})();destroy(){fX.cancel(),Z$.cancel(),this.getRenderableElements.clear()}}const jEe=5,YEe=(e,t,n)=>{const[i,r]=Le(e,n),{x:s,y:o}=Nr({sceneX:i+e.width,sceneY:r},t),a=s-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},pR=({children:e,element:t,elementsMap:n})=>{const i=up();if(i.contextMenu||i.newElement||i.resizingElement||i.isRotating||i.openMenu||i.viewModeEnabled)return null;const{x:r,y:s}=YEe(t,i,n);return g("div",{className:"excalidraw-canvas-buttons",style:{top:`${s}px`,left:`${r}px`,padding:jEe},children:e})};function WEe(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var KEe={};WEe(KEe,"LaserPointer",()=>wu);function hn([e,t,n],[i,r,s]){return[e+i,t+r,n+s]}function S1([e,t,n],[i,r,s]){return[e-i,t-r,n-s]}function Cn([e,t,n],i){return[e*i,t*i,n*i]}function jd([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function Ci([e,t,n],i){return[Math.cos(i)*e-Math.sin(i)*t,Math.sin(i)*e+Math.cos(i)*t,n]}function ZEe(e,t,n){return hn(e,Cn(S1(t,e),n))}function UR(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function bR(e){return Math.atan2(Math.sin(e),Math.cos(e))}function yR([e,t]){return Math.sqrt(e**2+t**2)}function Wf([e,t],[n,i]){return Math.sqrt((n-e)**2+(i-t)**2)}function qEe(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=Wf(e[n-1],e[n]);return t+=Wf(e[e.length-2],e[e.length-1]),t}const QEe=(e,t,n)=>Math.max(t,Math.min(n,e));function JEe(e,t,n){const i=Wf(t,n);if(i===0)return Wf(e,t);const r=QEe(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i**2,0,1),s=[t[0]+r*(n[0]-t[0]),t[1]+r*(n[1]-t[1]),e[2]];return Wf(s,e)}function d6(e,t){if(t===0||e.length<=2)return e;const n=e[0],i=e[e.length-1],[r,s]=e.reduce(([o,a],l,c)=>{const u=JEe(l,n,i);return u>o?[u,c]:[o,a]},[0,-1]);if(r>=t){const o=e[s];return[...d6([n,...e.slice(1,s),o],t).slice(0,-1),o,...d6([o,...e.slice(s,-1),i],t).slice(1)]}else return[n,i]}class wu{static{this.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1}}static{this.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50}}constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},wu.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=ZEe(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),qEe(this.tailPoints)>wu.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,i,r,s){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:s,currentIndex:i,totalLength:r})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=d6(n,this.options.simplify));const i=n.length;if(i===0)return[];if(i===1){const _=n[0],T=this.getSize(t,_[2],0,i,0);if(T<.5)return[];const A=[];for(let C=0;C<=Math.PI*2;C+=Math.PI/16)A.push(hn(_,Cn(Ci([1,0,0],C),T)));return A.push(hn(_,Cn([1,0,0],this.getSize(t,_[2],0,i,0)))),A}if(i===2){const _=n[0],T=n[1],A=this.getSize(t,_[2],0,i,0),C=this.getSize(t,T[2],0,i,0);if(A<.5||C<.5)return[];const R=[],P=UR(_,[_[0],_[1]-100,_[2]],T);for(let N=P;N<=Math.PI+P;N+=Math.PI/16)R.push(hn(_,Cn(Ci([1,0,0],N),A)));for(let N=Math.PI+P;N<=Math.PI*2+P;N+=Math.PI/16)R.push(hn(T,Cn(Ci([1,0,0],N),C)));return R.push(R[0]),R}const r=[],s=[];let o=0,a=0,l=0,c=0;for(let _=1;_<i-1;_++){const T=n[_-1],A=n[_],C=n[_+1];let R=A[2];const P=Wf(T,A);c+=P,o=a+(P-a)*.2;const N=this.getSize(t,R,_,i,c);if(N===0){l=_+1;continue}const K=jd(S1(T,A)),H=jd(S1(C,A)),z=Ci(K,Math.PI/2),V=Ci(K,-Math.PI/2),$=Ci(H,Math.PI/2),G=Ci(H,-Math.PI/2),J=hn(A,Cn(z,N)),Ae=hn(A,Cn(V,N)),ye=hn(A,Cn($,N)),ke=hn(A,Cn(G,N)),wt=hn(z,G),Ot=hn(V,$),xn=hn(A,Cn(yR(wt)===0?K:jd(wt),N)),en=hn(A,Cn(yR(Ot)===0?H:jd(Ot),N)),gi=bR(UR(A,T,C)),$i=wu.constants.cornerDetectionMaxAngle/180*Math.PI*wu.constants.cornerDetectionVariance(o);if(Math.abs(gi)<$i){const Ge=Math.abs(bR(Math.PI-gi));if(Ge===0)continue;if(gi<0){s.push(Ae,en);for(let at=0;at<=Ge;at+=Ge/4)r.push(hn(A,Ci(Cn(z,N),at)));for(let at=Ge;at>=0;at-=Ge/4)s.push(hn(A,Ci(Cn(z,N),at)));s.push(en,ye)}else{r.push(J,xn);for(let at=0;at<=Ge;at+=Ge/4)s.push(hn(A,Ci(Cn(z,-N),-at)));for(let at=Ge;at>=0;at-=Ge/4)r.push(hn(A,Ci(Cn(z,-N),-at)));r.push(xn,ke)}}else r.push(xn),s.push(en);a=o}if(l>=i-2)if(this.options.keepHead){const _=n[i-1],T=[];for(let A=0;A<=Math.PI*2;A+=Math.PI/16)T.push(hn(_,Cn(Ci([1,0,0],A),this.options.size)));return T.push(hn(_,Cn([1,0,0],this.options.size))),T}else return[];const u=n[l],d=n[l+1],f=n[i-2],h=n[i-1],m=jd(S1(d,u)),p=jd(S1(f,h)),y=Ci(m,-Math.PI/2),b=Ci(p,Math.PI/2),E=this.getSize(t,u[2],0,i,0),v=[],w=this.options.keepHead?this.options.size:this.getSize(t,f[2],i-2,i,c),S=[];if(E>1){for(let _=0;_<=Math.PI;_+=Math.PI/16)v.unshift(hn(u,Ci(Cn(y,E),-_)));v.unshift(hn(u,Cn(y,-E)))}else v.push(u);for(let _=0;_<=Math.PI*3;_+=Math.PI/16)S.push(hn(h,Ci(Cn(b,-w),-_)));const k=[...v,...r,...S.reverse(),...s.reverse()];return v.length>0&&k.push(v[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?d6(k,this.options.simplify):k}}class f6{constructor(t,n,i){this.animationFrameHandler=t,this.app=n,this.options=i,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(qe,"path"),this.options.animateTrail&&(this.trailAnimation=document.createElementNS(qe,"animate"),this.trailAnimation.setAttribute("attributeName","stroke-dashoffset"),this.trailElement.setAttribute("stroke-dasharray","7 7"),this.trailElement.setAttribute("stroke-dashoffset","10"),this.trailAnimation.setAttribute("from","0"),this.trailAnimation.setAttribute("to","-14"),this.trailAnimation.setAttribute("dur","0.3s"),this.trailElement.appendChild(this.trailAnimation))}currentTrail;pastTrails=[];container;trailElement;trailAnimation;get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(t,n){if(this.currentTrail){const i=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[i-1][0]===t&&this.currentTrail.originalPoints[i-1][1]===n}return!1}start(t){t&&(this.container=t),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&this.container?.removeChild(this.trailElement)}startPath(t,n){this.currentTrail=new wu(this.options),this.currentTrail.addPoint([t,n,performance.now()]),this.update()}addPointToPath(t,n){this.currentTrail&&(this.currentTrail.addPoint([t,n,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}getCurrentTrail(){return this.currentTrail}clearTrails(){this.pastTrails=[],this.currentTrail=void 0,this.update()}update(){this.start(),this.trailAnimation&&(this.trailAnimation.setAttribute("begin","indefinite"),this.trailAnimation.setAttribute("repeatCount","indefinite"))}onFrame(){const t=[];for(const i of this.pastTrails)t.push(this.drawTrail(i,this.app.state));if(this.currentTrail){const i=this.drawTrail(this.currentTrail,this.app.state);t.push(i)}this.pastTrails=this.pastTrails.filter(i=>i.getStrokeOutline().length!==0),t.length===0&&this.stop();const n=t.join(" ").trim();this.trailElement.setAttribute("d",n),this.trailAnimation?(this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this)),this.trailElement.setAttribute("stroke",(this.options.stroke??(()=>"black"))(this))):this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(t,n){const i=t.getStrokeOutline(t.options.size/n.zoom.value).map(([s,o])=>{const a=Nr({sceneX:s,sceneY:o},n);return[a.x,a.y]}),r=this.trailAnimation?i.slice(0,i.length/2):i;return Bre(r,!0)}}class e3e{constructor(t,n){this.animationFrameHandler=t,this.app=n,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new f6(t,n,{...this.getTrailOptions(),fill:()=>xie})}localTrail;collabTrails=new Map;container;getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:t=>{const r=Math.max(0,1-(performance.now()-t.pressure)/1e3),s=(50-Math.min(50,t.totalLength-t.currentIndex))/50;return Math.min(Wa(s),Wa(r))}}}startPath(t,n){this.localTrail.startPath(t,n)}addPointToPath(t,n){this.localTrail.addPointToPath(t,n)}endPath(){this.localTrail.endPath()}start(t){this.container=t,this.animationFrameHandler.start(this),this.localTrail.start(t)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(const[t,n]of this.app.state.collaborators.entries()){let i;this.collabTrails.has(t)?i=this.collabTrails.get(t):(i=new f6(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>n.pointer?.laserColor||J5(t,n)}),i.start(this.container),this.collabTrails.set(t,i)),n.pointer&&n.pointer.tool==="laser"&&(n.button==="down"&&!i.hasCurrentTrail&&i.startPath(n.pointer.x,n.pointer.y),n.button==="down"&&i.hasCurrentTrail&&!i.hasLastPoint(n.pointer.x,n.pointer.y)&&i.addPointToPath(n.pointer.x,n.pointer.y),n.button==="up"&&i.hasCurrentTrail&&(i.addPointToPath(n.pointer.x,n.pointer.y),i.endPath()))}for(const t of this.collabTrails.keys())this.app.state.collaborators.has(t)||(this.collabTrails.get(t).stop(),this.collabTrails.delete(t))}}}const Zt=e=>t=>{vn.unstable_batchedUpdates(e,t)},OE=e=>Wh(t=>{vn.unstable_batchedUpdates(e,t)}),A_=(()=>{let e;try{const n=D.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),t3e=(e,t,n,i,r,s)=>{const{zoom:o}=i,a=180*n/Math.PI;let l=e*(o.value-1)/2,c=t*(o.value-1)/2;return e>r&&o.value!==1&&(l=r*(o.value-1)/2),t>s&&o.value!==1&&(c=s*(o.value-1)/2),`translate(${l}px, ${c}px) scale(${o.value}) rotate(${a}deg)`},n3e=({id:e,onChange:t,onSubmit:n,getViewportCoords:i,element:r,canvas:s,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{const c=(H,z)=>{if(!z.style.fontFamily||!z.style.fontSize)return!1;const V=z.style.fontFamily.replace(/"/g,"");return $m({fontFamily:H.fontFamily})!==V||`${H.fontSize}px`!==z.style.fontSize},u=()=>{const H=a.state,z=a.scene.getElement(e);if(!z)return;const{textAlign:V,verticalAlign:$}=z,G=a.scene.getNonDeletedElementsMap();if(z&&le(z)){let J=z.x,Ae=z.y;const ye=zn(z,a.scene.getNonDeletedElementsMap());let ke=z.width,wt=z.height,Ot=z.width,xn=z.height;if(ye&&z.containerId){if(_e(ye)){const Cs=Z.getBoundTextElementPosition(ye,z,G);J=Cs.x,Ae=Cs.y}const hl=c(z,d);let Jo;if(hl?Jo=Ab(ye.id,ye.height):(Jo=hh[ye.id],Jo||(Jo=Ab(ye.id,ye.height))),Ot=Ho(ye,z),xn=qm(ye,z),!_e(ye)&&wt>xn){const Cs=Ju(wt,ye.type);a.scene.mutateElement(ye,{height:Cs});return}else if(!_e(ye)&&ye.height>Jo.height&&wt<xn){const Cs=Ju(wt,ye.type);a.scene.mutateElement(ye,{height:Cs})}else{const{y:Cs}=Zh(ye,z,G);Ae=Cs}}const[en,gi]=i(J,Ae),$i=d.selectionStart,Ge=d.selectionEnd,at=d.value.length;if($i===Ge&&Ge!==at){const hl=at-Ge;d.selectionStart=d.value.length-hl,d.selectionEnd=d.value.length-hl}ye?ke+=.5:(Ot=(H.width-8-en)/H.zoom.value,ke=Math.min(ke,Ot)),wt*=1.05;const dn=ot(z),xs=(H.height-gi)/H.zoom.value;Object.assign(d.style,{font:dn,lineHeight:z.lineHeight,width:`${ke}px`,height:`${wt}px`,left:`${en}px`,top:`${gi}px`,transform:t3e(ke,wt,Foe(z,ye),H,Ot,xs),textAlign:V,verticalAlign:$,color:z.strokeColor,opacity:z.opacity/100,filter:"var(--theme-filter)",maxHeight:`${xs}px`}),d.scrollTop=0,a.scene.mutateElement(z,{x:J,y:Ae})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let f="pre",h="normal";(Ft(r)||!r.autoResize)&&(f="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:f,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=r.originalText,u(),t&&(d.onpaste=async H=>{const z=await hG(H,!0);if(!z.text)return;const V=gh(z.text);if(!V)return;const $=zn(r,a.scene.getNonDeletedElementsMap()),G=ot({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if($){const J=Ce($,a.scene.getNonDeletedElementsMap()),Ae=$c(`${d.value}${V}`,G,Ho($,J)),ye=Ww(Ae,G);d.style.width=`${ye}px`}},d.oninput=()=>{const H=gh(d.value);if(d.value!==H){const z=d.selectionStart;d.value=H,d.selectionStart=z,d.selectionEnd=z}t(d.value)}),d.onkeydown=H=>{if(!H.shiftKey&&IM.keyTest(H))H.preventDefault(),a.actionManager.executeAction(IM),u();else if(!H.shiftKey&&xM.keyTest(H))H.preventDefault(),a.actionManager.executeAction(xM),u();else if(!H.shiftKey&&CM.keyTest(H))H.preventDefault(),a.actionManager.executeAction(CM),u();else if(wM.keyTest(H))a.actionManager.executeAction(wM);else if(_M.keyTest(H))a.actionManager.executeAction(_M);else if(H.key===B.ESCAPE)H.preventDefault(),S=!0,k();else if(a6.keyTest(H))H.preventDefault(),k(),a.actionManager.executeAction(a6);else if(H.key===B.ENTER&&H[B.CTRL_OR_CMD]){if(H.preventDefault(),H.isComposing||H.keyCode===229)return;S=!0,k()}else if(H.key===B.TAB||H[B.CTRL_OR_CMD]&&(H.code===Ke.BRACKET_LEFT||H.code===Ke.BRACKET_RIGHT)){if(H.preventDefault(),H.isComposing)return;H.shiftKey||H.code===Ke.BRACKET_LEFT?E():b(),d.dispatchEvent(new Event("input"))}};const m=4,p=" ".repeat(m),y=new RegExp(`^ {1,${m}}`),b=()=>{const{selectionStart:H,selectionEnd:z}=d,V=v();let $=d.value;V.forEach(G=>{const J=$.slice(0,G),Ae=$.slice(G);$=`${J}${p}${Ae}`}),d.value=$,d.selectionStart=H+m,d.selectionEnd=z+m*V.length},E=()=>{const{selectionStart:H,selectionEnd:z}=d,V=v(),$=[];let G=d.value;V.forEach(J=>{const Ae=G.slice(J,J+m).match(y);if(Ae){const ye=G.slice(0,J),ke=G.slice(J+Ae[0].length);G=`${ye}${ke}`,$.push(J)}}),d.value=G,$.length&&(H>$[$.length-1]?d.selectionStart=Math.max(H-m,$[$.length-1]):d.selectionStart=H,d.selectionEnd=Math.max(d.selectionStart,z-m*$.length))},v=()=>{let{selectionStart:H,selectionEnd:z,value:V}=d;const $=V.slice(0,H).match(/[^\n]*$/)[0].length;return H=H-$,V.slice(H,z).split(`
`).reduce((J,Ae,ye,ke)=>J.concat(ye?J[ye-1]+ke[ye-1].length+1:H),[]).reverse()},w=H=>{H.target instanceof HTMLCanvasElement&&(H.preventDefault(),H.stopPropagation())};let S=!1;const k=()=>{if(N)return;N=!0,_();const H=a.scene.getElement(r.id);if(!H)return;const z=zn(H,a.scene.getNonDeletedElementsMap());if(z){if(d.value.trim()){const V=zo(z);!V||V!==r.id?a.scene.mutateElement(z,{boundElements:(z.boundElements||[]).concat({type:"text",id:r.id})}):_e(z)&&wa(z)}else a.scene.mutateElement(z,{boundElements:z.boundElements?.filter(V=>!le(V))});Hi(H,z,a.scene)}n({viaKeyboard:S,nextOriginalText:d.value})},_=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,K&&K.disconnect(),window.removeEventListener("resize",u),window.removeEventListener("wheel",w,!0),window.removeEventListener("pointerdown",C),window.removeEventListener("pointerup",T),window.removeEventListener("blur",k),window.removeEventListener("beforeunload",k),R(),P(),d.remove()},T=H=>{window.removeEventListener("pointerup",T);const z=H?.target,V=z instanceof HTMLElement&&z.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=k,V||d.focus()})},A=()=>{d.onblur=null,window.addEventListener("pointerup",T),window.addEventListener("blur",k)},C=H=>{const z=H?.target;if(H.button===Il.WHEEL){z instanceof HTMLTextAreaElement&&(H.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(H)),A();return}const V=z instanceof HTMLElement&&z.classList.contains("properties-trigger");(H.target instanceof HTMLElement||H.target instanceof SVGElement)&&H.target.closest(`.${_c.SHAPE_ACTIONS_MENU}, .${_c.ZOOM_ACTIONS}`)&&!uu(H.target)||V?A():H.target instanceof HTMLCanvasElement&&requestAnimationFrame(()=>{k()})},R=a.scene.onUpdate(()=>{u(),!!document.activeElement?.closest(".properties-content")||d.focus()}),P=a.onScrollChangeEmitter.on(()=>{u()});let N=!1;l&&d.select(),T();let K=null;return s&&"ResizeObserver"in window?(K=new window.ResizeObserver(()=>{u()}),K.observe(s)):window.addEventListener("resize",u),d.onpointerdown=H=>H.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",C,{capture:!0})}),window.addEventListener("beforeunload",k),o?.querySelector(".excalidraw-textEditorContainer").appendChild(d),k},i3e=e=>{const t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(i=>`\\s*${i}(-beta)?`).join("|")})\\b`).test(e.trim())};function NE(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function r3e(e,t,n){const i=NE(t,n);if(i===0)return NE(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),NE(e,s3e(t,n,r))}function s3e(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function o3e(e,t){return M4(e,0,e.length,t)}function M4(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=r3e(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(M4(e,t,c+1,i,s),M4(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}const a3e=e=>{const{lassoPath:t,elements:n,elementsMap:i,elementsSegments:r,intersectedElements:s,enclosedElements:o,simplifyDistance:a}=e;let l=t;a&&(l=o3e(t,a));const c=n.filter(f=>!f.locked);o.clear(),s.clear();const u=t.reduce((f,h)=>[Math.min(f[0],h[0]),Math.min(f[1],h[1]),Math.max(f[2],h[0]),Math.max(f[3],h[1])],[1/0,1/0,-1/0,-1/0]);for(const f of c){const h=_i(f,i);tg(u,h)&&!s.has(f.id)&&!o.has(f.id)&&(l3e(l,f,r)?o.add(f.id):c3e(l,f,i)&&s.add(f.id))}return{selectedElementIds:[...s,...o]}},l3e=(e,t,n)=>{const i=yb(e),r=n.get(t.id);return r?r.some(s=>s.some(o=>pre(o,i))):!1},c3e=(e,t,n)=>{const i=e.slice(1).map((s,o)=>Se(e[o],s)).concat([Se(e[e.length-1],e[0])]),r=Ce(t,n);return i.some(s=>qa(t,n,s,0,!0).length>0||!!r&&qa({...r,...Zh(t,r,n)},n,s,0,!0).length>0)};class u3e extends f6{intersectedElements=new Set;enclosedElements=new Set;elementsSegments=null;canvasTranslate=null;keepPreviousSelection=!1;constructor(t,n){super(t,n,{animateTrail:!0,streamline:.4,sizeMapping:i=>{const o=Math.max(0,1-(performance.now()-i.pressure)/(1/0)),a=(5e3-Math.min(5e3,i.totalLength-i.currentIndex))/5e3;return Math.min(Wa(a),Wa(o))},fill:()=>"rgba(105,101,219,0.05)",stroke:()=>"rgba(105,101,219)"})}startPath(t,n,i=!1){this.endPath(),super.startPath(t,n),this.intersectedElements.clear(),this.enclosedElements.clear(),this.keepPreviousSelection=i,this.keepPreviousSelection||this.app.setState({selectedElementIds:{},selectedGroupIds:{},selectedLinearElement:null})}selectElementsFromIds=t=>{this.app.setState(n=>{const i=t.reduce((a,l)=>(a[l]=!0,a),{});if(this.keepPreviousSelection)for(const a of Object.keys(n.selectedElementIds))i[a]=!0;for(const[a]of Object.entries(i)){const l=this.app.scene.getNonDeletedElement(a);if(l&&le(l)){const c=zn(l,this.app.scene.getNonDeletedElementsMap());c&&(i[c.id]=!0,delete i[l.id])}}for(const[a]of Object.entries(i)){const l=this.app.scene.getNonDeletedElement(a);if(l&&pe(l)){const c=Ss(this.app.scene.getNonDeletedElementsMap(),l.id);for(const u of c)delete i[u.id]}}const r=Mi({editingGroupId:n.editingGroupId,selectedElementIds:i},this.app.scene.getNonDeletedElements(),n,this.app),s=[...Object.keys(r.selectedElementIds)],o=[...Object.keys(r.selectedGroupIds)];return{selectedElementIds:r.selectedElementIds,selectedGroupIds:r.selectedGroupIds,selectedLinearElement:s.length===1&&!o.length&&we(this.app.scene.getNonDeletedElement(s[0]))?new Z(this.app.scene.getNonDeletedElement(s[0]),this.app.scene.getNonDeletedElementsMap()):null}})};addPointToPath=(t,n,i=!1)=>{super.addPointToPath(t,n),this.keepPreviousSelection=i,this.updateSelection()};updateSelection=()=>{const t=super.getCurrentTrail()?.originalPoints?.map(i=>I(i[0],i[1])),n={scrollX:this.app.state.scrollX,scrollY:this.app.state.scrollY,zoom:this.app.state.zoom.value};if(!this.elementsSegments||!Bi(n,this.canvasTranslate??{})){this.canvasTranslate=n,this.elementsSegments=new Map;const i=be(this.app.visibleElements);for(const r of this.app.visibleElements){const s=L7(r,i);this.elementsSegments.set(r.id,s)}}if(t){const{selectedElementIds:i}=a3e({lassoPath:t,elements:this.app.visibleElements,elementsMap:this.app.scene.getNonDeletedElementsMap(),elementsSegments:this.elementsSegments,intersectedElements:this.intersectedElements,enclosedElements:this.enclosedElements,simplifyDistance:5/this.app.state.zoom.value});this.selectElementsFromIds(i)}};endPath(){super.endPath(),super.clearTrails(),this.intersectedElements.clear(),this.enclosedElements.clear(),this.elementsSegments=null}}class d3e extends f6{elementsToErase=new Set;groupsToErase=new Set;constructor(t,n){super(t,n,{streamline:.2,size:5,keepHead:!0,sizeMapping:i=>{const o=Math.max(0,1-(performance.now()-i.pressure)/200),a=(10-Math.min(10,i.totalLength-i.currentIndex))/10;return Math.min(Wa(a),Wa(o))},fill:()=>n.state.theme===Te.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"})}startPath(t,n){this.endPath(),super.startPath(t,n),this.elementsToErase.clear()}addPointToPath(t,n,i=!1){return super.addPointToPath(t,n),this.updateElementsToBeErased(i)}updateElementsToBeErased(t){const n=super.getCurrentTrail()?.originalPoints?.map(o=>I(o[0],o[1]))||[];if(n.length<2)return[];const i=Se(n[n.length-1],n[n.length-2]),r=this.app.visibleElements.filter(o=>!o.locked),s=be(r);for(const o of r)if(t&&this.elementsToErase.has(o.id)){if(ER(i,o,s)){const l=o.groupIds.at(-1);if(this.groupsToErase.has(l)){const c=It(this.app.scene.getNonDeletedElementsMap(),l);for(const u of c)this.elementsToErase.delete(u.id);this.groupsToErase.delete(l)}if(Ft(o)&&this.elementsToErase.delete(o.containerId),nr(o)){const c=zo(o);c&&this.elementsToErase.delete(c)}this.elementsToErase.delete(o.id)}}else if(!t&&!this.elementsToErase.has(o.id)&&ER(i,o,s)){const l=o.groupIds.at(-1);if(!this.groupsToErase.has(l)){const c=It(this.app.scene.getNonDeletedElementsMap(),l);for(const u of c)this.elementsToErase.add(u.id);this.groupsToErase.add(l)}if(nr(o)){const c=zo(o);c&&this.elementsToErase.add(c)}Ft(o)&&this.elementsToErase.add(o.containerId),this.elementsToErase.add(o.id)}return Array.from(this.elementsToErase)}endPath(){super.endPath(),super.clearTrails(),this.elementsToErase.clear(),this.groupsToErase.clear()}}const ER=(e,t,n)=>{const i=e[1];if(Mb(t)&&Zw(i,t,n))return!0;const r=Ce(t,n);return qa(t,n,e,0,!0).length>0||!!r&&qa({...r,...Zh(t,r,n)},n,e,0,!0).length>0},f3e=()=>O("div",{"data-testid":"brave-measure-text-error",children:[g("p",{children:g(mr,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(mr,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(mr,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>g("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),g("p",{children:g(mr,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>g("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>O("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),h3e=({children:e,left:t,top:n,onCloseRequest:i,fitInViewport:r=!1,offsetLeft:s=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{const c=D.useRef(null);D.useEffect(()=>{const d=c.current;if(!d)return;d.contains(document.activeElement)||d.focus();const f=h=>{if(h.key===B.TAB){const m=v7(d),{activeElement:p}=document,y=m.findIndex(b=>b===p);p===d?(h.shiftKey?m[m.length-1]?.focus():m[0].focus(),h.preventDefault(),h.stopImmediatePropagation()):y===0&&h.shiftKey?(m[m.length-1]?.focus(),h.preventDefault(),h.stopImmediatePropagation()):y===m.length-1&&!h.shiftKey&&(m[0]?.focus(),h.preventDefault(),h.stopImmediatePropagation())}};return d.addEventListener("keydown",f),()=>d.removeEventListener("keydown",f)},[]);const u=D.useRef(null);return D.useLayoutEffect(()=>{if(r&&c.current&&n!=null&&t!=null){const d=c.current,{width:f,height:h}=d.getBoundingClientRect();if(u.current?.top===n&&u.current?.left===t)return;u.current={top:n,left:t},f>=a?(d.style.width=`${a}px`,d.style.left="0px",d.style.overflowX="scroll"):t+f-s>a?d.style.left=`${a-f-10}px`:d.style.left=`${t}px`,h>=l?(d.style.height=`${l-20}px`,d.style.top="10px",d.style.overflowY="scroll"):n+h-o>l?d.style.top=`${l-h}px`:d.style.top=`${n}px`}},[n,t,r,a,l,s,o]),D.useEffect(()=>{if(i){const d=f=>{c.current?.contains(f.target)||vn.unstable_batchedUpdates(()=>i(f))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[i]),g("div",{className:"popover",ref:c,tabIndex:-1,children:e})},Gn="separator",g3e=se.memo(({actionManager:e,items:t,top:n,left:i,onClose:r})=>{const s=up(),o=ay(),a=t.reduce((l,c)=>(c&&(c===Gn||!c.predicate||c.predicate(o,s,e.app.props,e.app))&&l.push(c),l),[]);return g(h3e,{onCloseRequest:()=>{r()},top:n,left:i,fitInViewport:!0,offsetLeft:s.offsetLeft,offsetTop:s.offsetTop,viewportWidth:s.width,viewportHeight:s.height,children:g("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,c)=>{if(l===Gn)return!a[c-1]||a[c-1]===Gn?null:g("hr",{className:"context-menu-item-separator"},c);const u=l.name;let d="";return l.label&&(typeof l.label=="function"?d=M(l.label(o,s,e.app)):d=M(l.label)),g("li",{"data-testid":u,onClick:()=>{r(()=>{e.executeAction(l,"contextMenu")})},children:O("button",{type:"button",className:he("context-menu-item",{dangerous:u==="deleteSelectedElements",checkmark:l.checked?.(s)}),children:[g("div",{className:"context-menu-item__label",children:d}),g("kbd",{className:"context-menu-item__shortcut",children:u?zi(u):""})]})},c)})})})}),m3e=({height:e,width:t,userToFollow:n,onDisconnect:i})=>g("div",{className:"follow-mode",style:{width:t,height:e},children:O("div",{className:"follow-mode__badge",children:[O("div",{className:"follow-mode__badge__label",children:["Following"," ",g("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),g("button",{type:"button",onClick:i,className:"follow-mode__disconnect-btn",children:Sd})]})}),hX=({delay:e,theme:t})=>{const[n,i]=D.useState(!!e);return D.useEffect(()=>{if(!e)return;const r=setTimeout(()=>{i(!1)},e);return()=>clearTimeout(r)},[e]),n?null:O("div",{className:he("LoadingMessage",{"LoadingMessage--dark":t===Te.DARK}),children:[g("div",{children:g(Ja,{})}),g("div",{className:"LoadingMessage-text",children:M("labels.loadingScene")})]})},p3e="medium",vR={CHECKED:M9,UNCHECKED:_5},gX=e=>O("label",{className:he("ToolIcon ToolIcon__lock",`ToolIcon_size_${p3e}`,{"is-mobile":e.isMobile}),title:`${e.title} — Q`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),g("div",{className:"ToolIcon__icon",children:e.checked?vR.CHECKED:vR.UNCHECKED})]}),mX=({children:e,side:t,className:n})=>g("div",{className:he("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),pX=e=>g(Be,{className:he("Shape",{fillable:!1}),type:"radio",icon:vH,name:"editor-current-shape",checked:e.checked,title:`${e.title} — H`,keyBindingLabel:e.isMobile?void 0:B.H.toLocaleUpperCase(),"aria-label":`${e.title} — H`,"aria-keyshortcuts":B.H,"data-testid":"toolbar-hand",onChange:()=>e.onChange?.()}),U3e=({appState:e,isMobile:t,device:n,app:i})=>{const{activeTool:r,isResizing:s,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(e.openSidebar?.name===ps.name&&e.openSidebar.tab===Ru&&e.searchMatches?.matches.length)return M("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(Uo(e))return M("hints.eraserRevert");if(r.type==="arrow"||r.type==="line")return l?M("hints.linearElementMulti"):r.type==="arrow"?M("hints.arrowTool",{arrowShortcut:q("A")}):M("hints.linearElement");if(r.type==="freedraw")return M("hints.freeDraw");if(r.type==="text")return M("hints.text");if(r.type==="embeddable")return M("hints.embeddable");const c=i.scene.getSelectedElements(e);if(s&&a==="mouse"&&c.length===1){const u=c[0];return we(u)&&u.points.length===2?M("hints.lockAngle"):yt(u)?M("hints.resizeImage"):M("hints.resize")}if(o&&a==="mouse")return M("hints.rotate");if(c.length===1&&le(c[0]))return M("hints.text_selected");if(e.editingTextElement)return M("hints.text_editing");if(e.croppingElementId)return M("hints.leaveCropEditor");if(c.length===1&&yt(c[0]))return M("hints.enterCropEditor");if(r.type==="selection"){if(e.selectionElement&&!c.length&&!e.editingTextElement&&!e.editingLinearElement)return[M("hints.deepBoxSelect")];if(fm(i)&&e.selectedElementsAreBeingDragged)return M("hints.disableSnapping");if(!c.length&&!t)return[M("hints.canvasPanning")];if(c.length===1){if(we(c[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?M("hints.lineEditor_pointSelected"):M("hints.lineEditor_nothingSelected"):sn(c[0])?M("hints.lineEditor_line_info"):M("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&Ou(c[0]))return f5(c[0])?uce(c[0],i.scene.getNonDeletedElementsMap())?[M("hints.bindTextToElement"),M("hints.createFlowchart")]:[M("hints.bindTextToElement"),M("hints.createFlowchart")]:M("hints.bindTextToElement")}}return null},UX=({appState:e,isMobile:t,device:n,app:i})=>{const r=U3e({appState:e,isMobile:t,device:n,app:i});if(!r)return null;const s=Array.isArray(r)?r.map(o=>q(o).replace(/\. ?$/,"")).join(". "):q(r);return g("div",{className:"HintViewer",children:g("span",{children:s})})},b3e="medium",bX=e=>e.penDetected?O("label",{className:he("ToolIcon ToolIcon__penMode",`ToolIcon_size_${b3e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:cue})]}):null,gm=({heading:e,children:t,...n})=>{const{id:i}=Qo(),r=g("h2",{className:"visually-hidden",id:`${i}-${e}-title`,children:M(`headings.${e}`)});return g("section",{...n,"aria-labelledby":`${i}-${e}-title`,children:typeof t=="function"?t(r):O(de,{children:[r,t]})})},y3e=({appState:e,elements:t,actionManager:n,setAppState:i,onLockToggle:r,onHandToolToggle:s,onPenModeToggle:o,renderTopRightUI:a,renderCustomStats:l,renderSidebars:c,device:u,renderWelcomeScreen:d,UIOptions:f,app:h})=>{const{WelcomeScreenCenterTunnel:m,MainMenuTunnel:p,DefaultSidebarTriggerTunnel:y}=ar(),b=()=>O(mX,{side:"top",className:"App-top-bar",children:[d&&g(m.Out,{}),g(gm,{heading:"shapes",children:v=>g(fs.Col,{gap:4,align:"center",children:O(fs.Row,{gap:1,className:"App-toolbar-container",children:[O(js,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[v,g(fs.Row,{gap:1,children:g(tX,{appState:e,activeTool:e.activeTool,UIOptions:f,app:h})})]}),a&&a(!0,e),O("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&e.openDialog?.name!=="elementLinkSelector"&&g(y.Out,{}),g(bX,{checked:e.penMode,onChange:()=>o(null),title:M("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),g(gX,{checked:e.activeTool.locked,onChange:r,title:M("toolBar.lock"),isMobile:!0}),g(pX,{checked:_h(e),onChange:()=>s(),title:M("toolBar.hand"),isMobile:!0})]})]})})}),g(UX,{appState:e,isMobile:!0,device:u,app:h})]}),E=()=>e.viewModeEnabled||e.openDialog?.name==="elementLinkSelector"?g("div",{className:"App-toolbar-content",children:g(p.Out,{})}):O("div",{className:"App-toolbar-content",children:[g(p.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),O("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]});return O(de,{children:[c(),!e.viewModeEnabled&&e.openDialog?.name!=="elementLinkSelector"&&b(),g("div",{className:"App-bottom-bar",style:{marginBottom:es+bo*2,marginLeft:es+bo*2,marginRight:es+bo*2},children:O(js,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&e.openDialog?.name!=="elementLinkSelector"&&T9(e,t)?g(gm,{className:"App-mobile-menu",heading:"selectedShapeActions",children:g(eX,{appState:e,elementsMap:h.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:h})}):null,O("footer",{className:"App-toolbar",children:[E(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(v=>({...W0(t,v)}))},children:M("buttons.scrollBackToContent")})]})]})})]})},wR=e=>{const t=D.useRef(null),[n,i]=D.useState(null);return D.useLayoutEffect(()=>{if(!e.spreadsheet)return;const r=l5e(e.chartType,e.spreadsheet,0,0);i(r);let s;const o=t.current;return(async()=>(s=await p_(r,{exportBackground:!1,viewBackgroundColor:ci.white},null,{skipInliningFonts:!0}),s.querySelector(".style-fonts")?.remove(),o.replaceChildren(),o.appendChild(s),e.selected&&o.parentNode.focus()))(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),g("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:g("div",{ref:t})})},E3e=({setAppState:e,appState:t,onClose:n})=>{const{onInsertElements:i}=ro(),r=se.useCallback(()=>{n&&n()},[n]),s=(o,a)=>{i(a),tt("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return g(jr,{size:"small",onCloseRequest:r,title:M("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:O("div",{className:"container",children:[g(wR,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:s}),g(wR,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:s})]})})},v3e=4,w3e=8,_3e=({shouldWrap:e,children:t,username:n})=>e?g(il,{label:n||"Unknown user",children:t}):g(de,{children:t}),PE=({actionManager:e,collaborator:t,socketId:n,withName:i=!1,shouldWrapWithTooltip:r=!1,isBeingFollowed:s})=>{const o={socketId:n,collaborator:t,withName:i,isBeingFollowed:s},a=e.renderAction("goToCollaborator",o);return g(_3e,{username:t.username,shouldWrap:r,children:a},n)},T3e=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],yX=se.memo(({className:e,mobile:t,collaborators:n,userToFollow:i})=>{const r=wr(),s=new Map;n.forEach((p,y)=>{const b=p.id||y;s.set(b,{...p,socketId:y})});const o=Array.from(s.values()).filter(p=>p.username?.trim()),[a,l]=se.useState(""),c=o.filter(p=>p.username?.toLowerCase().includes(a)),u=se.useRef(null);D.useLayoutEffect(()=>{if(u.current){const p=b=>{const E=Math.max(1,Math.min(8,Math.floor(b/38)));f(E)};if(p(u.current.clientWidth),!g7)return;const y=new ResizeObserver(b=>{for(const E of b){const{width:v}=E.contentRect;p(v)}});return y.observe(u.current),()=>{y.disconnect()}}},[]);const[d,f]=se.useState(v3e),m=o.slice(0,d-1).map(p=>PE({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}));return t?g("div",{className:he("UserList UserList_mobile",e),children:o.map(p=>PE({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}))}):g("div",{className:"UserList__wrapper",ref:u,children:O("div",{className:he("UserList",e),style:{"--max-avatars":d},children:[m,o.length>d-1&&O(R5,{children:[O(D5,{className:"UserList__more",children:["+",o.length-d+1]}),g(J9,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:O(js,{padding:2,children:[o.length>=w3e&&g(NV,{placeholder:M("quickSearch.placeholder"),onChange:l}),g(PV,{className:"dropdown-menu UserList__collaborators",placeholder:M("userList.empty"),children:c.length>0?[g("div",{className:"hint",children:M("userList.hint.text")}),c.map(p=>PE({actionManager:r,collaborator:p,socketId:p.socketId,withName:!0,isBeingFollowed:p.socketId===i}))]:[]}),g(MV,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;const n=t.collaborators.keys();for(const[i,r]of e.collaborators){const s=t.collaborators.get(i);if(!s||i!==n.next().value||!Bi(r,s,T3e))return!1}return!0}),S3e=e=>g("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${M("helpDialog.title")} — ?`,"aria-label":M("helpDialog.title"),children:R9}),EX=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:i})=>{const{FooterCenterTunnel:r,WelcomeScreenHelpHintTunnel:s}=ar(),o=ei(),a=!e.viewModeEnabled&&e.multiElement&&o.isTouchScreen;return O("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[g("div",{className:he("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:g(fs.Col,{gap:2,children:O(gm,{heading:"canvasActions",children:[g(q8e,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&g(Q8e,{renderAction:t.renderAction,className:he("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&g(eEe,{renderAction:t.renderAction,className:he("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),g(r.Out,{}),g("div",{className:he("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:O("div",{style:{position:"relative"},children:[i&&g(s.Out,{}),g(S3e,{onClick:()=>t.executeAction(__)})]})}),g(J8e,{actionManager:t,showExitZenModeBtn:n})]})};EX.displayName="Footer";const vX=se.createContext({}),wX=({children:e,className:t})=>{const n=ei(),i=D.useContext(vX),r=!!(n.editor.canFitSidebar&&i.shouldRenderDockButton);return O("div",{className:he("sidebar__header",t),"data-testid":"sidebar-header",children:[e,O("div",{className:"sidebar__header__buttons",children:[r&&g(il,{label:M("labels.sidebarLock"),children:g(cd,{onSelect:()=>i.onDock?.(!i.docked),selected:!!i.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":M("labels.sidebarLock"),children:nue})}),g(cd,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:i.onCloseRequest,"aria-label":M("buttons.close"),children:Sd})]})]})};wX.displayName="SidebarHeader";function I3e(e){const t=e+"CollectionProvider",[n,i]=ip(t),[r,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:m,children:p}=h,y=se.useRef(null),b=se.useRef(new Map).current;return g(r,{scope:m,itemMap:b,collectionRef:y,children:p})};o.displayName=t;const a=e+"CollectionSlot",l=se.forwardRef((h,m)=>{const{scope:p,children:y}=h,b=s(a,p),E=Js(m,b.collectionRef);return g(K0,{ref:E,children:y})});l.displayName=a;const c=e+"CollectionItemSlot",u="data-radix-collection-item",d=se.forwardRef((h,m)=>{const{scope:p,children:y,...b}=h,E=se.useRef(null),v=Js(m,E),w=s(c,p);return se.useEffect(()=>(w.itemMap.set(E,{ref:E,...b}),()=>void w.itemMap.delete(E))),g(K0,{[u]:"",ref:v,children:y})});d.displayName=c;function f(h){const m=s(e+"CollectionConsumer",h);return se.useCallback(()=>{const y=m.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((w,S)=>b.indexOf(w.ref.current)-b.indexOf(S.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,i]}var x3e=D.createContext(void 0);function _X(e){const t=D.useContext(x3e);return e||t||"ltr"}var FE="rovingFocusGroup.onEntryFocus",C3e={bubbles:!1,cancelable:!0},oy="RovingFocusGroup",[k4,TX,A3e]=I3e(oy),[M3e,SX]=ip(oy,[A3e]),[k3e,R3e]=M3e(oy),IX=D.forwardRef((e,t)=>g(k4.Provider,{scope:e.__scopeRovingFocusGroup,children:g(k4.Slot,{scope:e.__scopeRovingFocusGroup,children:g(D3e,{...e,ref:t})})}));IX.displayName=oy;var D3e=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,f=D.useRef(null),h=Js(t,f),m=_X(s),[p=null,y]=Z9({prop:o,defaultProp:a,onChange:l}),[b,E]=D.useState(!1),v=el(c),w=TX(n),S=D.useRef(!1),[k,_]=D.useState(0);return D.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(FE,v),()=>T.removeEventListener(FE,v)},[v]),g(k3e,{scope:n,orientation:i,dir:m,loop:r,currentTabStopId:p,onItemFocus:D.useCallback(T=>y(T),[y]),onItemShiftTab:D.useCallback(()=>E(!0),[]),onFocusableItemAdd:D.useCallback(()=>_(T=>T+1),[]),onFocusableItemRemove:D.useCallback(()=>_(T=>T-1),[]),children:g(sr.div,{tabIndex:b||k===0?-1:0,"data-orientation":i,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:wi(e.onMouseDown,()=>{S.current=!0}),onFocus:wi(e.onFocus,T=>{const A=!S.current;if(T.target===T.currentTarget&&A&&!b){const C=new CustomEvent(FE,C3e);if(T.currentTarget.dispatchEvent(C),!C.defaultPrevented){const R=w().filter(z=>z.focusable),P=R.find(z=>z.active),N=R.find(z=>z.id===p),H=[P,N,...R].filter(Boolean).map(z=>z.ref.current);AX(H,u)}}S.current=!1}),onBlur:wi(e.onBlur,()=>E(!1))})})}),xX="RovingFocusGroupItem",CX=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=e,a=z9(),l=s||a,c=R3e(xX,n),u=c.currentTabStopId===l,d=TX(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return D.useEffect(()=>{if(i)return f(),()=>h()},[i,f,h]),g(k4.ItemSlot,{scope:n,id:l,focusable:i,active:r,children:g(sr.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:wi(e.onMouseDown,m=>{i?c.onItemFocus(l):m.preventDefault()}),onFocus:wi(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:wi(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const p=N3e(m,c.orientation,c.dir);if(p!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let b=d().filter(E=>E.focusable).map(E=>E.ref.current);if(p==="last")b.reverse();else if(p==="prev"||p==="next"){p==="prev"&&b.reverse();const E=b.indexOf(m.currentTarget);b=c.loop?P3e(b,E+1):b.slice(E+1)}setTimeout(()=>AX(b))}})})})});CX.displayName=xX;var L3e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function O3e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function N3e(e,t,n){const i=O3e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return L3e[i]}function AX(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function P3e(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var F3e=IX,B3e=CX,M_="Tabs",[z3e,Dxe]=ip(M_,[SX]),MX=SX(),[H3e,k_]=z3e(M_),kX=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=_X(a),[d,f]=Z9({prop:i,onChange:r,defaultProp:s});return g(H3e,{scope:n,baseId:z9(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:g(sr.div,{dir:u,"data-orientation":o,...c,ref:t})})});kX.displayName=M_;var RX="TabsList",DX=D.forwardRef((e,t)=>{const{__scopeTabs:n,loop:i=!0,...r}=e,s=k_(RX,n),o=MX(n);return g(F3e,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:g(sr.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:t})})});DX.displayName=RX;var LX="TabsTrigger",OX=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=e,o=k_(LX,n),a=MX(n),l=FX(o.baseId,i),c=BX(o.baseId,i),u=i===o.value;return g(B3e,{asChild:!0,...a,focusable:!r,active:u,children:g(sr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:t,onMouseDown:wi(e.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:wi(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:wi(e.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});OX.displayName=LX;var NX="TabsContent",PX=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=e,a=k_(NX,n),l=FX(a.baseId,i),c=BX(a.baseId,i),u=i===a.value,d=D.useRef(u);return D.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g(M5,{present:r||u,children:({present:f})=>g(sr.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});PX.displayName=NX;function FX(e,t){return`${e}-trigger-${t}`}function BX(e,t){return`${e}-content-${t}`}var zX=kX,HX=DX,VX=OX,$X=PX;const GX=({children:e,tab:t,onSelect:n,...i})=>g(VX,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...i,children:e})});GX.displayName="SidebarTabTrigger";const XX=({children:e,...t})=>g(HX,{className:"sidebar-triggers",...t,children:e});XX.displayName="SidebarTabTriggers";const jX=({name:e,tab:t,icon:n,title:i,children:r,onToggle:s,className:o,style:a})=>{const l=bn(),c=hi();return O("label",{title:i,className:"sidebar-trigger__label-element",children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:u=>{document.querySelector(".layer-ui__wrapper")?.classList.remove("animate");const d=u.target.checked;l({openSidebar:d?{name:e,tab:t}:null}),s?.(d)},checked:c.openSidebar?.name===e,"aria-label":i,"aria-keyshortcuts":"0"}),O("div",{className:he("sidebar-trigger",o),style:a,children:[n&&g("div",{children:n}),r&&g("div",{className:"sidebar-trigger__label",children:r})]})]})};jX.displayName="SidebarTrigger";const YX=({children:e,...t})=>{const n=hi(),i=bn();if(!n.openSidebar)return null;const{name:r}=n.openSidebar;return g(zX,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:s=>i(o=>({...o,openSidebar:{...o.openSidebar,name:r,tab:s}})),...t,children:e})};YX.displayName="SidebarTabs";const WX=({tab:e,children:t,...n})=>g($X,{...n,value:e,"data-testid":e,children:t});WX.displayName="SidebarTab";const R_=$t(!1),KX=D.forwardRef(({name:e,children:t,onDock:n,docked:i,className:r,...s},o)=>{const a=bn(),l=v5(R_);D.useLayoutEffect(()=>(l(!!i),()=>{l(!1)}),[l,i]);const c=D.useRef({});c.current.onCloseRequest=()=>{a({openSidebar:null})},c.current.onDock=h=>n?.(h),c.current=e2(c.current,{docked:i,shouldRenderDockButton:!!n&&i!=null});const u=D.useRef(null);D.useImperativeHandle(o,()=>u.current);const d=ei(),f=D.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return e_(u,D.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!i||!d.editor.canFitSidebar)&&f()},[f,i,d.editor.canFitSidebar])),D.useEffect(()=>{const h=m=>{m.key===B.ESCAPE&&(!i||!d.editor.canFitSidebar)&&f()};return document.addEventListener(ee.KEYDOWN,h),()=>{document.removeEventListener(ee.KEYDOWN,h)}},[f,i,d.editor.canFitSidebar]),g(js,{...s,className:he("sidebar",{"sidebar--docked":i},r),ref:u,children:g(vX.Provider,{value:c.current,children:t})})});KX.displayName="SidebarInner";const po=Object.assign(D.forwardRef((e,t)=>{const n=hi(),{onStateChange:i}=e,r=D.useRef(n.openSidebar);D.useEffect(()=>{(!n.openSidebar&&r?.current?.name===e.name||n.openSidebar?.name===e.name&&r?.current?.name!==e.name||r.current?.name===e.name)&&n.openSidebar!==r.current&&i?.(n.openSidebar?.name!==e.name?null:n.openSidebar),r.current=n.openSidebar},[n.openSidebar,i,e.name]);const[s,o]=D.useState(!1);return D.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),s&&n.openSidebar?.name===e.name?D.createElement(KX,{...e,ref:t,key:e.name}):null}),{Header:wX,TabTriggers:XX,TabTrigger:GX,Tabs:YX,Tab:WX,Trigger:jX});po.displayName="Sidebar";const lp=(e,t)=>{const n=$t(0),i=r=>{const{tunnelsJotai:{useAtom:s}}=ar(),[,o]=s(n),a=D.useRef({preferHost:!1,counter:0});return D.useLayoutEffect(()=>{const l=a.current;return o(c=>{const u=c+1;return l.counter=u,u}),()=>{o(c=>{const u=c-1;return l.counter=u,u||(l.preferHost=!1),u})}},[o]),r.__fallback||(a.current.preferHost=!0),!a.current.counter&&r.__fallback&&a.current.preferHost||a.current.counter>1&&r.__fallback?null:g(t,{...r})};return i.displayName=e,i},ZX=$t({active:!1});async function R4({title:e,description:t,actionLabel:n,color:i}){return new Promise(r=>{Rr.set(ZX,{active:!0,onConfirm:()=>r(!0),onClose:()=>r(!1),onReject:()=>r(!1),title:e,description:t,actionLabel:n,color:i})})}const qX=function({onChange:e,value:t,choices:n,name:i}){return g("div",{className:"RadioGroup",children:n.map(r=>O("div",{className:he("RadioGroup__choice",{active:r.value===t}),title:r.ariaLabel,children:[g("input",{name:i,type:"radio",checked:r.value===t,onChange:()=>e(r.value),"aria-label":r.ariaLabel}),r.label]},String(r.value)))})},QX=({value:e,shortcut:t,onChange:n,choices:i,children:r,name:s})=>{const o=ei();return O(de,{children:[O("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[g("label",{className:"dropdown-menu-item__text",htmlFor:s,children:r}),g(qX,{name:s,value:e,onChange:n,choices:i})]}),t&&!o.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};QX.displayName="DropdownMenuItemContentRadio";const JX=()=>{const{t:e}=un(),t=wr(),n=ay();return t.isActionEnabled(E4)?g(or,{icon:L9,onSelect:async()=>{(!n.length||await R4({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:g(mr,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:r=>g("strong",{children:r}),br:()=>g("br",{})})}))&&t.executeAction(E4)},"data-testid":"load-button",shortcut:zi("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};JX.displayName="LoadScene";const ej=()=>{const{t:e}=un(),t=wr();return t.isActionEnabled(a6)?g(or,{shortcut:zi("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(a6),icon:mue,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};ej.displayName="SaveToActiveFile";const tj=()=>{const e=bn(),{t}=un();return g(or,{icon:mH,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:zi("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};tj.displayName="SaveAsImage";const nj=()=>{const e=bn();return g(or,{icon:yue,"data-testid":"entrust-directory-button",onSelect:()=>{T6e()||e({toast:{message:"Your browser does not support the file system api"}})},children:"Entrust Directory"})};nj.displayName="EntrustDirectory";const ij=e=>{const t=bn(),{t:n}=un();return g(or,{icon:o4,"data-testid":"command-palette-button",onSelect:()=>{tt("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:zi("commandPalette"),"aria-label":n("commandPalette.title"),className:e?.className,children:n("commandPalette.title")})};ij.displayName="CommandPalette";const rj=e=>{const{t}=un(),n=wr();return g(or,{icon:ed,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(iX)},shortcut:zi("searchMenu"),"aria-label":t("search.title"),className:e?.className,children:t("search.title")})};rj.displayName="SearchMenu";const sj=()=>{const{t:e}=un(),t=wr();return g(or,{"data-testid":"help-menu-item",icon:R9,onSelect:()=>t.executeAction(__),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};sj.displayName="Help";const oj=()=>{const{t:e}=un(),t=v5(ry);return wr().isActionEnabled(o0)?g(or,{icon:Cc,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};oj.displayName="ClearCanvas";const aj=e=>{const{t}=un(),n=hi(),i=wr(),r=zi("toggleTheme");return i.isActionEnabled(Jb)?e?.allowSystemTheme?g(QX,{name:"theme",value:e.theme,onChange:s=>e.onSelect(s),choices:[{value:Te.LIGHT,label:n4,ariaLabel:`${t("buttons.lightMode")} - ${r}`},{value:Te.DARK,label:t4,ariaLabel:`${t("buttons.darkMode")} - ${r}`},{value:"system",label:Ode,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):g(or,{onSelect:s=>{if(s.preventDefault(),e?.onSelect)e.onSelect(n.theme===Te.DARK?Te.LIGHT:Te.DARK);else return i.executeAction(Jb)},icon:n.theme===Te.DARK?n4:t4,"data-testid":"toggle-dark-mode",shortcut:r,"aria-label":n.theme===Te.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===Te.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};aj.displayName="ToggleTheme";const lj=()=>{const{t:e}=un(),t=hi(),n=wr(),i=cp();return t.viewModeEnabled||!i.UIOptions.canvasActions.changeViewBackgroundColor?null:O("div",{style:{marginTop:"0.5rem"},children:[g("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),g("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};lj.displayName="ChangeCanvasBackground";const cj=()=>{const{t:e}=un(),t=bn();return g(or,{icon:S5,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};cj.displayName="Export";const uj=()=>{const{t:e}=un();return O(de,{children:[g(h0,{icon:D9,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),g(h0,{icon:gH,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),g(h0,{icon:hH,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};uj.displayName="Socials";const dj=({onSelect:e,isCollaborating:t})=>{const{t:n}=un();return g(or,{"data-testid":"collab-button",icon:N9,className:he({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};dj.displayName="LiveCollaborationTrigger";const V3e=Object.freeze(Object.defineProperty({__proto__:null,ChangeCanvasBackground:lj,ClearCanvas:oj,CommandPalette:ij,EntrustDirectory:nj,Export:cj,Help:sj,LiveCollaborationTrigger:dj,LoadScene:JX,SaveAsImage:tj,SaveToActiveFile:ej,SearchMenu:rj,Socials:uj,ToggleTheme:aj},Symbol.toStringTag,{value:"Module"})),ct=Object.assign(lp("MainMenu",({children:e,onSelect:t})=>{const{MainMenuTunnel:n}=ar(),i=ei(),r=hi(),s=bn(),o=i.editor.isMobile?void 0:()=>s({openMenu:null});return g(n.In,{children:O(We,{open:r.openMenu==="canvas",children:[g(We.Trigger,{onToggle:()=>{s({openMenu:r.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:fH}),O(We.Content,{onClickOutside:o,onSelect:u5(t,()=>{s({openMenu:null})}),children:[e,i.editor.isMobile&&r.collaborators.size>0&&O("fieldset",{className:"UserList-Wrapper",children:[g("legend",{children:M("labels.collaborators")}),g(yX,{mobile:!0,collaborators:r.collaborators,userToFollow:r.userToFollow?.socketId||null})]})]})]})})}),{Trigger:We.Trigger,Item:We.Item,ItemLink:We.ItemLink,ItemCustom:We.ItemCustom,Group:We.Group,Separator:We.Separator,DefaultItems:V3e}),Ks=D.forwardRef(({children:e,icon:t,onClick:n,label:i,variant:r="filled",color:s="primary",size:o="medium",fullWidth:a,className:l,status:c},u)=>{const[d,f]=D.useState(!1),h=async p=>{const y=n?.(p);if(Xm(y)){const b=window.setTimeout(()=>{f(!0)},50);try{await y}catch(E){if(E instanceof Eh)console.warn(E);else throw E}finally{clearTimeout(b),f(!1)}}},m=d?"loading":c;return s=m==="success"?"success":s,g("button",{className:he("ExcButton",`ExcButton--color-${s}`,`ExcButton--variant-${r}`,`ExcButton--size-${o}`,`ExcButton--status-${m}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":i,ref:u,disabled:m==="loading"||m==="success",children:O("div",{className:"ExcButton__contents",children:[m==="loading"?g(Ja,{className:"ExcButton__statusIcon"}):m==="success"&&g("div",{className:"ExcButton__statusIcon",children:pde}),t&&g("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),r!=="icon"&&(e??i)]})})}),D_=({title:e,children:t,actionLabel:n,onClick:i})=>O("div",{className:"OverwriteConfirm__Actions__Action",children:[g("h4",{children:e}),g("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),g(Ks,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:i})]}),$3e=()=>{const{t:e}=un(),t=wr(),n=bn();return g(D_,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(gG,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},G3e=()=>{const{t:e}=un(),t=wr();return g(D_,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(mG,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},_R=Object.assign(({children:e})=>g("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:$3e,SaveToDisk:G3e}),_u=Object.assign(lp("OverwriteConfirmDialog",({children:e})=>{const{OverwriteConfirmDialogTunnel:t}=ar(),[n,i]=cn(ZX);if(!n.active)return null;const r=()=>{n.onClose(),i(o=>({...o,active:!1}))},s=()=>{n.onConfirm(),i(o=>({...o,active:!1}))};return g(t.In,{children:g(jr,{onCloseRequest:r,title:!1,size:916,children:O("div",{className:"OverwriteConfirm",children:[g("h3",{children:n.title}),O("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[g("div",{className:"OverwriteConfirm__Description__icon",children:Ude}),g("div",{children:n.description}),g("div",{className:"OverwriteConfirm__Description__spacer"}),g(Ks,{color:n.color,size:"large",label:n.actionLabel,onClick:s})]}),g(_R,{children:e})]})})})}),{Actions:_R,Action:D_});var X3e="Expected a function",TR=NaN,j3e="[object Symbol]",Y3e=/^\s+|\s+$/g,W3e=/^[-+]0x[0-9a-f]+$/i,K3e=/^0b[01]+$/i,Z3e=/^0o[0-7]+$/i,q3e=parseInt,Q3e=typeof _a=="object"&&_a&&_a.Object===Object&&_a,J3e=typeof self=="object"&&self&&self.Object===Object&&self,e7e=Q3e||J3e||Function("return this")(),t7e=Object.prototype,n7e=t7e.toString,i7e=Math.max,r7e=Math.min,BE=function(){return e7e.Date.now()};function s7e(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(X3e);t=SR(t)||0,D4(n)&&(u=!!n.leading,d="maxWait"in n,s=d?i7e(SR(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(k){var _=i,T=r;return i=r=void 0,c=k,o=e.apply(T,_),o}function m(k){return c=k,a=setTimeout(b,t),u?h(k):o}function p(k){var _=k-l,T=k-c,A=t-_;return d?r7e(A,s-T):A}function y(k){var _=k-l,T=k-c;return l===void 0||_>=t||_<0||d&&T>=s}function b(){var k=BE();if(y(k))return E(k);a=setTimeout(b,p(k))}function E(k){return a=void 0,f&&i?h(k):(i=r=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function w(){return a===void 0?o:E(BE())}function S(){var k=BE(),_=y(k);if(i=arguments,r=this,l=k,_){if(a===void 0)return m(l);if(d)return a=setTimeout(b,t),h(l)}return a===void 0&&(a=setTimeout(b,t)),o}return S.cancel=v,S.flush=w,S}function D4(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function o7e(e){return!!e&&typeof e=="object"}function a7e(e){return typeof e=="symbol"||o7e(e)&&n7e.call(e)==j3e}function SR(e){if(typeof e=="number")return e;if(a7e(e))return TR;if(D4(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=D4(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Y3e,"");var n=K3e.test(e);return n||Z3e.test(e)?q3e(e.slice(2),n?2:8):W3e.test(e)?TR:+e}var l7e=s7e;const c7e=ll(l7e),u7e=$t(""),fj=$t(null),d7e=350,f7e=()=>{const e=ro(),t=bn(),n=D.useRef(null),[i,r]=cn(u7e),s=i.trim(),[o,a]=D.useState(!1),[l,c]=D.useState({nonce:null,items:[]}),u=D.useRef(null),d=D.useRef(void 0),[f,h]=cn(fj),m=e.scene.getNonDeletedElementsMap();D.useEffect(()=>{o||(s!==u.current||e.scene.getSceneNonce()!==d.current)&&(u.current=null,CR(s,e,(v,w)=>{c({nonce:Ts(),items:v}),u.current=s,d.current=e.scene.getSceneNonce(),t({searchMatches:v.length?{focusedId:null,matches:v.map(S=>({id:S.element.id,focus:!1,matchedLines:S.matchedLines}))}:null})}))},[o,s,m,e,t,h,d]);const p=()=>{l.items.length>0&&h(v=>v===null?0:(v+1)%l.items.length)},y=()=>{l.items.length>0&&h(v=>v===null?0:v-1<0?l.items.length-1:v-1)};D.useEffect(()=>{t(v=>v.searchMatches?{searchMatches:{focusedId:f!==null&&v.searchMatches?.matches[f]?.id||null,matches:v.searchMatches.matches.map((S,k)=>k===f?{...S,focus:!0}:{...S,focus:!1})}}:null)},[f,t]),D.useEffect(()=>{if(l.items.length>0&&f!==null){const v=l.items[f];if(v){const w=e.state.zoom.value,S=Gr({text:v.searchQuery,x:v.element.x+(v.matchedLines[0]?.offsetX??0),y:v.element.y+(v.matchedLines[0]?.offsetY??0),width:v.matchedLines[0]?.width,height:v.matchedLines[0]?.height,fontSize:pe(v.element)?Rt.nameFontSize:v.element.fontSize,fontFamily:pe(v.element)?Ye.Assistant:v.element.fontFamily}),k=14,_=S.fontSize,T=_*w<k;if(!a2([S],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||T){let A;T?_>=k?A={fitToContent:!0}:A={fitToViewport:!0,maxZoom:Pa(k/_,1)}:A={fitToContent:!0},e.scrollToContent(S,{animate:!0,duration:300,...A,canvasOffsets:e.getEditorUIOffsets()})}}}},[f,l,e]),D.useEffect(()=>()=>{h(null),u.current=null,d.current=void 0,t({searchMatches:null}),a(!1)},[t,h]);const b=L5({goToNextItem:p,goToPreviousItem:y,searchMatches:l});D.useEffect(()=>{const v=w=>{if(w.key===B.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){w.preventDefault(),w.stopPropagation(),t({openSidebar:null});return}if(w[B.CTRL_OR_CMD]&&w.key===B.F){if(w.preventDefault(),w.stopPropagation(),e.state.openDialog)return;n.current?.matches(":focus")||(e.state.openDialog&&t({openDialog:null}),n.current?.focus(),n.current?.select())}w.target instanceof HTMLElement&&w.target.closest(".layer-ui__search")&&b.searchMatches.items.length&&(w.key===B.ENTER&&(w.stopPropagation(),b.goToNextItem()),w.key===B.ARROW_UP?(w.stopPropagation(),b.goToPreviousItem()):w.key===B.ARROW_DOWN&&(w.stopPropagation(),b.goToNextItem()))};return Kt(window,ee.KEYDOWN,v,{capture:!0,passive:!1})},[t,b,e]);const E=`${l.items.length} ${l.items.length===1?M("search.singleResult"):M("search.multipleResults")}`;return O("div",{className:"layer-ui__search",children:[g("div",{className:"layer-ui__search-header",children:g(Ih,{className:_c.SEARCH_MENU_INPUT_WRAPPER,value:i,ref:n,placeholder:M("search.placeholder"),icon:ed,onChange:v=>{r(v),a(!0);const w=v.trim();CR(w,e,(S,k)=>{c({nonce:Ts(),items:S}),h(k),u.current=w,d.current=e.scene.getSceneNonce(),t({searchMatches:S.length?{focusedId:null,matches:S.map(_=>({id:_.element.id,focus:!1,matchedLines:_.matchedLines}))}:null}),a(!1)})},selectOnRender:!0})}),O("div",{className:"layer-ui__search-count",children:[l.items.length>0&&O(de,{children:[f!==null&&f>-1?O("div",{children:[f+1," / ",E]}):g("div",{children:E}),O("div",{className:"result-nav",children:[g(cd,{onSelect:()=>{p()},className:"result-nav-btn",children:MH}),g(cd,{onSelect:()=>{y()},className:"result-nav-btn",children:Bde})]})]}),l.items.length===0&&s&&u.current&&g("div",{style:{margin:"1rem auto"},children:M("search.noMatch")})]}),g(m7e,{matches:l,onItemClick:h,focusIndex:f,searchQuery:s})]})},IR=e=>{const t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return g("div",{tabIndex:-1,className:he("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&n?.scrollIntoView({behavior:"auto",block:"nearest"})},children:g("div",{className:"preview-text",children:t.flatMap((n,i)=>g(D.Fragment,{children:i===2?g("b",{children:n}):n},i))})})},h7e=e=>{const t=D.useMemo(()=>e.matches.items.filter(i=>pe(i.element)),[e.matches]),n=D.useMemo(()=>e.matches.items.filter(i=>le(i.element)),[e.matches]);return O("div",{children:[t.length>0&&O("div",{className:"layer-ui__search-result-container",children:[O("div",{className:"layer-ui__search-result-title",children:[g("div",{className:"title-icon",children:Yb}),g("div",{children:M("search.frames")})]}),t.map((i,r)=>g(IR,{searchQuery:e.searchQuery,preview:i.preview,highlighted:r===e.focusIndex,onClick:()=>e.onItemClick(r)},i.element.id+i.index)),n.length>0&&g("div",{className:"layer-ui__divider"})]}),n.length>0&&O("div",{className:"layer-ui__search-result-container",children:[O("div",{className:"layer-ui__search-result-title",children:[g("div",{className:"title-icon",children:k9}),g("div",{children:M("search.texts")})]}),n.map((i,r)=>g(IR,{searchQuery:e.searchQuery,preview:i.preview,highlighted:r+t.length===e.focusIndex,onClick:()=>e.onItemClick(r+t.length)},i.element.id+i.index))]})]})},g7e=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,m7e=D.memo(h7e,g7e),xR=(e,t,n)=>{const s=e.slice(0,t),o=s.split(/\s+/),a=s.endsWith(" "),l=o.length-2-1-(a?0:1);let c=o.slice(l<=0?0:l).join(" ")+(a?" ":"");c=c.length>20?c.slice(-20):c;const d=e.slice(t+n.length),f=d.split(/\s+/),h=!d.startsWith(" "),m=h?6:5,p=(h?"":" ")+f.slice(0,m).join(" ");return{indexInSearchQuery:c.length,previewText:c+n+p,moreBefore:l>0,moreAfter:f.length>m}},p7e=(e,t)=>{const n=e.split(`
`),i=[];let r=0;for(let s=0;s<n.length;s++){let o=n[s];const a=n[s+1];if(a){const l=t.indexOf(a,r);if(l>o.length+r){let c=l-(o.length+r);for(;c>0;)o+=" ",c--}}i.push(o),r=r+o.length}return i.join(`
`)},U7e=(e,t,n)=>{const r=p7e(e.text,e.originalText).split(`
`),s=[];let o=0,a=0;for(const d of r){const f=o,h=f+d.length-1;s.push({line:d,startIndex:f,endIndex:h,lineNumber:a}),o=h+1,a++}let l=n,c=e.originalText.slice(n,n+t.length);const u=[];for(const d of s){if(c==="")break;if(l>=d.startIndex&&l<=d.endIndex){const f=d.endIndex+1-l,h=d.line.slice(0,l-d.startIndex),m=c.slice(0,f);c=c.slice(f);const p=Bn(h,ot(e),e.lineHeight);if(h===""&&(p.width=0),e.textAlign!=="left"&&d.line.length>0){const w=Bn(d.line,ot(e),e.lineHeight),S=e.textAlign==="center"?(e.width-w.width)/2:e.width-w.width;p.width+=S}const{width:y,height:b}=Bn(m,ot(e),e.lineHeight),E=p.width,v=d.lineNumber*p.height;u.push({offsetX:E,offsetY:v,width:y,height:b,showOnCanvas:!0}),l+=f}}return u},b7e=(e,t,n,i)=>{const r=e.name??u9(e),s=r.slice(n,n+t.length),o=r.slice(0,n),a=ot({fontSize:Rt.nameFontSize,fontFamily:Ye.Assistant}),l=Tc(Ye.Assistant),c=Bn(o,a,l);o===""&&(c.width=0);const u=Bn(s,a,l),d=c.width,f=-c.height-Rt.strokeWidth,h=u.width;return[{offsetX:d,offsetY:f,width:h,height:u.height,showOnCanvas:d+h<=e.width*i}]},y7e=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),CR=c7e((e,t,n)=>{if(!e||e===""){n([],null);return}const i=t.scene.getNonDeletedElements(),r=i.filter(f=>le(f)),s=i.filter(f=>pe(f));r.sort((f,h)=>f.y-h.y),s.sort((f,h)=>f.y-h.y);const o=[],a=new RegExp(y7e(e),"gi");for(const f of r){let h=null;const m=f.originalText;for(;(h=a.exec(m))!==null;){const p=xR(m,h.index,e),y=U7e(f,e,h.index);y.length>0&&o.push({element:f,searchQuery:e,preview:p,index:h.index,matchedLines:y})}}const l=[];for(const f of s){let h=null;const m=f.name??u9(f);for(;(h=a.exec(m))!==null;){const p=xR(m,h.index,e),y=b7e(f,e,h.index,t.state.zoom.value);y.length>0&&l.push({element:f,searchQuery:e,preview:p,index:h.index,matchedLines:y})}}const c=new Set(t.visibleElements.map(f=>f.id)),u=[...l,...o],d=u.findIndex(f=>c.has(f.element.id))??null;n(u,d)},d7e),hj=lp("DefaultSidebarTrigger",e=>{const{DefaultSidebarTriggerTunnel:t}=ar();return g(t.In,{children:g(po.Trigger,{...e,className:"default-sidebar-trigger",name:ps.name})})});hj.displayName="DefaultSidebarTrigger";const gj=({children:e})=>{const{DefaultSidebarTabTriggersTunnel:t}=ar();return g(t.In,{children:e})};gj.displayName="DefaultTabTriggers";const AR=Object.assign(lp("DefaultSidebar",({children:e,className:t,onDock:n,docked:i,...r})=>{const s=hi(),o=bn(),{DefaultSidebarTabTriggersTunnel:a}=ar(),l=s.openSidebar?.tab===Ru;return D.createElement(po,{...r,name:"default",key:"default",className:he("default-sidebar",t),docked:l||(i??s.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&i!=null?void 0:u5(n,c=>{o({defaultSidebarDockedPreference:c})})},O(po.Tabs,{children:[g(po.Header,{children:O(po.TabTriggers,{children:[g(po.TabTrigger,{tab:Ru,children:ed}),g(po.TabTrigger,{tab:fb,children:A9}),g(a.Out,{})]})}),g(po.Tab,{tab:fb,children:g(b8e,{})}),g(po.Tab,{tab:Ru,children:g(f7e,{})}),e]}))}),{Trigger:hj,TabTriggers:gj}),mj=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:i})=>{const r=D.useRef(null),s=D.useRef(i);return s.current=i,D.useEffect(()=>{if(!s.current)return;const o=r.current;if(o){const a=l=>{l[B.CTRL_OR_CMD]&&l.key===B.ENTER&&(l.preventDefault(),s.current?.())};return o.focus(),o.addEventListener(ee.KEYDOWN,a),()=>{o.removeEventListener(ee.KEYDOWN,a)}}},[]),g("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,ref:r})},E7e=({error:e})=>O("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",g("p",{children:e})]}),pj=({error:e,canvasRef:t,loaded:n})=>O("div",{className:"ttd-dialog-output-wrapper",children:[e&&g(E7e,{error:e.message}),n?g("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):g(Ja,{size:"2rem"})]}),h6=({label:e,children:t,panelAction:n,panelActionDisabled:i=!1,onTextSubmitInProgess:r,renderTopRight:s,renderSubmitShortcut:o,renderBottomRight:a})=>O("div",{className:"ttd-dialog-panel",children:[O("div",{className:"ttd-dialog-panel__header",children:[g("label",{children:e}),s?.()]}),t,O("div",{className:he("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[O(cd,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:i||r,children:[O("div",{className:he({invisible:r}),children:[n?.label,n?.icon&&g("span",{children:n.icon})]}),r&&g(Ja,{})]}),!i&&!r&&o?.(),a?.()]})]}),Uj=({children:e})=>g("div",{className:"ttd-dialog-panels",children:e}),bj=()=>O("div",{className:"ttd-dialog-submit-shortcut",children:[g("div",{className:"ttd-dialog-submit-shortcut__key",children:q("CtrlOrCmd")}),g("div",{className:"ttd-dialog-submit-shortcut__key",children:q("Enter")})]}),v7e=({canvasRef:e,setError:t})=>{const n=e.current;if(!n)return;const i=n.parentElement;i&&(i.style.background="",t(null),n.replaceChildren())},yj=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:i,data:r})=>{const s=e.current,o=s?.parentElement;if(!(!s||!o)){if(!n){v7e({canvasRef:e,setError:i});return}try{const a=await t.api;let l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}const{elements:c,files:u}=l;i(null),r.current={elements:A4(c,{regenerateIds:!0}),files:u};const d=await ny({elements:r.current.elements,files:r.current.files,exportPadding:Yh,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await am(d)}catch(f){throw f.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(M("canvasError.canvasTooBig")):f}o.style.background="var(--default-bg-color)",s.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&i(a),a}}},L_=e=>{f0.set(Y1.MERMAID_TO_EXCALIDRAW,e)},Ej=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:i})=>{const{elements:r,files:s}=t.current;r.length&&(e.addElementsFromPasteOrLibrary({elements:r,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),i&&n&&L_(n))},w7e=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,MR=Ya(L_,300),_7e=({mermaidToExcalidrawLib:e})=>{const[t,n]=D.useState(()=>f0.get(Y1.MERMAID_TO_EXCALIDRAW)||w7e),i=D.useDeferredValue(t.trim()),[r,s]=D.useState(null),o=D.useRef(null),a=D.useRef({elements:[],files:null}),l=ro();D.useEffect(()=>{yj({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:s,mermaidDefinition:i}).catch(u=>{}),MR(i)},[i,e]),D.useEffect(()=>()=>{MR.flush()},[]);const c=()=>{Ej({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return O(de,{children:[g("div",{className:"ttd-dialog-desc",children:g(mr,{i18nKey:"mermaid.description",flowchartLink:u=>g("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:u}),sequenceLink:u=>g("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:u}),classLink:u=>g("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:u})})}),O(Uj,{children:[g(h6,{label:M("mermaid.syntax"),children:g(mj,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:u=>n(u.target.value),onKeyboardSubmit:()=>{c()}})}),g(h6,{label:M("mermaid.preview"),panelAction:{action:()=>{c()},label:M("mermaid.button"),icon:u2},renderSubmitShortcut:()=>g(bj,{}),children:g(pj,{canvasRef:o,loaded:e.loaded,error:r})})]})]})},vj=e=>{const t=bn(),n=D.useRef(null),i=D.useRef(0);return g(zX,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:r=>{if(!r)return;const s=n.current?.closest(".Modal__content");if(s){const o=s.offsetHeight||0;o>i.current&&(i.current=o,s.style.minHeight=`min(${i.current}px, 100%)`)}e.dialog==="ttd"&&TF(["text-to-diagram","mermaid"],r)&&t({openDialog:{name:e.dialog,tab:r}})},children:e.children})};vj.displayName="TTDDialogTabs";const wj=({children:e,...t})=>g(HX,{className:"ttd-dialog-triggers",...t,children:e});wj.displayName="TTDDialogTabTriggers";const L4=({children:e,tab:t,onSelect:n,...i})=>g(VX,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"ttd-dialog-tab-trigger",...i,children:e})});L4.displayName="TTDDialogTabTrigger";const O4=({tab:e,children:t,...n})=>g($X,{...n,value:e,children:t});O4.displayName="TTDDialogTab";const zE=3,Yd=1e3,T7e=$t(null),S7e=$t(null),_j=e=>{const t=hi();return t.openDialog?.name!=="ttd"?null:g(I7e,{...e,tab:t.openDialog.tab})},I7e=lp("TTDDialogBase",({tab:e,...t})=>{const n=ro(),i=bn(),r=D.useRef(null),[s,o]=cn(S7e),[a,l]=D.useState(s?.prompt??""),c=a.trim(),u=k=>{l(k.target.value),o(_=>({generatedResponse:_?.generatedResponse??null,prompt:k.target.value}))},[d,f]=D.useState(!1),[h,m]=cn(T7e),p=async()=>{if(c.length>Yd||c.length<zE||d||h?.rateLimitRemaining===0||"__fallback"in t){c.length<zE&&S(new Error(`Prompt is too short (min ${zE} characters)`)),c.length>Yd&&S(new Error(`Prompt is too long (max ${Yd} characters)`));return}try{f(!0),tt("ai","generate","ttd");const{generatedResponse:k,error:_,rateLimit:T,rateLimitRemaining:A}=await t.onTextSubmit(c);if(typeof k=="string"&&o(C=>({generatedResponse:k,prompt:C?.prompt??null})),K1(T)&&K1(A)&&m({rateLimit:T,rateLimitRemaining:A}),_){S(_);return}if(!k){S(new Error("Generation failed"));return}try{await yj({canvasRef:r,data:v,mermaidToExcalidrawLib:b,setError:S,mermaidDefinition:k}),tt("ai","mermaid parse success","ttd")}catch(C){console.info(`%cTTD mermaid render errror: ${C.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${C.message}`,"color: yellow"),tt("ai","mermaid parse failed","ttd"),S(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(k){let _=k.message;(!_||_==="Failed to fetch")&&(_="Request failed"),S(new Error(_))}finally{f(!1)}},y=D.useRef(p);y.current=p;const[b,E]=D.useState({loaded:!1,api:ge(()=>import("./index-CqKBX1jw.js").then(k=>k.b6),__vite__mapDeps([]))});D.useEffect(()=>{(async()=>{await b.api,E(_=>({..._,loaded:!0}))})()},[b.api]);const v=D.useRef({elements:[],files:null}),[w,S]=D.useState(null);return g(jr,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:O(vj,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?g("p",{className:"dialog-mermaid-title",children:M("mermaid.title")}):O(wj,{children:[g(L4,{tab:"text-to-diagram",children:O("div",{style:{display:"flex",alignItems:"center"},children:[M("labels.textToDiagram"),g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),g(L4,{tab:"mermaid",children:"Mermaid"})]}),g(O4,{className:"ttd-dialog-content",tab:"mermaid",children:g(_7e,{mermaidToExcalidrawLib:b})}),!("__fallback"in t)&&O(O4,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[g("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),O(Uj,{children:[g(h6,{label:M("labels.prompt"),panelAction:{action:p,label:"Generate",icon:u2},onTextSubmitInProgess:d,panelActionDisabled:c.length>Yd||h?.rateLimitRemaining===0,renderTopRight:()=>h?O("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>g(bj,{}),renderBottomRight:()=>{if(typeof s?.generatedResponse=="string")return O("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof s?.generatedResponse=="string"&&(L_(s.generatedResponse),i({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",g(P5,{icon:u2})]});const k=c.length/Yd;return k>.8?O("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:k>1?"var(--color-danger)":void 0},children:["Length: ",c.length,"/",Yd]}):null},children:g(mj,{onChange:u,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{y.current()}})}),g(h6,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),Ej({app:n,data:v})},label:"Insert",icon:u2},children:g(pj,{canvasRef:r,error:w,loaded:b.loaded})})]})]})]})})}),x7e=.01,N4=10,rl=(e,t)=>!(t==="angle"&&pe(e)),Oi=(e,t)=>{const n=e+t/2;return n-n%t},g6=(e,t,n)=>Object.keys(e).map(i=>({original:(n??t).get(i),latest:t.get(i)})).filter(i=>i.original!==void 0&&i.latest!==void 0),mm=(e,t,n,i,r,s=!0)=>{const o=i.getNonDeletedElementsMap(),a=o.get(n.id);if(!a)return;const[l,c]=[n.x+n.width/2,n.y+n.height/2],[u,d]=W(I(n.x,n.y),I(l,c),n.angle),f=e-u,h=t-d,[m,p]=W(I(e,t),I(l+f,c+h),-n.angle);i.mutateElement(a,{x:m,y:p},{informMutation:s,isDragging:!1}),H0(a,i);const y=Ce(n,r);if(y){const b=o.get(y.id);b&&i.mutateElement(b,{x:y.x+f,y:y.y+h},{informMutation:s,isDragging:!1})}if(pe(n)){const b=Ss(r,n.id);b.forEach(E=>{const v=o.get(E.id);if(!v)return;const[w,S]=[E.x+E.width/2,E.y+E.height/2],[k,_]=W(I(E.x,E.y),I(w,S),E.angle),T=Math.round(k+f),A=Math.round(_+h),[C,R]=W(I(T,A),I(w+f,S+h),-E.angle);i.mutateElement(v,{x:C,y:R},{informMutation:s,isDragging:!1}),H0(v,i,{simultaneouslyUpdated:b})})}},O_=(e,t)=>{const i=Pu(t).map(r=>It(e,r).reduce((s,o)=>(s[o.id]=!0,s),{}));return e.filter(r=>!ph(r)).forEach(r=>{i.push({[r.id]:!0})}),i},fl=({label:e,icon:t,dragInputCallback:n,value:i,elements:r,editable:s=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:c,sensitivity:u=1,dragFinishedCallback:d})=>{const f=ro(),h=bn(),m=D.useRef(null),p=D.useRef(null),[y,b]=D.useState(i.toString()),E=D.useRef(null);E.current||(E.current={originalAppState:Ba(c),originalElements:r,lastUpdatedValue:y,updatePending:!1}),D.useEffect(()=>{const S=i.toString();b(S),E.current.lastUpdatedValue=S},[i]);const v=(S,k,_)=>{if(!E.current.updatePending)return!1;E.current.updatePending=!1;const T=Number(S);if(isNaN(T)){b(i.toString());return}const A=Number(T.toFixed(2)),C=Number(i);(isNaN(C)||Math.abs(A-C)>=x7e)&&(E.current.lastUpdatedValue=S,n({accumulatedChange:0,instantChange:0,originalElements:k,originalElementsMap:f.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:A,property:a,originalAppState:_,setInputValue:R=>b(String(R)),app:f,setAppState:h}),f.syncActionResult({captureUpdate:j.IMMEDIATELY}))},w=D.useRef({});return w.current.handleInputValue=v,D.useEffect(()=>{const S=m.current,k=w.current;return()=>{const _=S?.value;_&&k.handleInputValue?.(_,E.current.originalElements,E.current.originalAppState),window.removeEventListener(ee.POINTER_MOVE,k.onPointerMove,!1),window.removeEventListener(ee.POINTER_UP,k.onPointerUp,!1)}},[s]),s?O("div",{className:he("drag-input-container",!s&&"disabled"),"data-testid":e,children:[g("div",{className:"drag-input-label",ref:p,onPointerDown:S=>{if(m.current&&s){document.body.classList.add("excalidraw-cursor-resize"),Number(m.current.value);let k=null,_=f.scene.getNonDeletedElements().reduce((K,H)=>(K.set(H.id,xc(H)),K),new Map),T=r.map(K=>_.get(K.id));const A=Ba(c);let C=0,R=0;const P=K=>{if(k&&_!==null&&T!==null){const H=K.clientX-k.x;H!==0&&(R+=H,Math.abs(R)>=u&&(R=Math.sign(R)*Math.floor(Math.abs(R)/u),C+=R,n({accumulatedChange:C,instantChange:R,originalElements:T,originalElementsMap:_,shouldKeepAspectRatio:o,shouldChangeByStepSize:K.shiftKey,property:a,scene:l,originalAppState:A,setInputValue:z=>b(String(z)),app:f,setAppState:h}),R=0))}k={x:K.clientX,y:K.clientY}},N=()=>{window.removeEventListener(ee.POINTER_MOVE,P,!1),f.syncActionResult({captureUpdate:j.IMMEDIATELY}),d?.({app:f,setAppState:h,originalElements:T,originalAppState:A}),k=null,C=0,R=0,T=null,_=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener(ee.POINTER_UP,N,!1)};w.current.onPointerMove=P,w.current.onPointerUp=N,window.addEventListener(ee.POINTER_MOVE,P,!1),window.addEventListener(ee.POINTER_UP,N,!1)}},onPointerEnter:()=>{p.current&&(p.current.style.cursor="ew-resize")},children:t?g(P5,{icon:t}):e}),g("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:S=>{if(s){const k=S.target;k instanceof HTMLInputElement&&S.key===B.ENTER&&(v(k.value,r,c),f.focusContainer())}},ref:m,value:y,onChange:S=>{E.current.updatePending=!0,b(S.target.value)},onFocus:S=>{S.target.select(),E.current.originalElements=r,E.current.originalAppState=Ba(c)},onBlur:S=>{y?s&&v(S.target.value,E.current.originalElements,E.current.originalAppState):b(i.toString())},disabled:!s})]}):null},C7e=15,A7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t[0];if(o&&!ce(o)){const a=s.get(o.id);if(!a)return;if(i!==void 0){const h=Du(i);r.mutateElement(a,{angle:h}),H0(a,r);const m=Ce(a,s);m&&!_e(a)&&r.mutateElement(m,{angle:h});return}const l=Math.round(o5(o.angle)*100)/100,c=Math.round(e);let u=(l+c)%360;n&&(u=Oi(u,C7e)),u=u<0?u+360:u;const d=Du(u);r.mutateElement(a,{angle:d}),H0(a,r);const f=Ce(a,s);f&&!_e(a)&&r.mutateElement(f,{angle:d})}},M7e=({element:e,scene:t,appState:n,property:i})=>g(fl,{label:"A",icon:EH,value:Math.round(o5(e.angle)%360*100)/100,elements:[e],dragInputCallback:A7e,editable:rl(e,"angle"),scene:t,appState:n,property:i}),kR=5,k7e=({property:e,scene:t,appState:n,setAppState:i})=>g(fl,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:r,instantChange:s,shouldChangeByStepSize:o,setInputValue:a})=>{i(l=>{let c;return r?c=r:s&&(c=o?Oi(l.gridStep+kR*Math.sign(s),kR):l.gridStep+s),c?(c=oH(c),a(c),{gridStep:c}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),RR=10,R7e=e=>e.type==="image",D7e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:i,shouldChangeByStepSize:r,nextValue:s,property:o,originalAppState:a,instantChange:l,scene:c,app:u,setAppState:d})=>{const f=c.getNonDeletedElementsMap(),h=t[0],m=f.get(h.id);if(h&&m){const p=i||R7e(h),y=h.width/h.height;if(a.croppingElementId===h.id){const b=f.get(h.id);if(!b||!yt(b)||!b.crop)return;const E=b.crop;let v={...E};const w=b.scale[0]===-1,S=b.scale[1]===-1,{width:k,height:_}=Za(b),T=E.naturalWidth/k,A=E.naturalHeight/_,C=w?E.width+E.x:E.naturalWidth-E.x,R=S?E.height+E.y:E.naturalHeight-E.y,P=ti*T,N=ti*A;if(s!==void 0){if(o==="width"){const $=s*T,G=Ve($,P,C);v={...v,width:G,x:w?E.x+E.width-G:E.x}}else if(o==="height"){const $=s*A,G=Ve($,N,R);v={...v,height:G,y:S?E.y+E.height-G:E.y}}c.mutateElement(b,{crop:v,width:v.width/(E.naturalWidth/k),height:v.height/(E.naturalHeight/_)});return}const K=o==="width"?l:0,H=o==="height"?l:0,z=Ve(E.width+K,P,C),V=Ve(E.height+H,P,R);v={...E,x:w?E.x+E.width-z:E.x,y:S?E.y+E.height-V:E.y,width:z,height:V},c.mutateElement(b,{crop:v,width:v.width/(E.naturalWidth/k),height:v.height/(E.naturalHeight/_)});return}if(s!==void 0){const b=Math.max(o==="width"?s:p?s*y:h.width,Jr),E=Math.max(o==="height"?s:p?s/y:h.height,Jr);if(X0(b,E,m,h,n,c,o==="width"?"e":"s",{shouldMaintainAspectRatio:p}),pe(m)){const v=ko(c.getElementsIncludingDeleted(),m,a,c.getNonDeletedElementsMap()),w=Jh(c.getElementsIncludingDeleted(),v,m,u);c.replaceAllElements(w)}return}{const b=o==="width"?e:0,E=o==="height"?e:0;let v=Math.max(0,h.width+b);o==="width"&&(r?v=Oi(v,RR):v=Math.round(v));let w=Math.max(0,h.height+E);if(o==="height"&&(r?w=Oi(w,RR):w=Math.round(w)),p&&(o==="width"?w=Math.round(v/y*100)/100:v=Math.round(w*y*100)/100),w=Math.max(Jr,w),v=Math.max(Jr,v),X0(v,w,m,h,n,c,o==="width"?"e":"s",{shouldMaintainAspectRatio:p}),pe(m)){const S=ko(c.getElementsIncludingDeleted(),m,a,c.getNonDeletedElementsMap());d({elementsToHighlight:S})}}}},L7e=({setAppState:e,app:t,originalElements:n,originalAppState:i})=>{const r=t.scene.getNonDeletedElementsMap(),s=n?.[0],o=s&&r.get(s.id);if(o&&pe(o)){const a=ko(t.scene.getElementsIncludingDeleted(),o,i,t.scene.getNonDeletedElementsMap()),l=Jh(t.scene.getElementsIncludingDeleted(),a,o,t);t.scene.replaceAllElements(l),e({elementsToHighlight:null})}},DR=({property:e,element:t,scene:n,appState:i})=>{let r=Pa(e==="width"?t.width:t.height,2);if(i.croppingElementId&&i.croppingElementId===t.id&&yt(t)&&t.crop){const{width:s,height:o}=Za(t);if(e==="width"){const a=s/t.crop.naturalWidth;r=Pa(t.crop.width*a,2)}if(e==="height"){const a=o/t.crop.naturalHeight;r=Pa(t.crop.height*a,2)}}return g(fl,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:D7e,value:r,editable:rl(t,e),scene:n,appState:i,property:e,dragFinishedCallback:L7e})},LR=4,O7e=4,N7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t[0];if(o){const a=s.get(o.id);if(!a||!le(a))return;let l;if(i!==void 0)l=Math.max(Math.round(i),LR);else if(o.type==="text"){const c=Math.round(o.fontSize),u=Math.round(e);l=Math.max(c+u,LR),n&&(l=Oi(l,O7e))}l&&(r.mutateElement(a,{fontSize:l}),Hi(a,r.getContainerElement(a),r))}},P7e=({element:e,scene:t,appState:n,property:i})=>{const r=le(e)?e:nr(e)?Ce(e,t.getNonDeletedElementsMap()):null;return r?g(fl,{label:"F",value:Math.round(r.fontSize*10)/10,elements:[r],dragInputCallback:N7e,icon:I5,appState:n,scene:t,property:i}):null},F7e=15,B7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,property:r,scene:s})=>{const o=s.getNonDeletedElementsMap(),a=t.map(c=>o.get(c.id)).filter(c=>c&&!ph(c)&&rl(c,r)),l=t.filter(c=>!ph(c)&&rl(c,r));if(i!==void 0){const c=Du(i);for(const u of a){if(!u)continue;s.mutateElement(u,{angle:c});const d=Ce(u,o);d&&!_e(u)&&s.mutateElement(d,{angle:c})}s.triggerUpdate();return}for(let c=0;c<a.length;c++){const u=a[c];if(!u)continue;const d=l[c],f=Math.round(o5(d.angle)*100)/100,h=Math.round(e);let m=(f+h)%360;n&&(m=Oi(m,F7e)),m=m<0?m+360:m;const p=Du(m);s.mutateElement(u,{angle:p});const y=Ce(u,o);y&&!_e(u)&&s.mutateElement(y,{angle:p})}s.triggerUpdate()},z7e=({elements:e,scene:t,appState:n,property:i})=>{const r=e.filter(l=>!ph(l)&&rl(l,"angle")),s=r.map(l=>Math.round(o5(l.angle)%360*100)/100),o=new Set(s).size===1?s[0]:"Mixed",a=r.some(l=>rl(l,"angle"));return g(fl,{label:"A",icon:EH,value:o,elements:e,dragInputCallback:B7e,editable:a,appState:n,scene:t,property:i})},Wd=10,H7e=(e,t,n,i)=>{const r=i.x-e,s=i.y-t,o=i.width*n,a=i.height*n,l=e+r*n,c=t+s*n;return{width:o,height:a,x:l,y:c,...E9(i,o,a,!1),...le(i)?{fontSize:i.fontSize*n}:{}}},V7e=(e,t,n,i,r,s,o,a)=>{const l=a.getNonDeletedElementsMap(),c=H7e(e,t,i,s);a.mutateElement(r,c);const u=Ce(s,o);if(u){const d=u.fontSize*i;pr(r,a,{newSize:{width:c.width,height:c.height}});const f=l.get(u.id);f&&le(f)&&(a.mutateElement(f,{fontSize:d}),Zm(r,a,n==="width"?"e":"s",!0))}},OR=(e,t,n,i,r,s,o,a,l,c)=>{s==="width"?t=Math.round(e/i*100)/100:e=Math.round(t*i*100)/100;const u=t/n;for(let d=0;d<a.length;d++){const f=a[d],h=o[d];V7e(r[0],r[1],s,u,h,f,l,c)}},$7e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:i,shouldChangeByStepSize:r,nextValue:s,scene:o,property:a,setAppState:l,app:c})=>{const u=o.getNonDeletedElementsMap(),d=O_(t,i);if(s!==void 0){for(const p of d){const y=g6(p,u,n);if(y.length>1){const b=y.map(P=>P.latest),E=y.map(P=>P.original),[v,w,S,k]=ft(E),_=S-v,T=k-w,A=_/T,C=Math.max(Jr,a==="width"?Math.max(0,s):_),R=Math.max(Jr,a==="height"?Math.max(0,s):T);OR(C,R,T,A,I(v,w),a,b,E,n,o)}else{const[b]=y,E=b?.latest,v=b?.original;if(E&&v&&rl(E,a)){let w=a==="width"?Math.max(0,s):E.width;a==="width"&&(r?w=Oi(w,Wd):w=Math.round(w));let S=a==="height"?Math.max(0,s):E.height;if(a==="height"&&(r?S=Oi(S,Wd):S=Math.round(S)),w=Math.max(Jr,w),S=Math.max(Jr,S),X0(w,S,E,v,n,o,a==="width"?"e":"s",{shouldInformMutation:!1}),pe(E)){const k=ko(o.getElementsIncludingDeleted(),E,i,o.getNonDeletedElementsMap()),_=Jh(o.getElementsIncludingDeleted(),k,E,c);o.replaceAllElements(_)}}}}o.triggerUpdate();return}const f=a==="width"?e:0,h=a==="height"?e:0,m=[];for(const p of d){const y=g6(p,u,n);if(y.length>1){const b=y.map(P=>P.latest),E=y.map(P=>P.original),[v,w,S,k]=ft(E),_=S-v,T=k-w,A=_/T;let C=Math.max(0,_+f);a==="width"&&(r?C=Oi(C,Wd):C=Math.round(C));let R=Math.max(0,T+h);a==="height"&&(r?R=Oi(R,Wd):R=Math.round(R)),C=Math.max(Jr,C),R=Math.max(Jr,R),OR(C,R,T,A,I(v,w),a,b,E,n,o)}else{const[b]=y,E=b?.latest,v=b?.original;if(E&&v&&rl(E,a)){let w=Math.max(0,v.width+f);a==="width"&&(r?w=Oi(w,Wd):w=Math.round(w));let S=Math.max(0,v.height+h);if(a==="height"&&(r?S=Oi(S,Wd):S=Math.round(S)),w=Math.max(Jr,w),S=Math.max(Jr,S),X0(w,S,E,v,n,o,a==="width"?"e":"s",{shouldInformMutation:!1}),pe(E)){const k=ko(o.getElementsIncludingDeleted(),E,i,o.getNonDeletedElementsMap());m.push(...k)}}}}l({elementsToHighlight:m}),o.triggerUpdate()},G7e=({setAppState:e,app:t,originalElements:n,originalAppState:i})=>{const r=t.scene.getNonDeletedElementsMap(),s=n?.[0],o=s&&r.get(s.id);if(o&&pe(o)){const a=ko(t.scene.getElementsIncludingDeleted(),o,i,t.scene.getNonDeletedElementsMap()),l=Jh(t.scene.getElementsIncludingDeleted(),a,o,t);t.scene.replaceAllElements(l),e({elementsToHighlight:null})}},NR=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=D.useMemo(()=>i.map(c=>{const u=g6(c,n);if(u.length>1){const[f,h,m,p]=ft(u.map(y=>y.latest));return Math.round((e==="width"?m-f:p-h)*100)/100}const[d]=u;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,i,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return g(fl,{label:e==="width"?"W":"H",elements:t,dragInputCallback:$7e,value:a,editable:l,appState:s,property:e,scene:r,dragFinishedCallback:G7e})},PR=4,X7e=4,j7e=(e,t)=>e.reduce((n,i)=>{if(!i||ph(i))return n;if(le(i))return n.push(i),n;if(nr(i)){const r=Ce(i,t);if(r)return n.push(r),n}return n},[]),Y7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t.map(l=>s.get(l.id));let a;if(i){a=Math.max(Math.round(i),PR);for(const l of o)r.mutateElement(l,{fontSize:a}),Hi(l,r.getContainerElement(l),r);r.triggerUpdate()}else{const l=t;for(let c=0;c<o.length;c++){const u=o[c],d=l[c],f=Math.round(d.fontSize),h=Math.round(e);let m=Math.max(f+h,PR);n&&(m=Oi(m,X7e)),r.mutateElement(u,{fontSize:m}),Hi(u,r.getContainerElement(u),r)}r.triggerUpdate()}},W7e=({elements:e,scene:t,appState:n,property:i,elementsMap:r})=>{const s=j7e(e,r);if(!s.length)return null;const o=s.map(c=>Math.round(c.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return g(fl,{label:"F",icon:I5,elements:s,dragInputCallback:Y7e,value:a,editable:l,scene:t,property:i,appState:n})},K7e=(e,t,n,i,r,s)=>{for(let o=0;o<i.length;o++){const a=i[o],[l,c]=[a.x+a.width/2,a.y+a.height/2],[u,d]=W(I(a.x,a.y),I(l,c),a.angle),f=e==="x"?Math.round(u+t):u,h=e==="y"?Math.round(d+n):d;mm(f,h,a,s,r,!1)}},Z7e=(e,t,n,i,r)=>{const s=r.getNonDeletedElementsMap(),[o,a,,]=ft(n),l=e-o,c=t-a;for(let u=0;u<n.length;u++){const d=n[u],f=s.get(d.id);if(f&&(!le(f)||!f.containerId)){const[h,m]=[f.x+f.width/2,f.y+f.height/2],[p,y]=W(I(f.x,f.y),I(h,m),f.angle);mm(p+l,y+c,d,r,i,!1)}}},q7e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:i,nextValue:r,property:s,scene:o,originalAppState:a})=>{const l=o.getNonDeletedElementsMap();if(r!==void 0){for(const f of O_(t,a)){const h=g6(f,l,n);if(h.length>1){const[m,p,,]=ft(h.map(E=>E.latest));Z7e(s==="x"?r:m,s==="y"?r:p,h.map(E=>E.original),n,o)}else{const m=h[0]?.original,p=h[0]?.latest;if(m&&p&&rl(p,s)){const[y,b]=[m.x+m.width/2,m.y+m.height/2],[E,v]=W(I(m.x,m.y),I(y,b),m.angle);mm(s==="x"?r:E,s==="y"?r:v,m,o,n,!1)}}}o.triggerUpdate();return}const c=i?Oi(e,N4):e;K7e(s,s==="x"?c:0,s==="y"?c:0,t,n,o),o.triggerUpdate()},FR=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=D.useMemo(()=>i.map(l=>{const c=Object.keys(l).map(p=>n.get(p)).filter(p=>p!==void 0);if(c.length>1){const[p,y]=ft(c);return Math.round((e==="x"?p:y)*100)/100}const[u]=c,[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=W(I(u.x,u.y),I(d,f),u.angle);return Math.round((e==="x"?h:m)*100)/100}),[i,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return g(fl,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:q7e,value:a,property:e,scene:r,appState:s})},Q7e=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:i,shouldChangeByStepSize:r,nextValue:s,property:o,scene:a,originalAppState:l})=>{const c=a.getNonDeletedElementsMap(),u=n[0],[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=W(I(u.x,u.y),I(d,f),u.angle);if(l.croppingElementId===u.id){const v=c.get(u.id);if(!v||!yt(v)||!v.crop)return;const w=v.crop;let S=w;const k=v.scale[0]===-1,_=v.scale[1]===-1,{width:T,height:A}=Za(v);if(s!==void 0){if(o==="x"){const P=s*(w.naturalWidth/T);k?S={...w,x:Ve(w.naturalWidth-P-w.width,0,w.naturalWidth-w.width)}:S={...w,x:Ve(s*(w.naturalWidth/T),0,w.naturalWidth-w.width)}}o==="y"&&(S={...w,y:Ve(s*(w.naturalHeight/A),0,w.naturalHeight-w.height)}),a.mutateElement(v,{crop:S});return}const C=(o==="x"?t:0)*(k?-1:1),R=(o==="y"?t:0)*(_?-1:1);S={...w,x:Ve(w.x+C,0,w.naturalWidth-w.width),y:Ve(w.y+R,0,w.naturalHeight-w.height)},a.mutateElement(v,{crop:S});return}if(s!==void 0){mm(o==="x"?s:h,o==="y"?s:m,u,a,i);return}const p=o==="x"?e:0,y=o==="y"?e:0,b=o==="x"?Math.round(r?Oi(u.x+p,N4):h+p):h,E=o==="y"?Math.round(r?Oi(u.y+y,N4):m+y):m;mm(b,E,u,a,i)},BR=({property:e,element:t,elementsMap:n,scene:i,appState:r})=>{const[s,o]=W(I(t.x,t.y),I(t.x+t.width/2,t.y+t.height/2),t.angle);let a=Pa(e==="x"?s:o,2);if(r.croppingElementId===t.id&&yt(t)&&t.crop){const l=hoe(t);l&&(a=Pa(e==="x"?l.x:l.y,2))}return g(fl,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:Q7e,scene:i,value:a,property:e,appState:r})},J7e=50,pa=e=>{const t=up(),n=e.app.scene.getSceneNonce()||1,i=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),r=fm(e.app);return g(e4e,{...e,appState:t,sceneNonce:n,selectedElements:i,gridModeEnabled:r})},zt=({children:e,columns:t=1,heading:n,style:i,...r})=>g("div",{className:he("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...i},...r,children:e});zt.displayName="StatsRow";const m6=({children:e,order:t,style:n,...i})=>g("div",{className:"exc-stats__rows",style:{order:t,...n},...i,children:e});m6.displayName="StatsRows";pa.StatsRow=zt;pa.StatsRows=m6;const e4e=D.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:i,appState:r,sceneNonce:s,gridModeEnabled:o})=>{const a=e.scene,l=a.getNonDeletedElements(),c=a.getNonDeletedElementsMap(),u=bn(),d=i.length===1?i[0]:null,f=i.length>1?i:null,h=r.croppingElementId&&yt(d),m=h?Za(d):null,[p,y]=D.useState({width:0,height:0}),b=D.useMemo(()=>So(w=>{const S=ft(w);y({width:Math.round(S[2])-Math.round(S[0]),height:Math.round(S[3])-Math.round(S[1])})},J7e),[]);D.useEffect(()=>{b(l)},[s,l,b]),D.useEffect(()=>()=>b.cancel(),[b]);const E=D.useMemo(()=>O_(i,r),[i,r]),v=D.useMemo(()=>EB(i),[i]);return g("div",{className:"exc-stats",children:O(js,{padding:3,children:[O("div",{className:"title",children:[g("h2",{children:M("stats.title")}),g("div",{className:"close",onClick:t,children:Sd})]}),O(m4,{label:g("h3",{children:M("stats.generalStats")}),open:!!(r.stats.panels&wf.generalStats),openTrigger:()=>u(w=>({stats:{open:!0,panels:w.stats.panels^wf.generalStats}})),children:[O(m6,{children:[g(zt,{heading:!0,children:M("stats.scene")}),O(zt,{columns:2,children:[g("div",{children:M("stats.shapes")}),g("div",{children:l.length})]}),O(zt,{columns:2,children:[g("div",{children:M("stats.width")}),g("div",{children:p.width})]}),O(zt,{columns:2,children:[g("div",{children:M("stats.height")}),g("div",{children:p.height})]}),o&&O(de,{children:[g(zt,{heading:!0,children:"Canvas"}),g(zt,{children:g(k7e,{property:"gridStep",scene:a,appState:r,setAppState:u})})]})]}),n?.(l,r)]}),!v&&i.length>0&&g("div",{id:"elementStats",style:{marginTop:12},children:g(m4,{label:g("h3",{children:M("stats.elementProperties")}),open:!!(r.stats.panels&wf.elementProperties),openTrigger:()=>u(w=>({stats:{open:!0,panels:w.stats.panels^wf.elementProperties}})),children:O(m6,{children:[d&&O(de,{children:[h&&g(zt,{heading:!0,children:M("labels.unCroppedDimension")}),r.croppingElementId&&yt(d)&&m&&O(zt,{columns:2,children:[g("div",{children:M("stats.width")}),g("div",{children:Pa(m.width,2)})]}),r.croppingElementId&&yt(d)&&m&&O(zt,{columns:2,children:[g("div",{children:M("stats.height")}),g("div",{children:Pa(m.height,2)})]}),g(zt,{heading:!0,"data-testid":"stats-element-type",style:{margin:"0.3125rem 0"},children:r.croppingElementId?M("labels.imageCropping"):M(`element.${d.type}`)}),g(zt,{children:g(BR,{element:d,property:"x",elementsMap:c,scene:a,appState:r})}),g(zt,{children:g(BR,{element:d,property:"y",elementsMap:c,scene:a,appState:r})}),g(zt,{children:g(DR,{property:"width",element:d,scene:a,appState:r})}),g(zt,{children:g(DR,{property:"height",element:d,scene:a,appState:r})}),!ce(d)&&g(zt,{children:g(M7e,{property:"angle",element:d,scene:a,appState:r})}),g(zt,{children:g(P7e,{property:"fontSize",element:d,scene:a,appState:r})})]}),f&&O(de,{children:[i9(f)&&g(zt,{heading:!0,children:M("element.group")}),O(zt,{columns:2,style:{margin:"0.3125rem 0"},children:[g("div",{children:M("stats.shapes")}),g("div",{children:i.length})]}),g(zt,{children:g(FR,{property:"x",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:r})}),g(zt,{children:g(FR,{property:"y",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:r})}),g(zt,{children:g(NR,{property:"width",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:r})}),g(zt,{children:g(NR,{property:"height",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:r})}),g(zt,{children:g(z7e,{property:"angle",elements:f,scene:a,appState:r})}),g(zt,{children:g(W7e,{property:"fontSize",elements:f,scene:a,appState:r,elementsMap:c})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),t4e=({sourceElementId:e,onClose:t,appState:n,scene:i,generateLinkForSelection:r=HB})=>{const s=i.getNonDeletedElementsMap(),o=s.get(e)?.link??null,[a,l]=D.useState(o),[c,u]=D.useState(!1);D.useEffect(()=>{const f=Ne(s,n);let h=o;if(f.length>0&&r){const m=VB(f,n);m&&(h=Hr(r(m.id,m.type)))}l(h)},[s,n,n.selectedElementIds,o,r]);const d=D.useCallback(()=>{if(a&&a!==s.get(e)?.link){const f=s.get(e);f&&i.mutateElement(f,{link:a})}if(!a&&c&&e){const f=s.get(e);f&&i.mutateElement(f,{link:null})}t?.()},[e,a,s,c,i,t]);return D.useEffect(()=>{const f=h=>{n.openDialog?.name==="elementLinkSelector"&&h.key===B.ENTER&&d(),n.openDialog?.name==="elementLinkSelector"&&h.key===B.ESCAPE&&t?.()};return window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}},[n,t,d]),O("div",{className:"ElementLinkDialog",children:[O("div",{className:"ElementLinkDialog__header",children:[g("h2",{children:M("elementLink.title")}),g("p",{children:M("elementLink.desc")})]}),O("div",{className:"ElementLinkDialog__input",children:[g(Ih,{value:a??"",onChange:f=>{c||u(!0),l(f)},onKeyDown:f=>{f.key===B.ENTER&&d()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),o&&a&&g(Be,{type:"button",title:M("buttons.remove"),"aria-label":M("buttons.remove"),label:M("buttons.remove"),onClick:()=>{l(null),u(!0)},className:"ElementLinkDialog__remove",icon:Cc})]}),O("div",{className:"ElementLinkDialog__actions",children:[g(Sh,{label:M("buttons.cancel"),onClick:()=>{t?.()},style:{marginRight:10}}),g(Sh,{label:M("buttons.confirm"),onClick:d,actionType:"primary"})]})]})},N_=({children:e,onClose:t})=>{const[n,i]=D.useState(!!e),{container:r}=Qo(),s=se.useCallback(()=>{i(!1),t&&t(),r?.focus()},[t,r]);return g(de,{children:n&&g(jr,{size:"small",onCloseRequest:s,title:M("errorDialog.title"),children:g("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},n4e=()=>O("div",{className:"HelpDialog__header",children:[O("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener",children:[g("div",{className:"HelpDialog__link-icon",children:DA}),M("helpDialog.documentation")]}),O("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener",children:[g("div",{className:"HelpDialog__link-icon",children:DA}),M("helpDialog.blog")]}),O("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:D9}),M("helpDialog.github")]}),O("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:IH}),"YouTube"]})]}),i4e=e=>O(de,{children:[g("h3",{children:e.title}),g("div",{className:"HelpDialog__islands-container",children:e.children})]}),HE=e=>O("div",{className:`HelpDialog__island ${e.className}`,children:[g("h4",{className:"HelpDialog__island-title",children:e.caption}),g("div",{className:"HelpDialog__island-content",children:e.children})]});function*r4e(e,t){let n=!0;for(const i of e)n||(yield t),n=!1,yield i}const s4e=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),fe=({label:e,shortcuts:t,isOr:n=!0})=>{const i=t.map(r=>(r.endsWith("++")?[...r.slice(0,-2).split("+"),"+"]:r.split("+")).map(o=>g(o4e,{children:s4e(o)},o)));return O("div",{className:"HelpDialog__shortcut",children:[g("div",{children:e}),g("div",{className:"HelpDialog__key-container",children:[...r4e(i,n?M("helpDialog.or"):null)]})]})},o4e=e=>g("kbd",{className:"HelpDialog__key",...e}),a4e=({onClose:e})=>{const t=se.useCallback(()=>{e&&e()},[e]);return g(de,{children:O(jr,{onCloseRequest:t,title:M("helpDialog.title"),className:"HelpDialog",children:[g(n4e,{}),O(i4e,{title:M("helpDialog.shortcuts"),children:[O(HE,{className:"HelpDialog__island--tools",caption:M("helpDialog.tools"),children:[g(fe,{label:M("toolBar.hand"),shortcuts:[B.H]}),g(fe,{label:M("toolBar.selection"),shortcuts:[B.V,B[1]]}),g(fe,{label:M("toolBar.rectangle"),shortcuts:[B.R,B[2]]}),g(fe,{label:M("toolBar.diamond"),shortcuts:[B.D,B[3]]}),g(fe,{label:M("toolBar.ellipse"),shortcuts:[B.O,B[4]]}),g(fe,{label:M("toolBar.arrow"),shortcuts:[B.A,B[5]]}),g(fe,{label:M("toolBar.line"),shortcuts:[B.L,B[6]]}),g(fe,{label:M("toolBar.freedraw"),shortcuts:[B.P,B[7]]}),g(fe,{label:M("toolBar.text"),shortcuts:[B.T,B[8]]}),g(fe,{label:M("toolBar.image"),shortcuts:[B[9]]}),g(fe,{label:M("toolBar.eraser"),shortcuts:[B.E,B[0]]}),g(fe,{label:M("toolBar.frame"),shortcuts:[B.F]}),g(fe,{label:M("toolBar.laser"),shortcuts:[B.K]}),g(fe,{label:M("labels.eyeDropper"),shortcuts:[B.I,"Shift+S","Shift+G"]}),g(fe,{label:M("helpDialog.editLineArrowPoints"),shortcuts:[q("CtrlOrCmd+Enter")]}),g(fe,{label:M("helpDialog.editText"),shortcuts:[q("Enter")]}),g(fe,{label:M("helpDialog.textNewLine"),shortcuts:[q("Enter"),q("Shift+Enter")]}),g(fe,{label:M("helpDialog.textFinish"),shortcuts:[q("Esc"),q("CtrlOrCmd+Enter")]}),g(fe,{label:M("helpDialog.curvedArrow"),shortcuts:["A",M("helpDialog.click"),M("helpDialog.click"),M("helpDialog.click")],isOr:!1}),g(fe,{label:M("helpDialog.curvedLine"),shortcuts:["L",M("helpDialog.click"),M("helpDialog.click"),M("helpDialog.click")],isOr:!1}),g(fe,{label:M("helpDialog.cropStart"),shortcuts:[M("helpDialog.doubleClick"),q("Enter")],isOr:!0}),g(fe,{label:M("helpDialog.cropFinish"),shortcuts:[q("Enter"),q("Escape")],isOr:!0}),g(fe,{label:M("toolBar.lock"),shortcuts:[B.Q]}),g(fe,{label:M("helpDialog.preventBinding"),shortcuts:[q("CtrlOrCmd")]}),g(fe,{label:M("toolBar.link"),shortcuts:[q("CtrlOrCmd+K")]}),g(fe,{label:M("toolBar.convertElementType"),shortcuts:["Tab","Shift+Tab"],isOr:!0})]}),O(HE,{className:"HelpDialog__island--view",caption:M("helpDialog.view"),children:[g(fe,{label:M("buttons.zoomIn"),shortcuts:[q("CtrlOrCmd++")]}),g(fe,{label:M("buttons.zoomOut"),shortcuts:[q("CtrlOrCmd+-")]}),g(fe,{label:M("buttons.resetZoom"),shortcuts:[q("CtrlOrCmd+0")]}),g(fe,{label:M("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),g(fe,{label:M("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),g(fe,{label:M("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),g(fe,{label:M("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),g(fe,{label:M("buttons.zenMode"),shortcuts:[q("Alt+Z")]}),g(fe,{label:M("buttons.objectsSnapMode"),shortcuts:[q("Alt+S")]}),g(fe,{label:M("labels.toggleGrid"),shortcuts:[q("CtrlOrCmd+'")]}),g(fe,{label:M("labels.viewMode"),shortcuts:[q("Alt+R")]}),g(fe,{label:M("labels.toggleTheme"),shortcuts:[q("Alt+Shift+D")]}),g(fe,{label:M("stats.fullTitle"),shortcuts:[q("Alt+/")]}),g(fe,{label:M("search.title"),shortcuts:[zi("searchMenu")]}),g(fe,{label:M("commandPalette.title"),shortcuts:P0?[zi("commandPalette")]:[zi("commandPalette"),zi("commandPalette",1)]})]}),O(HE,{className:"HelpDialog__island--editor",caption:M("helpDialog.editor"),children:[g(fe,{label:M("helpDialog.createFlowchart"),shortcuts:[q("CtrlOrCmd+Arrow Key")],isOr:!0}),g(fe,{label:M("helpDialog.navigateFlowchart"),shortcuts:[q("Alt+Arrow Key")],isOr:!0}),g(fe,{label:M("labels.moveCanvas"),shortcuts:[q(`Space+${M("helpDialog.drag")}`),q(`Wheel+${M("helpDialog.drag")}`)],isOr:!0}),g(fe,{label:M("buttons.clearReset"),shortcuts:[q("CtrlOrCmd+Delete")]}),g(fe,{label:M("labels.delete"),shortcuts:[q("Delete")]}),g(fe,{label:M("labels.cut"),shortcuts:[q("CtrlOrCmd+X")]}),g(fe,{label:M("labels.copy"),shortcuts:[q("CtrlOrCmd+C")]}),g(fe,{label:M("labels.paste"),shortcuts:[q("CtrlOrCmd+V")]}),g(fe,{label:M("labels.pasteAsPlaintext"),shortcuts:[q("CtrlOrCmd+Shift+V")]}),g(fe,{label:M("labels.selectAll"),shortcuts:[q("CtrlOrCmd+A")]}),g(fe,{label:M("labels.multiSelect"),shortcuts:[q(`Shift+${M("helpDialog.click")}`)]}),g(fe,{label:M("helpDialog.deepSelect"),shortcuts:[q(`CtrlOrCmd+${M("helpDialog.click")}`)]}),g(fe,{label:M("helpDialog.deepBoxSelect"),shortcuts:[q(`CtrlOrCmd+${M("helpDialog.drag")}`)]}),(w_||P0)&&g(fe,{label:M("labels.copyAsPng"),shortcuts:[q("Shift+Alt+C")]}),g(fe,{label:M("labels.copyStyles"),shortcuts:[q("CtrlOrCmd+Alt+C")]}),g(fe,{label:M("labels.pasteStyles"),shortcuts:[q("CtrlOrCmd+Alt+V")]}),g(fe,{label:M("labels.sendToBack"),shortcuts:[q(No?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),g(fe,{label:M("labels.bringToFront"),shortcuts:[q(No?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),g(fe,{label:M("labels.sendBackward"),shortcuts:[q("CtrlOrCmd+[")]}),g(fe,{label:M("labels.bringForward"),shortcuts:[q("CtrlOrCmd+]")]}),g(fe,{label:M("labels.alignTop"),shortcuts:[q("CtrlOrCmd+Shift+Up")]}),g(fe,{label:M("labels.alignBottom"),shortcuts:[q("CtrlOrCmd+Shift+Down")]}),g(fe,{label:M("labels.alignLeft"),shortcuts:[q("CtrlOrCmd+Shift+Left")]}),g(fe,{label:M("labels.alignRight"),shortcuts:[q("CtrlOrCmd+Shift+Right")]}),g(fe,{label:M("labels.duplicateSelection"),shortcuts:[q("CtrlOrCmd+D"),q(`Alt+${M("helpDialog.drag")}`)]}),g(fe,{label:M("helpDialog.toggleElementLock"),shortcuts:[q("CtrlOrCmd+Shift+L")]}),g(fe,{label:M("buttons.undo"),shortcuts:[q("CtrlOrCmd+Z")]}),g(fe,{label:M("buttons.redo"),shortcuts:KP?[q("CtrlOrCmd+Y"),q("CtrlOrCmd+Shift+Z")]:[q("CtrlOrCmd+Shift+Z")]}),g(fe,{label:M("labels.group"),shortcuts:[q("CtrlOrCmd+G")]}),g(fe,{label:M("labels.ungroup"),shortcuts:[q("CtrlOrCmd+Shift+G")]}),g(fe,{label:M("labels.flipHorizontal"),shortcuts:[q("Shift+H")]}),g(fe,{label:M("labels.flipVertical"),shortcuts:[q("Shift+V")]}),g(fe,{label:M("labels.showStroke"),shortcuts:[q("S")]}),g(fe,{label:M("labels.showBackground"),shortcuts:[q("G")]}),g(fe,{label:M("labels.showFonts"),shortcuts:[q("Shift+F")]}),g(fe,{label:M("labels.decreaseFontSize"),shortcuts:[q("CtrlOrCmd+Shift+<")]}),g(fe,{label:M("labels.increaseFontSize"),shortcuts:[q("CtrlOrCmd+Shift+>")]})]})]})]})})},l4e=2e3,P_=()=>{const[e,t]=D.useState(null),n=D.useRef(0),i=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},l4e)},r=D.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:r,onCopy:i}},CU=({title:e,name:t,checked:n,onChange:i,disabled:r=!1})=>g("div",{className:he("Switch",{toggled:n,disabled:r}),children:g("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:r,onChange:()=>i(!n),onKeyDown:s=>{s.key===" "&&i(!n)}})}),c4e="filter"in document.createElement("canvas").getContext("2d"),u4e=()=>O("div",{children:[g("h3",{children:M("canvasError.cannotShowPreview")}),g("p",{children:g("span",{children:M("canvasError.canvasTooBig")})}),O("em",{children:["(",M("canvasError.canvasTooBigTip"),")"]})]}),d4e=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:i,onExportImage:r,name:s})=>{const o=Hn(t,e),[a,l]=D.useState(s),[c,u]=D.useState(o),[d,f]=D.useState(e.exportBackground),[h,m]=D.useState(e.exportWithDarkMode),[p,y]=D.useState(e.exportEmbedScene),[b,E]=D.useState(e.exportScale),v=D.useRef(null),[w,S]=D.useState(null),{onCopy:k,copyStatus:_,resetCopyStatus:T}=P_();D.useEffect(()=>{T()},[a,d,h,b,p,T]);const{exportedElements:A,exportingFrame:C}=q5(t,e,c);return D.useEffect(()=>{const R=v.current;if(!R)return;const P=R.offsetWidth,N=R.offsetHeight;P&&ny({elements:A,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:b,exportEmbedScene:p},files:n,exportPadding:Yh,maxWidthOrHeight:Math.max(P,N),exportingFrame:C}).then(K=>(S(null),am(K).then(()=>{R.replaceChildren(K)}).catch(H=>{throw H.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(M("canvasError.canvasTooBig")):H}))).catch(K=>{console.error(K),S(K)})},[e,n,A,C,a,d,h,b,p]),O("div",{className:"ImageExportModal",children:[g("h3",{children:M("imageExportDialog.header")}),O("div",{className:"ImageExportModal__preview",children:[g("div",{className:"ImageExportModal__preview__canvas",ref:v,children:w&&g(u4e,{})}),g("div",{className:"ImageExportModal__preview__filename",children:!jc&&g("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:R=>{l(R.target.value),i.executeAction(E5e,"ui",R.target.value)}})})]}),O("div",{className:"ImageExportModal__settings",children:[g("h3",{children:M("imageExportDialog.header")}),o&&g(Wg,{label:M("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:g(CU,{name:"exportOnlySelected",checked:c,onChange:R=>{u(R)}})}),g(Wg,{label:M("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:g(CU,{name:"exportBackgroundSwitch",checked:d,onChange:R=>{f(R),i.executeAction(w5e,"ui",R)}})}),c4e&&g(Wg,{label:M("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:g(CU,{name:"exportDarkModeSwitch",checked:h,onChange:R=>{m(R),i.executeAction(_5e,"ui",R)}})}),g(Wg,{label:M("imageExportDialog.label.embedScene"),tooltip:M("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:g(CU,{name:"exportEmbedSwitch",checked:p,onChange:R=>{y(R),i.executeAction(gG,"ui",R)}})}),g(Wg,{label:M("imageExportDialog.label.scale"),name:"exportScale",children:g(qX,{name:"exportScale",value:b,onChange:R=>{E(R),i.executeAction(v5e,"ui",R)},choices:Cw.map(R=>({value:R,label:`${R}×`}))})}),O("div",{className:"ImageExportModal__settings__buttons",children:[g(Ks,{className:"ImageExportModal__settings__buttons__button",label:M("imageExportDialog.title.exportToPng"),onClick:()=>r(C8.png,A,{exportingFrame:C}),icon:WA,children:M("imageExportDialog.button.exportToPng")}),g(Ks,{className:"ImageExportModal__settings__buttons__button",label:M("imageExportDialog.title.exportToSvg"),onClick:()=>r(C8.svg,A,{exportingFrame:C}),icon:WA,children:M("imageExportDialog.button.exportToSvg")}),(w_||P0)&&g(Ks,{className:"ImageExportModal__settings__buttons__button",label:M("imageExportDialog.title.copyPngToClipboard"),status:_,onClick:async()=>{await r(C8.clipboard,A,{exportingFrame:C}),k()},icon:np,children:M("imageExportDialog.button.copyPngToClipboard")})]})]})]})},Wg=({label:e,children:t,tooltip:n,name:i})=>O("div",{className:"ImageExportModal__settings__setting",title:e,children:[O("label",{htmlFor:i,className:"ImageExportModal__settings__setting__label",children:[e,n&&g(il,{label:n,long:!0,children:hde})]}),g("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),f4e=({elements:e,appState:t,files:n,actionManager:i,onExportImage:r,onCloseRequest:s,name:o})=>{const[{appStateSnapshot:a,elementsSnapshot:l}]=D.useState(()=>({appStateSnapshot:Ba(t),elementsSnapshot:Ba(e)}));return g(jr,{onCloseRequest:s,size:"wide",title:!1,children:g(d4e,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:i,onExportImage:r,name:o})})},P4=({children:e,color:t})=>g("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":ci[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":ci[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":ci[t][9]},children:e}),h4e=({elements:e,appState:t,setAppState:n,files:i,actionManager:r,exportOpts:s,canvas:o,onCloseRequest:a})=>{const{onExportToBackend:l}=s;return g("div",{className:"ExportDialog ExportDialog--json",children:O("div",{className:"ExportDialog-cards",children:[s.saveFileToDisk&&O(P4,{color:"lime",children:[g("div",{className:"Card-icon",children:Eue}),g("h2",{children:M("exportDialog.disk_title")}),O("div",{className:"Card-details",children:[M("exportDialog.disk_details"),!jc&&r.renderAction("changeProjectName")]}),g(Be,{className:"Card-button",type:"button",title:M("exportDialog.disk_button"),"aria-label":M("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{r.executeAction(mG,"ui")}})]}),l&&O(P4,{color:"pink",children:[g("div",{className:"Card-icon",children:jb}),g("h2",{children:M("exportDialog.link_title")}),g("div",{className:"Card-details",children:M("exportDialog.link_details")}),g(Be,{className:"Card-button",type:"button",title:M("exportDialog.link_button"),"aria-label":M("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{tt("export","link",`ui (${Gm()})`),await l(e,t,i),a()}catch(c){n({errorMessage:c.message})}}})]}),s.renderCustomUI&&s.renderCustomUI(e,t,i,o)]})})},g4e=({elements:e,appState:t,files:n,actionManager:i,exportOpts:r,canvas:s,setAppState:o})=>{const a=se.useCallback(()=>{o({openDialog:null})},[o]);return g(de,{children:t.openDialog?.name==="jsonExport"&&g(jr,{onCloseRequest:a,title:M("buttons.export"),children:g(h4e,{elements:e,appState:t,setAppState:o,files:n,actionManager:i,onCloseRequest:a,exportOpts:r,canvas:s})})})},m4e="small",p4e=e=>O("label",{className:he("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${m4e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),g("div",{className:"ToolIcon__icon",children:s4})]}),U4e=({UIOptions:e})=>O(ct,{__fallback:!0,children:[g(ct.DefaultItems.LoadScene,{}),g(ct.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&g(ct.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&g(ct.DefaultItems.SaveAsImage,{}),g(ct.DefaultItems.SearchMenu,{}),g(ct.DefaultItems.Help,{}),g(ct.DefaultItems.ClearCanvas,{}),g(ct.Separator,{}),g(ct.Group,{title:"Excalidraw links",children:g(ct.DefaultItems.Socials,{})}),g(ct.Separator,{}),g(ct.DefaultItems.ToggleTheme,{}),g(ct.DefaultItems.ChangeCanvasBackground,{})]}),b4e=()=>O(_u,{__fallback:!0,children:[g(_u.Actions.SaveToDisk,{}),g(_u.Actions.ExportToImage,{})]}),y4e=({actionManager:e,appState:t,files:n,setAppState:i,elements:r,canvas:s,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:c,renderTopRightUI:u,renderCustomStats:d,UIOptions:f,onExportImage:h,renderWelcomeScreen:m,children:p,app:y,isCollaborating:b,generateLinkForSelection:E})=>{const v=ei(),w=Z8e(),S=w.tunnelsJotai.Provider,[k,_]=cn(O5),T=()=>f.canvasActions.export?g(g4e,{elements:r,appState:t,files:n,actionManager:e,exportOpts:f.canvasActions.export,canvas:s,setAppState:i}):null,A=()=>!f.canvasActions.saveAsImage||t.openDialog?.name!=="imageExport"?null:g(f4e,{elements:r,appState:t,files:n,actionManager:e,onExportImage:h,onCloseRequest:()=>i({openDialog:null}),name:y.getName()}),C=()=>O("div",{style:{position:"relative"},children:[g(w.MainMenuTunnel.Out,{}),m&&g(w.WelcomeScreenMenuHintTunnel.Out,{})]}),R=()=>g(gm,{heading:"selectedShapeActions",className:he("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:g(js,{className:_c.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:g(eX,{appState:t,elementsMap:y.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:y})})}),P=()=>{const z=T9(t,r),V=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&t.openDialog?.name!=="elementLinkSelector";return g(mX,{side:"top",children:O("div",{className:"App-menu App-menu_top",children:[O(fs.Col,{gap:6,className:he("App-menu_top__left"),children:[C(),z&&R()]}),!t.viewModeEnabled&&t.openDialog?.name!=="elementLinkSelector"&&g(gm,{heading:"shapes",className:"shapes-section",children:$=>O("div",{style:{position:"relative"},children:[m&&g(w.WelcomeScreenToolbarHintTunnel.Out,{}),g(fs.Col,{gap:4,align:"start",children:O(fs.Row,{gap:1,className:he("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[O(js,{padding:1,className:he("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[g(UX,{appState:t,isMobile:v.editor.isMobile,device:v,app:y}),$,O(fs.Row,{gap:1,children:[g(bX,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:M("toolBar.penMode"),penDetected:t.penDetected}),g(gX,{checked:t.activeTool.locked,onChange:o,title:M("toolBar.lock")}),g("div",{className:"App-toolbar__divider"}),g(pX,{checked:_h(t),onChange:()=>a(),title:M("toolBar.hand"),isMobile:!0}),g(tX,{appState:t,activeTool:t.activeTool,UIOptions:f,app:y})]})]}),b&&g(js,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:g(p4e,{title:M("toolBar.laser"),checked:t.activeTool.type===Xn.laser,onChange:()=>y.setActiveTool({type:Xn.laser}),isMobile:!0})})]})})]})}),O("div",{className:he("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&g(yX,{collaborators:t.collaborators,userToFollow:t.userToFollow?.socketId||null}),u?.(v.editor.isMobile,t),!t.viewModeEnabled&&t.openDialog?.name!=="elementLinkSelector"&&(!K||t.openSidebar?.name!==ps.name)&&g(w.DefaultSidebarTriggerTunnel.Out,{}),V&&g(pa,{app:y,onClose:()=>{e.executeAction(w4)},renderCustomStats:d})]})]})})},N=()=>g(AR,{__fallback:!0,onDock:z=>{tt("sidebar",`toggleDock (${z?"dock":"undock"})`,`(${v.editor.isMobile?"mobile":"desktop"})`)}}),K=Uz(R_),H=O(de,{children:[p,g(U4e,{UIOptions:f}),g(AR.Trigger,{__fallback:!0,icon:A9,title:q1(M("toolBar.library")),onToggle:z=>{z&&tt("sidebar",`${ps.name} (open)`,`button (${v.editor.isMobile?"mobile":"desktop"})`)},tab:ps.defaultTab,children:M("toolBar.library")}),g(b4e,{}),t.openDialog?.name==="ttd"&&g(_j,{__fallback:!0}),t.isLoading&&g(hX,{delay:250}),t.errorMessage&&g(N_,{onClose:()=>i({errorMessage:null}),children:t.errorMessage}),k&&!v.editor.isMobile&&g(Mge,{colorPickerType:k.colorPickerType,onCancel:()=>{_(null)},onChange:(z,V,$,{altKey:G})=>{if(!(z!=="elementBackground"&&z!=="elementStroke"))if($.length){for(const J of $)fi(J,be(r),{[G&&k.swapPreviewOnAlt?z==="elementBackground"?"strokeColor":"backgroundColor":z==="elementBackground"?"backgroundColor":"strokeColor"]:V}),Et.delete(J);y.scene.triggerUpdate()}else i(z==="elementBackground"?{currentItemBackgroundColor:V}:{currentItemStrokeColor:V})},onSelect:(z,V)=>{_($=>$?.keepOpenOnAlt&&V.altKey?$:null),k?.onSelect?.(z,V)}}),t.openDialog?.name==="help"&&g(a4e,{onClose:()=>{i({openDialog:null})}}),g(tEe,{}),t.openDialog?.name==="elementLinkSelector"&&g(t4e,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{i({openDialog:null})},scene:y.scene,appState:t,generateLinkForSelection:E}),g(w.OverwriteConfirmDialogTunnel.Out,{}),A(),T(),t.pasteDialog.shown&&g(E3e,{setAppState:i,appState:t,onClose:()=>i({pasteDialog:{shown:!1,data:null}})}),v.editor.isMobile&&g(y3e,{app:y,appState:t,elements:r,actionManager:e,renderJSONExportDialog:T,renderImageExportDialog:A,setAppState:i,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:u,renderCustomStats:d,renderSidebars:N,device:v,renderWelcomeScreen:m,UIOptions:f}),!v.editor.isMobile&&O(de,{children:[O("div",{className:"layer-ui__wrapper",style:t.openSidebar&&K&&v.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[m&&g(w.WelcomeScreenCenterTunnel.Out,{}),P(),g(EX,{appState:t,actionManager:e,showExitZenModeBtn:c,renderWelcomeScreen:m}),t.scrolledOutside&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(z=>({...W0(r,z)}))},children:M("buttons.scrollBackToContent")})]}),N()]})]});return g(RV.Provider,{value:t,children:g(S,{children:g(qG.Provider,{value:w,children:H})})})},zR=e=>{const{suggestedBindings:t,startBoundElement:n,cursorButton:i,scrollX:r,scrollY:s,...o}=e;return o},E4e=(e,t)=>{if(e.children!==t.children)return!1;const{canvas:n,appState:i,...r}=e,{canvas:s,appState:o,...a}=t;return Bi(zR(i),zR(o),{selectedElementIds:Bi,selectedGroupIds:Bi})&&Bi(r,a)},v4e=se.memo(y4e,E4e),w4e="small",VE=e=>O("label",{className:he("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${w4e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:e.icon})]}),_4e=({trails:e})=>{const t=D.useRef(null);return D.useEffect(()=>{if(t.current)for(const n of e)n.start(t.current);return()=>{for(const n of e)n.stop()}},e),g("div",{className:"SVGLayer",children:g("svg",{ref:t})})},T4e=e=>{const t=D.useRef(!1);return D.useEffect(()=>{if(!t.current){t.current=!0;return}const n=new Map,i=new Map,r=new Map,s=new Map,o=new Map;e.appState.collaborators.forEach((l,c)=>{if(l.selectedElementIds)for(const u of Object.keys(l.selectedElementIds))r.has(u)||r.set(u,[]),r.get(u).push(c);!l.pointer||l.pointer.renderCursor===!1||(l.username&&s.set(c,l.username),l.userState&&o.set(c,l.userState),i.set(c,Nr({sceneX:l.pointer.x,sceneY:l.pointer.y},e.appState)),n.set(c,l.button))});const a=e.containerRef?.current&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";XEe({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:i,remotePointerButton:n,remoteSelectedElementIds:r,remotePointerUsernames:s,remotePointerUserStates:o,selectionColor:a,renderScrollbars:e.renderScrollbars},device:e.device,callback:e.renderInteractiveSceneCallback},A_())}),g("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?vt.GRAB:vt.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:M("labels.drawingCanvas")})},HR=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches,activeLockedId:e.activeLockedId}),S4e=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements||e.renderScrollbars!==t.renderScrollbars?!1:Bi(HR(e.appState),HR(t.appState)),I4e=se.memo(T4e,S4e),x4e=e=>{const t=D.useRef(null),n=D.useRef(!1);return D.useEffect(()=>{const i=t.current;if(!i)return;const r=e.canvas;n.current||(n.current=!0,i.replaceChildren(r),r.classList.add("excalidraw__canvas","static"));const s=`${e.appState.width}px`,o=`${e.appState.height}px`;r.style.width!==s&&(r.style.width=s),r.style.height!==o&&(r.style.height=o);const a=e.appState.width*e.scale,l=e.appState.height*e.scale;r.width!==a&&(r.width=a),r.height!==l&&(r.height=l),q$({canvas:r,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},A_())}),g("div",{className:"excalidraw__canvas-wrapper",ref:t})},VR=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),C4e=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:Bi(VR(e.appState),VR(t.appState))&&Bi(e.renderConfig,t.renderConfig),A4e=se.memo(x4e,C4e),Tj=({canvas:e,rc:t,newElement:n,elementsMap:i,allElementsMap:r,scale:s,appState:o,renderConfig:a})=>{if(e){const[l,c]=Y5(e,s),u=W5({canvas:e,scale:s,normalizedWidth:l,normalizedHeight:c});u.save(),u.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"?ou(n,i,r,t,u,a,o):u.clearRect(0,0,l,c)}},M4e=Wh(e=>{Tj(e)},{trailing:!0}),k4e=(e,t)=>{if(t){M4e(e);return}Tj(e)},R4e=e=>{const t=D.useRef(null);return D.useEffect(()=>{t.current&&k4e({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},A_())}),g("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},D4e=5e3,L4e=({message:e,onClose:t,closable:n=!1,duration:i=D4e,style:r})=>{const s=D.useRef(0),o=i!==1/0,a=D.useCallback(()=>{o&&(s.current=window.setTimeout(()=>t(),i))},[t,i,o]);return D.useEffect(()=>{if(o)return a(),()=>clearTimeout(s.current)},[a,e,i,o]),O("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(s?.current):void 0,onMouseLeave:o?a:void 0,style:r,children:[g("p",{className:"Toast__message",children:e}),n&&g(Be,{icon:Sd,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},O4e=({app:e,activeLockedId:t})=>{const n=e.scene.getElement(t),i=n?[n]:It(e.scene.getNonDeletedElementsMap(),t);if(i.length===0)return null;const[r,s]=ft(i),{x:o,y:a}=Nr({sceneX:r,sceneY:s},e.state);return g("div",{className:"UnlockPopup",style:{bottom:`${e.state.height+12-a+e.state.offsetTop}px`,left:`${o-e.state.offsetLeft}px`},onClick:()=>{vn.flushSync(()=>{const l=Jm(i,e.state);e.setState({selectedElementIds:i.reduce((c,u)=>({...c,[u.id]:!0}),{}),selectedGroupIds:l,activeLockedId:null})}),e.actionManager.executeAction(TG)},title:M("labels.elementLock.unlock"),children:iue})};function N4e(e){return new Worker("/excalidraw/assets/pdf-worker-DsjxKzA0.js",{type:"module",name:e?.name})}const P4e=(e,t)=>new Promise((n,i)=>{let r=0,s=!1;const o=()=>{let a=new N4e;a.onmessage=({data:l})=>{l.converting&&(r=l.converting.pageIndex),l.converted&&(s=!1,t(l.converted.svgFile)),l.done&&(a.terminate(),n())},a.onerror=l=>{s?(console.log("PDF worker failed twice",l.error),i(l.error)):(a.terminate(),s=!0,console.log("Respawning PDF worker"),o())},a.postMessage({pdf:e,fromPage:r})};o()}),Sj=se.createContext(null),Ij=se.createContext(null),xj={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},F_=se.createContext(xj);F_.displayName="DeviceContext";const B_=se.createContext({container:null,id:null});B_.displayName="ExcalidrawContainerContext";const z_=se.createContext([]);z_.displayName="ExcalidrawElementsContext";const H_=se.createContext({...Xo(),width:0,height:0,offsetLeft:0,offsetTop:0});H_.displayName="ExcalidrawAppStateContext";const V_=se.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});V_.displayName="ExcalidrawSetAppStateContext";const $_=se.createContext(null);$_.displayName="ExcalidrawActionManagerContext";const ro=()=>D.useContext(Sj),cp=()=>D.useContext(Ij),ei=()=>D.useContext(F_),Qo=()=>D.useContext(B_),ay=()=>D.useContext(z_),up=()=>D.useContext(H_),bn=()=>D.useContext(V_),wr=()=>D.useContext($_);let Kg=!1,$E=0,tu=!1,Zg=!1,GE=!1,qg={horizontal:null,vertical:null},Tl=0,Qg=!1;const XE=new Map;let AU=!1,$R=0,GR=!1,Jg=null;const lt={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null};class G_ extends se.Component{canvas;interactiveCanvas=null;rc;unmounted=!1;actionManager;device=xj;excalidrawContainerRef=se.createRef();scene;fonts;renderer;visibleElements;resizeObserver;nearestScrollableContainer;library;libraryItemsFromStorage;id;store;history;excalidrawContainerValue;files={};imageCache=new Map;iFrameRefs=new Map;embedsValidationStatus=new Map;initializedEmbeds=new Set;elementsPendingErasure=new Set;flowChartCreator=new cce;flowChartNavigator=new lce;hitLinkElement;lastPointerDownEvent=null;lastPointerUpEvent=null;lastPointerMoveEvent=null;lastPointerMoveCoords=null;lastViewportPosition={x:0,y:0};animationFrameHandler=new pEe;laserTrails=new e3e(this.animationFrameHandler,this);eraserTrail=new d3e(this.animationFrameHandler,this);lassoTrail=new u3e(this.animationFrameHandler,this);onChangeEmitter=new Ns;onPointerDownEmitter=new Ns;onPointerUpEmitter=new Ns;onUserFollowEmitter=new Ns;onScrollChangeEmitter=new Ns;missingPointerEventCleanupEmitter=new Ns;onRemoveEventListenersEmitter=new Ns;constructor(t){super(t);const n=Xo(),{excalidrawAPI:i,viewModeEnabled:r=!1,zenModeEnabled:s=!1,gridModeEnabled:o=!1,objectsSnapModeEnabled:a=!1,theme:l=n.theme,name:c=`${M("labels.untitled")}-${cC()}`}=t;if(this.state={...n,theme:l,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:r,zenModeEnabled:s,objectsSnapModeEnabled:a,gridModeEnabled:o??n.gridModeEnabled,name:c,width:window.innerWidth,height:window.innerHeight},this.id=BF(),this.library=new Vye(this),this.actionManager=new mEe(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new $b,this.canvas=document.createElement("canvas"),this.rc=Vc.canvas(this.canvas),this.renderer=new mR(this.scene),this.visibleElements=[],this.store=new Mle(this),this.history=new vu(this.store),i){const u={updateScene:this.updateScene,mutateElement:this.mutateElement,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,getSceneElementsMapIncludingDeleted:this.getSceneElementsMapIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:d=>{this.actionManager.registerAction(d)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:d=>this.onChangeEmitter.on(d),onIncrement:d=>this.store.onStoreIncrementEmitter.on(d),onPointerDown:d=>this.onPointerDownEmitter.on(d),onPointerUp:d=>this.onPointerUpEmitter.on(d),onScrollChange:d=>this.onScrollChangeEmitter.on(d),onUserFollow:d=>this.onUserFollowEmitter.on(d)};typeof i=="function"?i(u):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new He(this.scene),this.history=new vu(this.store),this.actionManager.registerAll(a4),this.actionManager.registerAction(fEe(this.history)),this.actionManager.registerAction(hEe(this.history))}updateEditorAtom=(t,...n)=>{const i=Rr.set(t,...n);return this.triggerRender(),i};onWindowMessage(t){if(t.origin!=="https://player.vimeo.com"&&t.origin!=="https://www.youtube.com")return;let n=null;try{n=JSON.parse(t.data)}catch{}if(n)switch(t.origin){case"https://player.vimeo.com":if(n.method==="paused"){let i=null;const r=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!r)break;for(const s of r)s.contentWindow===t.source&&(i=s.contentWindow);i?.postMessage(JSON.stringify({method:n.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(n.event==="infoDelivery"&&n.info&&n.id&&typeof n.info.playerState=="number"){const i=n.id,r=n.info.playerState;Object.values(tU).includes(r)&&XE.set(i,r)}break}}cacheEmbeddableRef(t,n){n&&this.iFrameRefs.set(t.id,n)}getEffectiveGridSize=()=>fm(this)?this.state.gridSize:null;getHTMLIFrameElement(t){return this.iFrameRefs.get(t.id)}handleEmbeddableCenterClick(t){if(this.state.activeEmbeddable?.element===t&&this.state.activeEmbeddable?.state==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:t,state:"active"},selectedElementIds:{[t.id]:!0},newElement:null,selectionElement:null})},100),Ll(t)))return;const n=this.getHTMLIFrameElement(t);if(n?.contentWindow){if(n.src.includes("youtube")){const i=XE.get(t.id);switch(i||(XE.set(t.id,tU.UNSTARTED),n.contentWindow.postMessage(JSON.stringify({event:"listening",id:t.id}),"*")),i){case tU.PLAYING:case tU.BUFFERING:n.contentWindow?.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:n.contentWindow?.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}n.src.includes("player.vimeo.com")&&n.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(t,n,i,r){return t&&!n.altKey&&!n.shiftKey&&!n.metaKey&&!n.ctrlKey&&(this.state.activeEmbeddable?.element!==t||this.state.activeEmbeddable?.state==="hover"||!this.state.activeEmbeddable)&&i>=t.x+t.width/3&&i<=t.x+2*t.width/3&&r>=t.y+t.height/3&&r<=t.y+2*t.height/3}updateEmbedValidationStatus=(t,n)=>{this.embedsValidationStatus.set(t.id,n),Et.delete(t)};updateEmbeddables=()=>{const t=new Set;let n=!1;this.scene.getNonDeletedElements().filter(i=>{if(ur(i)){if(t.add(i.id),!this.embedsValidationStatus.has(i.id)){n=!0;const r=l2(i.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(i,r)}}else Ll(i)&&t.add(i.id);return!1}),n&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((i,r)=>{t.has(r)||this.iFrameRefs.delete(r)})};renderEmbeddables(){const t=this.state.zoom.value,n=this.state.width,i=this.state.height,r=this.scene.getNonDeletedElements().filter(s=>ur(s)&&this.embedsValidationStatus.get(s.id)===!0||Ll(s));return g(de,{children:r.map(s=>{const{x:o,y:a}=Nr({sceneX:s.x,sceneY:s.y},this.state),l=Hb(s,n,i,this.state,this.scene.getNonDeletedElementsMap()),c=this.initializedEmbeds.has(s.id);if(l&&!c&&this.initializedEmbeds.add(s.id),!(l||c))return null;let d;if(Ll(s)){d=null;const m=(s.customData?.generationData??this.magicGenerations.get(s.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(m.status==="done"){const p=m.html;d={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>p}}else if(m.status==="pending")d={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>t0(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===Te.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let p;m.code==="ERR_GENERATION_INTERRUPTED"?p="Generation was interrupted...":p=m.message||"Generation failed",d={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>t0(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${Pe.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${p}</h3>
                  `)}}}else d=If(Pw(s.link||""));const f=this.state.activeEmbeddable?.element===s&&this.state.activeEmbeddable?.state==="active",h=this.state.activeEmbeddable?.element===s&&this.state.activeEmbeddable?.state==="hover";return g("div",{className:he("excalidraw__embeddable-container",{"is-hovered":h}),style:{transform:l?`translate(${o-this.state.offsetLeft}px, ${a-this.state.offsetTop}px) scale(${t})`:"none",display:l?"block":"none",opacity:TB(s,Ur(s,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,this.state.openDialog?.name==="elementLinkSelector"?aF:1),"--embeddable-radius":`${Ji(Math.min(s.width,s.height),s)}px`},children:O("div",{className:"excalidraw__embeddable-container__inner",style:{width:l?`${s.width}px`:0,height:l?`${s.height}px`:0,transform:l?`rotate(${s.angle}rad)`:"none",pointerEvents:f?ru.enabled:ru.disabled},children:[h&&g("div",{className:"excalidraw__embeddable-hint",children:M("buttons.embeddableInteractionButton")}),g("div",{className:"excalidraw__embeddable__outer",style:{padding:`${s.strokeWidth}px`},children:(ur(s)?this.props.renderEmbeddable?.(s,this.state):null)??g("iframe",{ref:m=>this.cacheEmbeddableRef(s,m),className:"excalidraw__embeddable",srcDoc:d?.type==="document"?d.srcdoc(this.state.theme):void 0,src:d?.type!=="document"?d?.link??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${d?.sandbox?.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},s.id)})})}getFrameNameDOMId=t=>`${this.id}-frame-name-${t.id}`;frameNameBoundsCache={get:t=>{let n=this.frameNameBoundsCache._cache.get(t.id);if(!n||n.zoom!==this.state.zoom.value||n.versionNonce!==t.versionNonce){const i=document.getElementById(this.getFrameNameDOMId(t));if(i){const r=i.getBoundingClientRect(),s=Tt({clientX:r.x,clientY:r.y},this.state),o=Tt({clientX:r.right,clientY:r.bottom},this.state);return n={x:s.x,y:s.y,width:o.x-s.x,height:o.y-s.y,angle:0,zoom:this.state.zoom.value,versionNonce:t.versionNonce},this.frameNameBoundsCache._cache.set(t.id,n),n}return null}return n},_cache:new Map};resetEditingFrame=t=>{t&&this.scene.mutateElement(t,{name:t.name?.trim()||null}),this.setState({editingFrame:null})};renderFrameNames=()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;const t=this.state.theme===Te.DARK,n=this.scene.getNonDeletedFramesLikes(),i=n.length>0&&this.state.searchMatches?.focusedId&&pe(this.scene.getElement(this.state.searchMatches.focusedId))?this.state.searchMatches.matches.find(r=>r.focus):null;return n.map(r=>{if(!Hb(r,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===r.id&&this.resetEditingFrame(r),null;const{x:s,y:o}=Nr({sceneX:r.x,sceneY:r.y},this.state),a=6;let l;const c=yB(r);if(r.id===this.state.editingFrame){const u=c;l=g("input",{autoFocus:!0,value:u,onChange:d=>{this.scene.mutateElement(r,{name:d.target.value})},onFocus:d=>d.target.select(),onBlur:()=>this.resetEditingFrame(r),onKeyDown:d=>{(d.key===B.ESCAPE||d.key===B.ENTER)&&this.resetEditingFrame(r)},style:{background:this.state.viewBackgroundColor,filter:t?xw:"none",zIndex:2,border:"none",display:"block",padding:`${a}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:`${Rt.nameFontSize}px`,transform:`translate(-${a}px, ${a}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-s-a}px`},size:u.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else l=c;return g("div",{id:this.getFrameNameDOMId(r),style:{position:"absolute",bottom:`${this.state.height+Rt.nameOffsetY-o+this.state.offsetTop}px`,left:`${s-this.state.offsetLeft}px`,zIndex:2,fontSize:Rt.nameFontSize,color:t?Rt.nameColorDarkTheme:Rt.nameColorLightTheme,lineHeight:Rt.nameLineHeight,width:"max-content",maxWidth:i?.id===r.id&&i?.focus?"none":`${r.width*this.state.zoom.value}px`,overflow:r.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:vt.MOVE,pointerEvents:this.state.viewModeEnabled?ru.disabled:ru.enabled},onPointerDown:u=>this.handleCanvasPointerDown(u),onWheel:u=>this.handleWheel(u),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:r.id})},children:l},r.id)})};toggleOverscrollBehavior(t){document.documentElement.style.overscrollBehaviorX=t.type==="pointerenter"?"none":"auto"}render(){const t=this.scene.getSelectedElements(this.state),{renderTopRightUI:n,renderCustomStats:i}=this.props,r=this.scene.getSceneNonce(),{elementsMap:s,visibleElements:o}=this.renderer.getRenderableElements({sceneNonce:r,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:this.state.newElement?.id});this.visibleElements=o;const a=this.scene.getNonDeletedElementsMap(),l="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",c=t[0],u=Rr.get(ma)?.type==="panel";return g("div",{className:he("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||this.state.openDialog?.name==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":l?ru.disabled:ru.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:g(Sj.Provider,{value:this,children:g(Ij.Provider,{value:this.props,children:g(B_.Provider,{value:this.excalidrawContainerValue,children:g(F_.Provider,{value:this.device,children:g(V_.Provider,{value:this.setAppState,children:g(H_.Provider,{value:this.state,children:O(z_.Provider,{value:this.scene.getNonDeletedElements(),children:[O($_.Provider,{value:this.actionManager,children:[g(v4e,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:Y0().code,renderTopRightUI:n,renderCustomStats:i,showExitZenModeBtn:typeof this.props?.zenModeEnabled>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),g("div",{className:"excalidraw-textEditorContainer"}),g("div",{className:"excalidraw-contextMenuContainer"}),g("div",{className:"excalidraw-eye-dropper-container"}),g(_4e,{trails:[this.laserTrails,this.lassoTrail,this.eraserTrail]}),t.length===1&&this.state.openDialog?.name!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&g(G5e,{element:c,scene:this.scene,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},c.id),this.props.aiEnabled!==!1&&t.length===1&&r2(c)&&g(pR,{element:c,elementsMap:s,children:g(VE,{title:M("labels.convertToCode"),icon:_H,checked:!1,onChange:()=>this.onMagicFrameGenerate(c,"button")})}),t.length===1&&Ll(c)&&c.customData?.generationData?.status==="done"&&O(pR,{element:c,elementsMap:s,children:[g(VE,{title:M("labels.copySource"),icon:np,checked:!1,onChange:()=>this.onIframeSrcCopy(c)}),g(VE,{title:"Enter fullscreen",icon:Ede,checked:!1,onChange:()=>{const d=this.getHTMLIFrameElement(c);if(d)try{d.requestFullscreen(),this.setState({activeEmbeddable:{element:c,state:"active"},selectedElementIds:{[c.id]:!0},newElement:null,selectionElement:null})}catch(f){console.warn(f),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&g(L4e,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&g(g3e,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:d=>{this.setState({contextMenu:null},()=>{this.focusContainer(),d?.()})}}),g(A4e,{canvas:this.canvas,rc:this.rc,elementsMap:s,allElementsMap:a,visibleElements:o,sceneNonce:r,selectionNonce:this.state.selectionElement?.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:fm(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&g(R4e,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:s,allElementsMap:a,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),g(I4e,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:s,visibleElements:o,allElementsMap:a,selectedElements:t,sceneNonce:r,selectionNonce:this.state.selectionElement?.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderScrollbars:this.props.renderScrollbars===!0,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&g(m3e,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames(),this.state.activeLockedId&&g(O4e,{app:this,activeLockedId:this.state.activeLockedId}),u&&g(tye,{app:this})]}),this.renderEmbeddables()]})})})})})})})})}focusContainer=()=>{this.excalidrawContainerRef.current?.focus()};getSceneElementsIncludingDeleted=()=>this.scene.getElementsIncludingDeleted();getSceneElementsMapIncludingDeleted=()=>this.scene.getElementsMapIncludingDeleted();getSceneElements=()=>this.scene.getNonDeletedElements();onInsertElements=t=>{this.addElementsFromPasteOrLibrary({elements:t,position:"center",files:null})};onExportImage=async(t,n,i)=>{tt("export",t,"ui");const r=await Q5(t,n,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:i.exportingFrame}).catch(EF).catch(s=>{console.error(s),this.setState({errorMessage:s.message})});this.state.exportEmbedScene&&r&&b_(r)&&this.setState({fileHandle:r})};magicGenerations=new Map;updateMagicGeneration=({frameElement:t,data:n})=>{n.status==="pending"?this.scene.mutateElement(t,{customData:{generationData:void 0}},{informMutation:!1,isDragging:!1}):this.scene.mutateElement(t,{customData:{generationData:n}},{informMutation:!1,isDragging:!1}),this.magicGenerations.set(t.id,n),this.triggerRender()};plugins={};setPlugins(t){Object.assign(this.plugins,t)}async onMagicFrameGenerate(t,n){const i=this.plugins.diagramToCode?.generate;if(!i){this.setState({errorMessage:"No diagram to code plugin found"});return}const r=d9(this.scene.getNonDeletedElements(),t).filter(o=>!r2(o));if(!r.length){n==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),tt("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}const s=this.insertIframeElement({sceneX:t.x+t.width+30,sceneY:t.y,width:t.width,height:t.height});if(s){this.updateMagicGeneration({frameElement:s,data:{status:"pending"}}),this.setState({selectedElementIds:{[s.id]:!0}}),tt("ai","generate (start)","d2c");try{const{html:o}=await i({frame:t,children:r});if(tt("ai","generate (success)","d2c"),!o.trim()){this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}const a=o.includes("<!DOCTYPE html>")&&o.includes("</html>")?o.slice(o.indexOf("<!DOCTYPE html>"),o.indexOf("</html>")+7):o;this.updateMagicGeneration({frameElement:s,data:{status:"done",html:a}})}catch(o){tt("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:o.message||"Unknown error during generation"}})}}}onIframeSrcCopy(t){t.customData?.generationData?.status==="done"&&(Yc(t.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}onMagicframeToolSelect=()=>{const t=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(t.length===0)this.setActiveTool({type:Xn.magicframe}),tt("ai","tool-select (empty-selection)","d2c");else{const n=t.length===1&&r2(t[0])&&t[0];if(!n&&t.some(r=>pe(r)||r.frameId)){this.setActiveTool({type:Xn.magicframe});return}tt("ai","tool-select (existing selection)","d2c");let i;if(n)i=n;else{const[r,s,o,a]=ft(t),l=50;i=B7({...Rt,x:r-l,y:s-l,width:o-r+l*2,height:a-s+l*2,opacity:100,locked:!1}),this.scene.insertElement(i);for(const c of t)this.scene.mutateElement(c,{frameId:i.id});this.setState({selectedElementIds:{[i.id]:!0}})}this.onMagicFrameGenerate(i,"upstream")}};openEyeDropper=({type:t})=>{this.updateEditorAtom(O5,{swapPreviewOnAlt:!0,colorPickerType:t==="stroke"?"elementStroke":"elementBackground",onSelect:(n,i)=>{const r=t==="background"&&i.altKey||t==="stroke"&&!i.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?r?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:n},captureUpdate:j.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:n},captureUpdate:j.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(o=>this.state.selectedElementIds[o.id]?Ee(o,{[r?"strokeColor":"backgroundColor"]:n}):o),captureUpdate:j.IMMEDIATELY})},keepOpenOnAlt:!1})};dismissLinearEditor=()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})};syncActionResult=Zt(t=>{if(this.unmounted||t===!1)return;this.store.scheduleAction(t.captureUpdate);let n=!1,i=null;if(t.elements&&(this.scene.replaceAllElements(t.elements),n=!0),t.files&&(this.addMissingFiles(t.files,t.replaceFiles),this.addNewImagesToImageCache()),t.appState||i||this.state.contextMenu){let r=t?.appState?.viewModeEnabled||!1,s=t?.appState?.zenModeEnabled||!1;const o=t?.appState?.theme||this.props.theme||Te.LIGHT,a=t?.appState?.name??this.state.name,l=t?.appState?.errorMessage??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(r=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(s=this.props.zenModeEnabled),i=t.appState?.editingTextElement||null,t.elements&&i&&t.elements.forEach(c=>{i?.id===c.id&&i!==c&&Y7(c)&&le(c)&&(i=c)}),i?.isDeleted&&(i=null),this.setState(c=>{const u=t.appState||{};return{...c,...u,contextMenu:null,editingTextElement:i,viewModeEnabled:r,zenModeEnabled:s,theme:o,name:a,errorMessage:l}}),n=!0}n||this.scene.triggerUpdate()});onBlur=Zt(()=>{tu=!1,this.setState({isBindingEnabled:!0})});onUnload=()=>{this.onBlur()};disableEvent=t=>{t.preventDefault()};resetHistory=()=>{this.history.clear()};resetStore=()=>{this.store.clear()};resetScene=Zt(t=>{this.scene.replaceAllElements([]),this.setState(n=>({...Xo(),isLoading:t?.resetLoadingState?!1:n.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()});initializeScene=async()=>{"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async i=>{if(!i.files.length)return;const r=i.files[0],s=await r.getFile();this.loadFileToCanvas(new File([s],s.name||"",{type:s.type}),r)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let t=null;try{typeof this.props.initialData=="function"?t=await this.props.initialData()||null:t=await this.props.initialData||null,t?.libraryItems&&this.library.updateLibrary({libraryItems:t.libraryItems,merge:!0}).catch(i=>{console.error(i)})}catch(i){console.error(i),t={appState:{errorMessage:i.message||"Encountered an error during importing or restoring scene data"}}}const n=ld(t,null,null,{repairBindings:!0});n.appState={...n.appState,theme:this.props.theme||n.appState.theme,openSidebar:n.appState?.openSidebar||this.state.openSidebar,activeTool:n.appState.activeTool.type==="image"?{...n.appState.activeTool,type:"selection"}:n.appState.activeTool,isLoading:!1,toast:this.state.toast},t?.scrollToContent&&(n.appState={...n.appState,...W0(n.elements,{...n.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...n,captureUpdate:j.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(i=>{this.fonts.onLoaded(i)}),Hf(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})};isMobileBreakpoint=(t,n)=>t<Hie||n<$ie&&t<Vie;refreshViewportBreakpoints=()=>{if(!this.excalidrawContainerRef.current)return;const{clientWidth:n,clientHeight:i}=document.body,r=this.device.viewport,s=e2(r,{isLandscape:n>i,isMobile:this.isMobileBreakpoint(n,i)});return r!==s?(this.device={...this.device,viewport:s},!0):!1};refreshEditorBreakpoints=()=>{const t=this.excalidrawContainerRef.current;if(!t)return;const{width:n,height:i}=t.getBoundingClientRect(),r=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:Gie,s=this.device.editor,o=e2(s,{isMobile:this.isMobileBreakpoint(n,i),canFitSidebar:n>r});return s!==o?(this.device={...this.device,editor:o},!0):!1};clearImageShapeCache(t){const n=t??this.files;this.scene.getNonDeletedElements().forEach(i=>{Tn(i)&&n[i.fileId]&&(this.imageCache.delete(i.fileId),Et.delete(i))})}async componentDidMount(){this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,this.store.onDurableIncrementEmitter.on(i=>{this.history.record(i.delta)});const{onIncrement:t}=this.props;t&&this.store.onStoreIncrementEmitter.on(i=>{t(i)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints(),g7&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),this.resizeObserver?.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),_ie()&&!woe()&&this.setState({errorMessage:g(f3e,{})})}componentWillUnmount(){window.launchQueue?.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new $b,this.fonts=new He(this.scene),this.renderer=new mR(this.scene),this.files={},this.imageCache.clear(),this.resizeObserver?.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),this.store.onDurableIncrementEmitter.clear(),Et.destroy(),Di.destroy(),clearTimeout(Tl),Hn.clearCache(),Mi.clearCache(),Tl=0,document.documentElement.style.overscrollBehaviorX=""}onResize=Zt(()=>{this.scene.getElementsIncludingDeleted().forEach(t=>Et.delete(t)),this.refreshViewportBreakpoints(),this.updateDOMRect(),g7||this.refreshEditorBreakpoints(),this.setState({})});onFullscreenChange=()=>{!document.fullscreenElement&&this.state.activeEmbeddable?.state==="active"&&this.setState({activeEmbeddable:null})};removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(Kt(document,ee.KEYDOWN,this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(Kt(this.excalidrawContainerRef.current,ee.WHEEL,this.handleWheel,{passive:!1}),Kt(window,ee.MESSAGE,this.onWindowMessage,!1),Kt(document,ee.POINTER_UP,this.removePointer,{passive:!1}),Kt(document,ee.COPY,this.onCopy,{passive:!1}),Kt(document,ee.KEYUP,this.onKeyUp,{passive:!0}),Kt(document,ee.POINTER_MOVE,this.updateCurrentCursorPosition,{passive:!1}),Kt(document.fonts,"loadingdone",t=>{const n=t.fontfaces;this.fonts.onLoaded(n)},{passive:!1}),Kt(document,ee.GESTURE_START,this.onGestureStart,!1),Kt(document,ee.GESTURE_CHANGE,this.onGestureChange,!1),Kt(document,ee.GESTURE_END,this.onGestureEnd,!1),Kt(window,ee.FOCUS,()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(Kt(document,ee.FULLSCREENCHANGE,this.onFullscreenChange,{passive:!1}),Kt(document,ee.PASTE,this.pasteFromClipboard,{passive:!1}),Kt(document,ee.CUT,this.onCut,{passive:!1}),Kt(window,ee.RESIZE,this.onResize,!1),Kt(window,ee.UNLOAD,this.onUnload,!1),Kt(window,ee.BLUR,this.onBlur,!1),Kt(this.excalidrawContainerRef.current,ee.WHEEL,this.handleWheel,{passive:!1}),Kt(this.excalidrawContainerRef.current,ee.DRAG_OVER,this.disableEvent,!1),Kt(this.excalidrawContainerRef.current,ee.DROP,this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(Kt(Mre(this.excalidrawContainerRef.current),ee.SCROLL,this.onScroll,{passive:!1})))}componentDidUpdate(t,n){this.updateEmbeddables();const i=this.scene.getElementsIncludingDeleted(),r=this.scene.getElementsMapIncludingDeleted();!this.state.showWelcomeScreen&&!i.length&&this.setState({showWelcomeScreen:!0}),t.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),n.userToFollow&&!this.state.collaborators.has(n.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(n.zoom.value!==this.state.zoom.value||n.scrollX!==this.state.scrollX||n.scrollY!==this.state.scrollY)&&(this.props?.onScrollChange?.(this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),n.userToFollow!==this.state.userToFollow&&(n.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:n.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&Uo(this.state)&&this.setState({activeTool:Xt(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&n.theme!==this.state.theme&&KV(this.interactiveCanvas,this.state.theme),n.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),t.langCode!==this.props.langCode&&this.updateLanguage(),Uo(n)&&!Uo(this.state)&&this.eraserTrail.endPath(),t.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),n.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(n.openDialog?.name==="elementLinkSelector"||this.state.openDialog?.name==="elementLinkSelector")&&n.openDialog?.name!==this.state.openDialog?.name&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),t.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),t.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),this.excalidrawContainerRef.current?.classList.toggle("theme--dark",this.state.theme===Te.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(Rs)}),this.state.editingTextElement?.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null}),this.store.commit(r,this.state),this.state.isLoading||(this.props.onChange?.(i,this.state,this.files),this.onChangeEmitter.trigger(i,this.state,this.files))}renderInteractiveSceneCallback=({atLeastOneVisibleElement:t,scrollBars:n,elementsMap:i})=>{n&&(qg=n);const r=this.state.editingTextElement?!1:!t&&i.size>0;this.state.scrolledOutside!==r&&this.setState({scrolledOutside:r}),this.scheduleImageRefresh()};onScroll=Ya(()=>{const{offsetTop:t,offsetLeft:n}=this.getCanvasOffsets();this.setState(i=>i.offsetLeft===n&&i.offsetTop===t?null:{offsetTop:t,offsetLeft:n})},Bie);onCut=Zt(t=>{!this.excalidrawContainerRef.current?.contains(document.activeElement)||uu(t.target)||(this.actionManager.executeAction(kk,"keyboard",t),t.preventDefault(),t.stopPropagation())});onCopy=Zt(t=>{!this.excalidrawContainerRef.current?.contains(document.activeElement)||uu(t.target)||(this.actionManager.executeAction(w2,"keyboard",t),t.preventDefault(),t.stopPropagation())});static resetTapTwice(){Kg=!1}onTouchStart=t=>{if(ZP&&t.preventDefault(),!Kg){Kg=!0,clearTimeout($E),$E=window.setTimeout(G_.resetTapTwice,Oie);return}if(Kg&&t.touches.length===1){const n=t.touches[0];this.handleCanvasDoubleClick({clientX:n.clientX,clientY:n.clientY}),Kg=!1,clearTimeout($E)}t.touches.length===2&&this.setState({selectedElementIds:pt({},this.state),activeEmbeddable:null})};onTouchEnd=t=>{this.resetContextMenuTimer(),t.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:pt(this.state.previousSelectedElementIds,this.state)}):lt.pointers.clear()};pasteFromClipboard=Zt(async t=>{const n=!!AU,i=document.activeElement,r=this.excalidrawContainerRef.current?.contains(i);if(t&&!r)return;const s=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(t&&(!(s instanceof HTMLCanvasElement)||uu(i)))return;const{x:o,y:a}=Tt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state);let l=t?.clipboardData?.files[0];const c=await hG(t,n);if(!l&&!n){if(c.mixedContent)return this.addElementsFromMixedContentPaste(c.mixedContent,{isPlainPaste:n,sceneX:o,sceneY:a});if(c.text){const u=c.text.trim();u.startsWith("<svg")&&u.endsWith("</svg>")&&(l=Sk(u))}}if(Fu(l)&&!c.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:M("errors.imageToolNotSupported")});return}this.createImageElement({sceneX:o,sceneY:a,imageFile:l});return}if(this.props.onPaste)try{if(await this.props.onPaste(c,t)===!1)return}catch(u){console.error(u)}if(c.errorMessage)this.setState({errorMessage:c.errorMessage});else if(c.spreadsheet&&!n)this.setState({pasteDialog:{data:c.spreadsheet,shown:!0}});else if(c.elements){const u=c.programmaticAPI?A4(c.elements):c.elements;this.addElementsFromPasteOrLibrary({elements:u,files:c.files||null,position:"cursor",retainSeed:n})}else if(c.text){if(c.text&&i3e(c.text)){const f=await ge(()=>import("./index-CqKBX1jw.js").then(h=>h.b6),__vite__mapDeps([]));try{const{elements:h,files:m}=await f.parseMermaidToExcalidraw(c.text),p=A4(h,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:p,files:m,position:"cursor"});return}catch(h){console.warn(`parsing pasted text as mermaid definition failed: ${h.message}`)}}const u=SF(c.text).split(/\n+/).map(f=>f.trim()).filter(Boolean),d=u.map(f=>rce(f)).filter(f=>l2(f,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(f)||If(f)?.type==="video"));if(!AU&&d.length>0&&d.length===u.length){const f=[];for(const h of d){const m=f[f.length-1],p=this.insertEmbeddableElement({sceneX:m?m.x+m.width+20:o,sceneY:a,link:Hr(h)});p&&f.push(p)}f.length&&(this.store.scheduleCapture(),this.setState({selectedElementIds:Object.fromEntries(f.map(h=>[h.id,!0]))}));return}this.addTextFromPaste(c.text,n)}this.setActiveTool({type:"selection"}),t?.preventDefault()});addElementsFromPasteOrLibrary=t=>{const n=ad(t.elements,null,void 0),[i,r,s,o]=ft(n),a=Li(i,s)/2,l=Li(r,o)/2,c=typeof t.position=="object"?t.position.clientX:t.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,u=typeof t.position=="object"?t.position.clientY:t.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:d,y:f}=Tt({clientX:c,clientY:u},this.state),h=d-a,m=f-l,[p,y]=An(h,m,this.getEffectiveGridSize()),{duplicatedElements:b}=Vb({type:"everything",elements:n.map(_=>Ee(_,{x:_.x+p-i,y:_.y+y-r})),randomizeSeed:!t.retainSeed}),E=this.scene.getElementsIncludingDeleted();let v=[...E,...b];v=this.props.onDuplicate?.(v,E)||v,qs(v,be(b));const S=this.getTopLayerFrameAtSceneCoords({x:d,y:f});if(S){const _=ele(b,S);e0(v,_,S,this.state)}this.scene.replaceAllElements(v),b.forEach(_=>{if(le(_)&&Ft(_)){const T=zn(_,this.scene.getElementsMapIncludingDeleted());Hi(_,T,this.scene)}}),wie&&He.loadElementsFonts(b).then(_=>{this.fonts.onLoaded(_)}),t.files&&this.addMissingFiles(t.files);const k=r9(b);this.store.scheduleCapture(),this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&Rr.get(R_)?this.state.openSidebar:null,...Mi({editingGroupId:null,selectedElementIds:k.reduce((_,T)=>(Ft(T)||(_[T.id]=!0),_),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{t.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),t.fitToContent&&this.scrollToContent(b,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})};async addElementsFromMixedContentPaste(t,{isPlainPaste:n,sceneX:i,sceneY:r}){if(!n&&t.some(s=>s.type==="imageUrl")&&this.isToolSupported("image")){const s=t.filter(d=>d.type==="imageUrl").map(d=>d.value),o=await Promise.all(s.map(async d=>{try{return{file:await Q6e(d)}}catch(f){let h=f.message;return f.cause==="FETCH_ERROR"?h=M("errors.failedToFetchImage"):f.cause==="UNSUPPORTED"&&(h=M("errors.unsupportedFileType")),{errorMessage:h}}}));let a=r,l=!1;const c={};for(const d of o)if(d.file){const f=await this.createImageElement({sceneX:i,sceneY:a,imageFile:d.file});f&&(l||(l=!0,a-=f.height/2),this.scene.mutateElement(f,{y:a},{informMutation:!1,isDragging:!1}),a=f.y+f.height+25,c[f.id]=!0)}this.setState({selectedElementIds:pt(c,this.state)});const u=o.find(d=>!!d.errorMessage);u&&u.errorMessage&&this.setState({errorMessage:u.errorMessage})}else{const s=t.filter(o=>o.type==="text");s.length&&this.addTextFromPaste(s.map(o=>o.value).join(`

`),n)}}addTextFromPaste(t,n=!1){const{x:i,y:r}=Tt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),s={x:i,y:r,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:t,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:Hm,verticalAlign:cb,locked:!1},o=ot({fontSize:s.fontSize,fontFamily:s.fontFamily}),a=Tc(s.fontFamily),[l,,c]=RB(this.state),u=Math.max(Math.min((c-l)*.5,800),200),d=10;let f=r;const h=n?[t]:t.split(`
`),m=h.reduce((p,y,b)=>{const E=gh(y).trim();if(E.length){const v=this.getTopLayerFrameAtSceneCoords({x:i,y:f});let w=Bn(E,o,a);const S=w.width>u,k=S?$c(E,o,u):E;w=S?Bn(k,o,a):w;const _=i-w.width/2,T=f-w.height/2,A=Gr({...s,x:_,y:T,text:k,originalText:E,lineHeight:a,autoResize:!S,frameId:v?v.id:null});p.push(A),f+=A.height+d}else h[b-1]?.trim()&&(f+=Wm(s.fontSize,a)+d);return p},[]);m.length!==0&&(this.scene.insertElements(m),this.store.scheduleCapture(),this.setState({selectedElementIds:pt(Object.fromEntries(m.map(p=>[p.id,!0])),this.state)}),!n&&m.length>1&&GR===!1&&!this.device.editor.isMobile&&(this.setToast({message:M("toast.pasteAsSingleElement",{shortcut:q("CtrlOrCmd+Shift+V")}),duration:5e3}),GR=!0))}setAppState=(t,n)=>{this.setState(t,n)};removePointer=t=>{Tl&&this.resetContextMenuTimer(),lt.pointers.delete(t.pointerId)};toggleLock=(t="ui")=>{this.state.activeTool.locked||tt("toolbar","toggleLock",`${t} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(n=>({activeTool:{...n.activeTool,...Xt(this.state,n.activeTool.locked?{type:"selection"}:n.activeTool),locked:!n.activeTool.locked}}))};updateFrameRendering=t=>{this.setState(n=>{const i=typeof t=="function"?t(n.frameRendering):t;return{frameRendering:{enabled:i?.enabled??n.frameRendering.enabled,clip:i?.clip??n.frameRendering.clip,name:i?.name??n.frameRendering.name,outline:i?.outline??n.frameRendering.outline}}})};togglePenMode=t=>{this.setState(n=>({penMode:t??!n.penMode,penDetected:!0}))};onHandToolToggle=()=>{this.actionManager.executeAction(PUe)};zoomCanvas=t=>{this.setState({...bu({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:ka(t)},this.state)})};cancelInProgressAnimation=null;scrollToContent=(t=this.scene.getNonDeletedElements(),n)=>{if(typeof t=="string"){let a;if(Hf(t)?a=Gle(t):a=t,a){const l=this.scene.getElementsFromId(a);l?.length?this.scrollToContent(l,{fitToContent:n?.fitToContent??!0,animate:n?.animate??!0}):Hf(t)&&this.setState({toast:{message:M("elementLink.notFound"),duration:3e3,closable:!0}})}return}this.cancelInProgressAnimation?.();const i=Array.isArray(t)?t:[t];let r=this.state.zoom,s=this.state.scrollX,o=this.state.scrollY;if(n?.fitToContent||n?.fitToViewport){const{appState:a}=F5({canvasOffsets:n.canvasOffsets,targetElements:i,appState:this.state,fitToViewport:!!n?.fitToViewport,viewportZoomFactor:n?.viewportZoomFactor,minZoom:n?.minZoom,maxZoom:n?.maxZoom});r=a.zoom,s=a.scrollX,o=a.scrollY}else{const a=W0(i,this.state);s=a.scrollX,o=a.scrollY}if(n?.animate){const a=this.state.scrollX,l=this.state.scrollY,c=this.state.zoom.value,u=Tre({fromValues:{scrollX:a,scrollY:l,zoom:c},toValues:{scrollX:s,scrollY:o,zoom:r.value},interpolateValue:(d,f,h,m)=>{if(m==="zoom")return d*Math.pow(f/d,Wa(h))},onStep:({scrollX:d,scrollY:f,zoom:h})=>{this.setState({scrollX:d,scrollY:f,zoom:{value:h}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:n?.duration??500});this.cancelInProgressAnimation=()=>{u(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:s,scrollY:o,zoom:r})};maybeUnfollowRemoteUser=()=>{this.state.userToFollow&&this.setState({userToFollow:null})};translateCanvas=t=>{this.cancelInProgressAnimation?.(),this.maybeUnfollowRemoteUser(),this.setState(t)};setToast=t=>{this.setState({toast:t})};restoreFileFromShare=async()=>{try{const t=await caches.open("web-share-target"),n=await t.match("shared-file");if(n){const i=await n.blob(),r=new File([i],i.name||"",{type:i.type});this.loadFileToCanvas(r,null),await t.delete("shared-file"),window.history.replaceState(null,Na,window.location.pathname)}}catch(t){this.setState({errorMessage:t.message})}};addFiles=Zt(t=>{const{addedFiles:n}=this.addMissingFiles(t);this.clearImageShapeCache(n),this.scene.triggerUpdate(),this.addNewImagesToImageCache()});addMissingFiles=(t,n=!1)=>{const i=n?{}:{...this.files},r={},s=Array.isArray(t)?t:Object.values(t);for(const o of s)if(!i[o.id]&&(r[o.id]=o,i[o.id]=o,o.mimeType===Ue.svg))try{const a=Z6e(mA(q6e(o.dataURL)),Ue.svg);o.dataURL!==a&&(o.version=(o.version??1)+1,o.dataURL=a)}catch(a){console.error(a)}return this.files=i,{addedFiles:r}};updateScene=Zt(t=>{const{elements:n,appState:i,collaborators:r,captureUpdate:s}=t;if(s){const o=n||void 0,a=i?zf({...this.store.snapshot.appState,...i}):void 0;this.store.scheduleMicroAction({action:s,elements:o,appState:a})}i&&this.setState(i),n&&this.scene.replaceAllElements(n),r&&this.setState({collaborators:r})});mutateElement=(t,n,i=!0)=>this.scene.mutateElement(t,n,{informMutation:i,isDragging:!1});triggerRender=t=>{t===!0?this.scene.triggerUpdate():this.setState({})};toggleSidebar=({name:t,tab:n,force:i})=>{let r;i===void 0?r=this.state.openSidebar?.name===t&&this.state.openSidebar?.tab===n?null:t:r=i?t:null;const s=r?{name:r}:null;return s&&n&&(s.tab=n),this.setState({openSidebar:s}),!!r};updateCurrentCursorPosition=Zt(t=>{this.lastViewportPosition.x=t.clientX,this.lastViewportPosition.y=t.clientY});getEditorUIOffsets=()=>{const t=this.excalidrawContainerRef?.current?.querySelector(".App-toolbar")?.getBoundingClientRect()?.bottom??0,n=this.excalidrawContainerRef?.current?.querySelector(".sidebar")?.getBoundingClientRect(),i=this.excalidrawContainerRef?.current?.querySelector(".App-menu__left")?.getBoundingClientRect(),r=16;return Y0().rtl?{top:t+r,right:Math.max(this.state.width-(i?.left??this.state.width),0)+r,bottom:r,left:Math.max(n?.right??0,0)+r}:{top:t+r,right:Math.max(this.state.width-(n?.left??this.state.width)+r,0),bottom:r,left:Math.max(i?.right??0,0)+r}};onKeyDown=Zt(t=>{if("Proxy"in window&&(!t.shiftKey&&/^[A-Z]$/.test(t.key)||t.shiftKey&&/^[a-z]$/.test(t.key))&&(t=new Proxy(t,{get(s,o){const a=s[o];return typeof a=="function"?a.bind(s):o==="key"?t.shiftKey?s.key.toUpperCase():s.key.toLowerCase():a}})),!y7(t.target)){if((t.key===B.ESCAPE||t.key===B.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}const s=Ne(this.scene.getNonDeletedElementsMap(),this.state);if(s.length===1&&yt(s[0])&&t.key===B.ENTER){this.startImageCropping(s[0]);return}if(t.key===B.ESCAPE)this.updateEditorAtom(ma,null);else if(t.key===B.TAB&&(document.activeElement===this.excalidrawContainerRef?.current||document.activeElement?.classList.contains(_c.CONVERT_ELEMENT_TYPE_POPUP))){t.preventDefault();const a=ey(s);Rr.get(ma)?.type==="panel"&&IG(this,{conversionType:a,direction:t.shiftKey?"left":"right"})&&this.store.scheduleCapture(),a&&this.updateEditorAtom(ma,{type:"panel"})}if(t.key===B.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}const o=d1(t.key);if(t[B.CTRL_OR_CMD]&&o&&!t.shiftKey){t.preventDefault();const a=Ne(this.scene.getNonDeletedElementsMap(),this.state);a.length===1&&f5(a[0])&&this.flowChartCreator.createNodes(a[0],this.state,gA(t.key),this.scene),this.flowChartCreator.pendingNodes?.length&&!a2(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(t.altKey){const a=Ne(this.scene.getNonDeletedElementsMap(),this.state);if(a.length===1&&o){t.preventDefault();const l=this.flowChartNavigator.exploreByDirection(a[0],this.scene.getNonDeletedElementsMap(),gA(t.key));if(l){this.setState(u=>({selectedElementIds:pt({[l]:!0},u)}));const c=this.scene.getNonDeletedElementsMap().get(l);c&&!a2([c],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(c,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(t[B.CTRL_OR_CMD]&&t.key===B.P&&!t.shiftKey&&!t.altKey){this.setToast({message:M("commandPalette.shortcutHint",{shortcut:zi("commandPalette")})}),t.preventDefault();return}if(t[B.CTRL_OR_CMD]&&t.key.toLowerCase()===B.V&&(AU=t.shiftKey,clearTimeout($R),$R=window.setTimeout(()=>{AU=!1},100)),t[B.CTRL_OR_CMD]&&uu(t.target)&&(t.code===Ke.MINUS||t.code===Ke.EQUAL)){t.preventDefault();return}if(uu(t.target)&&t.key!==B.ESCAPE||d1(t.key)&&y7(t.target))return;if(t.key===B.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(t.key.toLowerCase()===B.E&&t.shiftKey&&t[B.CTRL_OR_CMD]){t.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(t.key===B.PAGE_UP||t.key===B.PAGE_DOWN){let s=(t.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;t.key===B.PAGE_DOWN&&(s=-s),t.shiftKey?this.translateCanvas(o=>({scrollX:o.scrollX+s})):this.translateCanvas(o=>({scrollY:o.scrollY+s}))}if(this.state.openDialog?.name==="elementLinkSelector"||this.actionManager.handleKeyDown(t)||this.state.viewModeEnabled)return;if(t[B.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),d1(t.key)){let s=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});const o=s.find(ce),a=new Set;s.filter(ce).filter(d=>{const f=d.startBinding&&!s.some(m=>m.id===d.startBinding?.elementId),h=d.endBinding&&!s.some(m=>m.id===d.endBinding?.elementId);return f||h}).forEach(d=>a.add(d.id)),s=s.filter(d=>!a.has(d.id));const l=this.getEffectiveGridSize()&&(t.shiftKey?qx:this.getEffectiveGridSize())||(t.shiftKey?Sie:qx);let c=0,u=0;t.key===B.ARROW_LEFT?c=-l:t.key===B.ARROW_RIGHT?c=l:t.key===B.ARROW_UP?u=-l:t.key===B.ARROW_DOWN&&(u=l),s.forEach(d=>{this.scene.mutateElement(d,{x:d.x+c,y:d.y+u},{informMutation:!1,isDragging:!1}),pr(d,this.scene,{simultaneouslyUpdated:s})}),this.setState({suggestedBindings:H8(s.filter(d=>d.id!==o?.id||l!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),t.preventDefault()}else if(t.key===B.ENTER){const s=this.scene.getSelectedElements(this.state);if(s.length===1){const o=s[0];if(t[B.CTRL_OR_CMD]||sn(o))we(o)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==o.id)&&(this.store.scheduleCapture(),ce(o)||this.setState({editingLinearElement:new Z(o,this.scene.getNonDeletedElementsMap())}));else if(le(o)||Voe(o)){let a;le(o)||(a=o);const l=B8(o,this.state,this.scene.getNonDeletedElementsMap()),c=l.x,u=l.y;this.startTextEditing({sceneX:c,sceneY:u,container:a}),t.preventDefault();return}else pe(o)&&this.setState({editingFrame:o.id})}}else if(!t.ctrlKey&&!t.altKey&&!t.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){const s=v8e(t.key);s?(this.state.activeTool.type!==s&&tt("toolbar",s,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),s==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(o=>({currentItemArrowType:o.currentItemArrowType===ii.sharp?ii.round:o.currentItemArrowType===ii.round?ii.elbow:ii.sharp})),this.setActiveTool({type:s}),t.stopPropagation()):t.key===B.Q&&(this.toggleLock("keyboard"),t.stopPropagation())}if(t.key===B.SPACE&&lt.pointers.size===0&&(tu=!0,_t(this.interactiveCanvas,vt.GRAB),t.preventDefault()),(t.key===B.G||t.key===B.S)&&!t.altKey&&!t[B.CTRL_OR_CMD]){const s=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!s.length)return;t.key===B.G&&(bh(this.state.activeTool.type)||s.some(o=>bh(o.type)))&&(this.setState({openPopup:"elementBackground"}),t.stopPropagation()),t.key===B.S&&(this.setState({openPopup:"elementStroke"}),t.stopPropagation())}if(!t[B.CTRL_OR_CMD]&&t.shiftKey&&t.key.toLowerCase()===B.F){const s=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!s.length)return;(this.state.activeTool.type==="text"||s.find(o=>le(o)||Ce(o,this.scene.getNonDeletedElementsMap())))&&(t.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(t.key===B.K&&!t.altKey&&!t[B.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}t[B.CTRL_OR_CMD]&&(t.key===B.BACKSPACE||t.key===B.DELETE)&&this.updateEditorAtom(ry,"clearCanvas");const n=t.key.toLocaleLowerCase(),i=n===B.S&&t.shiftKey,r=t.key===B.I||n===B.G&&t.shiftKey;(i||r)&&this.openEyeDropper({type:i?"stroke":"background"})});onKeyUp=Zt(t=>{if(t.key===B.SPACE&&(this.state.viewModeEnabled||this.state.openDialog?.name==="elementLinkSelector"?_t(this.interactiveCanvas,vt.GRAB):this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"?fo(this.interactiveCanvas):(ho(this.interactiveCanvas,this.state),this.setState({selectedElementIds:pt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),tu=!1),!t[B.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),d1(t.key)&&(Db(this.scene.getSelectedElements(this.state).filter(we),Nu(this.state),this.state.selectedLinearElement?.selectedPointsIndices??[],this.scene,this.state.zoom),this.setState({suggestedBindings:[]})),t.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:j.IMMEDIATELY})),!t[B.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.pendingNodes?.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);const n=this.flowChartCreator.pendingNodes?.[0];n&&(this.setState(i=>({selectedElementIds:pt({[n.id]:!0},i)})),a2([n],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(n,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:j.IMMEDIATELY})}});isToolSupported=t=>this.props.UIOptions.tools?.[t]!==!1;setActiveTool=(t,n=!1)=>{if(!this.isToolSupported(t.type)){console.warn(`"${t.type}" tool is disabled via "UIOptions.canvasActions.tools.${t.type}"`);return}const i=Xt(this.state,t);i.type==="hand"?_t(this.interactiveCanvas,vt.GRAB):tu||ho(this.interactiveCanvas,{...this.state,activeTool:i}),wre(document.activeElement)&&this.focusContainer(),Xw(i.type)||this.setState({suggestedBindings:[]}),i.type==="image"&&this.onImageAction(),this.setState(r=>{const s={snapLines:r.snapLines.length?[]:r.snapLines,originSnapOffset:null,activeEmbeddable:null};return i.type==="freedraw"&&this.store.scheduleCapture(),i.type==="lasso"?{...r,activeTool:i,...n?{}:{selectedElementIds:pt({},r),selectedGroupIds:pt({},r),editingGroupId:null,multiElement:null},...s}:i.type!=="selection"?{...r,activeTool:i,selectedElementIds:pt({},r),selectedGroupIds:pt({},r),editingGroupId:null,multiElement:null,...s}:{...r,activeTool:i,...s}})};setOpenDialog=t=>{this.setState({openDialog:t})};setCursor=t=>{_t(this.interactiveCanvas,t)};resetCursor=()=>{fo(this.interactiveCanvas)};isTouchScreenMultiTouchGesture=()=>lt.pointers.size>=2;getName=()=>this.state.name||this.props.name||`${M("labels.untitled")}-${cC()}`;onGestureStart=Zt(t=>{t.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:pt({},this.state),activeEmbeddable:null}),lt.initialScale=this.state.zoom.value});onGestureChange=Zt(t=>{if(t.preventDefault(),this.isTouchScreenMultiTouchGesture())return;const n=lt.initialScale;n&&this.setState(i=>({...bu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:ka(n*t.scale)},i)}))});onGestureEnd=Zt(t=>{t.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:pt(this.state.previousSelectedElementIds,this.state)}),lt.initialScale=null});handleTextWysiwyg(t,{isExistingElement:n=!1}){const i=this.scene.getElementsMapIncludingDeleted(),r=(s,o)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(a=>a.id===t.id&&le(a)?Ee(a,{originalText:s,isDeleted:o??a.isDeleted,...GB(a,zn(a,i),i,s)}):a)])};n3e({id:t.id,canvas:this.canvas,getViewportCoords:(s,o)=>{const{x:a,y:l}=Nr({sceneX:s,sceneY:o},this.state);return[a-this.state.offsetLeft,l-this.state.offsetTop]},onChange:Zt(s=>{r(s,!1),Y7(t)&&pr(t,this.scene)}),onSubmit:Zt(({viaKeyboard:s,nextOriginalText:o})=>{const a=!o.trim();if(r(o,a),!a&&s){const l=t.containerId?t.containerId:t.id;vn.flushSync(()=>{this.setState(c=>({selectedElementIds:pt({...c.selectedElementIds,[l]:!0},c)}))})}a&&uB(this.scene.getNonDeletedElements(),[t]),(!a||n)&&this.store.scheduleCapture(),vn.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&ho(this.interactiveCanvas,this.state),this.focusContainer()}),element:t,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),r(t.originalText,!1)}deselectElements(){this.setState({selectedElementIds:pt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(t,n){const i=this.getElementAtPosition(t,n,{includeBoundTextElement:!0});return i&&le(i)&&!i.isDeleted?i:null}getElementAtPosition(t,n,i){let r=[];if(i&&"allHitElements"in i?r=i?.allHitElements||[]:r=this.getElementsAtPosition(t,n,{includeBoundTextElement:i?.includeBoundTextElement,includeLockedElements:i?.includeLockedElements}),r.length>1){if(i?.preferSelected){for(let o=r.length-1;o>-1;o--)if(this.state.selectedElementIds[r[o].id])return r[o]}const s=r[r.length-1];return tf({point:I(t,n),element:s,threshold:this.getElementHitThreshold(s)/2,elementsMap:this.scene.getNonDeletedElementsMap(),frameNameBound:pe(s)?this.frameNameBoundsCache.get(s):null})?s:r[r.length-2]}return r.length===1?r[0]:null}getElementsAtPosition(t,n,i){const r=[],s=this.scene.getNonDeletedElementsMap();return(i?.includeBoundTextElement&&i?.includeLockedElements?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(a=>(i?.includeLockedElements||!a.locked)&&(i?.includeBoundTextElement||!(le(a)&&a.containerId)))).filter(a=>this.hitElement(t,n,a)).filter(a=>{const l=Ur(a,s);return l&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?BC({x:t,y:n},l,s):!0}).filter(a=>Ll(a)?(r.push(a),!1):!0).concat(r)}getElementHitThreshold(t){return Math.max(t.strokeWidth/2+.1,.85*(Qx/this.state.zoom.value))}hitElement(t,n,i,r=!0){return r&&this.state.selectedElementIds[i.id]&&ez([i],this.state)&&h5(I(t,n),i,this.scene.getNonDeletedElementsMap(),this.getElementHitThreshold(i))||QF(I(t,n),i,this.scene.getNonDeletedElementsMap())?!0:tf({point:I(t,n),element:i,threshold:this.getElementHitThreshold(i),elementsMap:this.scene.getNonDeletedElementsMap(),frameNameBound:pe(i)?this.frameNameBoundsCache.get(i):null})}getTextBindableContainerAtPosition(t,n){const i=this.scene.getNonDeletedElements(),r=this.scene.getSelectedElements(this.state);if(r.length===1)return Ou(r[0],!1)?r[0]:null;let s=null;for(let o=i.length-1;o>=0;--o){if(i[o].isDeleted)continue;const[a,l,c,u]=Le(i[o],this.scene.getNonDeletedElementsMap());if(_e(i[o])&&tf({point:I(t,n),element:i[o],elementsMap:this.scene.getNonDeletedElementsMap(),threshold:this.getElementHitThreshold(i[o])})){s=i[o];break}else if(a<t&&t<c&&l<n&&n<u){s=i[o];break}}return Ou(s,!1)?s:null}startTextEditing=({sceneX:t,sceneY:n,insertAtParentCenter:i=!0,container:r,autoEdit:s=!0})=>{let o=!1,a=i&&this.getTextWysiwygSnappedToCenterPosition(t,n,this.state,r);r&&a&&(Ce(r,this.scene.getNonDeletedElementsMap())||(o=!0));let l=null;const c=this.scene.getSelectedElements(this.state);c.length===1?le(c[0])?l=c[0]:r?l=Ce(c[0],this.scene.getNonDeletedElementsMap()):l=this.getTextElementAtPosition(t,n):l=this.getTextElementAtPosition(t,n);const u=l?.fontFamily||this.state.currentItemFontFamily,d=l?.lineHeight||Tc(u),f=this.state.currentItemFontSize;if(!l&&o&&r&&!_e(r)){const y=KF(ot({fontSize:f,fontFamily:u}),d),b=ZF(f,d),E=Math.max(r.height,b),v=Math.max(r.width,y);this.scene.mutateElement(r,{height:E,width:v}),t=r.x+v/2,n=r.y+E/2,a&&(a=this.getTextWysiwygSnappedToCenterPosition(t,n,this.state,r))}const h=this.getTopLayerFrameAtSceneCoords({x:t,y:n}),m=l||Gr({x:a?a.elementCenterX:t,y:a?a.elementCenterY:n,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:f,fontFamily:u,textAlign:a?"center":this.state.currentItemTextAlign,verticalAlign:a?Or.MIDDLE:cb,containerId:o?r?.id:void 0,groupIds:r?.groupIds??[],lineHeight:d,angle:r?_e(r)?0:r.angle:0,frameId:h?h.id:null});if(!l&&o&&r&&this.scene.mutateElement(r,{boundElements:(r.boundElements||[]).concat({type:"text",id:m.id})}),this.setState({editingTextElement:m}),!l)if(r&&o){const p=this.scene.getElementIndex(r.id);this.scene.insertElementAtIndex(m,p+1)}else this.scene.insertElement(m);s||l||r?this.handleTextWysiwyg(m,{isExistingElement:!!l}):this.setState({newElement:m,multiElement:null})};startImageCropping=t=>{this.store.scheduleCapture(),this.setState({croppingElementId:t.id})};finishImageCropping=()=>{this.state.croppingElementId&&(this.store.scheduleCapture(),this.setState({croppingElementId:null}))};handleCanvasDoubleClick=t=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;const n=this.scene.getSelectedElements(this.state);let{x:i,y:r}=Tt(t,this.state);if(n.length===1&&we(n[0])){const o=n[0];if((t[B.CTRL_OR_CMD]&&moe(o)||sn(o))&&this.state.editingLinearElement?.elementId!==o.id){this.store.scheduleCapture(),this.setState({editingLinearElement:new Z(o,this.scene.getNonDeletedElementsMap())});return}else if(this.state.selectedLinearElement&&ce(n[0])){const a=Z.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:i,y:r},this.state,this.scene.getNonDeletedElementsMap()),l=a?Z.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,a,this.scene.getNonDeletedElementsMap()):-1;if(l&&l>-1){this.store.scheduleCapture(),Z.deleteFixedSegment(n[0],this.scene,l);const c=Z.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:i,y:r},this.state,this.scene.getNonDeletedElementsMap()),u=c?Z.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,c,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:u,value:a,added:!1}},segmentMidPointHoveredCoords:c}});return}}else if(this.state.editingLinearElement&&this.state.editingLinearElement.elementId===o.id&&sn(o))return}if(n.length===1&&yt(n[0])){this.startImageCropping(n[0]);return}if(fo(this.interactiveCanvas),Pu(this.state).length>0){const o=this.getElementAtPosition(i,r),a=o&&Gae(o,this.state.selectedGroupIds);if(a){this.store.scheduleCapture(),this.setState(l=>({...l,...Mi({editingGroupId:a,selectedElementIds:{[o.id]:!0}},this.scene.getNonDeletedElements(),l,this)}));return}}if(fo(this.interactiveCanvas),!t[B.CTRL_OR_CMD]&&!this.state.viewModeEnabled){const o=this.getElementAtPosition(i,r);if(os(o)){this.setState({activeEmbeddable:{element:o,state:"active"}});return}if(!this.state.editingLinearElement){const a=this.getTextBindableContainerAtPosition(i,r);if(a&&(nr(a)||!ds(a.backgroundColor)||tf({point:I(i,r),element:a,elementsMap:this.scene.getNonDeletedElementsMap(),threshold:this.getElementHitThreshold(a)}))){const l=B8(a,this.state,this.scene.getNonDeletedElementsMap());i=l.x,r=l.y}this.startTextEditing({sceneX:i,sceneY:r,insertAtParentCenter:!t.altKey,container:a})}}};getElementLinkAtPosition=(t,n)=>{if(n&&n.locked)return;const i=this.scene.getNonDeletedElements();let r=-1;for(let s=i.length-1;s>=0;s--){const o=i[s];if(n&&o.id===n.id&&(r=s),o.link&&s>=r&&SE(o,this.scene.getNonDeletedElementsMap(),this.state,I(t.x,t.y),this.device.editor.isMobile))return o}};redirectToLink=(t,n)=>{const i=dt(I(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),I(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||i>m7)return;const r=Tt(this.lastPointerDownEvent,this.state),s=this.scene.getNonDeletedElementsMap(),o=SE(this.hitLinkElement,s,this.state,I(r.x,r.y),this.device.editor.isMobile),a=Tt(this.lastPointerUpEvent,this.state),l=SE(this.hitLinkElement,s,this.state,I(a.x,a.y),this.device.editor.isMobile);if(o&&l){Pk();let c=this.hitLinkElement.link;if(c){c=Hr(c);let u;if(this.props.onLinkOpen&&(u=_F(ee.EXCALIDRAW_LINK,t.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:c},u)),!u?.defaultPrevented){const d=AF(c)?"_self":"_blank",f=window.open(void 0,d);f&&(f.opener=null,f.location=c)}}}};getTopLayerFrameAtSceneCoords=t=>{const n=this.scene.getNonDeletedElementsMap(),i=this.scene.getNonDeletedFramesLikes().filter(r=>BC(t,r,n));return i.length?i[i.length-1]:null};handleCanvasPointerMove=t=>{this.savePointer(t.clientX,t.clientY,this.state.cursorButton),this.lastPointerMoveEvent=t.nativeEvent,lt.pointers.has(t.pointerId)&&lt.pointers.set(t.pointerId,{x:t.clientX,y:t.clientY});const n=lt.initialScale;if(lt.pointers.size===2&&lt.lastCenter&&n&&lt.initialDistance){const h=nR(lt.pointers),m=h.x-lt.lastCenter.x,p=h.y-lt.lastCenter.y;lt.lastCenter=h;const y=iR(Array.from(lt.pointers.values())),b=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:y/lt.initialDistance,E=b?ka(n*b):this.state.zoom.value;this.setState(v=>{const w=bu({viewportX:h.x,viewportY:h.y,nextZoom:E},v);this.translateCanvas({zoom:w.zoom,scrollX:w.scrollX+2*(m/E),scrollY:w.scrollY+2*(p/E),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else lt.lastCenter=lt.initialDistance=lt.initialScale=null;if(tu||Zg||GE||_h(this.state))return;const r=fR(qg,t.clientX-this.state.offsetLeft,t.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(r?fo(this.interactiveCanvas):ho(this.interactiveCanvas,this.state));const s=Tt(t,this.state),{x:o,y:a}=s;if(!this.state.newElement&&IEe(this.state.activeTool.type)){const{originOffset:h,snapLines:m}=SEe(this.scene.getNonDeletedElements(),this,{x:o,y:a},t,this.scene.getNonDeletedElementsMap());this.setState(p=>{const y=Ng(p.snapLines,m),b=p.originSnapOffset?Ng(p.originSnapOffset,h):h;return p.snapLines===y&&p.originSnapOffset===b?null:{snapLines:y,originSnapOffset:b}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(h=>h.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){const h=Z.handlePointerMove(t,o,a,this);h&&h!==this.state.editingLinearElement&&vn.flushSync(()=>{this.setState({editingLinearElement:h})}),h?.lastUncommittedPoint!=null?this.maybeSuggestBindingAtCursor(s,h.elbowed):vn.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(VF(this.state.activeTool.type)){const{newElement:h}=this.state;Aa(h,!1)?this.setState({suggestedBindings:C7(h,[s],this.scene,this.state.zoom,this.state.startBoundElement)}):this.maybeSuggestBindingAtCursor(s,!1)}if(this.state.multiElement){const{multiElement:h}=this.state,{x:m,y:p}=h,{points:y,lastCommittedPoint:b}=h,E=y[y.length-1];if(ho(this.interactiveCanvas,this.state),E===b)dt(I(o-m,a-p),E)>=QU?this.scene.mutateElement(h,{points:[...y,I(o-m,a-p)]},{informMutation:!1,isDragging:!1}):_t(this.interactiveCanvas,vt.POINTER);else if(y.length>2&&b&&dt(I(o-m,a-p),b)<QU)_t(this.interactiveCanvas,vt.POINTER),this.scene.mutateElement(h,{points:y.slice(0,-1)},{informMutation:!1,isDragging:!1});else{const[v,w]=An(o,a,t[B.CTRL_OR_CMD]||ce(h)?null:this.getEffectiveGridSize()),[S,k]=h?.lastCommittedPoint??[0,0];let _=v-m-S,T=w-p-k;W1(t)&&({width:_,height:T}=O7(S+m,k+p,v,w)),Bo(y,this.state.zoom.value)&&_t(this.interactiveCanvas,vt.POINTER),this.scene.mutateElement(h,{points:[...y.slice(0,-1),I(S+_,k+T)]},{isDragging:!0,informMutation:!1}),this.triggerRender(!1)}return}if(!!t.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;const c=this.scene.getNonDeletedElements(),u=this.scene.getSelectedElements(this.state);if(u.length===1&&!r&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,o,a),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&this.state.openDialog?.name!=="elementLinkSelector"&&!(u.length===1&&ce(u[0]))){const h=bA(c,this.state,o,a,this.state.zoom,t.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(h&&h.transformHandleType){_t(this.interactiveCanvas,EA(h));return}}}else if(u.length>1&&!r&&this.state.openDialog?.name!=="elementLinkSelector"){const h=yA(ft(u),o,a,this.state.zoom,t.pointerType,this.device);if(h){_t(this.interactiveCanvas,EA({transformHandleType:h}));return}}const d=this.getElementAtPosition(o,a,{preferSelected:!0,includeLockedElements:!0});let f=null;d&&d.locked?f=null:f=d,this.hitLinkElement=this.getElementLinkAtPosition(s,d),!Uo(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(_t(this.interactiveCanvas,vt.POINTER),X5e(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(Pk(),f&&(f.link||ur(f))&&this.state.selectedElementIds[f.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?_t(this.interactiveCanvas,le(f)?vt.TEXT:vt.CROSSHAIR):this.state.viewModeEnabled?_t(this.interactiveCanvas,vt.GRAB):this.state.openDialog?.name==="elementLinkSelector"?_t(this.interactiveCanvas,vt.AUTO):r?_t(this.interactiveCanvas,vt.AUTO):this.state.selectedLinearElement&&f?.id===this.state.selectedLinearElement.elementId?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,o,a):t[B.CTRL_OR_CMD]?_t(this.interactiveCanvas,vt.AUTO):(f||this.isHittingCommonBoundingBoxOfSelectedElements(s,u))&&!f?.locked&&(f&&os(f)&&this.isIframeLikeElementCenter(f,t,o,a)?(_t(this.interactiveCanvas,vt.POINTER),this.setState({activeEmbeddable:{element:f,state:"hover"}})):(!f||!ce(f)||!(f.startBinding||f.endBinding))&&(_t(this.interactiveCanvas,vt.MOVE),this.state.activeEmbeddable?.state==="hover"&&this.setState({activeEmbeddable:null})))),this.state.openDialog?.name==="elementLinkSelector"&&f?this.setState(h=>({hoveredElementIds:Ng(h.hoveredElementIds,Mi({editingGroupId:h.editingGroupId,selectedElementIds:{[f.id]:!0}},this.scene.getNonDeletedElements(),h,this).selectedElementIds)})):this.state.openDialog?.name==="elementLinkSelector"&&!f&&this.setState(h=>({hoveredElementIds:Ng(h.hoveredElementIds,{})})))};handleEraser=(t,n)=>{const i=this.eraserTrail.addPointToPath(n.x,n.y,t.altKey);this.elementsPendingErasure=new Set(i),this.triggerRender()};handleTouchMove=t=>{Qg=!0};handleHoverSelectedLinearElement(t,n,i){const r=this.scene.getNonDeletedElementsMap(),s=Z.getElement(t.elementId,r);if(s)if(this.state.selectedLinearElement){let o=-1,a=null;tf({point:I(n,i),element:s,elementsMap:r,threshold:this.getElementHitThreshold(s)})?(o=Z.getPointIndexUnderCursor(s,r,this.state.zoom,n,i),a=Z.getSegmentMidpointHitCoords(t,{x:n,y:i},this.state,this.scene.getNonDeletedElementsMap()),(ce(s)?o===0||o===s.points.length-1:o>=0)||a?_t(this.interactiveCanvas,vt.POINTER):this.hitElement(n,i,s)&&(!ce(s)||!(s.startBinding||s.endBinding))&&_t(this.interactiveCanvas,vt.MOVE)):this.hitElement(n,i,s)&&(!ce(s)||!(s.startBinding||s.endBinding))&&_t(this.interactiveCanvas,vt.MOVE),this.state.selectedLinearElement.hoverPointIndex!==o&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:o}}),Z.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,a)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:a}})}else _t(this.interactiveCanvas,vt.AUTO)}handleCanvasPointerDown=t=>{const n=t.target;if(n.setPointerCapture&&n.setPointerCapture(t.pointerId),this.maybeCleanupAfterMissingPointerUp(t.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(u=>({searchMatches:u.searchMatches&&{focusedId:null,matches:u.searchMatches.matches.map(d=>({...d,focus:!1}))}})),this.updateEditorAtom(fj,null)),Rr.get(ma)&&this.updateEditorAtom(ma,null),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(t),t.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){const u=this.state.newElement;this.updateScene({...u.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(d=>d.id!==u.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:pt(Object.keys(this.state.selectedElementIds).filter(d=>d!==u.id).reduce((d,f)=>(d[f]=this.state.selectedElementIds[f],d),{}),this.state)},captureUpdate:this.state.openDialog?.name==="elementLinkSelector"?j.EVENTUALLY:j.NEVER});return}const i=document.getSelection();if(i?.anchorNode&&i.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(t),!this.state.penDetected&&t.pointerType==="pen"&&this.setState(u=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(t.pointerType)&&(this.device=e2(this.device,{isTouchScreen:!0})),Zg||(this.lastPointerDownEvent=t,this.handleCanvasPanUsingWheelOrSpaceDrag(t)))return;if(this.setState({lastPointerDownWith:t.pointerType,cursorButton:"down"}),this.savePointer(t.clientX,t.clientY,"down"),t.button===Il.ERASER&&this.state.activeTool.type!==Xn.eraser){this.setState({activeTool:Xt(this.state,{type:Xn.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(t);const u=()=>{d(),f?.(),Uo(this.state)&&this.setState({activeTool:Xt(this.state,{...this.state.activeTool.lastActiveTool||{type:Xn.selection},lastActiveToolBeforeEraser:null})})},d=Kt(window,ee.POINTER_UP,u,{once:!0});let f;requestAnimationFrame(()=>{f=this.missingPointerEventCleanupEmitter.once(u)})});return}if(t.button!==Il.MAIN&&t.button!==Il.TOUCH&&t.button!==Il.ERASER||lt.pointers.size>1)return;const r=this.initialPointerDownState(t);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(t,r)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(t),this.handleSelectionOnPointerDown(t,r))||!(!this.state.penMode||t.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;this.state.activeTool.type==="lasso"?this.lassoTrail.startPath(r.origin.x,r.origin.y,t.shiftKey):this.state.activeTool.type==="text"?this.handleTextOnPointerDown(t,r):this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line"?this.handleLinearElementOnPointerDown(t,this.state.activeTool.type,r):this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(t,this.state.activeTool.type,r):this.state.activeTool.type==="custom"?ho(this.interactiveCanvas,this.state):this.state.activeTool.type===Xn.frame||this.state.activeTool.type===Xn.magicframe?this.createFrameElementOnPointerDown(r,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(r.lastCoords.x,r.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.state.activeTool.type!=="image"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,r),this.props?.onPointerDown?.(this.state.activeTool,r),this.onPointerDownEmitter.trigger(this.state.activeTool,r,t),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(r.lastCoords.x,r.lastCoords.y);const o=this.onPointerMoveFromPointerDownHandler(r),a=this.onPointerUpFromPointerDownHandler(r),l=this.onKeyDownFromPointerDownHandler(r),c=this.onKeyUpFromPointerDownHandler(r);this.missingPointerEventCleanupEmitter.once(u=>a(u||t.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener(ee.POINTER_MOVE,o),window.addEventListener(ee.POINTER_UP,a),window.addEventListener(ee.KEYDOWN,l),window.addEventListener(ee.KEYUP,c),r.eventListeners.onMove=o,r.eventListeners.onUp=a,r.eventListeners.onKeyUp=c,r.eventListeners.onKeyDown=l)};handleCanvasPointerUp=t=>{this.removePointer(t),this.lastPointerUpEvent=t;const n=Tt({clientX:t.clientX,clientY:t.clientY},this.state),i=t.timeStamp-(this.lastPointerDownEvent?.timeStamp??0);if(this.device.editor.isMobile&&i<300){const r=this.getElementAtPosition(n.x,n.y);if(os(r)&&this.isIframeLikeElementCenter(r,t,n.x,n.y)){this.handleEmbeddableCenterClick(r);return}}if(this.device.isTouchScreen){const r=this.getElementAtPosition(n.x,n.y,{includeLockedElements:!0});this.hitLinkElement=this.getElementLinkAtPosition(n,r)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?i<300&&os(this.hitLinkElement)&&!W$(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,I(n.x,n.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(t,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})};maybeOpenContextMenuAfterPointerDownOnTouchDevices=t=>{t.pointerType==="touch"&&(Qg=!1,Tl?Qg=!0:Tl=window.setTimeout(()=>{Tl=0,Qg||this.handleCanvasContextMenu(t)},Nie))};resetContextMenuTimer=()=>{clearTimeout(Tl),Tl=0,Qg=!1};maybeCleanupAfterMissingPointerUp=t=>{Jg?.(),this.missingPointerEventCleanupEmitter.trigger(t).clear()};handleCanvasPanUsingWheelOrSpaceDrag=t=>{if(!(lt.pointers.size<=1&&(t.button===Il.WHEEL||t.button===Il.MAIN&&tu||_h(this.state)||this.state.viewModeEnabled)))return!1;Zg=!0,this.focusContainer(),this.state.editingTextElement||t.preventDefault();let n=!1;const i=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);_t(this.interactiveCanvas,vt.GRABBING);let{clientX:r,clientY:s}=t;const o=OE(l=>{const c=r-l.clientX,u=s-l.clientY;if(r=l.clientX,s=l.clientY,i&&!n&&(Math.abs(c)>1||Math.abs(u)>1)){n=!0;const d=h=>{document.body.removeEventListener(ee.PASTE,d),h.stopPropagation()},f=()=>{setTimeout(()=>{document.body.removeEventListener(ee.PASTE,d),window.removeEventListener(ee.POINTER_UP,f)},100)};document.body.addEventListener(ee.PASTE,d),window.addEventListener(ee.POINTER_UP,f)}this.translateCanvas({scrollX:this.state.scrollX-c/this.state.zoom.value,scrollY:this.state.scrollY-u/this.state.zoom.value})}),a=Zt(Jg=()=>{Jg=null,Zg=!1,tu||(this.state.viewModeEnabled?_t(this.interactiveCanvas,vt.GRAB):ho(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(t.clientX,t.clientY,"up"),window.removeEventListener(ee.POINTER_MOVE,o),window.removeEventListener(ee.POINTER_UP,a),window.removeEventListener(ee.BLUR,a),o.flush()});return window.addEventListener(ee.BLUR,a),window.addEventListener(ee.POINTER_MOVE,o,{passive:!0}),window.addEventListener(ee.POINTER_UP,a),!0};updateGestureOnPointerDown(t){lt.pointers.set(t.pointerId,{x:t.clientX,y:t.clientY}),lt.pointers.size===2&&(lt.lastCenter=nR(lt.pointers),lt.initialScale=this.state.zoom.value,lt.initialDistance=iR(Array.from(lt.pointers.values())))}initialPointerDownState(t){const n=Tt(t,this.state),i=this.scene.getSelectedElements(this.state),[r,s,o,a]=ft(i),l=i.findIndex(ce)===0;return{origin:n,withCmdOrCtrl:t[B.CTRL_OR_CMD],originInGrid:Fa(An(n.x,n.y,t[B.CTRL_OR_CMD]||l?null:this.getEffectiveGridSize())),scrollbars:fR(qg,t.clientX-this.state.offsetLeft,t.clientY-this.state.offsetTop),lastCoords:{...n},originalElements:this.scene.getNonDeletedElements().reduce((c,u)=>(c.set(u.id,xc(u)),c),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(o+r)/2,y:(a+s)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(n,i)},drag:{hasOccurred:!1,offset:null,origin:{...n}},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(t,n){if(!(n.scrollbars.isOverEither&&!this.state.multiElement))return!1;GE=!0,n.lastCoords.x=t.clientX,n.lastCoords.y=t.clientY;const i=OE(s=>{s.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(s,n)}),r=Zt(()=>{Jg=null,GE=!1,ho(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(t.clientX,t.clientY,"up"),window.removeEventListener(ee.POINTER_MOVE,i),window.removeEventListener(ee.POINTER_UP,r),i.flush()});return Jg=r,window.addEventListener(ee.POINTER_MOVE,i),window.addEventListener(ee.POINTER_UP,r),!0}clearSelectionIfNotUsingSelection=()=>{this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="lasso"&&this.setState({selectedElementIds:pt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})};handleSelectionOnPointerDown=(t,n)=>{if(this.state.activeTool.type==="selection"){const i=this.scene.getNonDeletedElements(),r=this.scene.getNonDeletedElementsMap(),s=this.scene.getSelectedElements(this.state);if(s.length===1&&!this.state.editingLinearElement&&!ce(s[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){const o=bA(i,this.state,n.origin.x,n.origin.y,this.state.zoom,t.pointerType,this.scene.getNonDeletedElementsMap(),this.device);o!=null&&(o.transformHandleType==="rotation"?(this.setState({resizingElement:o.element}),n.resize.handleType=o.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:o.element}),n.resize.handleType=o.transformHandleType))}else s.length>1&&(n.resize.handleType=yA(ft(s),n.origin.x,n.origin.y,this.state.zoom,t.pointerType,this.device));if(n.resize.handleType)n.resize.isResizing=!0,n.resize.offset=Fa(Uce(n.resize.handleType,s,r,n.origin.x,n.origin.y)),s.length===1&&we(s[0])&&s[0].points.length===2&&(n.resize.arrowDirection=bce(n.resize.handleType,s[0]));else{if(this.state.selectedLinearElement){const d=this.state.editingLinearElement||this.state.selectedLinearElement,f=Z.handlePointerDown(t,this,this.store,n.origin,d,this.scene);if(f.hitElement&&(n.hit.element=f.hitElement),f.linearElementEditor&&(this.setState({selectedLinearElement:f.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:f.linearElementEditor})),f.didAddPoint)return!0}const o=this.getElementsAtPosition(n.origin.x,n.origin.y,{includeLockedElements:!0}),a=o.filter(d=>!d.locked),l=this.getElementAtPosition(n.origin.x,n.origin.y,{allHitElements:o});if((!l||l.id!==this.state.activeLockedId)&&this.setState({activeLockedId:null}),l&&l.locked&&!a.some(d=>this.state.selectedElementIds[d.id])?n.hit.element=null:n.hit.element=n.hit.element??this.getElementAtPosition(n.origin.x,n.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(n.origin,l),this.hitLinkElement)return!0;if(this.state.croppingElementId&&n.hit.element?.id!==this.state.croppingElementId&&this.finishImageCropping(),n.hit.element&&this.getElementLinkAtPosition({x:n.origin.x,y:n.origin.y},n.hit.element))return!1;n.hit.allHitElements=a;const c=n.hit.element,u=n.hit.allHitElements.some(d=>this.isASelectedElement(d));if((c===null||!u)&&!t.shiftKey&&!n.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(c),this.state.editingLinearElement)this.setState({selectedElementIds:pt({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(c!=null){if(t[B.CTRL_OR_CMD])return t.altKey||(this.state.selectedElementIds[c.id]||(n.hit.wasAddedToSelection=!0),this.setState(d=>({...$ae(d,c),previousSelectedElementIds:this.state.selectedElementIds}))),!1;this.state.selectedElementIds[c.id]||(this.state.editingGroupId&&!V0(c,this.state.editingGroupId)&&this.setState({selectedElementIds:pt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!u&&!n.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(d=>{let f={...d.selectedElementIds,[c.id]:!0};const h=[];if(Object.keys(d.selectedElementIds).forEach(m=>{const p=this.scene.getElement(m);p&&h.push(p)}),pe(c))Ss(h,c.id).forEach(m=>{delete f[m.id]});else if(c.frameId)f[c.frameId]&&delete f[c.id];else{const m=c.groupIds,p=new Set(m.flatMap(y=>It(this.scene.getNonDeletedElements(),y)).filter(y=>pe(y)).map(y=>y.id));p.size>0&&h.forEach(y=>{y.frameId&&p.has(y.frameId)&&(delete f[y.id],y.groupIds.flatMap(b=>It(this.scene.getNonDeletedElements(),b)).forEach(b=>{delete f[b.id]}))})}return d.openDialog?.name==="elementLinkSelector"&&(c.groupIds.some(m=>d.selectedGroupIds[m])||(f={[c.id]:!0})),{...Mi({editingGroupId:d.editingGroupId,selectedElementIds:f},this.scene.getNonDeletedElements(),d,this),showHyperlinkPopup:c.link||ur(c)?"info":!1}}),n.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1};isASelectedElement(t){return t!=null&&this.state.selectedElementIds[t.id]}isHittingCommonBoundingBoxOfSelectedElements(t,n){if(n.length<2)return!1;const i=Math.max(Qx/this.state.zoom.value,1),[r,s,o,a]=ft(n);return t.x>r-i&&t.x<o+i&&t.y>s-i&&t.y<a+i}handleTextOnPointerDown=(t,n)=>{if(this.state.editingTextElement)return;let i=n.origin.x,r=n.origin.y;const s=this.getElementAtPosition(i,r,{includeBoundTextElement:!0});let o=this.getTextBindableContainerAtPosition(i,r);nr(s)&&(o=s,i=s.x+s.width/2,r=s.y+s.height/2),this.startTextEditing({sceneX:i,sceneY:r,insertAtParentCenter:!t.altKey,container:o,autoEdit:!1}),fo(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:Xt(this.state,{type:"selection"})})};handleFreeDrawElementOnPointerDown=(t,n,i)=>{const[r,s]=An(i.origin.x,i.origin.y,null),o=this.getTopLayerFrameAtSceneCoords({x:r,y:s}),a=t.pressure===.5,l=Wle({type:n,x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:a,locked:!1,frameId:o?o.id:null,points:[I(0,0)],pressures:a?[]:[t.pressure]});this.scene.insertElement(l),this.setState(u=>{const d={...u.selectedElementIds};return delete d[l.id],{selectedElementIds:pt(d,u)}});const c=Ha(i.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:l,startBoundElement:c,suggestedBindings:[]})};insertIframeElement=({sceneX:t,sceneY:n,width:i,height:r})=>{const[s,o]=An(t,n,this.lastPointerDownEvent?.[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=Xle({type:"iframe",x:s,y:o,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:i,height:r});return this.scene.insertElement(a),a};insertEmbeddableElement=({sceneX:t,sceneY:n,link:i})=>{const[r,s]=An(t,n,this.lastPointerDownEvent?.[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o=If(i);if(!o)return;o.error instanceof URIError&&this.setToast({message:M("toast.unrecognizedLinkFormat"),closable:!0});const a=lA({type:"embeddable",x:r,y:s,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:o.intrinsicSize.w,height:o.intrinsicSize.h,link:i});return this.scene.insertElement(a),a};createImageElement=async({sceneX:t,sceneY:n,addToFrameUnderCursor:i=!0,imageFile:r})=>{if(r.type===Ue.pdf){let d=Promise.resolve({x:t,y:n});await P4e(r,f=>{d=d.then(async({x:h,y:m})=>{const p=await this.createImageElement({sceneX:h,sceneY:m,imageFile:f});return{x:h,y:m+p.height}})}),await d;return}const[s,o]=An(t,n,this.lastPointerDownEvent?.[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=i?this.getTopLayerFrameAtSceneCoords({x:s,y:o}):null,l=100/this.state.zoom.value,c=XB({type:"image",strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:a?a.id:null,x:s-l/2,y:o-l/2,width:l,height:l});return await this.insertImageElement(c,r)};handleLinearElementOnPointerDown=(t,n,i)=>{if(this.state.multiElement){const{multiElement:r}=this.state;if(r.type==="line"&&Bo(r.points,this.state.zoom.value)){this.scene.mutateElement(r,{lastCommittedPoint:r.points[r.points.length-1]}),this.actionManager.executeAction(Rs);return}if(ce(r)&&r.points.length>1){this.scene.mutateElement(r,{lastCommittedPoint:r.points[r.points.length-1]}),this.actionManager.executeAction(Rs);return}const{x:s,y:o,lastCommittedPoint:a}=r;if(r.points.length>1&&a&&dt(I(i.origin.x-s,i.origin.y-o),a)<QU){this.actionManager.executeAction(Rs);return}this.setState(l=>({selectedElementIds:pt({...l.selectedElementIds,[r.id]:!0},l)})),this.scene.mutateElement(r,{lastCommittedPoint:r.points[r.points.length-1]}),_t(this.interactiveCanvas,vt.POINTER)}else{const[r,s]=An(i.origin.x,i.origin.y,t[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o=this.getTopLayerFrameAtSceneCoords({x:r,y:s}),{currentItemStartArrowhead:a,currentItemEndArrowhead:l}=this.state,[c,u]=n==="arrow"?[a,l]:[null,null],d=n==="arrow"?Vf({type:n,x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===ii.round?{type:ln.PROPORTIONAL_RADIUS}:null,startArrowhead:c,endArrowhead:u,locked:!1,frameId:o?o.id:null,elbowed:this.state.currentItemArrowType===ii.elbow,fixedSegments:this.state.currentItemArrowType===ii.elbow?[]:null}):ac({type:n,x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:ln.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:o?o.id:null});this.setState(h=>{const m={...h.selectedElementIds};return delete m[d.id],{selectedElementIds:pt(m,h)}}),this.scene.mutateElement(d,{points:[...d.points,I(0,0)]});const f=Ha(i.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,ce(d),ce(d));this.scene.insertElement(d),this.setState({newElement:d,startBoundElement:f,suggestedBindings:[]})}};getCurrentItemRoundness(t){return this.state.currentItemRoundness==="round"?{type:_d(t)?ln.ADAPTIVE_RADIUS:ln.PROPORTIONAL_RADIUS}:null}createGenericElementOnPointerDown=(t,n)=>{const[i,r]=An(n.origin.x,n.origin.y,this.lastPointerDownEvent?.[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),s=this.getTopLayerFrameAtSceneCoords({x:i,y:r}),o={x:i,y:r,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(t),locked:!1,frameId:s?s.id:null};let a;t==="embeddable"?a=lA({type:"embeddable",...o}):a=$o({type:t,...o}),a.type==="selection"?this.setState({selectionElement:a}):(this.scene.insertElement(a),this.setState({multiElement:null,newElement:a}))};createFrameElementOnPointerDown=(t,n)=>{const[i,r]=An(t.origin.x,t.origin.y,this.lastPointerDownEvent?.[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),s={x:i,y:r,opacity:this.state.currentItemOpacity,locked:!1,...Rt},o=n===Xn.magicframe?B7(s):y9(s);this.scene.insertElement(o),this.setState({multiElement:null,newElement:o})};maybeCacheReferenceSnapPoints(t,n,i=!1){Rc({event:t,app:this,selectedElements:n})&&(i||!Di.getReferenceSnapPoints())&&Di.setReferenceSnapPoints(EEe(this.scene.getNonDeletedElements(),n,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(t,n,i=!1){Rc({event:t,app:this,selectedElements:n})&&(i||!Di.getVisibleGaps())&&Di.setVisibleGaps(yEe(this.scene.getNonDeletedElements(),n,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(t){return Zt(n=>{this.maybeHandleResize(t,n)||this.maybeDragNewGenericElement(t,n)})}onKeyUpFromPointerDownHandler(t){return Zt(n=>{n.key===B.ALT&&n.preventDefault(),!this.maybeHandleResize(t,n)&&this.maybeDragNewGenericElement(t,n)})}onPointerMoveFromPointerDownHandler(t){return OE(n=>{if(this.state.openDialog?.name==="elementLinkSelector")return;const i=Tt(n,this.state);if(this.state.activeLockedId&&this.setState({activeLockedId:null}),this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){const[d,f]=An(i.x,i.y,n[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize());let h=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(h<0){const p=Z.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:d,y:f},this.state,this.scene.getNonDeletedElementsMap());h=p?Z.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,p,this.scene.getNonDeletedElementsMap()):-1}const m=Z.moveFixedSegment(this.state.selectedLinearElement,h,d,f,this.scene);vn.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:m.segmentMidPointHoveredCoords,pointerDownState:m.pointerDownState}})});return}const r=this.lastPointerMoveCoords??t.origin;if(this.lastPointerMoveCoords=i,t.drag.offset===null&&(t.drag.offset=Fa($le(this.scene.getSelectedElements(this.state),t.origin.x,t.origin.y))),!(n.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(n,t))return;if(Uo(this.state)){this.handleEraser(n,i);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(i.x,i.y);const[o,a]=An(i.x,i.y,n[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!t.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&dt(I(i.x,i.y),I(t.origin.x,t.origin.y))<m7)return;if(t.resize.isResizing&&(t.lastCoords.x=i.x,t.lastCoords.y=i.y,this.maybeHandleCrop(t,n)||this.maybeHandleResize(t,n)))return!0;const l=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){const d=this.state.editingLinearElement||this.state.selectedLinearElement;if(Z.shouldAddMidpoint(this.state.selectedLinearElement,i,this.state,l)){const h=Z.addMidpoint(this.state.selectedLinearElement,i,this,!n[B.CTRL_OR_CMD],this.scene);if(!h)return;vn.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:h.pointerDownState,selectedPointsIndices:h.selectedPointsIndices,segmentMidPointHoveredCoords:null}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:h.pointerDownState,selectedPointsIndices:h.selectedPointsIndices,segmentMidPointHoveredCoords:null}})});return}else if(d.pointerDownState.segmentMidpoint.value!==null&&!d.pointerDownState.segmentMidpoint.added)return;const f=Z.handlePointDragging(n,this,i.x,i.y,d);if(f){t.lastCoords.x=i.x,t.lastCoords.y=i.y,t.drag.hasOccurred=!0,this.setState(f);return}}const c=t.hit.allHitElements.some(d=>this.isASelectedElement(d)),u=this.state.editingLinearElement&&n.shiftKey&&this.state.editingLinearElement.elementId===t.hit.element?.id;if((c||t.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!u&&this.state.activeTool.type!=="lasso"){const d=this.scene.getSelectedElements(this.state);if(d.every(p=>p.locked))return;const f=d.find(p=>pe(p)),h=this.getTopLayerFrameAtSceneCoords(i),m=h&&!f?h:null;if(this.state.frameToHighlight!==m&&vn.flushSync(()=>{this.setState({frameToHighlight:m})}),t.drag.hasOccurred=!0,d.length>0&&!t.withCmdOrCtrl&&!this.state.editingTextElement&&this.state.activeEmbeddable?.state!=="active"){const p={x:i.x-t.drag.origin.x,y:i.y-t.drag.origin.y},y=[...t.originalElements.values()],b=n.shiftKey;if(b){const w=Math.abs(p.x),S=Math.abs(p.y),k=b&&w<S,_=b&&w>S;k&&(p.x=0),_&&(p.y=0)}if(this.state.croppingElementId){const w=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(w&&yt(w)&&w.crop!==null&&t.hit.element===w){const S=w.crop,k=Tn(w)&&this.imageCache.get(w.fileId)?.image;if(k&&!(k instanceof Promise)){const _=Sn(rn(i.x-r.x,i.y-r.y),Math.max(this.state.zoom.value,2)),[T,A,C,R,P,N]=Le(w,l),K=ae(W(I(T,A),I(P,N),w.angle)),H=ae(W(I(C,A),I(P,N),w.angle)),z=ae(W(I(T,R),I(P,N),w.angle)),V=ws(gb(H,K)),$=ws(gb(z,K)),G=rn(Z1(_,V),Z1(_,$)),J={...S,x:Ve(S.x-G[0]*Math.sign(w.scale[0]),0,k.naturalWidth-S.width),y:Ve(S.y-G[1]*Math.sign(w.scale[1]),0,k.naturalHeight-S.height)};this.scene.mutateElement(w,{crop:J});return}}}this.maybeCacheVisibleGaps(n,d),this.maybeCacheReferenceSnapPoints(n,d);const{snapOffset:E,snapLines:v}=vEe(y,p,this,n,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:v}),this.state.editingFrame||Hle(t,d,p,this.scene,E,n[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(d.length!==1||!ce(d[0]))&&this.setState({suggestedBindings:H8(d,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),n.altKey&&!t.hit.hasBeenDuplicated){t.hit.hasBeenDuplicated=!0;const w=this.scene.getElementsIncludingDeleted(),S=t.hit.element,k=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});S&&t.hit.wasAddedToSelection&&!k.find(H=>H.id===S.id)&&k.push(S);const _=new Map(k.map(H=>[H.id,H])),{duplicatedElements:T,duplicateElementsMap:A,elementsWithDuplicates:C,origIdToDuplicateId:R}=Vb({type:"in-place",elements:w,appState:this.state,randomizeSeed:!0,idsOfElementsToDuplicate:_,overrides:({duplicateElement:H,origElement:z})=>({frameId:H.frameId??z.frameId,seed:Ts()})});T.forEach(H=>{t.originalElements.set(H.id,xc(H))});const P=C.map(H=>{if(_.has(H.id)){const z=t.originalElements.get(H.id);if(z)return Ee(H,{x:z.x,y:z.y})}return H}),N=this.props.onDuplicate?.(P,w),K=qs(N||P,be(T));vn.flushSync(()=>{if(t.hit.element){const H=R.get(t.hit.element.id),z=H&&A.get(H);t.hit.element=z||null}t.hit.allHitElements=t.hit.allHitElements.reduce((H,z)=>{const V=R.get(z.id),$=V&&A.get(V);return $&&H.push($),H},[]),t.drag.origin=Tt(n,this.state),this.setState(H=>({...pB(T,this.scene.getNonDeletedElements(),H)})),this.scene.replaceAllElements(K),this.maybeCacheVisibleGaps(n,k,!0),this.maybeCacheReferenceSnapPoints(n,k,!0)})}return}}if(this.state.selectionElement)t.lastCoords.x=i.x,t.lastCoords.y=i.y,n.altKey?vn.flushSync(()=>{this.setActiveTool({type:"lasso",fromSelection:!0},n.shiftKey),this.lassoTrail.startPath(t.origin.x,t.origin.y,n.shiftKey),this.setAppState({selectionElement:null})}):this.maybeDragNewGenericElement(t,n);else if(this.state.activeTool.type==="lasso")!n.altKey&&this.state.activeTool.fromSelection?(this.setActiveTool({type:"selection"}),this.createGenericElementOnPointerDown("selection",t),t.lastCoords.x=i.x,t.lastCoords.y=i.y,this.maybeDragNewGenericElement(t,n),this.lassoTrail.endPath()):this.lassoTrail.addPointToPath(i.x,i.y,n.shiftKey);else{const d=this.state.newElement;if(!d)return;if(d.type==="freedraw"){const f=d.points,h=i.x-d.x,m=i.y-d.y,p=f.length>0&&f[f.length-1];if(!(p&&p[0]===h&&p[1]===m)){const b=d.simulatePressure?d.pressures:[...d.pressures,n.pressure];this.scene.mutateElement(d,{points:[...f,I(h,m)],pressures:b},{informMutation:!1,isDragging:!1}),this.setState({newElement:d})}}else if(we(d)){t.drag.hasOccurred=!0;const f=d.points;let h=o-d.x,m=a-d.y;W1(n)&&f.length===2&&({width:h,height:m}=O7(d.x,d.y,i.x,i.y)),f.length===1?this.scene.mutateElement(d,{points:[...f,I(h,m)]},{informMutation:!1,isDragging:!1}):(f.length===2||f.length>1&&ce(d))&&this.scene.mutateElement(d,{points:[...f.slice(0,-1),I(h,m)]},{isDragging:!0,informMutation:!1}),this.setState({newElement:d}),Aa(d,!1)&&this.setState({suggestedBindings:C7(d,[i],this.scene,this.state.zoom,this.state.startBoundElement)})}else t.lastCoords.x=i.x,t.lastCoords.y=i.y,this.maybeDragNewGenericElement(t,n,!1)}if(this.state.activeTool.type==="selection"){t.boxSelection.hasOccurred=!0;const d=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)Z.handleBoxSelection(n,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let f=!0;!n.shiftKey&&Hn(d,this.state)&&(t.withCmdOrCtrl&&t.hit.element?this.setState(m=>Mi({...m,selectedElementIds:{[t.hit.element.id]:!0}},this.scene.getNonDeletedElements(),m,this)):f=!1);const h=this.state.selectionElement?s9(d,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(m=>{const p={...f&&m.selectedElementIds,...h.reduce((y,b)=>(y[b.id]=!0,y),{})};return t.hit.element&&(h.length?delete p[t.hit.element.id]:p[t.hit.element.id]=!0),m=f?m:{...m,selectedGroupIds:{},editingGroupId:null},{...Mi({editingGroupId:m.editingGroupId,selectedElementIds:p},this.scene.getNonDeletedElements(),m,this),selectedLinearElement:h.length===1&&we(h[0])?new Z(h[0],this.scene.getNonDeletedElementsMap()):null,showHyperlinkPopup:h.length===1&&(h[0].link||ur(h[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(t,n){if(n.scrollbars.isOverHorizontal){const i=t.clientX,r=i-n.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-r*(qg.horizontal?.deltaMultiplier||1)/this.state.zoom.value}),n.lastCoords.x=i,!0}if(n.scrollbars.isOverVertical){const i=t.clientY,r=i-n.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-r*(qg.vertical?.deltaMultiplier||1)/this.state.zoom.value}),n.lastCoords.y=i,!0}return!1}onPointerUpFromPointerDownHandler(t){return Zt(n=>{this.removePointer(n),t.eventListeners.onMove&&t.eventListeners.onMove.flush();const{newElement:i,resizingElement:r,croppingElementId:s,multiElement:o,activeTool:a,isResizing:l,isRotating:c,isCropping:u}=this.state;this.setState(b=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:Ng(b.snapLines,[]),originSnapOffset:null})),this.lassoTrail.endPath(),this.lastPointerMoveCoords=null,Di.setReferenceSnapPoints(null),Di.setVisibleGaps(null),this.savePointer(n.clientX,n.clientY,"up");const d=t.hit.allHitElements,f=Tt({clientX:n.clientX,clientY:n.clientY},this.state);if(this.state.activeTool.type==="selection"&&!t.boxSelection.hasOccurred&&!t.resize.isResizing&&!d.some(b=>this.state.selectedElementIds[b.id])){const b=this.getElementAtPosition(f.x,f.y,{includeLockedElements:!0});this.store.scheduleCapture(),b?.locked?this.setState({activeLockedId:b.groupIds.length>0?b.groupIds.at(-1)||"":b.id}):this.setState({activeLockedId:null})}else this.setState({activeLockedId:null});this.setState({selectedElementsAreBeingDragged:!1});const h=this.scene.getNonDeletedElementsMap();if(t.drag.hasOccurred&&t.hit?.element?.id){const b=h.get(t.hit.element.id);Zs(b)&&b.boundElements?.filter(E=>E.type==="arrow").map(E=>h.get(E.id)).filter(E=>ce(E)).forEach(E=>{E&&this.scene.mutateElement(E,{})})}if(this.state.editingLinearElement)if(!t.boxSelection.hasOccurred&&t.hit?.element?.id!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(Rs);else{const b=Z.handlePointerUp(n,this.state.editingLinearElement,this.state,this.scene);b!==this.state.editingLinearElement&&this.setState({editingLinearElement:b,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){const b=Z.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());b&&this.scene.mutateElement(b,{})}t.hit?.element?.id!==this.state.selectedLinearElement.elementId?this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null}):this.state.selectedLinearElement.isDragging&&this.actionManager.executeAction(Rs,"ui",{event:n,sceneCoords:f})}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener(ee.POINTER_MOVE,t.eventListeners.onMove),window.removeEventListener(ee.POINTER_UP,t.eventListeners.onUp),window.removeEventListener(ee.KEYDOWN,t.eventListeners.onKeyDown),window.removeEventListener(ee.KEYUP,t.eventListeners.onKeyUp),this.props?.onPointerUp?.(a,t),this.onPointerUpEmitter.trigger(this.state.activeTool,t,n),i?.type==="freedraw"){const b=Tt(n,this.state),E=i.points;let v=b.x-i.x,w=b.y-i.y;v===E[0][0]&&w===E[0][1]&&(w+=1e-4,v+=1e-4);const S=i.simulatePressure?[]:[...i.pressures,n.pressure];this.scene.mutateElement(i,{points:[...E,I(v,w)],pressures:S,lastCommittedPoint:I(v,w)}),this.actionManager.executeAction(Rs);return}if(we(i)){i.points.length>1&&this.store.scheduleCapture();const b=Tt(n,this.state);!t.drag.hasOccurred&&i&&!o?(this.scene.mutateElement(i,{points:[...i.points,I(b.x-i.x,b.y-i.y)]},{informMutation:!1,isDragging:!1}),this.setState({multiElement:i,newElement:i})):t.drag.hasOccurred&&!o&&(Nu(this.state)&&Aa(i,!1)&&this.actionManager.executeAction(Rs,"ui",{event:n,sceneCoords:f}),this.setState({suggestedBindings:[],startBoundElement:null}),a.locked?this.setState(E=>({newElement:null})):(fo(this.interactiveCanvas),this.setState(E=>({newElement:null,activeTool:Xt(this.state,{type:"selection"}),selectedElementIds:pt({...E.selectedElementIds,[i.id]:!0},E),selectedLinearElement:new Z(i,this.scene.getNonDeletedElementsMap())}))),this.scene.triggerUpdate());return}if(le(i)){const b=jw(ot({fontSize:i.fontSize,fontFamily:i.fontFamily}),i.lineHeight);i.width<b&&this.scene.mutateElement(i,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(i,{isExistingElement:!0})}if(a.type!=="selection"&&i&&oc(i)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(b=>b.id!==i.id),appState:{newElement:null},captureUpdate:j.NEVER});return}if(pe(i)){const b=Qae(this.scene.getElementsIncludingDeleted(),i,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(e0(this.scene.getElementsMapIncludingDeleted(),b,i,this.state))}if(i&&(this.scene.mutateElement(i,DB(i),{informMutation:!1,isDragging:!1}),this.scene.triggerUpdate()),t.drag.hasOccurred){const b=Tt(n,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){const E=this.scene.getElement(this.state.selectedLinearElement.elementId);if(E?.frameId){const v=Ur(E,h);v&&E&&(Ic(E,v,this.scene.getNonDeletedElementsMap())||(this.scene.mutateElement(E,{groupIds:[]}),p5([E],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{const E=this.getTopLayerFrameAtSceneCoords(b),v=this.scene.getSelectedElements(this.state);let w=this.scene.getElementsMapIncludingDeleted();const S=k=>{if(k.length>0){for(const _ of k){const T=_.groupIds.indexOf(this.state.editingGroupId);this.scene.mutateElement(_,{groupIds:_.groupIds.slice(0,T)},{informMutation:!1,isDragging:!1})}w.forEach(_=>{_.groupIds.length&&It(w,_.groupIds[_.groupIds.length-1]).length<2&&this.scene.mutateElement(_,{groupIds:[]},{informMutation:!1,isDragging:!1})}),this.setState({editingGroupId:null})}};if(E&&!this.state.selectedElementIds[E.id]){const k=v.filter(_=>_.frameId!==E.id&&Fb(_,w,this.state));this.state.editingGroupId&&S(k),w=e0(w,k,E,this.state)}else if(!E&&this.state.editingGroupId){const k=v.filter(_=>_.frameId&&!Fb(_,w,this.state));S(k)}w=Uh(w,this.state,this),this.scene.replaceAllElements(w)}}if(r&&this.store.scheduleCapture(),r&&oc(r)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(b=>b.id!==r.id),captureUpdate:j.NEVER}),t.resize.isResizing){let b=Uh(this.scene.getElementsIncludingDeleted(),this.state,this);const E=this.scene.getSelectedElements(this.state).filter(v=>pe(v));for(const v of E)b=Jh(b,ko(this.scene.getElementsIncludingDeleted(),v,this.state,h),v,this);this.scene.replaceAllElements(b)}const m=t.hit.element;this.state.selectedLinearElement?.elementId!==m?.id&&we(m)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new Z(m,this.scene.getNonDeletedElementsMap())}),(!s||s&&(!m&&!u||m&&m.id!==s))&&this.finishImageCropping();const p=this.lastPointerDownEvent,y=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(Uo(this.state)&&p&&y){if(this.eraserTrail.endPath(),dt(I(p.clientX,p.clientY),I(y.clientX,y.clientY))===0){const E=Tt({clientX:y.clientX,clientY:y.clientY},this.state);this.getElementsAtPosition(E.x,E.y).forEach(w=>this.elementsPendingErasure.add(w.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(m&&!t.drag.hasOccurred&&!t.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!t.boxSelection.hasOccurred)&&this.state.activeTool.type!=="lasso"&&(n.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[m.id]?fB(this.state,m)?this.setState(b=>{const E={...b.selectedElementIds};for(const v of m.groupIds.flatMap(w=>It(this.scene.getNonDeletedElements(),w)))delete E[v.id];return{selectedGroupIds:{...b.selectedElementIds,...m.groupIds.map(v=>({[v]:!1})).reduce((v,w)=>({...v,...w}),{})},selectedElementIds:pt(E,b)}}):this.state.selectedLinearElement?.isDragging||this.setState(b=>{const E={...b.selectedElementIds};delete E[m.id];const v=Ne(this.scene.getNonDeletedElements(),{selectedElementIds:E});return{...Mi({editingGroupId:b.editingGroupId,selectedElementIds:E},this.scene.getNonDeletedElements(),b,this),selectedLinearElement:v.length===1&&we(v[0])?new Z(v[0],this.scene.getNonDeletedElementsMap()):b.selectedLinearElement}}):m.frameId&&this.state.selectedElementIds[m.frameId]?this.setState(b=>{const E={...b.selectedElementIds,[m.id]:!0};return delete E[m.frameId],(this.scene.getElement(m.frameId)?.groupIds??[]).flatMap(v=>It(this.scene.getNonDeletedElements(),v)).forEach(v=>{delete E[v.id]}),{...Mi({editingGroupId:b.editingGroupId,selectedElementIds:E},this.scene.getNonDeletedElements(),b,this),showHyperlinkPopup:m.link||ur(m)?"info":!1}}):this.setState(b=>({selectedElementIds:pt({...b.selectedElementIds,[m.id]:!0},b)})):this.setState(b=>({...Mi({editingGroupId:b.editingGroupId,selectedElementIds:{[m.id]:!0}},this.scene.getNonDeletedElements(),b,this),selectedLinearElement:we(m)&&b.selectedLinearElement?.elementId!==m.id?new Z(m,this.scene.getNonDeletedElementsMap()):b.selectedLinearElement}))),this.state.activeTool.type!=="lasso"&&!(m&&ce(m))&&!t.drag.hasOccurred&&!this.state.isResizing&&(m&&Yoe({point:I(t.origin.x,t.origin.y),element:m,elementsMap:h,threshold:this.getElementHitThreshold(m),frameNameBound:pe(m)?this.frameNameBoundsCache.get(m):null},h)||!m&&t.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:pt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),_t(this.interactiveCanvas,vt.AUTO);return}if(!a.locked&&a.type!=="freedraw"&&i&&this.setState(b=>({selectedElementIds:pt({...b.selectedElementIds,[i.id]:!0},b),showHyperlinkPopup:ur(i)&&!i.link?"editor":b.showHyperlinkPopup})),(a.type!=="selection"||Hn(this.scene.getNonDeletedElements(),this.state)||!Bi(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.scheduleCapture(),t.drag.hasOccurred&&!this.state.selectedLinearElement||l||c||u){const b=this.scene.getSelectedElements(this.state).filter(we);Db(b,Nu(this.state),this.state.selectedLinearElement?.selectedPointsIndices??[],this.scene,this.state.zoom)}if(a.type==="laser"){this.laserTrails.endPath();return}!a.locked&&a.type!=="freedraw"&&(a.type!=="lasso"||a.type==="lasso"&&a.fromSelection)?(fo(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:Xt(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),m&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&lt.pointers.size<=1&&os(m)&&this.isIframeLikeElementCenter(m,this.lastPointerUpEvent,t.origin.x,t.origin.y)&&this.handleEmbeddableCenterClick(m)})}restoreReadyToEraseElements=()=>{this.elementsPendingErasure=new Set,this.triggerRender()};eraseElements=()=>{let t=!1;const n=this.scene.getElementsIncludingDeleted().map(i=>this.elementsPendingErasure.has(i.id)||i.frameId&&this.elementsPendingErasure.has(i.frameId)||Ft(i)&&this.elementsPendingErasure.has(i.containerId)?(t=!0,Ee(i,{isDeleted:!0})):i);this.elementsPendingErasure=new Set,t&&(this.store.scheduleCapture(),this.scene.replaceAllElements(n))};initializeImage=async(t,n)=>{if(!Fu(n))throw new Error(M("errors.unsupportedFileType"));const i=n.type;if(_t(this.interactiveCanvas,"wait"),i===Ue.svg)try{n=Sk(mA(await n.text()),n.name)}catch(a){throw console.warn(a),new Error(M("errors.svgImageInsertError"))}const r=await(this.props.generateIdForFile?.(n)||K6e(n));if(!r)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(M("errors.imageInsertError"));if(!this.files[r]?.dataURL){try{n=await lG(n,{maxWidthOrHeight:Xie})}catch(a){console.error("Error trying to resizing image file on insertion",a)}if(n.size>nC)throw new Error(M("errors.fileTooBig",{maxSize:`${Math.trunc(nC/1024/1024)}MB`}))}const o=this.files[r]?.dataURL||await aG(n);return new Promise(async(a,l)=>{try{let c=this.getLatestInitializedImageElement(t,r);if(this.addMissingFiles([{mimeType:i,id:r,dataURL:o,created:Date.now(),lastRetrieved:Date.now()}]),!this.imageCache.get(r)){this.addNewImagesToImageCache();const{erroredFiles:d}=await this.updateImageCache([c]);if(d.size)throw new Error("Image cache update resulted with an error.")}const u=await this.imageCache.get(r)?.image;if(u&&this.state.newElement?.id!==c.id){c=this.getLatestInitializedImageElement(t,r);const d=this.getImageNaturalDimensions(c,u);Object.assign(c,d)}a(c)}catch(c){console.error(c),l(new Error(M("errors.imageInsertError")))}})};getLatestInitializedImageElement=(t,n)=>{const i=this.scene.getElement(t.id)??t;return Ee(i,{fileId:n})};insertImageElement=async(t,n)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:M("errors.imageToolNotSupported")});return}this.scene.insertElement(t);try{const i=await this.initializeImage(t,n),r=this.scene.getElementsIncludingDeleted().map(s=>s.id===i.id?i:s);return this.updateScene({captureUpdate:j.IMMEDIATELY,elements:r,appState:{selectedElementIds:pt({[i.id]:!0},this.state)}}),i}catch(i){return this.store.scheduleAction(j.NEVER),this.scene.mutateElement(t,{isDeleted:!0}),this.actionManager.executeAction(Rs),this.setState({errorMessage:i.message||M("errors.imageInsertError")}),null}};onImageAction=async()=>{try{const t=this.state.width/2+this.state.offsetLeft,n=this.state.height/2+this.state.offsetTop,{x:i,y:r}=Tt({clientX:t,clientY:n},this.state),s=await g_({description:"Image",extensions:Object.keys(ch)});await this.createImageElement({sceneX:i,sceneY:r,addToFrameUnderCursor:!1,imageFile:s}),this.setState({},()=>{this.actionManager.executeAction(Rs)})}catch(t){t.name!=="AbortError"?console.error(t):console.warn(t),this.setState({newElement:null,activeTool:Xt(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(Rs)})}};getImageNaturalDimensions=(t,n)=>{const i=Math.max(this.state.height-120,160),r=Math.min(i,Math.floor(this.state.height*.5)/this.state.zoom.value),s=Math.min(n.naturalHeight,r),o=s*(n.naturalWidth/n.naturalHeight),a=t.x+t.width/2-o/2,l=t.y+t.height/2-s/2;return{x:a,y:l,width:o,height:s,crop:null}};updateImageCache=async(t,n=this.files)=>{const{updatedFiles:i,erroredFiles:r}=await KB({imageCache:this.imageCache,fileIds:t.map(s=>s.fileId),files:n});return r.size&&(this.store.scheduleAction(j.NEVER),this.scene.replaceAllElements(t.map(s=>Tn(s)&&r.has(s.fileId)?Ee(s,{status:"error"}):s))),{updatedFiles:i,erroredFiles:r}};addNewImagesToImageCache=async(t=ZB(this.scene.getNonDeletedElements()),n=this.files)=>{const i=t.filter(r=>!r.isDeleted&&!this.imageCache.has(r.fileId));if(i.length){const{updatedFiles:r}=await this.updateImageCache(i,n);if(r.size)for(const s of i)r.has(s.fileId)&&Et.delete(s);r.size&&this.scene.triggerUpdate()}};scheduleImageRefresh=So(()=>{this.addNewImagesToImageCache()},Lie);updateBindingEnabledOnPointerMove=t=>{const n=uae(t);this.state.isBindingEnabled!==n&&this.setState({isBindingEnabled:n})};maybeSuggestBindingAtCursor=(t,n)=>{const i=Ha(t,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,n);this.setState({suggestedBindings:i!=null?[i]:[]})};clearSelection(t){this.setState(n=>({selectedElementIds:pt({},n),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:n.editingGroupId&&t!=null&&V0(t,n.editingGroupId)?n.editingGroupId:null})),this.setState({selectedElementIds:pt({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}handleInteractiveCanvasRef=t=>{t!==null?(this.interactiveCanvas=t,this.interactiveCanvas.addEventListener(ee.TOUCH_START,this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener(ee.TOUCH_END,this.onTouchEnd)):(this.interactiveCanvas?.removeEventListener(ee.TOUCH_START,this.onTouchStart),this.interactiveCanvas?.removeEventListener(ee.TOUCH_END,this.onTouchEnd))};handleAppOnDrop=async t=>{const{file:n,fileHandle:i}=await J6e(t),{x:r,y:s}=Tt(t,this.state);try{if(Fu(n)&&this.isToolSupported("image")){if(n?.type===Ue.png||n?.type===Ue.svg)try{const a=await y_(n,this.state,this.scene.getElementsIncludingDeleted(),i);this.syncActionResult({...a,appState:{...a.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:j.IMMEDIATELY});return}catch(a){if(a.name!=="EncodingError")throw new Error(M("alerts.couldNotLoadInvalidFile"))}this.createImageElement({sceneX:r,sceneY:s,imageFile:n});return}}catch(a){return this.setState({isLoading:!1,errorMessage:a.message})}const o=t.dataTransfer.getData(Ue.excalidrawlib);if(o&&typeof o=="string"){try{const a=oG(o);this.addElementsFromPasteOrLibrary({elements:zG(a),position:t,files:null})}catch(a){this.setState({errorMessage:a.message})}return}if(n&&await this.loadFileToCanvas(n,i),t.dataTransfer?.types?.includes("text/plain")){const a=t.dataTransfer?.getData("text");if(a&&l2(a,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(a)||If(a)?.type==="video")){const l=this.insertEmbeddableElement({sceneX:r,sceneY:s,link:Hr(a)});l&&(this.store.scheduleCapture(),this.setState({selectedElementIds:{[l.id]:!0}}))}}};loadFileToCanvas=async(t,n)=>{t=await E_(t);try{const i=this.scene.getElementsIncludingDeleted();let r;try{r=await sG(t,this.state,i,n)}catch(s){const o=s instanceof Uu;if(o&&s.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:M("errors.imageToolNotSupported")});return}const a=M(o?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:a})}if(!r)return;r.type===Ue.excalidraw?(Gc(i.concat(r.data.elements)),this.store.scheduleMicroAction({action:j.NEVER,elements:i,appState:void 0}),this.setState({isLoading:!0}),this.syncActionResult({...r.data,appState:{...r.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:j.IMMEDIATELY})):r.type===Ue.excalidrawlib&&await this.library.updateLibrary({libraryItems:t,merge:!0,openLibraryMenu:!0}).catch(s=>{console.error(s),this.setState({errorMessage:M("errors.importLibraryError")})})}catch(i){this.setState({isLoading:!1,errorMessage:i.message})}};handleCanvasContextMenu=t=>{if(t.preventDefault(),("pointerType"in t.nativeEvent&&t.nativeEvent.pointerType==="touch"||"pointerType"in t.nativeEvent&&t.nativeEvent.pointerType==="pen"&&t.button!==Il.SECONDARY)&&this.state.activeTool.type!=="selection")return;const{x:n,y:i}=Tt(t,this.state),r=this.getElementAtPosition(n,i,{preferSelected:!0,includeLockedElements:!0}),s=this.scene.getSelectedElements(this.state),o=this.isHittingCommonBoundingBoxOfSelectedElements({x:n,y:i},s),a=r||o?"element":"canvas",l=this.excalidrawContainerRef.current,{top:c,left:u}=l.getBoundingClientRect(),d=t.clientX-u,f=t.clientY-c;tt("contextMenu","openContextMenu",a),this.setState({...r&&!this.state.selectedElementIds[r.id]?{...this.state,...Mi({editingGroupId:this.state.editingGroupId,selectedElementIds:{[r.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:we(r)?new Z(r,this.scene.getNonDeletedElementsMap()):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:f,left:d,items:this.getContextMenuItems(a)}})})};maybeDragNewGenericElement=(t,n,i=!0)=>{const r=this.state.selectionElement,s=t.lastCoords;if(r&&this.state.activeTool.type!=="eraser"){aA({newElement:r,elementType:this.state.activeTool.type,originX:t.origin.x,originY:t.origin.y,x:s.x,y:s.y,width:Li(t.origin.x,s.x),height:Li(t.origin.y,s.y),shouldMaintainAspectRatio:Og(n),shouldResizeFromCenter:!1,scene:this.scene,zoom:this.state.zoom.value,informMutation:!1});return}const o=this.state.newElement;if(!o)return;let[a,l]=An(s.x,s.y,n[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const c=Tn(o)&&this.imageCache.get(o.fileId)?.image,u=c&&!(c instanceof Promise)?c.width/c.height:null;this.maybeCacheReferenceSnapPoints(n,[o]);const{snapOffset:d,snapLines:f}=TEe(o,this,n,{x:t.originInGrid.x+(this.state.originSnapOffset?.x??0),y:t.originInGrid.y+(this.state.originSnapOffset?.y??0)},{x:a-t.originInGrid.x,y:l-t.originInGrid.y},this.scene.getNonDeletedElementsMap());a+=d.x,l+=d.y,this.setState({snapLines:f}),aA({newElement:o,elementType:this.state.activeTool.type,originX:t.originInGrid.x,originY:t.originInGrid.y,x:a,y:l,width:Li(t.originInGrid.x,a),height:Li(t.originInGrid.y,l),shouldMaintainAspectRatio:yt(o)?!Og(n):Og(n),shouldResizeFromCenter:iC(n),zoom:this.state.zoom.value,scene:this.scene,widthAspectRatio:u,originOffset:this.state.originSnapOffset,informMutation:i}),this.setState({newElement:o}),(this.state.activeTool.type===Xn.frame||this.state.activeTool.type===Xn.magicframe)&&this.setState({elementsToHighlight:ko(this.scene.getNonDeletedElements(),o,this.state,this.scene.getNonDeletedElementsMap())})};maybeHandleCrop=(t,n)=>{if(!this.state.croppingElementId)return!1;const i=t.resize.handleType,r=t.lastCoords,[s,o]=An(r.x-t.resize.offset.x,r.y-t.resize.offset.y,n[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(i&&a&&yt(a)){const l=t.originalElements.get(a.id),c=Tn(a)&&this.imageCache.get(a.fileId)?.image;if(l&&yt(l)&&c&&!(c instanceof Promise)){const[u,d]=An(r.x,r.y,n[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),f={x:u-t.originInGrid.x,y:d-t.originInGrid.y};this.maybeCacheReferenceSnapPoints(n,[a]);const{snapOffset:h,snapLines:m}=lR([a],[l],this,n,f,i);this.scene.mutateElement(a,coe(a,this.scene.getNonDeletedElementsMap(),i,c.naturalWidth,c.naturalHeight,s+h.x,o+h.y,n.shiftKey?l.width/l.height:void 0)),pr(a,this.scene,{newSize:{width:a.width,height:a.height}}),this.setState({isCropping:i&&i!=="rotation",snapLines:m})}return!0}return!1};maybeHandleResize=(t,n)=>{const i=this.scene.getSelectedElements(this.state),r=i.filter(u=>pe(u)),s=t.resize.handleType;if(r.length>0&&s==="rotation"||i.length===1&&ce(i[0])||this.state.croppingElementId)return!1;this.setState({isResizing:s&&s!=="rotation",isRotating:s==="rotation",activeEmbeddable:null});const o=t.lastCoords;let[a,l]=An(o.x-t.resize.offset.x,o.y-t.resize.offset.y,n[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const c=new Map;if(r.forEach(u=>{Ss(this.scene.getNonDeletedElements(),u.id).forEach(f=>{c.set(u.id+f.id,{x:f.x-u.x,y:f.y-u.y})})}),!this.state.selectedElementsAreBeingDragged){const[u,d]=An(o.x,o.y,n[B.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),f={x:u-t.originInGrid.x,y:d-t.originInGrid.y},h=[...t.originalElements.values()];this.maybeCacheReferenceSnapPoints(n,i);const{snapOffset:m,snapLines:p}=lR(i,Ne(h,this.state),this,n,f,s);a+=m.x,l+=m.y,this.setState({snapLines:p})}if(hce(t.originalElements,s,i,this.scene,W1(n),iC(n),i.some(u=>yt(u))?!Og(n):Og(n),a,l,t.resize.center.x,t.resize.center.y)){const u=H8(i,this.scene.getNonDeletedElementsMap(),this.state.zoom),d=new Set;return r.forEach(f=>{ko(this.scene.getNonDeletedElements(),f,this.state,this.scene.getNonDeletedElementsMap()).forEach(h=>d.add(h))}),this.setState({elementsToHighlight:[...d],suggestedBindings:u}),!0}return!1};getContextMenuItems=t=>{const n=[];return n.push(Dk,Rk),t==="canvas"?this.state.viewModeEnabled?[...n,Ok,v4,tR,w4]:[Mk,Gn,Dk,Rk,Lk,Gn,jde,W5e,Gn,Ok,N5e,v4,tR,w4]:(n.push(Lk),this.state.viewModeEnabled?[w2,...n]:[Gn,kk,w2,Mk,Gn,cEe,uEe,dEe,Gn,lEe,Gn,...n,Gn,T5e,S5e,Gn,x5e,gEe,P5e,F5e,H5e,C5e,Gn,R5e,Gn,Vde,$de,Gde,Xde,Gn,D5e,L5e,Gn,aEe,Gn,_G,AG,Gn,Yde,TG,Gn,LH])};handleWheel=Zt(t=>{if(!(t.target instanceof HTMLCanvasElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLIFrameElement)){t[B.CTRL_OR_CMD]&&t.preventDefault();return}if(t.preventDefault(),Zg)return;const{deltaX:n,deltaY:i}=t;if(t.metaKey||t.ctrlKey){const r=Math.sign(i),s=r5*100,o=Math.abs(i);let a=i;o>s&&(a=s*r);let l=this.state.zoom.value-a/100;l+=Math.log10(Math.max(1,this.state.zoom.value))*-r*Math.min(1,o/20),this.translateCanvas(c=>({...bu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:ka(l)},c),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(t.shiftKey){this.translateCanvas(({zoom:r,scrollX:s})=>({scrollX:s-(i||n)/r.value}));return}this.translateCanvas(({zoom:r,scrollX:s,scrollY:o})=>({scrollX:s-n/r.value,scrollY:o-i/r.value}))});getTextWysiwygSnappedToCenterPosition(t,n,i,r){if(r){let s=r.x+r.width/2,o=r.y+r.height/2;const a=B8(r,i,this.scene.getNonDeletedElementsMap());if(a&&(s=a.x,o=a.y),Math.hypot(t-s,n-o)<Iie){const{x:u,y:d}=Nr({sceneX:s,sceneY:o},i);return{viewportX:u,viewportY:d,elementCenterX:s,elementCenterY:o}}}}savePointer=(t,n,i)=>{if(!t||!n)return;const{x:r,y:s}=Tt({clientX:t,clientY:n},this.state),o={x:r,y:s,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};this.props.onPointerUpdate?.({pointer:o,button:i,pointersMap:lt.pointers})};resetShouldCacheIgnoreZoomDebounced=Ya(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300);updateDOMRect=t=>{if(this.excalidrawContainerRef?.current){const n=this.excalidrawContainerRef.current,{width:i,height:r,left:s,top:o}=n.getBoundingClientRect(),{width:a,height:l,offsetTop:c,offsetLeft:u}=this.state;if(i===a&&r===l&&s===u&&o===c){t&&t();return}this.setState({width:i,height:r,offsetLeft:s,offsetTop:o},()=>{t&&t()})}};refresh=()=>{this.setState({...this.getCanvasOffsets()})};getCanvasOffsets(){if(this.excalidrawContainerRef?.current){const t=this.excalidrawContainerRef.current,{left:n,top:i}=t.getBoundingClientRect();return{offsetLeft:n,offsetTop:i}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){const t=w5.find(n=>n.code===this.props.langCode)||Td;await iH(t),this.setAppState({})}}const F4e=e=>{const[t,n]=D.useState(!0);return D.useEffect(()=>{const i=async()=>{await iH(r),n(!1)},r=w5.find(s=>s.code===e.langCode)||Td;i()},[e.langCode]),t?g(hX,{theme:e.theme}):e.children},Cj=({children:e})=>{const{FooterCenterTunnel:t}=ar(),n=hi();return g(t.In,{children:g("div",{className:he("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":n.zenModeEnabled}),children:e})})};Cj.displayName="FooterCenter";const Aj=({isCollaborating:e,onSelect:t,...n})=>{const i=hi(),r=i.width<830;return O(cd,{...n,className:he("collab-button",{active:e}),type:"button",onSelect:t,style:{position:"relative",width:r?void 0:"auto"},title:M("labels.liveCollaboration"),children:[r?O9:M("labels.share"),i.collaborators.size>0&&g("div",{className:"CollabButton-collaborators",children:i.collaborators.size})]})};Aj.displayName="LiveCollaborationTrigger";const B4e=()=>g("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),z4e=()=>O("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[g("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),Mj=({style:e,size:t="small",withText:n})=>O("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[g(B4e,{}),n&&g(z4e,{})]}),X_=({icon:e,shortcut:t,children:n})=>{const i=ei();return O(de,{children:[g("div",{className:"welcome-screen-menu-item__icon",children:e}),g("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!i.editor.isMobile&&g("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};X_.displayName="WelcomeScreenMenuItemContent";const dp=({onSelect:e,children:t,icon:n,shortcut:i,className:r="",...s})=>g("button",{...s,type:"button",className:`welcome-screen-menu-item ${r}`,onClick:e,children:g(X_,{icon:n,shortcut:i,children:t})});dp.displayName="WelcomeScreenMenuItem";const kj=({children:e,href:t,icon:n,shortcut:i,className:r="",...s})=>g("a",{...s,className:`welcome-screen-menu-item ${r}`,href:t,target:"_blank",rel:"noopener",children:g(X_,{icon:n,shortcut:i,children:e})});kj.displayName="WelcomeScreenMenuItemLink";const so=({children:e})=>{const{WelcomeScreenCenterTunnel:t}=ar();return g(t.In,{children:g("div",{className:"welcome-screen-center",children:e||O(de,{children:[g(j_,{}),g(Y_,{children:M("welcomeScreen.defaults.center_heading")}),O(W_,{children:[g(Z_,{}),g(K_,{})]})]})})})};so.displayName="Center";const j_=({children:e})=>g("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||g(Mj,{withText:!0})});j_.displayName="Logo";const Y_=({children:e})=>g("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});Y_.displayName="Heading";const W_=({children:e})=>g("div",{className:"welcome-screen-menu",children:e});W_.displayName="Menu";const K_=()=>{const e=wr();return g(dp,{onSelect:()=>e.executeAction(__),shortcut:"?",icon:R9,children:M("helpDialog.title")})};K_.displayName="MenuItemHelp";const Z_=()=>{const e=hi(),t=wr();return e.viewModeEnabled?null:g(dp,{onSelect:()=>t.executeAction(E4),shortcut:zi("loadScene"),icon:L9,children:M("buttons.load")})};Z_.displayName="MenuItemLoadScene";const Rj=({onSelect:e})=>{const{t}=un();return g(dp,{shortcut:null,onSelect:e,icon:N9,children:t("labels.liveCollaboration")})};Rj.displayName="MenuItemLiveCollaborationTrigger";so.Logo=j_;so.Heading=Y_;so.Menu=W_;so.MenuItem=dp;so.MenuItemLink=kj;so.MenuItemHelp=K_;so.MenuItemLoadScene=Z_;so.MenuItemLiveCollaborationTrigger=Rj;const q_=({children:e})=>{const{WelcomeScreenMenuHintTunnel:t}=ar();return g(t.In,{children:O("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[rue,g("div",{className:"welcome-screen-decor-hint__label",children:e||M("welcomeScreen.defaults.menuHint")})]})})};q_.displayName="MenuHint";const Q_=({children:e})=>{const{WelcomeScreenToolbarHintTunnel:t}=ar();return g(t.In,{children:O("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[g("div",{className:"welcome-screen-decor-hint__label",children:e||M("welcomeScreen.defaults.toolbarHint")}),oue]})})};Q_.displayName="ToolbarHint";const J_=({children:e})=>{const{WelcomeScreenHelpHintTunnel:t}=ar();return g(t.In,{children:O("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[g("div",{children:e||M("welcomeScreen.defaults.helpHint")}),sue]})})};J_.displayName="HelpHint";const Yi=e=>g(de,{children:e.children||O(de,{children:[g(so,{}),g(q_,{}),g(Q_,{}),g(J_,{})]})});Yi.displayName="WelcomeScreen";Yi.Center=so;Yi.Hints={MenuHint:q_,ToolbarHint:Q_,HelpHint:J_};const Dj=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},H4e=(e,t,n)=>!!(t&&(t.id===e.editingTextElement?.id||t.id===e.resizingElement?.id||t.id===e.newElement?.id||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce)),V4e=So((e,t,n)=>{if(window?.DEBUG_FRACTIONAL_INDICES){const i=Gc(e.map(r=>({...r})));p9(i,{shouldThrow:Ow(),includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1}),eT=(e,t,n)=>{const i=be(e),r=[],s=new Set;for(const a of t)if(!s.has(a.id)){const l=i.get(a.id),c=H4e(n,l,a);l&&c?(r.push(l),s.add(l.id)):(r.push(a),s.add(a.id))}for(const a of e)s.has(a.id)||(r.push(a),s.add(a.id));const o=U9(r);return V4e(o,e,t),Gc(o),o},Lj=({children:e,icon:t})=>{const{TTDDialogTriggerTunnel:n}=ar(),i=bn();return g(n.In,{children:O(We.Item,{onSelect:()=>{tt("ai","dialog open","ttd"),i({openDialog:{name:"ttd",tab:"text-to-diagram"}})},icon:t??wde,children:[e??M("labels.textToDiagram"),g(We.Item.Badge,{children:"AI"})]})})};Lj.displayName="TTDDialogTrigger";const $4e=e=>{const t=ro();return D.useLayoutEffect(()=>{t.setPlugins({diagramToCode:{generate:e.generate}})},[t,e.generate]),null};Dj();const G4e=e=>{const{onChange:t,onIncrement:n,initialData:i,excalidrawAPI:r,isCollaborating:s=!1,onPointerUpdate:o,renderTopRightUI:a,langCode:l=Td.code,viewModeEnabled:c,zenModeEnabled:u,gridModeEnabled:d,libraryReturnUrl:f,theme:h,name:m,renderCustomStats:p,onPaste:y,detectScroll:b=!0,handleKeyboardGlobally:E=!1,onLibraryChange:v,autoFocus:w=!1,generateIdForFile:S,onLinkOpen:k,generateLinkForSelection:_,onPointerDown:T,onPointerUp:A,onScrollChange:C,onDuplicate:R,children:P,validateEmbeddable:N,renderEmbeddable:K,aiEnabled:H,showDeprecatedFonts:z,renderScrollbars:V}=e,$=e.UIOptions?.canvasActions,G={...e.UIOptions,canvasActions:{...tC.canvasActions,...$},tools:{image:e.UIOptions?.tools?.image??!0}};return $?.export&&(G.canvasActions.export.saveFileToDisk=$.export?.saveFileToDisk??tC.canvasActions.export.saveFileToDisk),G.canvasActions.toggleTheme===null&&typeof h>"u"&&(G.canvasActions.toggleTheme=!0),D.useEffect(()=>{(async()=>{await ge(()=>import("./roundRect-mAH3dD0p.js"),__vite__mapDeps([]))})();const Ae=ye=>{typeof ye.scale=="number"&&ye.scale!==1&&ye.preventDefault()};return document.addEventListener("touchmove",Ae,{passive:!1}),()=>{document.removeEventListener("touchmove",Ae)}},[]),g(Wce,{store:Rr,children:g(F4e,{langCode:l,theme:h,children:g(G_,{onChange:t,onIncrement:n,initialData:i,excalidrawAPI:r,isCollaborating:s,onPointerUpdate:o,renderTopRightUI:a,langCode:l,viewModeEnabled:c,zenModeEnabled:u,gridModeEnabled:d,libraryReturnUrl:f,theme:h,name:m,renderCustomStats:p,UIOptions:G,onPaste:y,detectScroll:b,handleKeyboardGlobally:E,onLibraryChange:v,autoFocus:w,generateIdForFile:S,onLinkOpen:k,generateLinkForSelection:_,onPointerDown:T,onPointerUp:A,onScrollChange:C,onDuplicate:R,validateEmbeddable:N,renderEmbeddable:K,aiEnabled:H!==!1,showDeprecatedFonts:z,renderScrollbars:V,children:P})})})},X4e=(e,t)=>{if(e.children!==t.children)return!1;const{initialData:n,UIOptions:i={},...r}=e,{initialData:s,UIOptions:o={},...a}=t,l=Object.keys(i),c=Object.keys(o);return l.length!==c.length?!1:l.every(d=>d==="canvasActions"?Object.keys(i.canvasActions).every(h=>h==="export"&&i?.canvasActions?.export&&o?.canvasActions?.export?i.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:i?.canvasActions?.[h]===o?.canvasActions?.[h]):i[d]===o[d])&&Bi(r,a)},Oj=se.memo(G4e,X4e);Oj.displayName="Excalidraw";const j4e=({link:e,onCloseRequest:t,setErrorMessage:n})=>{const{t:i}=un(),[,r]=D.useState(!1),s=D.useRef(0),o=D.useRef(null),a=async()=>{try{await Yc(e)}catch{n(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),o.current?.select()},{onCopy:l,copyStatus:c}=P_();return g(jr,{onCloseRequest:t,title:!1,size:"small",children:O("div",{className:"ShareableLinkDialog",children:[g("h3",{children:"Shareable link"}),O("div",{className:"ShareableLinkDialog__linkRow",children:[g(Ih,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:e,selectOnRender:!0}),g(Ks,{size:"large",label:i("buttons.copyLink"),icon:np,status:c,onClick:()=>{l(),a()}})]}),O("div",{className:"ShareableLinkDialog__description",children:["🔒 ",i("alerts.uploadedSecurly")]})]})})},Y4e=300,W4e=5e3,K4e=300,Z4e=500,XR=2e4,q4e=50,Q4e=33,J4e=24*60*60*1e3,tT=3*1024*1024,eve=31536e3,T2={SERVER_VOLATILE:"server-volatile-broadcast",SERVER:"server-broadcast",USER_FOLLOW_CHANGE:"user-follow",USER_FOLLOW_ROOM_CHANGE:"user-follow-room-change"};var Ki=(e=>(e.INVALID_RESPONSE="INVALID_RESPONSE",e.INIT="SCENE_INIT",e.UPDATE="SCENE_UPDATE",e.MOUSE_LOCATION="MOUSE_LOCATION",e.IDLE_STATUS="IDLE_STATUS",e.USER_VISIBLE_SCENE_BOUNDS="USER_VISIBLE_SCENE_BOUNDS",e))(Ki||{});const Nj={shareLinkFiles:"/files/shareLinks",collabFiles:"/files/rooms"},tve=10,Un={LOCAL_STORAGE_ELEMENTS:"excalidraw",LOCAL_STORAGE_APP_STATE:"excalidraw-state",LOCAL_STORAGE_COLLAB:"excalidraw-collab",LOCAL_STORAGE_THEME:"excalidraw-theme",LOCAL_STORAGE_DEBUG:"excalidraw-debug",VERSION_DATA_STATE:"version-dataState",VERSION_FILES:"version-files",IDB_LIBRARY:"excalidraw-library",__LEGACY_LOCAL_STORAGE_LIBRARY:"excalidraw-library"},nve={AUTH_STATE_COOKIE:"excplus-auth"},ud=document.cookie.includes(nve.AUTH_STATE_COOKIE),ive=e=>{try{localStorage.setItem(Un.LOCAL_STORAGE_COLLAB,JSON.stringify({username:e}))}catch(t){console.error(t)}},Pj=()=>{try{const e=localStorage.getItem(Un.LOCAL_STORAGE_COLLAB);if(e)return JSON.parse(e).username}catch(e){console.error(e)}return null},Fj=()=>{let e=null,t=null;try{e=localStorage.getItem(Un.LOCAL_STORAGE_ELEMENTS),t=localStorage.getItem(Un.LOCAL_STORAGE_APP_STATE)}catch(r){console.error(r)}let n=[];if(e)try{n=cz(JSON.parse(e))}catch(r){console.error(r)}let i=null;if(t)try{i={...Xo(),...GV(JSON.parse(t))}}catch(r){console.error(r)}return{elements:n,appState:i}},Bj=()=>{try{return localStorage.getItem(Un.LOCAL_STORAGE_ELEMENTS)?.length||0}catch(e){return console.error(e),0}},rve=()=>{try{const e=localStorage.getItem(Un.LOCAL_STORAGE_APP_STATE),t=localStorage.getItem(Un.LOCAL_STORAGE_COLLAB),n=e?.length||0,i=t?.length||0;return n+i+Bj()}catch(e){return console.error(e),0}},sve=500,jR=Ya(e=>{e({scene:Bj(),total:rve()})},sve),ove=e=>{const[t,n]=D.useState({scene:0,total:0});D.useEffect(()=>{jR(o=>{n(o)})},[e.elements,e.appState]),D.useEffect(()=>()=>jR.cancel(),[]);const i=E7();let r,s;return i!==tF?(s=i.slice(0,16).replace("T"," "),r=i.slice(21)):s=M("stats.versionNotAvailable"),O(pa.StatsRows,{order:-1,children:[g(pa.StatsRow,{heading:!0,children:M("stats.version")}),O(pa.StatsRow,{style:{textAlign:"center",cursor:"pointer"},onClick:async()=>{try{await Yc(E7()),e.setToast(M("toast.copyToClipboard"))}catch{}},title:M("stats.versionCopy"),children:[s,g("br",{}),r]}),g(pa.StatsRow,{heading:!0,children:M("stats.storage")}),O(pa.StatsRow,{columns:2,children:[g("div",{children:M("stats.scene")}),g("div",{children:dC(t.scene,1)})]}),O(pa.StatsRow,{columns:2,children:[g("div",{children:M("stats.total")}),g("div",{children:dC(t.total,1)})]})]})},Al=tp(),ave=(e,t)=>{const[n,i]=yh(e);return D.useLayoutEffect(()=>{i(typeof t=="function"?t():t)},[]),[n,i]};class zj{fetchingFiles=new Map;erroredFiles_fetch=new Map;savingFiles=new Map;savedFiles=new Map;erroredFiles_save=new Map;_getFiles;_saveFiles;constructor({getFiles:t,saveFiles:n}){this._getFiles=t,this._saveFiles=n}isFileTracked=t=>this.savedFiles.has(t)||this.savingFiles.has(t)||this.fetchingFiles.has(t)||this.erroredFiles_fetch.has(t)||this.erroredFiles_save.has(t);isFileSavedOrBeingSaved=t=>{const n=this.getFileVersion(t);return this.savedFiles.get(t.id)===n||this.savingFiles.get(t.id)===n};getFileVersion=t=>t.version??1;saveFiles=async({elements:t,files:n})=>{const i=new Map;for(const r of t){const s=Tn(r)&&n[r.fileId];s&&!this.isFileSavedOrBeingSaved(s)&&(i.set(r.fileId,n[r.fileId]),this.savingFiles.set(r.fileId,this.getFileVersion(s)))}try{const{savedFiles:r,erroredFiles:s}=await this._saveFiles({addedFiles:i});for(const[o,a]of r)this.savedFiles.set(o,this.getFileVersion(a));for(const[o,a]of s)this.erroredFiles_save.set(o,this.getFileVersion(a));return{savedFiles:r,erroredFiles:s}}finally{for(const[r]of i)this.savingFiles.delete(r)}};getFiles=async t=>{if(!t.length)return{loadedFiles:[],erroredFiles:new Map};for(const n of t)this.fetchingFiles.set(n,!0);try{const{loadedFiles:n,erroredFiles:i}=await this._getFiles(t);for(const r of n)this.savedFiles.set(r.id,this.getFileVersion(r));for(const[r]of i)this.erroredFiles_fetch.set(r,!0);return{loadedFiles:n,erroredFiles:i}}finally{for(const n of t)this.fetchingFiles.delete(n)}};shouldPreventUnload=t=>t.some(n=>Tn(n)&&!n.isDeleted&&this.savingFiles.has(n.fileId));shouldUpdateImageElementStatus=t=>Tn(t)&&this.savedFiles.has(t.fileId)&&t.status==="pending";reset(){this.fetchingFiles.clear(),this.savingFiles.clear(),this.savedFiles.clear(),this.erroredFiles_fetch.clear(),this.erroredFiles_save.clear()}}const nT=async({files:e,maxBytes:t,encryptionKey:n})=>{const i=[];for(const[r,s]of e){const o=new TextEncoder().encode(s.dataURL),a=await H$(o,{encryptionKey:n,metadata:{id:r,mimeType:s.mimeType,created:Date.now(),lastRetrieved:Date.now()}});if(o.byteLength>t)throw new Error(M("errors.fileTooBig",{maxSize:`${Math.trunc(t/1024/1024)}MB`}));i.push({id:r,buffer:a})}return i},I1=e=>{e.erroredFiles.size&&e.excalidrawAPI.updateScene({elements:e.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>Tn(t)&&e.erroredFiles.has(t.fileId)?Ee(t,{status:"error"}):t),captureUpdate:j.NEVER})};var YR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},lve=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],a=e[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Vj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,a=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),i.push(n[u],n[d],n[f],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Hj(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lve(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0;++r;const c=r<e.length?n[e.charAt(r)]:64;++r;const d=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new cve;const f=s<<2|a>>4;if(i.push(f),c!==64){const h=a<<4&240|c>>2;if(i.push(h),d!==64){const m=c<<6&192|d;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class cve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uve=function(e){const t=Hj(e);return Vj.encodeByteArray(t,!0)},p6=function(e){return uve(e).replace(/\./g,"")},dve=function(e){try{return Vj.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hve=()=>fve().__FIREBASE_DEFAULTS__,gve=()=>{if(typeof process>"u"||typeof YR>"u")return;const e=YR.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},mve=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&dve(e[1]);return t&&JSON.parse(t)},iT=()=>{try{return hve()||gve()||mve()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},pve=e=>{var t,n;return(n=(t=iT())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},$j=e=>{const t=pve(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},Gj=()=>{var e;return(e=iT())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[p6(JSON.stringify(n)),p6(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yve(){var e;const t=(e=iT())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Eve(){return!yve()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vve(){try{return typeof indexedDB=="object"}catch{return!1}}function wve(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ve="FirebaseError";class xd extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=_ve,Object.setPrototypeOf(this,xd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jj.prototype.create)}}class jj{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Tve(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new xd(r,a,i)}}function Tve(e,t){return e.replace(Sve,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const Sve=/\{\$([^}]+)}/g;function F4(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],o=t[r];if(WR(s)&&WR(o)){if(!F4(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function WR(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(e){return e&&e._delegate?e._delegate:e}class Ah{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ive{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new Uve;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t?.identifier),r=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Cve(t))try{this.getOrInitializeService({instanceIdentifier:au})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=au){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=au){return this.instances.has(t)}getOptions(t=au){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:xve(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=au){return this.component?this.component.multipleInstances?t:au:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xve(e){return e===au?void 0:e}function Cve(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ave{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Ive(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(it||(it={}));const Mve={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},kve=it.INFO,Rve={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},Dve=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=Rve[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Yj{constructor(t){this.name=t,this._logLevel=kve,this._logHandler=Dve,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in it))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Mve[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...t),this._logHandler(this,it.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...t),this._logHandler(this,it.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,it.INFO,...t),this._logHandler(this,it.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,it.WARN,...t),this._logHandler(this,it.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...t),this._logHandler(this,it.ERROR,...t)}}const Lve=(e,t)=>t.some(n=>e instanceof n);let KR,ZR;function Ove(){return KR||(KR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nve(){return ZR||(ZR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wj=new WeakMap,B4=new WeakMap,Kj=new WeakMap,jE=new WeakMap,rT=new WeakMap;function Pve(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(fc(e.result)),r()},o=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Wj.set(n,e)}).catch(()=>{}),rT.set(t,e),t}function Fve(e){if(B4.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});B4.set(e,t)}let z4={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return B4.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Kj.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fc(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Bve(e){z4=e(z4)}function zve(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(YE(this),t,...n);return Kj.set(i,t.sort?t.sort():[t]),fc(i)}:Nve().includes(e)?function(...t){return e.apply(YE(this),t),fc(Wj.get(this))}:function(...t){return fc(e.apply(YE(this),t))}}function Hve(e){return typeof e=="function"?zve(e):(e instanceof IDBTransaction&&Fve(e),Lve(e,Ove())?new Proxy(e,z4):e)}function fc(e){if(e instanceof IDBRequest)return Pve(e);if(jE.has(e))return jE.get(e);const t=Hve(e);return t!==e&&(jE.set(e,t),rT.set(t,e)),t}const YE=e=>rT.get(e);function Vve(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=fc(o);return i&&o.addEventListener("upgradeneeded",l=>{i(fc(o.result),l.oldVersion,l.newVersion,fc(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const $ve=["get","getKey","getAll","getAllKeys","count"],Gve=["put","add","delete","clear"],WE=new Map;function qR(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(WE.get(t))return WE.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Gve.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||$ve.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return WE.set(t,s),s}Bve(e=>({...e,get:(t,n,i)=>qR(t,n)||e.get(t,n,i),has:(t,n)=>!!qR(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xve{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jve(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function jve(e){const t=e.getComponent();return t?.type==="VERSION"}const H4="@firebase/app",QR="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Yj("@firebase/app"),Yve="@firebase/app-compat",Wve="@firebase/analytics-compat",Kve="@firebase/analytics",Zve="@firebase/app-check-compat",qve="@firebase/app-check",Qve="@firebase/auth",Jve="@firebase/auth-compat",ewe="@firebase/database",twe="@firebase/data-connect",nwe="@firebase/database-compat",iwe="@firebase/functions",rwe="@firebase/functions-compat",swe="@firebase/installations",owe="@firebase/installations-compat",awe="@firebase/messaging",lwe="@firebase/messaging-compat",cwe="@firebase/performance",uwe="@firebase/performance-compat",dwe="@firebase/remote-config",fwe="@firebase/remote-config-compat",hwe="@firebase/storage",gwe="@firebase/storage-compat",mwe="@firebase/firestore",pwe="@firebase/vertexai",Uwe="@firebase/firestore-compat",bwe="firebase",ywe="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4="[DEFAULT]",Ewe={[H4]:"fire-core",[Yve]:"fire-core-compat",[Kve]:"fire-analytics",[Wve]:"fire-analytics-compat",[qve]:"fire-app-check",[Zve]:"fire-app-check-compat",[Qve]:"fire-auth",[Jve]:"fire-auth-compat",[ewe]:"fire-rtdb",[twe]:"fire-data-connect",[nwe]:"fire-rtdb-compat",[iwe]:"fire-fn",[rwe]:"fire-fn-compat",[swe]:"fire-iid",[owe]:"fire-iid-compat",[awe]:"fire-fcm",[lwe]:"fire-fcm-compat",[cwe]:"fire-perf",[uwe]:"fire-perf-compat",[dwe]:"fire-rc",[fwe]:"fire-rc-compat",[hwe]:"fire-gcs",[gwe]:"fire-gcs-compat",[mwe]:"fire-fst",[Uwe]:"fire-fst-compat",[pwe]:"fire-vertex","fire-js":"fire-js",[bwe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=new Map,vwe=new Map,$4=new Map;function JR(e,t){try{e.container.addComponent(t)}catch(n){sl.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function pm(e){const t=e.name;if($4.has(t))return sl.debug(`There were multiple attempts to register component ${t}.`),!1;$4.set(t,e);for(const n of U6.values())JR(n,e);for(const n of vwe.values())JR(n,e);return!0}function Zj(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function qj(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wwe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hc=new jj("app","Firebase",wwe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _we{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ah("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw hc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=ywe;function Jj(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:V4,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw hc.create("bad-app-name",{appName:String(r)});if(n||(n=Gj()),!n)throw hc.create("no-options");const s=U6.get(r);if(s){if(F4(n,s.options)&&F4(i,s.config))return s;throw hc.create("duplicate-app",{appName:r})}const o=new Ave(r);for(const l of $4.values())o.addComponent(l);const a=new _we(n,i,o);return U6.set(r,a),a}function eY(e=V4){const t=U6.get(e);if(!t&&e===V4&&Gj())return Jj();if(!t)throw hc.create("no-app",{appName:e});return t}function gc(e,t,n){var i;let r=(i=Ewe[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sl.warn(a.join(" "));return}pm(new Ah(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Twe="firebase-heartbeat-database",Swe=1,Um="firebase-heartbeat-store";let KE=null;function tY(){return KE||(KE=Vve(Twe,Swe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Um)}catch(n){console.warn(n)}}}}).catch(e=>{throw hc.create("idb-open",{originalErrorMessage:e.message})})),KE}async function Iwe(e){try{const n=(await tY()).transaction(Um),i=await n.objectStore(Um).get(nY(e));return await n.done,i}catch(t){if(t instanceof xd)sl.warn(t.message);else{const n=hc.create("idb-get",{originalErrorMessage:t?.message});sl.warn(n.message)}}}async function eD(e,t){try{const i=(await tY()).transaction(Um,"readwrite");await i.objectStore(Um).put(t,nY(e)),await i.done}catch(n){if(n instanceof xd)sl.warn(n.message);else{const i=hc.create("idb-set",{originalErrorMessage:n?.message});sl.warn(i.message)}}}function nY(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xwe=1024,Cwe=30;class Awe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kwe(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tD();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>Cwe){const o=Rwe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){sl.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tD(),{heartbeatsToSend:i,unsentEntries:r}=Mwe(this._heartbeatsCache.heartbeats),s=p6(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return sl.warn(n),""}}}function tD(){return new Date().toISOString().substring(0,10)}function Mwe(e,t=xwe){const n=[];let i=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),nD(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),nD(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class kwe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vve()?wve().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Iwe(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return eD(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return eD(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function nD(e){return p6(JSON.stringify({version:2,heartbeats:e})).length}function Rwe(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dwe(e){pm(new Ah("platform-logger",t=>new Xve(t),"PRIVATE")),pm(new Ah("heartbeat",t=>new Awe(t),"PRIVATE")),gc(H4,QR,e),gc(H4,QR,"esm2017"),gc("fire-js","")}Dwe("");var Lwe="firebase",Owe="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gc(Lwe,Owe,"app");var iD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mc,iY;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(_,T){function A(){}A.prototype=T.prototype,_.D=T.prototype,_.prototype=new A,_.prototype.constructor=_,_.C=function(C,R,P){for(var N=Array(arguments.length-2),K=2;K<arguments.length;K++)N[K-2]=arguments[K];return T.prototype[R].apply(C,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(_,T,A){A||(A=0);var C=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)C[R]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(R=0;16>R;++R)C[R]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=_.g[0],A=_.g[1],R=_.g[2];var P=_.g[3],N=T+(P^A&(R^P))+C[0]+3614090360&4294967295;T=A+(N<<7&4294967295|N>>>25),N=P+(R^T&(A^R))+C[1]+3905402710&4294967295,P=T+(N<<12&4294967295|N>>>20),N=R+(A^P&(T^A))+C[2]+606105819&4294967295,R=P+(N<<17&4294967295|N>>>15),N=A+(T^R&(P^T))+C[3]+3250441966&4294967295,A=R+(N<<22&4294967295|N>>>10),N=T+(P^A&(R^P))+C[4]+4118548399&4294967295,T=A+(N<<7&4294967295|N>>>25),N=P+(R^T&(A^R))+C[5]+1200080426&4294967295,P=T+(N<<12&4294967295|N>>>20),N=R+(A^P&(T^A))+C[6]+2821735955&4294967295,R=P+(N<<17&4294967295|N>>>15),N=A+(T^R&(P^T))+C[7]+4249261313&4294967295,A=R+(N<<22&4294967295|N>>>10),N=T+(P^A&(R^P))+C[8]+1770035416&4294967295,T=A+(N<<7&4294967295|N>>>25),N=P+(R^T&(A^R))+C[9]+2336552879&4294967295,P=T+(N<<12&4294967295|N>>>20),N=R+(A^P&(T^A))+C[10]+4294925233&4294967295,R=P+(N<<17&4294967295|N>>>15),N=A+(T^R&(P^T))+C[11]+2304563134&4294967295,A=R+(N<<22&4294967295|N>>>10),N=T+(P^A&(R^P))+C[12]+1804603682&4294967295,T=A+(N<<7&4294967295|N>>>25),N=P+(R^T&(A^R))+C[13]+4254626195&4294967295,P=T+(N<<12&4294967295|N>>>20),N=R+(A^P&(T^A))+C[14]+2792965006&4294967295,R=P+(N<<17&4294967295|N>>>15),N=A+(T^R&(P^T))+C[15]+1236535329&4294967295,A=R+(N<<22&4294967295|N>>>10),N=T+(R^P&(A^R))+C[1]+4129170786&4294967295,T=A+(N<<5&4294967295|N>>>27),N=P+(A^R&(T^A))+C[6]+3225465664&4294967295,P=T+(N<<9&4294967295|N>>>23),N=R+(T^A&(P^T))+C[11]+643717713&4294967295,R=P+(N<<14&4294967295|N>>>18),N=A+(P^T&(R^P))+C[0]+3921069994&4294967295,A=R+(N<<20&4294967295|N>>>12),N=T+(R^P&(A^R))+C[5]+3593408605&4294967295,T=A+(N<<5&4294967295|N>>>27),N=P+(A^R&(T^A))+C[10]+38016083&4294967295,P=T+(N<<9&4294967295|N>>>23),N=R+(T^A&(P^T))+C[15]+3634488961&4294967295,R=P+(N<<14&4294967295|N>>>18),N=A+(P^T&(R^P))+C[4]+3889429448&4294967295,A=R+(N<<20&4294967295|N>>>12),N=T+(R^P&(A^R))+C[9]+568446438&4294967295,T=A+(N<<5&4294967295|N>>>27),N=P+(A^R&(T^A))+C[14]+3275163606&4294967295,P=T+(N<<9&4294967295|N>>>23),N=R+(T^A&(P^T))+C[3]+4107603335&4294967295,R=P+(N<<14&4294967295|N>>>18),N=A+(P^T&(R^P))+C[8]+1163531501&4294967295,A=R+(N<<20&4294967295|N>>>12),N=T+(R^P&(A^R))+C[13]+2850285829&4294967295,T=A+(N<<5&4294967295|N>>>27),N=P+(A^R&(T^A))+C[2]+4243563512&4294967295,P=T+(N<<9&4294967295|N>>>23),N=R+(T^A&(P^T))+C[7]+1735328473&4294967295,R=P+(N<<14&4294967295|N>>>18),N=A+(P^T&(R^P))+C[12]+2368359562&4294967295,A=R+(N<<20&4294967295|N>>>12),N=T+(A^R^P)+C[5]+4294588738&4294967295,T=A+(N<<4&4294967295|N>>>28),N=P+(T^A^R)+C[8]+2272392833&4294967295,P=T+(N<<11&4294967295|N>>>21),N=R+(P^T^A)+C[11]+1839030562&4294967295,R=P+(N<<16&4294967295|N>>>16),N=A+(R^P^T)+C[14]+4259657740&4294967295,A=R+(N<<23&4294967295|N>>>9),N=T+(A^R^P)+C[1]+2763975236&4294967295,T=A+(N<<4&4294967295|N>>>28),N=P+(T^A^R)+C[4]+1272893353&4294967295,P=T+(N<<11&4294967295|N>>>21),N=R+(P^T^A)+C[7]+4139469664&4294967295,R=P+(N<<16&4294967295|N>>>16),N=A+(R^P^T)+C[10]+3200236656&4294967295,A=R+(N<<23&4294967295|N>>>9),N=T+(A^R^P)+C[13]+681279174&4294967295,T=A+(N<<4&4294967295|N>>>28),N=P+(T^A^R)+C[0]+3936430074&4294967295,P=T+(N<<11&4294967295|N>>>21),N=R+(P^T^A)+C[3]+3572445317&4294967295,R=P+(N<<16&4294967295|N>>>16),N=A+(R^P^T)+C[6]+76029189&4294967295,A=R+(N<<23&4294967295|N>>>9),N=T+(A^R^P)+C[9]+3654602809&4294967295,T=A+(N<<4&4294967295|N>>>28),N=P+(T^A^R)+C[12]+3873151461&4294967295,P=T+(N<<11&4294967295|N>>>21),N=R+(P^T^A)+C[15]+530742520&4294967295,R=P+(N<<16&4294967295|N>>>16),N=A+(R^P^T)+C[2]+3299628645&4294967295,A=R+(N<<23&4294967295|N>>>9),N=T+(R^(A|~P))+C[0]+4096336452&4294967295,T=A+(N<<6&4294967295|N>>>26),N=P+(A^(T|~R))+C[7]+1126891415&4294967295,P=T+(N<<10&4294967295|N>>>22),N=R+(T^(P|~A))+C[14]+2878612391&4294967295,R=P+(N<<15&4294967295|N>>>17),N=A+(P^(R|~T))+C[5]+4237533241&4294967295,A=R+(N<<21&4294967295|N>>>11),N=T+(R^(A|~P))+C[12]+1700485571&4294967295,T=A+(N<<6&4294967295|N>>>26),N=P+(A^(T|~R))+C[3]+2399980690&4294967295,P=T+(N<<10&4294967295|N>>>22),N=R+(T^(P|~A))+C[10]+4293915773&4294967295,R=P+(N<<15&4294967295|N>>>17),N=A+(P^(R|~T))+C[1]+2240044497&4294967295,A=R+(N<<21&4294967295|N>>>11),N=T+(R^(A|~P))+C[8]+1873313359&4294967295,T=A+(N<<6&4294967295|N>>>26),N=P+(A^(T|~R))+C[15]+4264355552&4294967295,P=T+(N<<10&4294967295|N>>>22),N=R+(T^(P|~A))+C[6]+2734768916&4294967295,R=P+(N<<15&4294967295|N>>>17),N=A+(P^(R|~T))+C[13]+1309151649&4294967295,A=R+(N<<21&4294967295|N>>>11),N=T+(R^(A|~P))+C[4]+4149444226&4294967295,T=A+(N<<6&4294967295|N>>>26),N=P+(A^(T|~R))+C[11]+3174756917&4294967295,P=T+(N<<10&4294967295|N>>>22),N=R+(T^(P|~A))+C[2]+718787259&4294967295,R=P+(N<<15&4294967295|N>>>17),N=A+(P^(R|~T))+C[9]+3951481745&4294967295,_.g[0]=_.g[0]+T&4294967295,_.g[1]=_.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,_.g[2]=_.g[2]+R&4294967295,_.g[3]=_.g[3]+P&4294967295}i.prototype.u=function(_,T){T===void 0&&(T=_.length);for(var A=T-this.blockSize,C=this.B,R=this.h,P=0;P<T;){if(R==0)for(;P<=A;)r(this,_,P),P+=this.blockSize;if(typeof _=="string"){for(;P<T;)if(C[R++]=_.charCodeAt(P++),R==this.blockSize){r(this,C),R=0;break}}else for(;P<T;)if(C[R++]=_[P++],R==this.blockSize){r(this,C),R=0;break}}this.h=R,this.o+=T},i.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var T=1;T<_.length-8;++T)_[T]=0;var A=8*this.o;for(T=_.length-8;T<_.length;++T)_[T]=A&255,A/=256;for(this.u(_),_=Array(16),T=A=0;4>T;++T)for(var C=0;32>C;C+=8)_[A++]=this.g[T]>>>C&255;return _};function s(_,T){var A=a;return Object.prototype.hasOwnProperty.call(A,_)?A[_]:A[_]=T(_)}function o(_,T){this.h=T;for(var A=[],C=!0,R=_.length-1;0<=R;R--){var P=_[R]|0;C&&P==T||(A[R]=P,C=!1)}this.g=A}var a={};function l(_){return-128<=_&&128>_?s(_,function(T){return new o([T|0],0>T?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return d;if(0>_)return y(c(-_));for(var T=[],A=1,C=0;_>=A;C++)T[C]=_/A|0,A*=4294967296;return new o(T,0)}function u(_,T){if(_.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_.charAt(0)=="-")return y(u(_.substring(1),T));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(T,8)),C=d,R=0;R<_.length;R+=8){var P=Math.min(8,_.length-R),N=parseInt(_.substring(R,R+P),T);8>P?(P=c(Math.pow(T,P)),C=C.j(P).add(c(N))):(C=C.j(A),C=C.add(c(N)))}return C}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(p(this))return-y(this).m();for(var _=0,T=1,A=0;A<this.g.length;A++){var C=this.i(A);_+=(0<=C?C:4294967296+C)*T,T*=4294967296}return _},e.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+y(this).toString(_);for(var T=c(Math.pow(_,6)),A=this,C="";;){var R=w(A,T).g;A=b(A,R.j(T));var P=((0<A.g.length?A.g[0]:A.h)>>>0).toString(_);if(A=R,m(A))return P+C;for(;6>P.length;)P="0"+P;C=P+C}},e.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var T=0;T<_.g.length;T++)if(_.g[T]!=0)return!1;return!0}function p(_){return _.h==-1}e.l=function(_){return _=b(this,_),p(_)?-1:m(_)?0:1};function y(_){for(var T=_.g.length,A=[],C=0;C<T;C++)A[C]=~_.g[C];return new o(A,~_.h).add(f)}e.abs=function(){return p(this)?y(this):this},e.add=function(_){for(var T=Math.max(this.g.length,_.g.length),A=[],C=0,R=0;R<=T;R++){var P=C+(this.i(R)&65535)+(_.i(R)&65535),N=(P>>>16)+(this.i(R)>>>16)+(_.i(R)>>>16);C=N>>>16,P&=65535,N&=65535,A[R]=N<<16|P}return new o(A,A[A.length-1]&-2147483648?-1:0)};function b(_,T){return _.add(y(T))}e.j=function(_){if(m(this)||m(_))return d;if(p(this))return p(_)?y(this).j(y(_)):y(y(this).j(_));if(p(_))return y(this.j(y(_)));if(0>this.l(h)&&0>_.l(h))return c(this.m()*_.m());for(var T=this.g.length+_.g.length,A=[],C=0;C<2*T;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<_.g.length;R++){var P=this.i(C)>>>16,N=this.i(C)&65535,K=_.i(R)>>>16,H=_.i(R)&65535;A[2*C+2*R]+=N*H,E(A,2*C+2*R),A[2*C+2*R+1]+=P*H,E(A,2*C+2*R+1),A[2*C+2*R+1]+=N*K,E(A,2*C+2*R+1),A[2*C+2*R+2]+=P*K,E(A,2*C+2*R+2)}for(C=0;C<T;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=T;C<2*T;C++)A[C]=0;return new o(A,0)};function E(_,T){for(;(_[T]&65535)!=_[T];)_[T+1]+=_[T]>>>16,_[T]&=65535,T++}function v(_,T){this.g=_,this.h=T}function w(_,T){if(m(T))throw Error("division by zero");if(m(_))return new v(d,d);if(p(_))return T=w(y(_),T),new v(y(T.g),y(T.h));if(p(T))return T=w(_,y(T)),new v(y(T.g),T.h);if(30<_.g.length){if(p(_)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var A=f,C=T;0>=C.l(_);)A=S(A),C=S(C);var R=k(A,1),P=k(C,1);for(C=k(C,2),A=k(A,2);!m(C);){var N=P.add(C);0>=N.l(_)&&(R=R.add(A),P=N),C=k(C,1),A=k(A,1)}return T=b(_,R.j(T)),new v(R,T)}for(R=d;0<=_.l(T);){for(A=Math.max(1,Math.floor(_.m()/T.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),P=c(A),N=P.j(T);p(N)||0<N.l(_);)A-=C,P=c(A),N=P.j(T);m(P)&&(P=f),R=R.add(P),_=b(_,N)}return new v(R,_)}e.A=function(_){return w(this,_).h},e.and=function(_){for(var T=Math.max(this.g.length,_.g.length),A=[],C=0;C<T;C++)A[C]=this.i(C)&_.i(C);return new o(A,this.h&_.h)},e.or=function(_){for(var T=Math.max(this.g.length,_.g.length),A=[],C=0;C<T;C++)A[C]=this.i(C)|_.i(C);return new o(A,this.h|_.h)},e.xor=function(_){for(var T=Math.max(this.g.length,_.g.length),A=[],C=0;C<T;C++)A[C]=this.i(C)^_.i(C);return new o(A,this.h^_.h)};function S(_){for(var T=_.g.length+1,A=[],C=0;C<T;C++)A[C]=_.i(C)<<1|_.i(C-1)>>>31;return new o(A,_.h)}function k(_,T){var A=T>>5;T%=32;for(var C=_.g.length-A,R=[],P=0;P<C;P++)R[P]=0<T?_.i(P+A)>>>T|_.i(P+A+1)<<32-T:_.i(P+A);return new o(R,_.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,iY=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,mc=o}).apply(typeof iD<"u"?iD:typeof self<"u"?self:typeof window<"u"?window:{});var MU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rY,x1,sY,S2,G4,oY,aY,lY;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(U,x,L){return U==Array.prototype||U==Object.prototype||(U[x]=L.value),U};function n(U){U=[typeof globalThis=="object"&&globalThis,U,typeof window=="object"&&window,typeof self=="object"&&self,typeof MU=="object"&&MU];for(var x=0;x<U.length;++x){var L=U[x];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var i=n(this);function r(U,x){if(x)e:{var L=i;U=U.split(".");for(var F=0;F<U.length-1;F++){var Y=U[F];if(!(Y in L))break e;L=L[Y]}U=U[U.length-1],F=L[U],x=x(F),x!=F&&x!=null&&t(L,U,{configurable:!0,writable:!0,value:x})}}function s(U,x){U instanceof String&&(U+="");var L=0,F=!1,Y={next:function(){if(!F&&L<U.length){var Q=L++;return{value:x(Q,U[Q]),done:!1}}return F=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}r("Array.prototype.values",function(U){return U||function(){return s(this,function(x,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(U){var x=typeof U;return x=x!="object"?x:U?Array.isArray(U)?"array":x:"null",x=="array"||x=="object"&&typeof U.length=="number"}function c(U){var x=typeof U;return x=="object"&&U!=null||x=="function"}function u(U,x,L){return U.call.apply(U.bind,arguments)}function d(U,x,L){if(!U)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,F),U.apply(x,Y)}}return function(){return U.apply(x,arguments)}}function f(U,x,L){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(U,x){var L=Array.prototype.slice.call(arguments,1);return function(){var F=L.slice();return F.push.apply(F,arguments),U.apply(this,F)}}function m(U,x){function L(){}L.prototype=x.prototype,U.aa=x.prototype,U.prototype=new L,U.prototype.constructor=U,U.Qb=function(F,Y,Q){for(var ue=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)ue[Nt-2]=arguments[Nt];return x.prototype[Y].apply(F,ue)}}function p(U){const x=U.length;if(0<x){const L=Array(x);for(let F=0;F<x;F++)L[F]=U[F];return L}return[]}function y(U,x){for(let L=1;L<arguments.length;L++){const F=arguments[L];if(l(F)){const Y=U.length||0,Q=F.length||0;U.length=Y+Q;for(let ue=0;ue<Q;ue++)U[Y+ue]=F[ue]}else U.push(F)}}class b{constructor(x,L){this.i=x,this.j=L,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function E(U){return/^[\s\xa0]*$/.test(U)}function v(){var U=a.navigator;return U&&(U=U.userAgent)?U:""}function w(U){return w[" "](U),U}w[" "]=function(){};var S=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function k(U,x,L){for(const F in U)x.call(L,U[F],F,U)}function _(U,x){for(const L in U)x.call(void 0,U[L],L,U)}function T(U){const x={};for(const L in U)x[L]=U[L];return x}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(U,x){let L,F;for(let Y=1;Y<arguments.length;Y++){F=arguments[Y];for(L in F)U[L]=F[L];for(let Q=0;Q<A.length;Q++)L=A[Q],Object.prototype.hasOwnProperty.call(F,L)&&(U[L]=F[L])}}function R(U){var x=1;U=U.split(":");const L=[];for(;0<x&&U.length;)L.push(U.shift()),x--;return U.length&&L.push(U.join(":")),L}function P(U){a.setTimeout(()=>{throw U},0)}function N(){var U=G;let x=null;return U.g&&(x=U.g,U.g=U.g.next,U.g||(U.h=null),x.next=null),x}class K{constructor(){this.h=this.g=null}add(x,L){const F=H.get();F.set(x,L),this.h?this.h.next=F:this.g=F,this.h=F}}var H=new b(()=>new z,U=>U.reset());class z{constructor(){this.next=this.g=this.h=null}set(x,L){this.h=x,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let V,$=!1,G=new K,J=()=>{const U=a.Promise.resolve(void 0);V=()=>{U.then(Ae)}};var Ae=()=>{for(var U;U=N();){try{U.h.call(U.g)}catch(L){P(L)}var x=H;x.j(U),100>x.h&&(x.h++,U.next=x.g,x.g=U)}$=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(U,x){this.type=U,this.g=this.target=x,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var wt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var U=!1,x=Object.defineProperty({},"passive",{get:function(){U=!0}});try{const L=()=>{};a.addEventListener("test",L,x),a.removeEventListener("test",L,x)}catch{}return U}();function Ot(U,x){if(ke.call(this,U?U.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,U){var L=this.type=U.type,F=U.changedTouches&&U.changedTouches.length?U.changedTouches[0]:null;if(this.target=U.target||U.srcElement,this.g=x,x=U.relatedTarget){if(S){e:{try{w(x.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(x=null)}}else L=="mouseover"?x=U.fromElement:L=="mouseout"&&(x=U.toElement);this.relatedTarget=x,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0),this.button=U.button,this.key=U.key||"",this.ctrlKey=U.ctrlKey,this.altKey=U.altKey,this.shiftKey=U.shiftKey,this.metaKey=U.metaKey,this.pointerId=U.pointerId||0,this.pointerType=typeof U.pointerType=="string"?U.pointerType:xn[U.pointerType]||"",this.state=U.state,this.i=U,U.defaultPrevented&&Ot.aa.h.call(this)}}m(Ot,ke);var xn={2:"touch",3:"pen",4:"mouse"};Ot.prototype.h=function(){Ot.aa.h.call(this);var U=this.i;U.preventDefault?U.preventDefault():U.returnValue=!1};var en="closure_listenable_"+(1e6*Math.random()|0),gi=0;function $i(U,x,L,F,Y){this.listener=U,this.proxy=null,this.src=x,this.type=L,this.capture=!!F,this.ha=Y,this.key=++gi,this.da=this.fa=!1}function Ge(U){U.da=!0,U.listener=null,U.proxy=null,U.src=null,U.ha=null}function at(U){this.src=U,this.g={},this.h=0}at.prototype.add=function(U,x,L,F,Y){var Q=U.toString();U=this.g[Q],U||(U=this.g[Q]=[],this.h++);var ue=xs(U,x,F,Y);return-1<ue?(x=U[ue],L||(x.fa=!1)):(x=new $i(x,this.src,Q,!!F,Y),x.fa=L,U.push(x)),x};function dn(U,x){var L=x.type;if(L in U.g){var F=U.g[L],Y=Array.prototype.indexOf.call(F,x,void 0),Q;(Q=0<=Y)&&Array.prototype.splice.call(F,Y,1),Q&&(Ge(x),U.g[L].length==0&&(delete U.g[L],U.h--))}}function xs(U,x,L,F){for(var Y=0;Y<U.length;++Y){var Q=U[Y];if(!Q.da&&Q.listener==x&&Q.capture==!!L&&Q.ha==F)return Y}return-1}var hl="closure_lm_"+(1e6*Math.random()|0),Jo={};function Cs(U,x,L,F,Y){if(Array.isArray(x)){for(var Q=0;Q<x.length;Q++)Cs(U,x[Q],L,F,Y);return null}return L=YT(L),U&&U[en]?U.K(x,L,c(F)?!!F.capture:!1,Y):eK(U,x,L,!1,F,Y)}function eK(U,x,L,F,Y,Q){if(!x)throw Error("Invalid event type");var ue=c(Y)?!!Y.capture:!!Y,Nt=_y(U);if(Nt||(U[hl]=Nt=new at(U)),L=Nt.add(x,L,F,ue,Q),L.proxy)return L;if(F=tK(),L.proxy=F,F.src=U,F.listener=L,U.addEventListener)wt||(Y=ue),Y===void 0&&(Y=!1),U.addEventListener(x.toString(),F,Y);else if(U.attachEvent)U.attachEvent(jT(x.toString()),F);else if(U.addListener&&U.removeListener)U.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return L}function tK(){function U(L){return x.call(U.src,U.listener,L)}const x=nK;return U}function XT(U,x,L,F,Y){if(Array.isArray(x))for(var Q=0;Q<x.length;Q++)XT(U,x[Q],L,F,Y);else F=c(F)?!!F.capture:!!F,L=YT(L),U&&U[en]?(U=U.i,x=String(x).toString(),x in U.g&&(Q=U.g[x],L=xs(Q,L,F,Y),-1<L&&(Ge(Q[L]),Array.prototype.splice.call(Q,L,1),Q.length==0&&(delete U.g[x],U.h--)))):U&&(U=_y(U))&&(x=U.g[x.toString()],U=-1,x&&(U=xs(x,L,F,Y)),(L=-1<U?x[U]:null)&&wy(L))}function wy(U){if(typeof U!="number"&&U&&!U.da){var x=U.src;if(x&&x[en])dn(x.i,U);else{var L=U.type,F=U.proxy;x.removeEventListener?x.removeEventListener(L,F,U.capture):x.detachEvent?x.detachEvent(jT(L),F):x.addListener&&x.removeListener&&x.removeListener(F),(L=_y(x))?(dn(L,U),L.h==0&&(L.src=null,x[hl]=null)):Ge(U)}}}function jT(U){return U in Jo?Jo[U]:Jo[U]="on"+U}function nK(U,x){if(U.da)U=!0;else{x=new Ot(x,this);var L=U.listener,F=U.ha||U.src;U.fa&&wy(U),U=L.call(F,x)}return U}function _y(U){return U=U[hl],U instanceof at?U:null}var Ty="__closure_events_fn_"+(1e9*Math.random()>>>0);function YT(U){return typeof U=="function"?U:(U[Ty]||(U[Ty]=function(x){return U.handleEvent(x)}),U[Ty])}function Si(){ye.call(this),this.i=new at(this),this.M=this,this.F=null}m(Si,ye),Si.prototype[en]=!0,Si.prototype.removeEventListener=function(U,x,L,F){XT(this,U,x,L,F)};function Gi(U,x){var L,F=U.F;if(F)for(L=[];F;F=F.F)L.push(F);if(U=U.M,F=x.type||x,typeof x=="string")x=new ke(x,U);else if(x instanceof ke)x.target=x.target||U;else{var Y=x;x=new ke(F,U),C(x,Y)}if(Y=!0,L)for(var Q=L.length-1;0<=Q;Q--){var ue=x.g=L[Q];Y=Up(ue,F,!0,x)&&Y}if(ue=x.g=U,Y=Up(ue,F,!0,x)&&Y,Y=Up(ue,F,!1,x)&&Y,L)for(Q=0;Q<L.length;Q++)ue=x.g=L[Q],Y=Up(ue,F,!1,x)&&Y}Si.prototype.N=function(){if(Si.aa.N.call(this),this.i){var U=this.i,x;for(x in U.g){for(var L=U.g[x],F=0;F<L.length;F++)Ge(L[F]);delete U.g[x],U.h--}}this.F=null},Si.prototype.K=function(U,x,L,F){return this.i.add(String(U),x,!1,L,F)},Si.prototype.L=function(U,x,L,F){return this.i.add(String(U),x,!0,L,F)};function Up(U,x,L,F){if(x=U.i.g[String(x)],!x)return!0;x=x.concat();for(var Y=!0,Q=0;Q<x.length;++Q){var ue=x[Q];if(ue&&!ue.da&&ue.capture==L){var Nt=ue.listener,mi=ue.ha||ue.src;ue.fa&&dn(U.i,ue),Y=Nt.call(mi,F)!==!1&&Y}}return Y&&!F.defaultPrevented}function WT(U,x,L){if(typeof U=="function")L&&(U=f(U,L));else if(U&&typeof U.handleEvent=="function")U=f(U.handleEvent,U);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:a.setTimeout(U,x||0)}function KT(U){U.g=WT(()=>{U.g=null,U.i&&(U.i=!1,KT(U))},U.l);const x=U.h;U.h=null,U.m.apply(null,x)}class iK extends ye{constructor(x,L){super(),this.m=x,this.l=L,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:KT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hg(U){ye.call(this),this.h=U,this.g={}}m(hg,ye);var ZT=[];function qT(U){k(U.g,function(x,L){this.g.hasOwnProperty(L)&&wy(x)},U),U.g={}}hg.prototype.N=function(){hg.aa.N.call(this),qT(this)},hg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sy=a.JSON.stringify,rK=a.JSON.parse,sK=class{stringify(U){return a.JSON.stringify(U,void 0)}parse(U){return a.JSON.parse(U,void 0)}};function Iy(){}Iy.prototype.h=null;function QT(U){return U.h||(U.h=U.i())}function JT(){}var gg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xy(){ke.call(this,"d")}m(xy,ke);function Cy(){ke.call(this,"c")}m(Cy,ke);var Wc={},eS=null;function bp(){return eS=eS||new Si}Wc.La="serverreachability";function tS(U){ke.call(this,Wc.La,U)}m(tS,ke);function mg(U){const x=bp();Gi(x,new tS(x))}Wc.STAT_EVENT="statevent";function nS(U,x){ke.call(this,Wc.STAT_EVENT,U),this.stat=x}m(nS,ke);function Xi(U){const x=bp();Gi(x,new nS(x,U))}Wc.Ma="timingevent";function iS(U,x){ke.call(this,Wc.Ma,U),this.size=x}m(iS,ke);function pg(U,x){if(typeof U!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){U()},x)}function Ug(){this.g=!0}Ug.prototype.xa=function(){this.g=!1};function oK(U,x,L,F,Y,Q){U.info(function(){if(U.g)if(Q)for(var ue="",Nt=Q.split("&"),mi=0;mi<Nt.length;mi++){var gt=Nt[mi].split("=");if(1<gt.length){var Ii=gt[0];gt=gt[1];var xi=Ii.split("_");ue=2<=xi.length&&xi[1]=="type"?ue+(Ii+"="+gt+"&"):ue+(Ii+"=redacted&")}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+F+") [attempt "+Y+"]: "+x+`
`+L+`
`+ue})}function aK(U,x,L,F,Y,Q,ue){U.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+Y+"]: "+x+`
`+L+`
`+Q+" "+ue})}function Rd(U,x,L,F){U.info(function(){return"XMLHTTP TEXT ("+x+"): "+cK(U,L)+(F?" "+F:"")})}function lK(U,x){U.info(function(){return"TIMEOUT: "+x})}Ug.prototype.info=function(){};function cK(U,x){if(!U.g)return x;if(!x)return null;try{var L=JSON.parse(x);if(L){for(U=0;U<L.length;U++)if(Array.isArray(L[U])){var F=L[U];if(!(2>F.length)){var Y=F[1];if(Array.isArray(Y)&&!(1>Y.length)){var Q=Y[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ue=1;ue<Y.length;ue++)Y[ue]=""}}}}return Sy(L)}catch{return x}}var yp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ay;function Ep(){}m(Ep,Iy),Ep.prototype.g=function(){return new XMLHttpRequest},Ep.prototype.i=function(){return{}},Ay=new Ep;function gl(U,x,L,F){this.j=U,this.i=x,this.l=L,this.R=F||1,this.U=new hg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sS}function sS(){this.i=null,this.g="",this.h=!1}var oS={},My={};function ky(U,x,L){U.L=1,U.v=Tp(ea(x)),U.m=L,U.P=!0,aS(U,null)}function aS(U,x){U.F=Date.now(),vp(U),U.A=ea(U.v);var L=U.A,F=U.R;Array.isArray(F)||(F=[String(F)]),vS(L.i,"t",F),U.C=0,L=U.j.J,U.h=new sS,U.g=BS(U.j,L?x:null,!U.m),0<U.O&&(U.M=new iK(f(U.Y,U,U.g),U.O)),x=U.U,L=U.g,F=U.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(ZT[0]=Y.toString()),Y=ZT);for(var Q=0;Q<Y.length;Q++){var ue=Cs(L,Y[Q],F||x.handleEvent,!1,x.h||x);if(!ue)break;x.g[ue.key]=ue}x=U.H?T(U.H):{},U.m?(U.u||(U.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",U.g.ea(U.A,U.u,U.m,x)):(U.u="GET",U.g.ea(U.A,U.u,null,x)),mg(),oK(U.i,U.u,U.A,U.l,U.R,U.m)}gl.prototype.ca=function(U){U=U.target;const x=this.M;x&&ta(U)==3?x.j():this.Y(U)},gl.prototype.Y=function(U){try{if(U==this.g)e:{const xi=ta(this.g);var x=this.g.Ba();const Od=this.g.Z();if(!(3>xi)&&(xi!=3||this.g&&(this.h.h||this.g.oa()||CS(this.g)))){this.J||xi!=4||x==7||(x==8||0>=Od?mg(3):mg(2)),Ry(this);var L=this.g.Z();this.X=L;t:if(lS(this)){var F=CS(this.g);U="";var Y=F.length,Q=ta(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kc(this),bg(this);var ue="";break t}this.h.i=new a.TextDecoder}for(x=0;x<Y;x++)this.h.h=!0,U+=this.h.i.decode(F[x],{stream:!(Q&&x==Y-1)});F.length=0,this.h.g+=U,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=L==200,aK(this.i,this.u,this.A,this.l,this.R,xi,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,mi=this.g;if((Nt=mi.g?mi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Nt)){var gt=Nt;break t}}gt=null}if(L=gt)Rd(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dy(this,L);else{this.o=!1,this.s=3,Xi(12),Kc(this),bg(this);break e}}if(this.P){L=!0;let As;for(;!this.J&&this.C<ue.length;)if(As=uK(this,ue),As==My){xi==4&&(this.s=4,Xi(14),L=!1),Rd(this.i,this.l,null,"[Incomplete Response]");break}else if(As==oS){this.s=4,Xi(15),Rd(this.i,this.l,ue,"[Invalid Chunk]"),L=!1;break}else Rd(this.i,this.l,As,null),Dy(this,As);if(lS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xi!=4||ue.length!=0||this.h.h||(this.s=1,Xi(16),L=!1),this.o=this.o&&L,!L)Rd(this.i,this.l,ue,"[Invalid Chunked Response]"),Kc(this),bg(this);else if(0<ue.length&&!this.W){this.W=!0;var Ii=this.j;Ii.g==this&&Ii.ba&&!Ii.M&&(Ii.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),By(Ii),Ii.M=!0,Xi(11))}}else Rd(this.i,this.l,ue,null),Dy(this,ue);xi==4&&Kc(this),this.o&&!this.J&&(xi==4?OS(this.j,this):(this.o=!1,vp(this)))}else xK(this.g),L==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Xi(12)):(this.s=0,Xi(13)),Kc(this),bg(this)}}}catch{}finally{}};function lS(U){return U.g?U.u=="GET"&&U.L!=2&&U.j.Ca:!1}function uK(U,x){var L=U.C,F=x.indexOf(`
`,L);return F==-1?My:(L=Number(x.substring(L,F)),isNaN(L)?oS:(F+=1,F+L>x.length?My:(x=x.slice(F,F+L),U.C=F+L,x)))}gl.prototype.cancel=function(){this.J=!0,Kc(this)};function vp(U){U.S=Date.now()+U.I,cS(U,U.I)}function cS(U,x){if(U.B!=null)throw Error("WatchDog timer not null");U.B=pg(f(U.ba,U),x)}function Ry(U){U.B&&(a.clearTimeout(U.B),U.B=null)}gl.prototype.ba=function(){this.B=null;const U=Date.now();0<=U-this.S?(lK(this.i,this.A),this.L!=2&&(mg(),Xi(17)),Kc(this),this.s=2,bg(this)):cS(this,this.S-U)};function bg(U){U.j.G==0||U.J||OS(U.j,U)}function Kc(U){Ry(U);var x=U.M;x&&typeof x.ma=="function"&&x.ma(),U.M=null,qT(U.U),U.g&&(x=U.g,U.g=null,x.abort(),x.ma())}function Dy(U,x){try{var L=U.j;if(L.G!=0&&(L.g==U||Ly(L.h,U))){if(!U.K&&Ly(L.h,U)&&L.G==3){try{var F=L.Da.g.parse(x)}catch{F=null}if(Array.isArray(F)&&F.length==3){var Y=F;if(Y[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<U.F)Mp(L),Cp(L);else break e;Fy(L),Xi(18)}}else L.za=Y[1],0<L.za-L.T&&37500>Y[2]&&L.F&&L.v==0&&!L.C&&(L.C=pg(f(L.Za,L),6e3));if(1>=fS(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else qc(L,11)}else if((U.K||L.g==U)&&Mp(L),!E(x))for(Y=L.Da.g.parse(x),x=0;x<Y.length;x++){let gt=Y[x];if(L.T=gt[0],gt=gt[1],L.G==2)if(gt[0]=="c"){L.K=gt[1],L.ia=gt[2];const Ii=gt[3];Ii!=null&&(L.la=Ii,L.j.info("VER="+L.la));const xi=gt[4];xi!=null&&(L.Aa=xi,L.j.info("SVER="+L.Aa));const Od=gt[5];Od!=null&&typeof Od=="number"&&0<Od&&(F=1.5*Od,L.L=F,L.j.info("backChannelRequestTimeoutMs_="+F)),F=L;const As=U.g;if(As){const Rp=As.g?As.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rp){var Q=F.h;Q.g||Rp.indexOf("spdy")==-1&&Rp.indexOf("quic")==-1&&Rp.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Oy(Q,Q.h),Q.h=null))}if(F.D){const zy=As.g?As.g.getResponseHeader("X-HTTP-Session-Id"):null;zy&&(F.ya=zy,Gt(F.I,F.D,zy))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-U.F,L.j.info("Handshake RTT: "+L.R+"ms")),F=L;var ue=U;if(F.qa=FS(F,F.J?F.ia:null,F.W),ue.K){hS(F.h,ue);var Nt=ue,mi=F.L;mi&&(Nt.I=mi),Nt.B&&(Ry(Nt),vp(Nt)),F.g=ue}else DS(F);0<L.i.length&&Ap(L)}else gt[0]!="stop"&&gt[0]!="close"||qc(L,7);else L.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?qc(L,7):Py(L):gt[0]!="noop"&&L.l&&L.l.ta(gt),L.v=0)}}mg(4)}catch{}}var dK=class{constructor(U,x){this.g=U,this.map=x}};function uS(U){this.l=U||10,a.PerformanceNavigationTiming?(U=a.performance.getEntriesByType("navigation"),U=0<U.length&&(U[0].nextHopProtocol=="hq"||U[0].nextHopProtocol=="h2")):U=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=U?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dS(U){return U.h?!0:U.g?U.g.size>=U.j:!1}function fS(U){return U.h?1:U.g?U.g.size:0}function Ly(U,x){return U.h?U.h==x:U.g?U.g.has(x):!1}function Oy(U,x){U.g?U.g.add(x):U.h=x}function hS(U,x){U.h&&U.h==x?U.h=null:U.g&&U.g.has(x)&&U.g.delete(x)}uS.prototype.cancel=function(){if(this.i=gS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const U of this.g.values())U.cancel();this.g.clear()}};function gS(U){if(U.h!=null)return U.i.concat(U.h.D);if(U.g!=null&&U.g.size!==0){let x=U.i;for(const L of U.g.values())x=x.concat(L.D);return x}return p(U.i)}function fK(U){if(U.V&&typeof U.V=="function")return U.V();if(typeof Map<"u"&&U instanceof Map||typeof Set<"u"&&U instanceof Set)return Array.from(U.values());if(typeof U=="string")return U.split("");if(l(U)){for(var x=[],L=U.length,F=0;F<L;F++)x.push(U[F]);return x}x=[],L=0;for(F in U)x[L++]=U[F];return x}function hK(U){if(U.na&&typeof U.na=="function")return U.na();if(!U.V||typeof U.V!="function"){if(typeof Map<"u"&&U instanceof Map)return Array.from(U.keys());if(!(typeof Set<"u"&&U instanceof Set)){if(l(U)||typeof U=="string"){var x=[];U=U.length;for(var L=0;L<U;L++)x.push(L);return x}x=[],L=0;for(const F in U)x[L++]=F;return x}}}function mS(U,x){if(U.forEach&&typeof U.forEach=="function")U.forEach(x,void 0);else if(l(U)||typeof U=="string")Array.prototype.forEach.call(U,x,void 0);else for(var L=hK(U),F=fK(U),Y=F.length,Q=0;Q<Y;Q++)x.call(void 0,F[Q],L&&L[Q],U)}var pS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gK(U,x){if(U){U=U.split("&");for(var L=0;L<U.length;L++){var F=U[L].indexOf("="),Y=null;if(0<=F){var Q=U[L].substring(0,F);Y=U[L].substring(F+1)}else Q=U[L];x(Q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Zc(U){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,U instanceof Zc){this.h=U.h,wp(this,U.j),this.o=U.o,this.g=U.g,_p(this,U.s),this.l=U.l;var x=U.i,L=new vg;L.i=x.i,x.g&&(L.g=new Map(x.g),L.h=x.h),US(this,L),this.m=U.m}else U&&(x=String(U).match(pS))?(this.h=!1,wp(this,x[1]||"",!0),this.o=yg(x[2]||""),this.g=yg(x[3]||"",!0),_p(this,x[4]),this.l=yg(x[5]||"",!0),US(this,x[6]||"",!0),this.m=yg(x[7]||"")):(this.h=!1,this.i=new vg(null,this.h))}Zc.prototype.toString=function(){var U=[],x=this.j;x&&U.push(Eg(x,bS,!0),":");var L=this.g;return(L||x=="file")&&(U.push("//"),(x=this.o)&&U.push(Eg(x,bS,!0),"@"),U.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&U.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&U.push("/"),U.push(Eg(L,L.charAt(0)=="/"?UK:pK,!0))),(L=this.i.toString())&&U.push("?",L),(L=this.m)&&U.push("#",Eg(L,yK)),U.join("")};function ea(U){return new Zc(U)}function wp(U,x,L){U.j=L?yg(x,!0):x,U.j&&(U.j=U.j.replace(/:$/,""))}function _p(U,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);U.s=x}else U.s=null}function US(U,x,L){x instanceof vg?(U.i=x,EK(U.i,U.h)):(L||(x=Eg(x,bK)),U.i=new vg(x,U.h))}function Gt(U,x,L){U.i.set(x,L)}function Tp(U){return Gt(U,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),U}function yg(U,x){return U?x?decodeURI(U.replace(/%25/g,"%2525")):decodeURIComponent(U):""}function Eg(U,x,L){return typeof U=="string"?(U=encodeURI(U).replace(x,mK),L&&(U=U.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U):null}function mK(U){return U=U.charCodeAt(0),"%"+(U>>4&15).toString(16)+(U&15).toString(16)}var bS=/[#\/\?@]/g,pK=/[#\?:]/g,UK=/[#\?]/g,bK=/[#\?@]/g,yK=/#/g;function vg(U,x){this.h=this.g=null,this.i=U||null,this.j=!!x}function ml(U){U.g||(U.g=new Map,U.h=0,U.i&&gK(U.i,function(x,L){U.add(decodeURIComponent(x.replace(/\+/g," ")),L)}))}e=vg.prototype,e.add=function(U,x){ml(this),this.i=null,U=Dd(this,U);var L=this.g.get(U);return L||this.g.set(U,L=[]),L.push(x),this.h+=1,this};function yS(U,x){ml(U),x=Dd(U,x),U.g.has(x)&&(U.i=null,U.h-=U.g.get(x).length,U.g.delete(x))}function ES(U,x){return ml(U),x=Dd(U,x),U.g.has(x)}e.forEach=function(U,x){ml(this),this.g.forEach(function(L,F){L.forEach(function(Y){U.call(x,Y,F,this)},this)},this)},e.na=function(){ml(this);const U=Array.from(this.g.values()),x=Array.from(this.g.keys()),L=[];for(let F=0;F<x.length;F++){const Y=U[F];for(let Q=0;Q<Y.length;Q++)L.push(x[F])}return L},e.V=function(U){ml(this);let x=[];if(typeof U=="string")ES(this,U)&&(x=x.concat(this.g.get(Dd(this,U))));else{U=Array.from(this.g.values());for(let L=0;L<U.length;L++)x=x.concat(U[L])}return x},e.set=function(U,x){return ml(this),this.i=null,U=Dd(this,U),ES(this,U)&&(this.h-=this.g.get(U).length),this.g.set(U,[x]),this.h+=1,this},e.get=function(U,x){return U?(U=this.V(U),0<U.length?String(U[0]):x):x};function vS(U,x,L){yS(U,x),0<L.length&&(U.i=null,U.g.set(Dd(U,x),p(L)),U.h+=L.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const U=[],x=Array.from(this.g.keys());for(var L=0;L<x.length;L++){var F=x[L];const Q=encodeURIComponent(String(F)),ue=this.V(F);for(F=0;F<ue.length;F++){var Y=Q;ue[F]!==""&&(Y+="="+encodeURIComponent(String(ue[F]))),U.push(Y)}}return this.i=U.join("&")};function Dd(U,x){return x=String(x),U.j&&(x=x.toLowerCase()),x}function EK(U,x){x&&!U.j&&(ml(U),U.i=null,U.g.forEach(function(L,F){var Y=F.toLowerCase();F!=Y&&(yS(this,F),vS(this,Y,L))},U)),U.j=x}function vK(U,x){const L=new Ug;if(a.Image){const F=new Image;F.onload=h(pl,L,"TestLoadImage: loaded",!0,x,F),F.onerror=h(pl,L,"TestLoadImage: error",!1,x,F),F.onabort=h(pl,L,"TestLoadImage: abort",!1,x,F),F.ontimeout=h(pl,L,"TestLoadImage: timeout",!1,x,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=U}else x(!1)}function wK(U,x){const L=new Ug,F=new AbortController,Y=setTimeout(()=>{F.abort(),pl(L,"TestPingServer: timeout",!1,x)},1e4);fetch(U,{signal:F.signal}).then(Q=>{clearTimeout(Y),Q.ok?pl(L,"TestPingServer: ok",!0,x):pl(L,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(Y),pl(L,"TestPingServer: error",!1,x)})}function pl(U,x,L,F,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),F(L)}catch{}}function _K(){this.g=new sK}function TK(U,x,L){const F=L||"";try{mS(U,function(Y,Q){let ue=Y;c(Y)&&(ue=Sy(Y)),x.push(F+Q+"="+encodeURIComponent(ue))})}catch(Y){throw x.push(F+"type="+encodeURIComponent("_badmap")),Y}}function Sp(U){this.l=U.Ub||null,this.j=U.eb||!1}m(Sp,Iy),Sp.prototype.g=function(){return new Ip(this.l,this.j)},Sp.prototype.i=function(U){return function(){return U}}({});function Ip(U,x){Si.call(this),this.D=U,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Ip,Si),e=Ip.prototype,e.open=function(U,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=U,this.A=x,this.readyState=1,_g(this)},e.send=function(U){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};U&&(x.body=U),(this.D||a).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wg(this)),this.readyState=0},e.Sa=function(U){if(this.g&&(this.l=U,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=U.headers,this.readyState=2,_g(this)),this.g&&(this.readyState=3,_g(this),this.g)))if(this.responseType==="arraybuffer")U.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in U){if(this.j=U.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wS(this)}else U.text().then(this.Ra.bind(this),this.ga.bind(this))};function wS(U){U.j.read().then(U.Pa.bind(U)).catch(U.ga.bind(U))}e.Pa=function(U){if(this.g){if(this.o&&U.value)this.response.push(U.value);else if(!this.o){var x=U.value?U.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!U.done}))&&(this.response=this.responseText+=x)}U.done?wg(this):_g(this),this.readyState==3&&wS(this)}},e.Ra=function(U){this.g&&(this.response=this.responseText=U,wg(this))},e.Qa=function(U){this.g&&(this.response=U,wg(this))},e.ga=function(){this.g&&wg(this)};function wg(U){U.readyState=4,U.l=null,U.j=null,U.v=null,_g(U)}e.setRequestHeader=function(U,x){this.u.append(U,x)},e.getResponseHeader=function(U){return this.h&&this.h.get(U.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const U=[],x=this.h.entries();for(var L=x.next();!L.done;)L=L.value,U.push(L[0]+": "+L[1]),L=x.next();return U.join(`\r
`)};function _g(U){U.onreadystatechange&&U.onreadystatechange.call(U)}Object.defineProperty(Ip.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(U){this.m=U?"include":"same-origin"}});function _S(U){let x="";return k(U,function(L,F){x+=F,x+=":",x+=L,x+=`\r
`}),x}function Ny(U,x,L){e:{for(F in L){var F=!1;break e}F=!0}F||(L=_S(L),typeof U=="string"?L!=null&&encodeURIComponent(String(L)):Gt(U,x,L))}function fn(U){Si.call(this),this.headers=new Map,this.o=U||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(fn,Si);var SK=/^https?$/i,IK=["POST","PUT"];e=fn.prototype,e.Ha=function(U){this.J=U},e.ea=function(U,x,L,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+U);x=x?x.toUpperCase():"GET",this.D=U,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ay.g(),this.v=this.o?QT(this.o):QT(Ay),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(x,String(U),!0),this.B=!1}catch(Q){TS(this,Q);return}if(U=L||"",L=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var Y in F)L.set(Y,F[Y]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const Q of F.keys())L.set(Q,F.get(Q));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(L.keys()).find(Q=>Q.toLowerCase()=="content-type"),Y=a.FormData&&U instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IK,x,void 0))||F||Y||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of L)this.g.setRequestHeader(Q,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xS(this),this.u=!0,this.g.send(U),this.u=!1}catch(Q){TS(this,Q)}};function TS(U,x){U.h=!1,U.g&&(U.j=!0,U.g.abort(),U.j=!1),U.l=x,U.m=5,SS(U),xp(U)}function SS(U){U.A||(U.A=!0,Gi(U,"complete"),Gi(U,"error"))}e.abort=function(U){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=U||7,Gi(this,"complete"),Gi(this,"abort"),xp(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xp(this,!0)),fn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?IS(this):this.bb())},e.bb=function(){IS(this)};function IS(U){if(U.h&&typeof o<"u"&&(!U.v[1]||ta(U)!=4||U.Z()!=2)){if(U.u&&ta(U)==4)WT(U.Ea,0,U);else if(Gi(U,"readystatechange"),ta(U)==4){U.h=!1;try{const ue=U.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var L;if(!(L=x)){var F;if(F=ue===0){var Y=String(U.D).match(pS)[1]||null;!Y&&a.self&&a.self.location&&(Y=a.self.location.protocol.slice(0,-1)),F=!SK.test(Y?Y.toLowerCase():"")}L=F}if(L)Gi(U,"complete"),Gi(U,"success");else{U.m=6;try{var Q=2<ta(U)?U.g.statusText:""}catch{Q=""}U.l=Q+" ["+U.Z()+"]",SS(U)}}finally{xp(U)}}}}function xp(U,x){if(U.g){xS(U);const L=U.g,F=U.v[0]?()=>{}:null;U.g=null,U.v=null,x||Gi(U,"ready");try{L.onreadystatechange=F}catch{}}}function xS(U){U.I&&(a.clearTimeout(U.I),U.I=null)}e.isActive=function(){return!!this.g};function ta(U){return U.g?U.g.readyState:0}e.Z=function(){try{return 2<ta(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(U){if(this.g){var x=this.g.responseText;return U&&x.indexOf(U)==0&&(x=x.substring(U.length)),rK(x)}};function CS(U){try{if(!U.g)return null;if("response"in U.g)return U.g.response;switch(U.H){case"":case"text":return U.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in U.g)return U.g.mozResponseArrayBuffer}return null}catch{return null}}function xK(U){const x={};U=(U.g&&2<=ta(U)&&U.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<U.length;F++){if(E(U[F]))continue;var L=R(U[F]);const Y=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const Q=x[Y]||[];x[Y]=Q,Q.push(L)}_(x,function(F){return F.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tg(U,x,L){return L&&L.internalChannelParams&&L.internalChannelParams[U]||x}function AS(U){this.Aa=0,this.i=[],this.j=new Ug,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tg("failFast",!1,U),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tg("baseRetryDelayMs",5e3,U),this.cb=Tg("retryDelaySeedMs",1e4,U),this.Wa=Tg("forwardChannelMaxRetries",2,U),this.wa=Tg("forwardChannelRequestTimeoutMs",2e4,U),this.pa=U&&U.xmlHttpFactory||void 0,this.Xa=U&&U.Tb||void 0,this.Ca=U&&U.useFetchStreams||!1,this.L=void 0,this.J=U&&U.supportsCrossDomainXhr||!1,this.K="",this.h=new uS(U&&U.concurrentRequestLimit),this.Da=new _K,this.P=U&&U.fastHandshake||!1,this.O=U&&U.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=U&&U.Rb||!1,U&&U.xa&&this.j.xa(),U&&U.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&U&&U.detectBufferingProxy||!1,this.ja=void 0,U&&U.longPollingTimeout&&0<U.longPollingTimeout&&(this.ja=U.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=AS.prototype,e.la=8,e.G=1,e.connect=function(U,x,L,F){Xi(0),this.W=U,this.H=x||{},L&&F!==void 0&&(this.H.OSID=L,this.H.OAID=F),this.F=this.X,this.I=FS(this,null,this.W),Ap(this)};function Py(U){if(MS(U),U.G==3){var x=U.U++,L=ea(U.I);if(Gt(L,"SID",U.K),Gt(L,"RID",x),Gt(L,"TYPE","terminate"),Sg(U,L),x=new gl(U,U.j,x),x.L=2,x.v=Tp(ea(L)),L=!1,a.navigator&&a.navigator.sendBeacon)try{L=a.navigator.sendBeacon(x.v.toString(),"")}catch{}!L&&a.Image&&(new Image().src=x.v,L=!0),L||(x.g=BS(x.j,null),x.g.ea(x.v)),x.F=Date.now(),vp(x)}PS(U)}function Cp(U){U.g&&(By(U),U.g.cancel(),U.g=null)}function MS(U){Cp(U),U.u&&(a.clearTimeout(U.u),U.u=null),Mp(U),U.h.cancel(),U.s&&(typeof U.s=="number"&&a.clearTimeout(U.s),U.s=null)}function Ap(U){if(!dS(U.h)&&!U.s){U.s=!0;var x=U.Ga;V||J(),$||(V(),$=!0),G.add(x,U),U.B=0}}function CK(U,x){return fS(U.h)>=U.h.j-(U.s?1:0)?!1:U.s?(U.i=x.D.concat(U.i),!0):U.G==1||U.G==2||U.B>=(U.Va?0:U.Wa)?!1:(U.s=pg(f(U.Ga,U,x),NS(U,U.B)),U.B++,!0)}e.Ga=function(U){if(this.s)if(this.s=null,this.G==1){if(!U){this.U=Math.floor(1e5*Math.random()),U=this.U++;const Y=new gl(this,this.j,U);let Q=this.o;if(this.S&&(Q?(Q=T(Q),C(Q,this.S)):Q=this.S),this.m!==null||this.O||(Y.H=Q,Q=null),this.P)e:{for(var x=0,L=0;L<this.i.length;L++){t:{var F=this.i[L];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(x+=F,4096<x){x=L;break e}if(x===4096||L===this.i.length-1){x=L+1;break e}}x=1e3}else x=1e3;x=RS(this,Y,x),L=ea(this.I),Gt(L,"RID",U),Gt(L,"CVER",22),this.D&&Gt(L,"X-HTTP-Session-Id",this.D),Sg(this,L),Q&&(this.O?x="headers="+encodeURIComponent(String(_S(Q)))+"&"+x:this.m&&Ny(L,this.m,Q)),Oy(this.h,Y),this.Ua&&Gt(L,"TYPE","init"),this.P?(Gt(L,"$req",x),Gt(L,"SID","null"),Y.T=!0,ky(Y,L,null)):ky(Y,L,x),this.G=2}}else this.G==3&&(U?kS(this,U):this.i.length==0||dS(this.h)||kS(this))};function kS(U,x){var L;x?L=x.l:L=U.U++;const F=ea(U.I);Gt(F,"SID",U.K),Gt(F,"RID",L),Gt(F,"AID",U.T),Sg(U,F),U.m&&U.o&&Ny(F,U.m,U.o),L=new gl(U,U.j,L,U.B+1),U.m===null&&(L.H=U.o),x&&(U.i=x.D.concat(U.i)),x=RS(U,L,1e3),L.I=Math.round(.5*U.wa)+Math.round(.5*U.wa*Math.random()),Oy(U.h,L),ky(L,F,x)}function Sg(U,x){U.H&&k(U.H,function(L,F){Gt(x,F,L)}),U.l&&mS({},function(L,F){Gt(x,F,L)})}function RS(U,x,L){L=Math.min(U.i.length,L);var F=U.l?f(U.l.Na,U.l,U):null;e:{var Y=U.i;let Q=-1;for(;;){const ue=["count="+L];Q==-1?0<L?(Q=Y[0].g,ue.push("ofs="+Q)):Q=0:ue.push("ofs="+Q);let Nt=!0;for(let mi=0;mi<L;mi++){let gt=Y[mi].g;const Ii=Y[mi].map;if(gt-=Q,0>gt)Q=Math.max(0,Y[mi].g-100),Nt=!1;else try{TK(Ii,ue,"req"+gt+"_")}catch{F&&F(Ii)}}if(Nt){F=ue.join("&");break e}}}return U=U.i.splice(0,L),x.D=U,F}function DS(U){if(!U.g&&!U.u){U.Y=1;var x=U.Fa;V||J(),$||(V(),$=!0),G.add(x,U),U.v=0}}function Fy(U){return U.g||U.u||3<=U.v?!1:(U.Y++,U.u=pg(f(U.Fa,U),NS(U,U.v)),U.v++,!0)}e.Fa=function(){if(this.u=null,LS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var U=2*this.R;this.j.info("BP detection timer enabled: "+U),this.A=pg(f(this.ab,this),U)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xi(10),Cp(this),LS(this))};function By(U){U.A!=null&&(a.clearTimeout(U.A),U.A=null)}function LS(U){U.g=new gl(U,U.j,"rpc",U.Y),U.m===null&&(U.g.H=U.o),U.g.O=0;var x=ea(U.qa);Gt(x,"RID","rpc"),Gt(x,"SID",U.K),Gt(x,"AID",U.T),Gt(x,"CI",U.F?"0":"1"),!U.F&&U.ja&&Gt(x,"TO",U.ja),Gt(x,"TYPE","xmlhttp"),Sg(U,x),U.m&&U.o&&Ny(x,U.m,U.o),U.L&&(U.g.I=U.L);var L=U.g;U=U.ia,L.L=1,L.v=Tp(ea(x)),L.m=null,L.P=!0,aS(L,U)}e.Za=function(){this.C!=null&&(this.C=null,Cp(this),Fy(this),Xi(19))};function Mp(U){U.C!=null&&(a.clearTimeout(U.C),U.C=null)}function OS(U,x){var L=null;if(U.g==x){Mp(U),By(U),U.g=null;var F=2}else if(Ly(U.h,x))L=x.D,hS(U.h,x),F=1;else return;if(U.G!=0){if(x.o)if(F==1){L=x.m?x.m.length:0,x=Date.now()-x.F;var Y=U.B;F=bp(),Gi(F,new iS(F,L)),Ap(U)}else DS(U);else if(Y=x.s,Y==3||Y==0&&0<x.X||!(F==1&&CK(U,x)||F==2&&Fy(U)))switch(L&&0<L.length&&(x=U.h,x.i=x.i.concat(L)),Y){case 1:qc(U,5);break;case 4:qc(U,10);break;case 3:qc(U,6);break;default:qc(U,2)}}}function NS(U,x){let L=U.Ta+Math.floor(Math.random()*U.cb);return U.isActive()||(L*=2),L*x}function qc(U,x){if(U.j.info("Error code "+x),x==2){var L=f(U.fb,U),F=U.Xa;const Y=!F;F=new Zc(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wp(F,"https"),Tp(F),Y?vK(F.toString(),L):wK(F.toString(),L)}else Xi(2);U.G=0,U.l&&U.l.sa(x),PS(U),MS(U)}e.fb=function(U){U?(this.j.info("Successfully pinged google.com"),Xi(2)):(this.j.info("Failed to ping google.com"),Xi(1))};function PS(U){if(U.G=0,U.ka=[],U.l){const x=gS(U.h);(x.length!=0||U.i.length!=0)&&(y(U.ka,x),y(U.ka,U.i),U.h.i.length=0,p(U.i),U.i.length=0),U.l.ra()}}function FS(U,x,L){var F=L instanceof Zc?ea(L):new Zc(L);if(F.g!="")x&&(F.g=x+"."+F.g),_p(F,F.s);else{var Y=a.location;F=Y.protocol,x=x?x+"."+Y.hostname:Y.hostname,Y=+Y.port;var Q=new Zc(null);F&&wp(Q,F),x&&(Q.g=x),Y&&_p(Q,Y),L&&(Q.l=L),F=Q}return L=U.D,x=U.ya,L&&x&&Gt(F,L,x),Gt(F,"VER",U.la),Sg(U,F),F}function BS(U,x,L){if(x&&!U.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=U.Ca&&!U.pa?new fn(new Sp({eb:L})):new fn(U.pa),x.Ha(U.J),x}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function zS(){}e=zS.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function kp(){}kp.prototype.g=function(U,x){return new _r(U,x)};function _r(U,x){Si.call(this),this.g=new AS(x),this.l=U,this.h=x&&x.messageUrlParams||null,U=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(U?U["X-Client-Protocol"]="webchannel":U={"X-Client-Protocol":"webchannel"}),this.g.o=U,U=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(U?U["X-WebChannel-Content-Type"]=x.messageContentType:U={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(U?U["X-WebChannel-Client-Profile"]=x.va:U={"X-WebChannel-Client-Profile":x.va}),this.g.S=U,(U=x&&x.Sb)&&!E(U)&&(this.g.m=U),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!E(x)&&(this.g.D=x,U=this.h,U!==null&&x in U&&(U=this.h,x in U&&delete U[x])),this.j=new Ld(this)}m(_r,Si),_r.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){Py(this.g)},_r.prototype.o=function(U){var x=this.g;if(typeof U=="string"){var L={};L.__data__=U,U=L}else this.u&&(L={},L.__data__=Sy(U),U=L);x.i.push(new dK(x.Ya++,U)),x.G==3&&Ap(x)},_r.prototype.N=function(){this.g.l=null,delete this.j,Py(this.g),delete this.g,_r.aa.N.call(this)};function HS(U){xy.call(this),U.__headers__&&(this.headers=U.__headers__,this.statusCode=U.__status__,delete U.__headers__,delete U.__status__);var x=U.__sm__;if(x){e:{for(const L in x){U=L;break e}U=void 0}(this.i=U)&&(U=this.i,x=x!==null&&U in x?x[U]:void 0),this.data=x}else this.data=U}m(HS,xy);function VS(){Cy.call(this),this.status=1}m(VS,Cy);function Ld(U){this.g=U}m(Ld,zS),Ld.prototype.ua=function(){Gi(this.g,"a")},Ld.prototype.ta=function(U){Gi(this.g,new HS(U))},Ld.prototype.sa=function(U){Gi(this.g,new VS)},Ld.prototype.ra=function(){Gi(this.g,"b")},kp.prototype.createWebChannel=kp.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,lY=function(){return new kp},aY=function(){return bp()},oY=Wc,G4={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yp.NO_ERROR=0,yp.TIMEOUT=8,yp.HTTP_ERROR=6,S2=yp,rS.COMPLETE="complete",sY=rS,JT.EventType=gg,gg.OPEN="a",gg.CLOSE="b",gg.ERROR="c",gg.MESSAGE="d",Si.prototype.listen=Si.prototype.K,x1=JT,fn.prototype.listenOnce=fn.prototype.L,fn.prototype.getLastError=fn.prototype.Ka,fn.prototype.getLastErrorCode=fn.prototype.Ba,fn.prototype.getStatus=fn.prototype.Z,fn.prototype.getResponseJson=fn.prototype.Oa,fn.prototype.getResponseText=fn.prototype.oa,fn.prototype.send=fn.prototype.ea,fn.prototype.setWithCredentials=fn.prototype.Ha,rY=fn}).apply(typeof MU<"u"?MU:typeof self<"u"?self:typeof window<"u"?window:{});const rD="@firebase/firestore",sD="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cg="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=new Yj("@firebase/firestore");function rf(){return dd.logLevel}function me(e,...t){if(dd.logLevel<=it.DEBUG){const n=t.map(sT);dd.debug(`Firestore (${cg}): ${e}`,...n)}}function ol(e,...t){if(dd.logLevel<=it.ERROR){const n=t.map(sT);dd.error(`Firestore (${cg}): ${e}`,...n)}}function Mh(e,...t){if(dd.logLevel<=it.WARN){const n=t.map(sT);dd.warn(`Firestore (${cg}): ${e}`,...n)}}function sT(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(e="Unexpected state"){const t=`FIRESTORE (${cg}) INTERNAL ASSERTION FAILED: `+e;throw ol(t),new Error(t)}function Bt(e,t){e||Ie()}function Ze(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends xd{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Nwe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ri.UNAUTHENTICATED))}shutdown(){}}class Pwe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Fwe{constructor(t){this.t=t,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Bt(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new pc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pc,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pc)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Bt(typeof i.accessToken=="string"),new cY(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Bt(t===null||typeof t=="string"),new Ri(t)}}class Bwe{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class zwe{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new Bwe(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oD{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hwe{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,qj(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){Bt(this.o===void 0);const i=s=>{s.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new oD(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Bt(typeof n.token=="string"),this.R=n.token,new oD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vwe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Vwe(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function rt(e,t){return e<t?-1:e>t?1:0}function kh(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=-62135596800,lD=1e6;class di{static now(){return di.fromMillis(Date.now())}static fromDate(t){return di.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*lD);return new di(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ve(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<aD)throw new ve(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ve(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lD}_compareTo(t){return this.seconds===t.seconds?rt(this.nanoseconds,t.nanoseconds):rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-aD;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(t){return new Re(t)}static min(){return new Re(new di(0,0))}static max(){return new Re(new di(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="__name__";class yo{constructor(t,n,i){n===void 0?n=0:n>t.length&&Ie(),i===void 0?i=t.length-n:i>t.length-n&&Ie(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return yo.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof yo?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=yo.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const i=yo.isNumericId(t),r=yo.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?yo.extractNumericId(t).compare(yo.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return mc.fromString(t.substring(4,t.length-2))}}class Qt extends yo{construct(t,n,i){return new Qt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new ve(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Qt(n)}static emptyPath(){return new Qt([])}}const $we=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ni extends yo{construct(t,n,i){return new Ni(t,n,i)}static isValidIdentifier(t){return $we.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ni.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cD}static keyField(){return new Ni([cD])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new ve(ie.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new ve(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ve(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new ve(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ni(n)}static emptyPath(){return new Ni([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.path=t}static fromPath(t){return new xe(Qt.fromString(t))}static fromName(t){return new xe(Qt.fromString(t).popFirst(5))}static empty(){return new xe(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Qt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xe(new Qt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=-1;function Gwe(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Re.fromTimestamp(i===1e9?new di(n+1,0):new di(n,i));return new Dc(r,xe.empty(),t)}function Xwe(e){return new Dc(e.readTime,e.key,bm)}class Dc{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Dc(Re.min(),xe.empty(),bm)}static max(){return new Dc(Re.max(),xe.empty(),bm)}}function jwe(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=xe.comparator(e.documentKey,t.documentKey),n!==0?n:rt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ywe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wwe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ly(e){if(e.code!==ie.FAILED_PRECONDITION||e.message!==Ywe)throw e;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ne((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ne.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ne.reject(n)}static resolve(t){return new ne((n,i)=>{n(t)})}static reject(t){return new ne((n,i)=>{i(t)})}static waitFor(t){return new ne((n,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(t){let n=ne.resolve(!1);for(const i of t)n=n.next(r=>r?ne.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new ne((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,n){return new ne((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function Kwe(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ug(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}cy.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zwe=-1;function fp(e){return e==null}function b6(e){return e===0&&1/e==-1/0}function qwe(e){return typeof e=="number"&&Number.isInteger(e)&&!b6(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY="";function Qwe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=uD(t)),t=Jwe(e.get(n),t);return uD(t)}function Jwe(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case dY:n+="";break;default:n+=s}}return n}function uD(e){return e+dY+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function fY(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t,n){this.comparator=t,this.root=n||Ui.EMPTY}insert(t,n){return new In(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(t){return new In(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new kU(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new kU(this.root,t,this.comparator,!1)}getReverseIterator(){return new kU(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new kU(this.root,t,this.comparator,!0)}}class kU{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ui{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??Ui.RED,this.left=r??Ui.EMPTY,this.right=s??Ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new Ui(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ui.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return Ui.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const t=this.left.check();if(t!==this.right.check())throw Ie();return t+(this.isRed()?0:1)}}Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1;Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(t,n,i,r,s){return this}insert(t,n,i){return new Ui(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this.comparator=t,this.data=new In(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new fD(this.data.getIterator())}getIteratorFrom(t){return new fD(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof qn)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new qn(this.comparator);return n.data=t,n}}class fD{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(t){this.fields=t,t.sort(Ni.comparator)}static empty(){return new hs([])}unionWith(t){let n=new qn(Ni.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new hs(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return kh(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hY("Invalid base64 string: "+s):s}}(t);return new Ti(n)}static fromUint8Array(t){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new Ti(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ti.EMPTY_BYTE_STRING=new Ti("");const e9e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lc(e){if(Bt(!!e),typeof e=="string"){let t=0;const n=e9e.exec(e);if(Bt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:wn(e.seconds),nanos:wn(e.nanos)}}function wn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Oc(e){return typeof e=="string"?Ti.fromBase64String(e):Ti.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY="server_timestamp",mY="__type__",pY="__previous_value__",UY="__local_write_time__";function oT(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[mY])===null||n===void 0?void 0:n.stringValue)===gY}function uy(e){const t=e.mapValue.fields[pY];return oT(t)?uy(t):t}function ym(e){const t=Lc(e.mapValue.fields[UY].timestampValue);return new di(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9e{constructor(t,n,i,r,s,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const y6="(default)";class Em{constructor(t,n){this.projectId=t,this.database=n||y6}static empty(){return new Em("","")}get isDefaultDatabase(){return this.database===y6}isEqual(t){return t instanceof Em&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bY="__type__",n9e="__max__",RU={mapValue:{}},yY="__vector__",E6="value";function Nc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oT(e)?4:r9e(e)?9007199254740991:i9e(e)?10:11:Ie()}function jo(e,t){if(e===t)return!0;const n=Nc(e);if(n!==Nc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ym(e).isEqual(ym(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Lc(r.timestampValue),a=Lc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return Oc(r.bytesValue).isEqual(Oc(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return wn(r.geoPointValue.latitude)===wn(s.geoPointValue.latitude)&&wn(r.geoPointValue.longitude)===wn(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return wn(r.integerValue)===wn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=wn(r.doubleValue),a=wn(s.doubleValue);return o===a?b6(o)===b6(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return kh(e.arrayValue.values||[],t.arrayValue.values||[],jo);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(dD(o)!==dD(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!jo(o[l],a[l])))return!1;return!0}(e,t);default:return Ie()}}function vm(e,t){return(e.values||[]).find(n=>jo(n,t))!==void 0}function Rh(e,t){if(e===t)return 0;const n=Nc(e),i=Nc(t);if(n!==i)return rt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=wn(s.integerValue||s.doubleValue),l=wn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return hD(e.timestampValue,t.timestampValue);case 4:return hD(ym(e),ym(t));case 5:return rt(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Oc(s),l=Oc(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=rt(a[c],l[c]);if(u!==0)return u}return rt(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=rt(wn(s.latitude),wn(o.latitude));return a!==0?a:rt(wn(s.longitude),wn(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return gD(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},f=o.fields||{},h=(a=d[E6])===null||a===void 0?void 0:a.arrayValue,m=(l=f[E6])===null||l===void 0?void 0:l.arrayValue,p=rt(((c=h?.values)===null||c===void 0?void 0:c.length)||0,((u=m?.values)===null||u===void 0?void 0:u.length)||0);return p!==0?p:gD(h,m)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===RU.mapValue&&o===RU.mapValue)return 0;if(s===RU.mapValue)return 1;if(o===RU.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=rt(l[d],u[d]);if(f!==0)return f;const h=Rh(a[l[d]],c[u[d]]);if(h!==0)return h}return rt(l.length,u.length)}(e.mapValue,t.mapValue);default:throw Ie()}}function hD(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return rt(e,t);const n=Lc(e),i=Lc(t),r=rt(n.seconds,i.seconds);return r!==0?r:rt(n.nanos,i.nanos)}function gD(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Rh(n[r],i[r]);if(s)return s}return rt(n.length,i.length)}function Dh(e){return X4(e)}function X4(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Lc(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Oc(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return xe.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=X4(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${X4(n.fields[o])}`;return r+"}"}(e.mapValue):Ie()}function I2(e){switch(Nc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=uy(e);return t?16+I2(t):16;case 5:return 2*e.stringValue.length;case 6:return Oc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+I2(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return Cd(i.fields,(s,o)=>{r+=s.length+I2(o)}),r}(e.mapValue);default:throw Ie()}}function j4(e){return!!e&&"integerValue"in e}function aT(e){return!!e&&"arrayValue"in e}function mD(e){return!!e&&"nullValue"in e}function pD(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ZE(e){return!!e&&"mapValue"in e}function i9e(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[bY])===null||n===void 0?void 0:n.stringValue)===yY}function g0(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Cd(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=g0(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=g0(e.arrayValue.values[n]);return t}return Object.assign({},e)}function r9e(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===n9e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t){this.value=t}static empty(){return new fr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!ZE(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=g0(n)}setAll(t){let n=Ni.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=g0(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());ZE(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return jo(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];ZE(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Cd(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new fr(g0(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t,n,i,r,s,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ai(t,0,Re.min(),Re.min(),Re.min(),fr.empty(),0)}static newFoundDocument(t,n,i,r){return new ai(t,1,n,Re.min(),i,r,0)}static newNoDocument(t,n){return new ai(t,2,n,Re.min(),Re.min(),fr.empty(),0)}static newUnknownDocument(t,n){return new ai(t,3,n,Re.min(),Re.min(),fr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ai&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ai(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(t,n){this.position=t,this.inclusive=n}}function UD(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(s.field.isKeyField()?i=xe.comparator(xe.fromName(o.referenceValue),n.key):i=Rh(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function bD(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!jo(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(t,n="asc"){this.field=t,this.dir=n}}function s9e(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EY{}class Zn extends EY{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new a9e(t,n,i):n==="array-contains"?new u9e(t,i):n==="in"?new d9e(t,i):n==="not-in"?new f9e(t,i):n==="array-contains-any"?new h9e(t,i):new Zn(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new l9e(t,i):new c9e(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rh(n,this.value)):n!==null&&Nc(this.value)===Nc(n)&&this.matchesComparison(Rh(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yo extends EY{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new Yo(t,n)}matches(t){return vY(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function vY(e){return e.op==="and"}function wY(e){return o9e(e)&&vY(e)}function o9e(e){for(const t of e.filters)if(t instanceof Yo)return!1;return!0}function Y4(e){if(e instanceof Zn)return e.field.canonicalString()+e.op.toString()+Dh(e.value);if(wY(e))return e.filters.map(t=>Y4(t)).join(",");{const t=e.filters.map(n=>Y4(n)).join(",");return`${e.op}(${t})`}}function _Y(e,t){return e instanceof Zn?function(i,r){return r instanceof Zn&&i.op===r.op&&i.field.isEqual(r.field)&&jo(i.value,r.value)}(e,t):e instanceof Yo?function(i,r){return r instanceof Yo&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&_Y(o,r.filters[a]),!0):!1}(e,t):void Ie()}function TY(e){return e instanceof Zn?function(n){return`${n.field.canonicalString()} ${n.op} ${Dh(n.value)}`}(e):e instanceof Yo?function(n){return n.op.toString()+" {"+n.getFilters().map(TY).join(" ,")+"}"}(e):"Filter"}class a9e extends Zn{constructor(t,n,i){super(t,n,i),this.key=xe.fromName(i.referenceValue)}matches(t){const n=xe.comparator(t.key,this.key);return this.matchesComparison(n)}}class l9e extends Zn{constructor(t,n){super(t,"in",n),this.keys=SY("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class c9e extends Zn{constructor(t,n){super(t,"not-in",n),this.keys=SY("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function SY(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>xe.fromName(i.referenceValue))}class u9e extends Zn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return aT(n)&&vm(n.arrayValue,this.value)}}class d9e extends Zn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&vm(this.value.arrayValue,n)}}class f9e extends Zn{constructor(t,n){super(t,"not-in",n)}matches(t){if(vm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!vm(this.value.arrayValue,n)}}class h9e extends Zn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!aT(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>vm(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9e{constructor(t,n=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function yD(e,t=null,n=[],i=[],r=null,s=null,o=null){return new g9e(e,t,n,i,r,s,o)}function lT(e){const t=Ze(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Y4(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),fp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Dh(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Dh(i)).join(",")),t.le=n}return t.le}function cT(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!s9e(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!_Y(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bD(e.startAt,t.startAt)&&bD(e.endAt,t.endAt)}function W4(e){return xe.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(t,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function m9e(e,t,n,i,r,s,o,a){return new dy(e,t,n,i,r,s,o,a)}function uT(e){return new dy(e)}function ED(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function p9e(e){return e.collectionGroup!==null}function m0(e){const t=Ze(e);if(t.he===null){t.he=[];const n=new Set;for(const s of t.explicitOrderBy)t.he.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qn(Ni.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.he.push(new w6(s,i))}),n.has(Ni.keyField().canonicalString())||t.he.push(new w6(Ni.keyField(),i))}return t.he}function Do(e){const t=Ze(e);return t.Pe||(t.Pe=U9e(t,m0(e))),t.Pe}function U9e(e,t){if(e.limitType==="F")return yD(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new w6(r.field,s)});const n=e.endAt?new v6(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new v6(e.startAt.position,e.startAt.inclusive):null;return yD(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function K4(e,t,n){return new dy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fy(e,t){return cT(Do(e),Do(t))&&e.limitType===t.limitType}function IY(e){return`${lT(Do(e))}|lt:${e.limitType}`}function sf(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>TY(r)).join(", ")}]`),fp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Dh(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Dh(r)).join(",")),`Target(${i})`}(Do(e))}; limitType=${e.limitType})`}function hy(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):xe.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of m0(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=UD(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,m0(i),r)||i.endAt&&!function(o,a,l){const c=UD(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,m0(i),r))}(e,t)}function b9e(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xY(e){return(t,n)=>{let i=!1;for(const r of m0(e)){const s=y9e(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function y9e(e,t,n){const i=e.field.isKeyField()?xe.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Rh(l,c):Ie()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Cd(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return fY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9e=new In(xe.comparator);function Pc(){return E9e}const CY=new In(xe.comparator);function C1(...e){let t=CY;for(const n of e)t=t.insert(n.key,n);return t}function v9e(e){let t=CY;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Tu(){return p0()}function AY(){return p0()}function p0(){return new Ad(e=>e.toString(),(e,t)=>e.isEqual(t))}const w9e=new qn(xe.comparator);function ht(...e){let t=w9e;for(const n of e)t=t.add(n);return t}const _9e=new qn(rt);function T9e(){return _9e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:b6(t)?"-0":t}}function MY(e){return{integerValue:""+e}}function S9e(e,t){return qwe(t)?MY(t):dT(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this._=void 0}}function I9e(e,t,n){return e instanceof _6?function(r,s){const o={fields:{[mY]:{stringValue:gY},[UY]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&oT(s)&&(s=uy(s)),s&&(o.fields[pY]=s),{mapValue:o}}(n,t):e instanceof wm?kY(e,t):e instanceof _m?RY(e,t):function(r,s){const o=C9e(r,s),a=vD(o)+vD(r.Ie);return j4(o)&&j4(r.Ie)?MY(a):dT(r.serializer,a)}(e,t)}function x9e(e,t,n){return e instanceof wm?kY(e,t):e instanceof _m?RY(e,t):n}function C9e(e,t){return e instanceof T6?function(i){return j4(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class _6 extends gy{}class wm extends gy{constructor(t){super(),this.elements=t}}function kY(e,t){const n=DY(t);for(const i of e.elements)n.some(r=>jo(r,i))||n.push(i);return{arrayValue:{values:n}}}class _m extends gy{constructor(t){super(),this.elements=t}}function RY(e,t){let n=DY(t);for(const i of e.elements)n=n.filter(r=>!jo(r,i));return{arrayValue:{values:n}}}class T6 extends gy{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function vD(e){return wn(e.integerValue||e.doubleValue)}function DY(e){return aT(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function A9e(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof wm&&r instanceof wm||i instanceof _m&&r instanceof _m?kh(i.elements,r.elements,jo):i instanceof T6&&r instanceof T6?jo(i.Ie,r.Ie):i instanceof _6&&r instanceof _6}(e.transform,t.transform)}class ls{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ls}static exists(t){return new ls(void 0,t)}static updateTime(t){return new ls(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function x2(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class my{}function LY(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new fT(e.key,ls.none()):new hp(e.key,e.data,ls.none());{const n=e.data,i=fr.empty();let r=new qn(Ni.comparator);for(let s of t.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Md(e.key,i,new hs(r.toArray()),ls.none())}}function M9e(e,t,n){e instanceof hp?function(r,s,o){const a=r.value.clone(),l=_D(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Md?function(r,s,o){if(!x2(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_D(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(OY(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function U0(e,t,n,i){return e instanceof hp?function(s,o,a,l){if(!x2(s.precondition,o))return a;const c=s.value.clone(),u=TD(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Md?function(s,o,a,l){if(!x2(s.precondition,o))return a;const c=TD(s.fieldTransforms,l,o),u=o.data;return u.setAll(OY(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(s,o,a){return x2(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function wD(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&kh(i,r,(s,o)=>A9e(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class hp extends my{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Md extends my{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function OY(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function _D(e,t,n){const i=new Map;Bt(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,x9e(o,a,n[r]))}return i}function TD(e,t,n){const i=new Map;for(const r of e){const s=r.transform,o=n.data.field(r.field);i.set(r.field,I9e(s,o,t))}return i}class fT extends my{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NY extends my{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9e{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&M9e(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=U0(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=U0(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=AY();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=LY(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Re.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ht())}isEqual(t){return this.batchId===t.batchId&&kh(this.mutations,t.mutations,(n,i)=>wD(n,i))&&kh(this.baseMutations,t.baseMutations,(n,i)=>wD(n,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9e{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9e{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn,nt;function L9e(e){switch(e){case ie.OK:return Ie();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ie()}}function PY(e){if(e===void 0)return ol("GRPC error has no .code"),ie.UNKNOWN;switch(e){case Mn.OK:return ie.OK;case Mn.CANCELLED:return ie.CANCELLED;case Mn.UNKNOWN:return ie.UNKNOWN;case Mn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Mn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Mn.INTERNAL:return ie.INTERNAL;case Mn.UNAVAILABLE:return ie.UNAVAILABLE;case Mn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Mn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Mn.NOT_FOUND:return ie.NOT_FOUND;case Mn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Mn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Mn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Mn.ABORTED:return ie.ABORTED;case Mn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Mn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Mn.DATA_LOSS:return ie.DATA_LOSS;default:return Ie()}}(nt=Mn||(Mn={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9e(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9e=new mc([4294967295,4294967295],0);function SD(e){const t=O9e().encode(e),n=new iY;return n.update(t),new Uint8Array(n.digest())}function ID(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new mc([n,i],0),new mc([r,s],0)]}class hT{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new A1(`Invalid padding: ${n}`);if(i<0)throw new A1(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new A1(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new A1(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=mc.fromNumber(this.Ee)}Ae(t,n,i){let r=t.add(n.multiply(mc.fromNumber(i)));return r.compare(N9e)===1&&(r=new mc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=SD(t),[i,r]=ID(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);if(!this.Re(o))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new hT(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ee===0)return;const n=SD(t),[i,r]=ID(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);this.Ve(o)}}Ve(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class A1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,gp.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new py(Re.min(),r,new In(rt),Pc(),ht())}}class gp{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new gp(i,n,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(t,n,i,r){this.me=t,this.removedTargetIds=n,this.key=i,this.fe=r}}class FY{constructor(t,n){this.targetId=t,this.ge=n}}class BY{constructor(t,n,i=Ti.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class xD{constructor(){this.pe=0,this.ye=CD(),this.we=Ti.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=ht(),n=ht(),i=ht();return this.ye.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Ie()}}),new gp(this.we,this.Se,t,n,i)}Me(){this.be=!1,this.ye=CD()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Bt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class P9e{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Pc(),this.$e=DU(),this.Ke=DU(),this.Ue=new In(rt)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const i=this.He(n);switch(t.state){case 0:this.Je(n)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(t.resumeToken));break;default:Ie()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((i,r)=>{this.Je(r)&&n(r)})}Ze(t){const n=t.targetId,i=t.ge.count,r=this.Xe(n);if(r){const s=r.target;if(W4(s))if(i===0){const o=new xe(s.path);this.ze(n,o,ai.newNoDocument(o,Re.min()))}else Bt(i===1);else{const o=this.et(n);if(o!==i){const a=this.tt(t),l=a?this.nt(a,t,o):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,c)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Oc(i).toUint8Array()}catch(l){if(l instanceof hY)return Mh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hT(o,r,s)}catch(l){return Mh(l instanceof A1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(t,n,i){return n.ge.count===i-this.st(t,n.targetId)?0:2}st(t,n){const i=this.ke.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.ze(n,s,null),r++)}),r}ot(t){const n=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&W4(a.target)){const l=new xe(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,ai.newNoDocument(l,t))}s.ve&&(n.set(o,s.Fe()),s.Me())}});let i=ht();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(t));const r=new py(t,n,this.Ue,this.Qe,i);return this.Qe=Pc(),this.$e=DU(),this.Ke=DU(),this.Ue=new In(rt),r}Ge(t,n){if(!this.Je(t))return;const i=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,i){if(!this.Je(t))return;const r=this.He(t);this.ut(t,n)?r.xe(n,1):r.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new xD,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new qn(rt),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new qn(rt),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||me("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new xD),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function DU(){return new In(xe.comparator)}function CD(){return new In(xe.comparator)}const F9e={asc:"ASCENDING",desc:"DESCENDING"},B9e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z9e={and:"AND",or:"OR"};class H9e{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Z4(e,t){return e.useProto3Json||fp(t)?t:{value:t}}function S6(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function zY(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function V9e(e,t){return S6(e,t.toTimestamp())}function Va(e){return Bt(!!e),Re.fromTimestamp(function(n){const i=Lc(n);return new di(i.seconds,i.nanos)}(e))}function gT(e,t){return q4(e,t).canonicalString()}function q4(e,t){const n=function(r){return new Qt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function HY(e){const t=Qt.fromString(e);return Bt(jY(t)),t}function I6(e,t){return gT(e.databaseId,t.path)}function b0(e,t){const n=HY(t);if(n.get(1)!==e.databaseId.projectId)throw new ve(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ve(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new xe($Y(n))}function VY(e,t){return gT(e.databaseId,t)}function $9e(e){const t=HY(e);return t.length===4?Qt.emptyPath():$Y(t)}function AD(e){return new Qt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $Y(e){return Bt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function MD(e,t,n){return{name:I6(e,t),fields:n.value.mapValue.fields}}function G9e(e,t){return"found"in t?function(i,r){Bt(!!r.found),r.found.name,r.found.updateTime;const s=b0(i,r.found.name),o=Va(r.found.updateTime),a=r.found.createTime?Va(r.found.createTime):Re.min(),l=new fr({mapValue:{fields:r.found.fields}});return ai.newFoundDocument(s,o,a,l)}(e,t):"missing"in t?function(i,r){Bt(!!r.missing),Bt(!!r.readTime);const s=b0(i,r.missing),o=Va(r.readTime);return ai.newNoDocument(s,o)}(e,t):Ie()}function X9e(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ie()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Bt(u===void 0||typeof u=="string"),Ti.fromBase64String(u||"")):(Bt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Ti.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?ie.UNKNOWN:PY(c.code);return new ve(u,c.message||"")}(o);n=new BY(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=b0(e,i.document.name),s=Va(i.document.updateTime),o=i.document.createTime?Va(i.document.createTime):Re.min(),a=new fr({mapValue:{fields:i.document.fields}}),l=ai.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new C2(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=b0(e,i.document),s=i.readTime?Va(i.readTime):Re.min(),o=ai.newNoDocument(r,s),a=i.removedTargetIds||[];n=new C2([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=b0(e,i.document),s=i.removedTargetIds||[];n=new C2([],s,r,null)}else{if(!("filter"in t))return Ie();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new D9e(r,s),a=i.targetId;n=new FY(a,o)}}return n}function j9e(e,t){let n;if(t instanceof hp)n={update:MD(e,t.key,t.value)};else if(t instanceof fT)n={delete:I6(e,t.key)};else if(t instanceof Md)n={update:MD(e,t.key,t.data),updateMask:e_e(t.fieldMask)};else{if(!(t instanceof NY))return Ie();n={verify:I6(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof _6)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wm)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _m)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof T6)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ie()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:V9e(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ie()}(e,t.precondition)),n}function Y9e(e,t){return{documents:[VY(e,t.path)]}}function W9e(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=VY(e,r);const s=function(c){if(c.length!==0)return XY(Yo.create(c,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:of(f.field),direction:q9e(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Z4(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ht:n,parent:r}}function K9e(e){let t=$9e(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Bt(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=GY(d);return f instanceof Yo&&wY(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(m){return new w6(af(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,fp(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new v6(h,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new v6(h,f)}(n.endAt)),m9e(t,r,o,s,a,"F",l,c)}function Z9e(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function GY(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=af(n.unaryFilter.field);return Zn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=af(n.unaryFilter.field);return Zn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=af(n.unaryFilter.field);return Zn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=af(n.unaryFilter.field);return Zn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(e):e.fieldFilter!==void 0?function(n){return Zn.create(af(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Yo.create(n.compositeFilter.filters.map(i=>GY(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ie()}}(n.compositeFilter.op))}(e):Ie()}function q9e(e){return F9e[e]}function Q9e(e){return B9e[e]}function J9e(e){return z9e[e]}function of(e){return{fieldPath:e.canonicalString()}}function af(e){return Ni.fromServerFormat(e.fieldPath)}function XY(e){return e instanceof Zn?function(n){if(n.op==="=="){if(pD(n.value))return{unaryFilter:{field:of(n.field),op:"IS_NAN"}};if(mD(n.value))return{unaryFilter:{field:of(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pD(n.value))return{unaryFilter:{field:of(n.field),op:"IS_NOT_NAN"}};if(mD(n.value))return{unaryFilter:{field:of(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:of(n.field),op:Q9e(n.op),value:n.value}}}(e):e instanceof Yo?function(n){const i=n.getFilters().map(r=>XY(r));return i.length===1?i[0]:{compositeFilter:{op:J9e(n.op),filters:i}}}(e):Ie()}function e_e(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function jY(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t,n,i,r,s=Re.min(),o=Re.min(),a=Ti.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Zl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Zl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Zl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Zl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_e{constructor(t){this.Tt=t}}function n_e(e){const t=K9e({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?K4(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_e{constructor(){this.Tn=new r_e}addToCollectionParentIndex(t,n){return this.Tn.add(n),ne.resolve()}getCollectionParents(t,n){return ne.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return ne.resolve()}deleteFieldIndex(t,n){return ne.resolve()}deleteAllFieldIndexes(t){return ne.resolve()}createTargetIndexes(t,n){return ne.resolve()}getDocumentsMatchingTarget(t,n){return ne.resolve(null)}getIndexType(t,n){return ne.resolve(0)}getFieldIndexes(t,n){return ne.resolve([])}getNextCollectionGroupToUpdate(t){return ne.resolve(null)}getMinOffset(t,n){return ne.resolve(Dc.min())}getMinOffsetFromCollectionGroup(t,n){return ne.resolve(Dc.min())}updateCollectionGroup(t,n,i){return ne.resolve()}updateIndexEntries(t,n){return ne.resolve()}}class r_e{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new qn(Qt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new qn(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YY=41943040;class dr{static withCacheSize(t){return new dr(t,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(YY,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new Lh(0)}static Un(){return new Lh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="LruGarbageCollector",s_e=1048576;function DD([e,t],[n,i]){const r=rt(e,n);return r===0?rt(t,i):r}class o_e{constructor(t){this.Hn=t,this.buffer=new qn(DD),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();DD(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class a_e{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){me(RD,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ug(n)?me(RD,"Ignoring IndexedDB error during garbage collection: ",n):await ly(n)}await this.er(3e5)})}}class l_e{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return ne.resolve(cy.ae);const i=new o_e(n);return this.tr.forEachTarget(t,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.tr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(kD)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kD):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(c=Date.now(),rf()<=it.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function c_e(e,t){return new l_e(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_e{constructor(){this.changes=new Ad(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ai.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ne.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_e{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_e{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&U0(i.mutation,r,hs.empty(),di.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ht()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ht()){const r=Tu();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let o=C1();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=Tu();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ht()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,r){let s=Pc();const o=p0(),a=function(){return p0()}();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Md)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),U0(u.mutation,c,u.mutation.getFieldMask(),di.now())):o.set(c.key,hs.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new d_e(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const i=p0();let r=new In((o,a)=>o-a),s=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||hs.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||ht()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=AY();u.forEach(f=>{if(!s.has(f)){const h=LY(n.get(f),i.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return ne.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(o){return xe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):p9e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):ne.resolve(Tu());let a=bm,l=s;return o.next(c=>ne.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?ne.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,ht())).next(u=>({batchId:a,changes:v9e(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new xe(n)).next(i=>{let r=C1();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let o=C1();return this.indexManager.getCollectionParents(t,s).next(a=>ne.forEach(a,l=>{const c=function(d,f){return new dy(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,ai.newInvalidDocument(u)))});let a=C1();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&U0(u.mutation,c,hs.empty(),di.now()),hy(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_e{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return ne.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Va(r.createTime)}}(n)),ne.resolve()}getNamedQuery(t,n){return ne.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(r){return{name:r.name,query:n_e(r.bundledQuery),readTime:Va(r.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_e{constructor(){this.overlays=new In(xe.comparator),this.Rr=new Map}getOverlay(t,n){return ne.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Tu();return ne.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.Et(t,n,s)}),ne.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(i)),ne.resolve()}getOverlaysForCollection(t,n,i){const r=Tu(),s=n.length+1,o=new xe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return ne.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new In((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Tu(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Tu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return ne.resolve(a)}Et(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new R9e(n,i));let s=this.Rr.get(n);s===void 0&&(s=ht(),this.Rr.set(n,s)),this.Rr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_e{constructor(){this.sessionToken=Ti.EMPTY_BYTE_STRING}getSessionToken(t){return ne.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.Vr=new qn(ri.mr),this.gr=new qn(ri.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const i=new ri(t,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.wr(new ri(t,n))}Sr(t,n){t.forEach(i=>this.removeReference(i,n))}br(t){const n=new xe(new Qt([])),i=new ri(n,t),r=new ri(n,t+1),s=[];return this.gr.forEachInRange([i,r],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new xe(new Qt([])),i=new ri(n,t),r=new ri(n,t+1);let s=ht();return this.gr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new ri(t,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ri{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return xe.comparator(t.key,n.key)||rt(t.Cr,n.Cr)}static pr(t,n){return rt(t.Cr,n.Cr)||xe.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_e{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new qn(ri.mr)}checkEmpty(t){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new k9e(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Mr=this.Mr.add(new ri(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(t,n){return ne.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.Nr(i),s=r<0?0:r;return ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Zwe:this.Fr-1)}getAllMutationBatches(t){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ri(n,0),r=new ri(n,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([i,r],o=>{const a=this.Or(o.Cr);s.push(a)}),ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new qn(rt);return n.forEach(r=>{const s=new ri(r,0),o=new ri(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{i=i.add(a.Cr)})}),ne.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;xe.isDocumentKey(s)||(s=s.child(""));const o=new ri(new xe(s),0);let a=new qn(rt);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Cr)),!0)},o),ne.resolve(this.Br(a))}Br(t){const n=[];return t.forEach(i=>{const r=this.Or(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Bt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ne.forEach(n.mutations,r=>{const s=new ri(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,n){const i=new ri(n,0),r=this.Mr.firstAfterOrEqual(i);return ne.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,ne.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_e{constructor(t){this.kr=t,this.docs=function(){return new In(xe.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return ne.resolve(i?i.document.mutableCopy():ai.newInvalidDocument(n))}getEntries(t,n){let i=Pc();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ai.newInvalidDocument(r))}),ne.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Pc();const o=n.path,a=new xe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||jwe(Xwe(u),i)<=0||(r.has(u.key)||hy(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ne.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Ie()}qr(t,n){return ne.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new b_e(this)}getSize(t){return ne.resolve(this.size)}}class b_e extends u_e{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(i)}),ne.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_e{constructor(t){this.persistence=t,this.Qr=new Ad(n=>lT(n),cT),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.$r=0,this.Kr=new mT,this.targetCount=0,this.Ur=Lh.Kn()}forEachTarget(t,n){return this.Qr.forEach((i,r)=>n(r)),ne.resolve()}getLastRemoteSnapshotVersion(t){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ne.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),ne.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new Lh(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,ne.resolve()}updateTargetData(t,n){return this.zn(n),ne.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.br(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),ne.waitFor(s).next(()=>r)}getTargetCount(t){return ne.resolve(this.targetCount)}getTargetData(t,n){const i=this.Qr.get(n)||null;return ne.resolve(i)}addMatchingKeys(t,n,i){return this.Kr.yr(n,i),ne.resolve()}removeMatchingKeys(t,n,i){this.Kr.Sr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),ne.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Kr.br(n),ne.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Kr.vr(n);return ne.resolve(i)}containsKey(t,n){return ne.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WY{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new cy(0),this.zr=!1,this.zr=!0,this.jr=new m_e,this.referenceDelegate=t(this),this.Hr=new y_e(this),this.indexManager=new i_e,this.remoteDocumentCache=function(r){return new U_e(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new t_e(n),this.Yr=new h_e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new g_e,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Wr[t.toKey()];return i||(i=new p_e(n,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,i){me("MemoryPersistence","Starting transaction:",t);const r=new E_e(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(s=>this.referenceDelegate.Xr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}ei(t,n){return ne.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,n)))}}class E_e extends Wwe{constructor(t){super(),this.currentSequenceNumber=t}}class pT{constructor(t){this.persistence=t,this.ti=new mT,this.ni=null}static ri(t){return new pT(t)}get ii(){if(this.ni)return this.ni;throw Ie()}addReference(t,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),ne.resolve()}removeReference(t,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),ne.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.ii.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,i=>{const r=xe.fromPath(i);return this.si(t,r).next(s=>{s||n.removeEntry(r,Re.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return ne.or([()=>ne.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class x6{constructor(t,n){this.persistence=t,this.oi=new Ad(i=>Qwe(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=c_e(this,n)}static ri(t,n){return new x6(t,n)}Zr(){}Xr(t){return ne.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}sr(t){let n=0;return this.rr(t,i=>{n++}).next(()=>n)}rr(t,n){return ne.forEach(this.oi,(i,r)=>this.ar(t,i,r).next(s=>s?ne.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.qr(t,o=>this.ar(t,o,n).next(a=>{a||(i++,s.removeEntry(o,Re.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),ne.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ne.resolve()}removeReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ne.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),ne.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=I2(t.data.value)),n}ar(t,n,i){return ne.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.oi.get(n);return ne.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Hi=i,this.Ji=r}static Yi(t,n){let i=ht(),r=ht();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new UT(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_e{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Eve()?8:Kwe(bve())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.rs(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(t,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new v_e;return this._s(t,n,o).next(a=>{if(s.result=a,this.Xi)return this.us(t,n,o,a.size)})}).next(()=>s.result)}us(t,n,i,r){return i.documentReadCount<this.es?(rf()<=it.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",sf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(rf()<=it.DEBUG&&me("QueryEngine","Query:",sf(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(rf()<=it.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",sf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Do(n))):ne.resolve())}rs(t,n){if(ED(n))return ne.resolve(null);let i=Do(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=K4(n,null,"F"),i=Do(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=ht(...s);return this.ns.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.cs(n,a);return this.ls(n,c,o,l.readTime)?this.rs(t,K4(n,null,"F")):this.hs(t,c,n,l)}))})))}ss(t,n,i,r){return ED(n)||r.isEqual(Re.min())?ne.resolve(null):this.ns.getDocuments(t,i).next(s=>{const o=this.cs(n,s);return this.ls(n,o,i,r)?ne.resolve(null):(rf()<=it.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sf(n)),this.hs(t,o,n,Gwe(r,bm)).next(a=>a))})}cs(t,n){let i=new qn(xY(t));return n.forEach((r,s)=>{hy(t,s)&&(i=i.add(s))}),i}ls(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}_s(t,n,i){return rf()<=it.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",sf(n)),this.ns.getDocumentsMatchingQuery(t,n,Dc.min(),i)}hs(t,n,i,r){return this.ns.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="LocalStore",__e=3e8;class T_e{constructor(t,n,i,r){this.persistence=t,this.Ps=n,this.serializer=r,this.Ts=new In(rt),this.Is=new Ad(s=>lT(s),cT),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new f_e(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function S_e(e,t,n,i){return new T_e(e,t,n,i)}async function KY(e,t){const n=Ze(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.As(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ht();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function ZY(e){const t=Ze(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function I_e(e,t){const n=Ze(e),i=t.snapshotVersion;let r=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});r=n.Ts;const a=[];t.targetChanges.forEach((u,d)=>{const f=r.get(d);if(!f)return;a.push(n.Hr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Hr.addMatchingKeys(s,u.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(Ti.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,i)),r=r.insert(d,h),function(p,y,b){return p.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=__e?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,h,u)&&a.push(n.Hr.updateTargetData(s,h))});let l=Pc(),c=ht();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(x_e(s,o,t.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!i.isEqual(Re.min())){const u=n.Hr.getLastRemoteSnapshotVersion(s).next(d=>n.Hr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return ne.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ts=r,s))}function x_e(e,t,n){let i=ht(),r=ht();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let o=Pc();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Re.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):me(bT,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:r}})}function C_e(e,t){const n=Ze(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Hr.getTargetData(i,t).next(s=>s?(r=s,ne.resolve(r)):n.Hr.allocateTargetId(i).next(o=>(r=new Zl(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(t,i.targetId)),i})}async function Q4(e,t,n){const i=Ze(e),r=i.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ug(o))throw o;me(bT,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ts=i.Ts.remove(t),i.Is.delete(r.target)}function LD(e,t,n){const i=Ze(e);let r=Re.min(),s=ht();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Ze(l),f=d.Is.get(u);return f!==void 0?ne.resolve(d.Ts.get(f)):d.Hr.getTargetData(c,u)}(i,o,Do(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,t,n?r:Re.min(),n?s:ht())).next(a=>(A_e(i,b9e(t),a),{documents:a,gs:s})))}function A_e(e,t,n){let i=e.Es.get(t)||Re.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Es.set(t,i)}class OD{constructor(){this.activeTargetIds=T9e()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class M_e{constructor(){this.ho=new OD,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,i){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new OD,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_e{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND="ConnectivityMonitor";class PD{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){me(ND,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){me(ND,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LU=null;function J4(){return LU===null?LU=function(){return 268435456+Math.round(2147483648*Math.random())}():LU++,"0x"+LU.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="RestConnection",R_e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D_e{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===y6?`project_id=${i}`:`project_id=${i}&database_id=${r}`}So(t,n,i,r,s){const o=J4(),a=this.bo(t,n.toUriEncodedString());me(qE,`Sending RPC '${t}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,r,s),this.vo(t,a,l,i).then(c=>(me(qE,`Received RPC '${t}' ${o}: `,c),c),c=>{throw Mh(qE,`RPC '${t}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Co(t,n,i,r,s,o){return this.So(t,n,i,r,s)}Do(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cg}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}bo(t,n){const i=R_e[t];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_e{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="WebChannelConnection";class O_e extends D_e{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,i,r){const s=J4();return new Promise((o,a)=>{const l=new rY;l.setWithCredentials(!0),l.listenOnce(sY.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case S2.NO_ERROR:const u=l.getResponseJson();me(Ai,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case S2.TIMEOUT:me(Ai,`RPC '${t}' ${s} timed out`),a(new ve(ie.DEADLINE_EXCEEDED,"Request time out"));break;case S2.HTTP_ERROR:const d=l.getStatus();if(me(Ai,`RPC '${t}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f?.error;if(h&&h.status&&h.message){const m=function(y){const b=y.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(b)>=0?b:ie.UNKNOWN}(h.status);a(new ve(m,h.message))}else a(new ve(ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ve(ie.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{me(Ai,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);me(Ai,`RPC '${t}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Wo(t,n,i){const r=J4(),s=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=lY(),a=aY(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");me(Ai,`Creating RPC '${t}' stream ${r}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,h=!1;const m=new L_e({Fo:y=>{h?me(Ai,`Not sending because RPC '${t}' stream ${r} is closed:`,y):(f||(me(Ai,`Opening RPC '${t}' stream ${r} transport.`),d.open(),f=!0),me(Ai,`RPC '${t}' stream ${r} sending:`,y),d.send(y))},Mo:()=>d.close()}),p=(y,b,E)=>{y.listen(b,v=>{try{E(v)}catch(w){setTimeout(()=>{throw w},0)}})};return p(d,x1.EventType.OPEN,()=>{h||(me(Ai,`RPC '${t}' stream ${r} transport opened.`),m.Qo())}),p(d,x1.EventType.CLOSE,()=>{h||(h=!0,me(Ai,`RPC '${t}' stream ${r} transport closed`),m.Ko())}),p(d,x1.EventType.ERROR,y=>{h||(h=!0,Mh(Ai,`RPC '${t}' stream ${r} transport errored:`,y),m.Ko(new ve(ie.UNAVAILABLE,"The operation could not be completed")))}),p(d,x1.EventType.MESSAGE,y=>{var b;if(!h){const E=y.data[0];Bt(!!E);const v=E,w=v?.error||((b=v[0])===null||b===void 0?void 0:b.error);if(w){me(Ai,`RPC '${t}' stream ${r} received error:`,w);const S=w.status;let k=function(A){const C=Mn[A];if(C!==void 0)return PY(C)}(S),_=w.message;k===void 0&&(k=ie.INTERNAL,_="Unknown error status: "+S+" with message "+w.message),h=!0,m.Ko(new ve(k,_)),d.close()}else me(Ai,`RPC '${t}' stream ${r} received:`,E),m.Uo(E)}}),p(a,oY.STAT_EVENT,y=>{y.stat===G4.PROXY?me(Ai,`RPC '${t}' stream ${r} detected buffering proxy`):y.stat===G4.NOPROXY&&me(Ai,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}}function QE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(e){return new H9e(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Ti=t,this.timerId=n,this.Go=i,this.zo=r,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,n-i);r>0&&me("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="PersistentStream";class N_e{constructor(t,n,i,r,s,o,a,l){this.Ti=t,this.n_=i,this.r_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new yT(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(ol(n.toString()),ol("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===n&&this.V_(i,r)},i=>{t(()=>{const r=new ve(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(t,n){const i=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return me(FD,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(me(FD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P_e extends N_e{constructor(t,n,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=X9e(this.serializer,t),i=function(s){if(!("targetChange"in s))return Re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?Va(o.readTime):Re.min()}(t);return this.listener.p_(n,i)}y_(t){const n={};n.database=AD(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=W4(l)?{documents:Y9e(s,l)}:{query:W9e(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zY(s,o.resumeToken);const c=Z4(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Re.min())>0){a.readTime=S6(s,o.snapshotVersion.toTimestamp());const c=Z4(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=Z9e(this.serializer,t);i&&(n.labels=i),this.I_(n)}w_(t){const n={};n.database=AD(this.serializer),n.removeTarget=t,this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_e{}class B_e extends F_e{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new ve(ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(t,q4(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(ie.UNKNOWN,s.toString())})}Co(t,n,i,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(t,q4(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(ie.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class z_e{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ol(n),this.N_=!1):me("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="RemoteStore";class H_e{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{i.enqueueAndForget(async()=>{pp(this)&&(me(Oh,"Restarting streams for network reachability change."),await async function(l){const c=Ze(l);c.W_.add(4),await mp(c),c.j_.set("Unknown"),c.W_.delete(4),await by(c)}(this))})}),this.j_=new z_e(i,r)}}async function by(e){if(pp(e))for(const t of e.G_)await t(!0)}async function mp(e){for(const t of e.G_)await t(!1)}function qY(e,t){const n=Ze(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),_T(n)?wT(n):dg(n).c_()&&vT(n,t))}function ET(e,t){const n=Ze(e),i=dg(n);n.U_.delete(t),i.c_()&&QY(n,t),n.U_.size===0&&(i.c_()?i.P_():pp(n)&&n.j_.set("Unknown"))}function vT(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Re.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}dg(e).y_(t)}function QY(e,t){e.H_.Ne(t),dg(e).w_(t)}function wT(e){e.H_=new P9e({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),dg(e).start(),e.j_.B_()}function _T(e){return pp(e)&&!dg(e).u_()&&e.U_.size>0}function pp(e){return Ze(e).W_.size===0}function JY(e){e.H_=void 0}async function V_e(e){e.j_.set("Online")}async function $_e(e){e.U_.forEach((t,n)=>{vT(e,t)})}async function G_e(e,t){JY(e),_T(e)?(e.j_.q_(t),wT(e)):e.j_.set("Unknown")}async function X_e(e,t,n){if(e.j_.set("Online"),t instanceof BY&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.U_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.U_.delete(a),r.H_.removeTarget(a))}(e,t)}catch(i){me(Oh,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await BD(e,i)}else if(t instanceof C2?e.H_.We(t):t instanceof FY?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Re.min()))try{const i=await ZY(e.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.U_.get(c);u&&s.U_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.U_.get(l);if(!u)return;s.U_.set(l,u.withResumeToken(Ti.EMPTY_BYTE_STRING,u.snapshotVersion)),QY(s,l);const d=new Zl(u.target,l,c,u.sequenceNumber);vT(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){me(Oh,"Failed to raise snapshot:",i),await BD(e,i)}}async function BD(e,t,n){if(!ug(t))throw t;e.W_.add(1),await mp(e),e.j_.set("Offline"),n||(n=()=>ZY(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{me(Oh,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await by(e)})}async function zD(e,t){const n=Ze(e);n.asyncQueue.verifyOperationInProgress(),me(Oh,"RemoteStore received new credentials");const i=pp(n);n.W_.add(3),await mp(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await by(n)}async function j_e(e,t){const n=Ze(e);t?(n.W_.delete(2),await by(n)):t||(n.W_.add(2),await mp(n),n.j_.set("Unknown"))}function dg(e){return e.J_||(e.J_=function(n,i,r){const s=Ze(n);return s.M_(),new P_e(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{xo:V_e.bind(null,e),No:$_e.bind(null,e),Lo:G_e.bind(null,e),p_:X_e.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),_T(e)?wT(e):e.j_.set("Unknown")):(await e.J_.stop(),JY(e))})),e.J_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new pc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const o=Date.now()+i,a=new TT(t,n,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ie.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eW(e,t){if(ol("AsyncQueue",`${t}: ${e}`),ug(e))return new ve(ie.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{static emptySet(t){return new Kf(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||xe.comparator(n.key,i.key):(n,i)=>xe.comparator(n.key,i.key),this.keyedMap=C1(),this.sortedSet=new In(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Kf)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Kf;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.Z_=new In(xe.comparator)}track(t){const n=t.doc.key,i=this.Z_.get(n);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(n):t.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):Ie():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,i)=>{t.push(i)}),t}}class Nh{constructor(t,n,i,r,s,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nh(t,n,Kf.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&fy(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_e{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class W_e{constructor(){this.queries=VD(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const r=Ze(n),s=r.queries;r.queries=VD(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(i)})})(this,new ve(ie.ABORTED,"Firestore shutting down"))}}function VD(){return new Ad(e=>IY(e),fy)}async function K_e(e,t){const n=Ze(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.na()&&t.ra()&&(i=2):(s=new Y_e,i=t.ra()?0:1);try{switch(i){case 0:s.ea=await n.onListen(r,!0);break;case 1:s.ea=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=eW(o,`Initialization of query '${sf(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&ST(n)}async function Z_e(e,t){const n=Ze(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const o=s.ta.indexOf(t);o>=0&&(s.ta.splice(o,1),s.ta.length===0?r=t.ra()?0:1:!s.na()&&t.ra()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function q_e(e,t){const n=Ze(e);let i=!1;for(const r of t){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.ta)a.oa(r)&&(i=!0);o.ea=r}}i&&ST(n)}function Q_e(e,t,n){const i=Ze(e),r=i.queries.get(t);if(r)for(const s of r.ta)s.onError(n);i.queries.delete(t)}function ST(e){e.ia.forEach(t=>{t.next()})}var ev,$D;($D=ev||(ev={}))._a="default",$D.Cache="cache";class J_e{constructor(t,n,i){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Nh(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=Nh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==ev.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(t){this.key=t}}class nW{constructor(t){this.key=t}}class eTe{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ht(),this.mutatedKeys=ht(),this.ya=xY(t),this.wa=new Kf(this.ya)}get Sa(){return this.fa}ba(t,n){const i=n?n.Da:new HD,r=n?n.wa:this.wa;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,d)=>{const f=r.get(u),h=hy(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let y=!1;f&&h?f.data.isEqual(h.data)?m!==p&&(i.track({type:3,doc:h}),y=!0):this.va(f,h)||(i.track({type:2,doc:h}),y=!0,(l&&this.ya(h,l)>0||c&&this.ya(h,c)<0)&&(a=!0)):!f&&h?(i.track({type:0,doc:h}),y=!0):f&&!h&&(i.track({type:1,doc:f}),y=!0,(l||c)&&(a=!0)),y&&(h?(o=o.add(h),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{wa:o,Da:i,ls:a,mutatedKeys:s}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((u,d)=>function(h,m){const p=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return p(h)-p(m)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(i),r=r!=null&&r;const a=n&&!r?this.Fa():[],l=this.pa.size===0&&this.current&&!r?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new Nh(this.query,t.wa,s,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new HD,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=ht(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return t.forEach(i=>{this.pa.has(i)||n.push(new nW(i))}),this.pa.forEach(i=>{t.has(i)||n.push(new tW(i))}),n}Oa(t){this.fa=t.gs,this.pa=ht();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return Nh.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const IT="SyncEngine";class tTe{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class nTe{constructor(t){this.key=t,this.Ba=!1}}class iTe{constructor(t,n,i,r,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Ad(a=>IY(a),fy),this.qa=new Map,this.Qa=new Set,this.$a=new In(xe.comparator),this.Ka=new Map,this.Ua=new mT,this.Wa={},this.Ga=new Map,this.za=Lh.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function rTe(e,t,n=!0){const i=aW(e);let r;const s=i.ka.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Na()):r=await iW(i,t,n,!0),r}async function sTe(e,t){const n=aW(e);await iW(n,t,!0,!1)}async function iW(e,t,n,i){const r=await C_e(e.localStore,Do(t)),s=r.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await oTe(e,t,s,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&qY(e.remoteStore,r),a}async function oTe(e,t,n,i,r){e.Ha=(d,f,h)=>async function(p,y,b,E){let v=y.view.ba(b);v.ls&&(v=await LD(p.localStore,y.query,!1).then(({documents:_})=>y.view.ba(_,v)));const w=E&&E.targetChanges.get(y.targetId),S=E&&E.targetMismatches.get(y.targetId)!=null,k=y.view.applyChanges(v,p.isPrimaryClient,w,S);return XD(p,y.targetId,k.Ma),k.snapshot}(e,d,f,h);const s=await LD(e.localStore,t,!0),o=new eTe(t,s.gs),a=o.ba(s.documents),l=gp.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),c=o.applyChanges(a,e.isPrimaryClient,l);XD(e,n,c.Ma);const u=new tTe(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function aTe(e,t,n){const i=Ze(e),r=i.ka.get(t),s=i.qa.get(r.targetId);if(s.length>1)return i.qa.set(r.targetId,s.filter(o=>!fy(o,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Q4(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&ET(i.remoteStore,r.targetId),tv(i,r.targetId)}).catch(ly)):(tv(i,r.targetId),await Q4(i.localStore,r.targetId,!0))}async function lTe(e,t){const n=Ze(e),i=n.ka.get(t),r=n.qa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ET(n.remoteStore,i.targetId))}async function rW(e,t){const n=Ze(e);try{const i=await I_e(n.localStore,t);t.targetChanges.forEach((r,s)=>{const o=n.Ka.get(s);o&&(Bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ba=!0:r.modifiedDocuments.size>0?Bt(o.Ba):r.removedDocuments.size>0&&(Bt(o.Ba),o.Ba=!1))}),await oW(n,i,t)}catch(i){await ly(i)}}function GD(e,t,n){const i=Ze(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ka.forEach((s,o)=>{const a=o.view.sa(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Ze(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ta)f.sa(a)&&(c=!0)}),c&&ST(l)}(i.eventManager,t),r.length&&i.La.p_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function cTe(e,t,n){const i=Ze(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Ka.get(t),s=r&&r.key;if(s){let o=new In(xe.comparator);o=o.insert(s,ai.newNoDocument(s,Re.min()));const a=ht().add(s),l=new py(Re.min(),new Map,new In(rt),o,a);await rW(i,l),i.$a=i.$a.remove(s),i.Ka.delete(t),xT(i)}else await Q4(i.localStore,t,!1).then(()=>tv(i,t,n)).catch(ly)}function tv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.qa.get(t))e.ka.delete(i),n&&e.La.Ja(i,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.br(t).forEach(i=>{e.Ua.containsKey(i)||sW(e,i)})}function sW(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(ET(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),xT(e))}function XD(e,t,n){for(const i of n)i instanceof tW?(e.Ua.addReference(i.key,t),uTe(e,i)):i instanceof nW?(me(IT,"Document no longer in limbo: "+i.key),e.Ua.removeReference(i.key,t),e.Ua.containsKey(i.key)||sW(e,i.key)):Ie()}function uTe(e,t){const n=t.key,i=n.path.canonicalString();e.$a.get(n)||e.Qa.has(i)||(me(IT,"New document in limbo: "+n),e.Qa.add(i),xT(e))}function xT(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new xe(Qt.fromString(t)),i=e.za.next();e.Ka.set(i,new nTe(n)),e.$a=e.$a.insert(n,i),qY(e.remoteStore,new Zl(Do(uT(n.path)),i,"TargetPurposeLimboResolution",cy.ae))}}async function oW(e,t,n){const i=Ze(e),r=[],s=[],o=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{o.push(i.Ha(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(u=n?.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=UT.Yi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.La.p_(r),await async function(l,c){const u=Ze(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ne.forEach(c,f=>ne.forEach(f.Hi,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>ne.forEach(f.Ji,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!ug(d))throw d;me(bT,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.Ts.get(f),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);u.Ts=u.Ts.insert(f,p)}}}(i.localStore,s))}async function dTe(e,t){const n=Ze(e);if(!n.currentUser.isEqual(t)){me(IT,"User change. New user:",t.toKey());const i=await KY(n.localStore,t);n.currentUser=t,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new ve(ie.CANCELLED,o))})}),s.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await oW(n,i.Rs)}}function fTe(e,t){const n=Ze(e),i=n.Ka.get(t);if(i&&i.Ba)return ht().add(i.key);{let r=ht();const s=n.qa.get(t);if(!s)return r;for(const o of s){const a=n.ka.get(o);r=r.unionWith(a.view.Sa)}return r}}function aW(e){const t=Ze(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rW.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=fTe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=cTe.bind(null,t),t.La.p_=q_e.bind(null,t.eventManager),t.La.Ja=Q_e.bind(null,t.eventManager),t}class C6{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Uy(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return S_e(this.persistence,new w_e,t.initialUser,this.serializer)}Xa(t){return new WY(pT.ri,this.serializer)}Za(t){return new M_e}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}C6.provider={build:()=>new C6};class hTe extends C6{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){Bt(this.persistence.referenceDelegate instanceof x6);const i=this.persistence.referenceDelegate.garbageCollector;return new a_e(i,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new WY(i=>x6.ri(i,n),this.serializer)}}class nv{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>GD(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dTe.bind(null,this.syncEngine),await j_e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new W_e}()}createDatastore(t){const n=Uy(t.databaseInfo.databaseId),i=function(s){return new O_e(s)}(t.databaseInfo);return function(s,o,a,l){return new B_e(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,o,a){return new H_e(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>GD(this.syncEngine,n,0),function(){return PD.D()?new PD:new k_e}())}createSyncEngine(t,n){return function(r,s,o,a,l,c,u){const d=new iTe(r,s,o,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=Ze(r);me(Oh,"RemoteStore shutting down."),s.W_.add(5),await mp(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}nv.provider={build:()=>new nv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gTe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):ol("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mTe{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ve(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=Ze(r),a={documents:s.map(d=>I6(o.serializer,d))},l=await o.Co("BatchGetDocuments",o.serializer.databaseId,Qt.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=G9e(o.serializer,d);c.set(f.key.toString(),f)});const u=[];return s.forEach(d=>{const f=c.get(d.toString());Bt(!!f),u.push(f)}),u}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new fT(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=xe.fromPath(i);this.mutations.push(new NY(r,this.precondition(r)))}),await async function(i,r){const s=Ze(i),o={writes:r.map(a=>j9e(s.serializer,a))};await s.So("Commit",s.serializer.databaseId,Qt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Ie();n=Re.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new ve(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Re.min())?ls.exists(!1):ls.updateTime(n):ls.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Re.min()))throw new ve(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ls.updateTime(n)}return ls.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pTe{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Tu=i.maxAttempts,this.a_=new yT(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new mTe(this.datastore),n=this.du(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Au(r)}))}).catch(i=>{this.Au(i)})})}du(t){try{const n=this.updateFunction(t);return!fp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!L9e(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc="FirestoreClient";class UTe{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ri.UNAUTHENTICATED,this.clientId=uY.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{me(Fc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(me(Fc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new pc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=eW(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function JE(e,t){e.asyncQueue.verifyOperationInProgress(),me(Fc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await KY(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function jD(e,t){e.asyncQueue.verifyOperationInProgress();const n=await bTe(e);me(Fc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>zD(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>zD(t.remoteStore,r)),e._onlineComponents=t}async function bTe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){me(Fc,"Using user provided OfflineComponentProvider");try{await JE(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===ie.FAILED_PRECONDITION||r.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Mh("Error using user provided cache. Falling back to memory cache: "+n),await JE(e,new C6)}}else me(Fc,"Using default OfflineComponentProvider"),await JE(e,new hTe(void 0));return e._offlineComponents}async function lW(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(me(Fc,"Using user provided OnlineComponentProvider"),await jD(e,e._uninitializedComponentsProvider._online)):(me(Fc,"Using default OnlineComponentProvider"),await jD(e,new nv))),e._onlineComponents}function yTe(e){return lW(e).then(t=>t.datastore)}async function ETe(e){const t=await lW(e),n=t.eventManager;return n.onListen=rTe.bind(null,t.syncEngine),n.onUnlisten=aTe.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=sTe.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=lTe.bind(null,t.syncEngine),n}function vTe(e,t,n={}){const i=new pc;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new gTe({next:f=>{u.su(),o.enqueueAndForget(()=>Z_e(s,d));const h=f.docs.has(a);!h&&f.fromCache?c.reject(new ve(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new ve(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new J_e(uT(a.path),u,{includeMetadataChanges:!0,Ta:!0});return K_e(s,d)}(await ETe(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wTe(e,t,n){if(!n)throw new ve(ie.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function _Te(e,t,n,i){if(t===!0&&i===!0)throw new ve(ie.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function WD(e){if(!xe.isDocumentKey(e))throw new ve(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function CT(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Ie()}function A6(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ve(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=CT(e);throw new ve(ie.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW="firestore.googleapis.com",KD=!0;class ZD{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ve(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uW,this.ssl=KD}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:KD;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=YY;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<s_e)throw new ve(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}_Te("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cW((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class AT{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZD({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ve(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZD(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Nwe;switch(i.type){case"firstParty":return new zwe(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ve(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=YD.get(n);i&&(me("ComponentProvider","Removing Datastore"),YD.delete(n),i.terminate())}(this),Promise.resolve()}}function TTe(e,t,n,i={}){var r;const s=(e=A6(e,AT))._getSettings(),o=`${t}:${n}`;if(s.host!==uW&&s.host!==o&&Mh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Ri.MOCK_USER;else{a=Xj(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ve(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ri(c)}e._authCredentials=new Pwe(new cY(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new MT(this.firestore,t,this._query)}}class ys{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tm(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ys(this.firestore,t,this._key)}}class Tm extends MT{constructor(t,n,i){super(t,n,uT(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ys(this.firestore,null,new xe(t))}withConverter(t){return new Tm(this.firestore,t,this._path)}}function dW(e,t,...n){if(e=no(e),arguments.length===1&&(t=uY.newId()),wTe("doc","path",t),e instanceof AT){const i=Qt.fromString(t,...n);return WD(i),new ys(e,null,new xe(i))}{if(!(e instanceof ys||e instanceof Tm))throw new ve(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Qt.fromString(t,...n));return WD(i),new ys(e.firestore,e instanceof Tm?e.converter:null,new xe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="AsyncQueue";class QD{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new yT(this,"async_queue_retry"),this.Su=()=>{const i=QE();i&&me(qD,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const n=QE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=QE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new pc;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!ug(t))throw t;me(qD,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw ol("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=n,n}enqueueAfterDelay(t,n,i){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const r=TT.createAndSchedule(this,t,n,i,s=>this.Fu(s));return this.fu.push(r),r}Du(){this.gu&&Ie()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class kT extends AT{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new QD,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new QD(t),this._firestoreClient=void 0,await t}}}function STe(e,t){const n=typeof e=="object"?e:eY(),i=typeof e=="string"?e:y6,r=Zj(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=$j("firestore");s&&TTe(r,...s)}return r}function fW(e){if(e._terminated)throw new ve(ie.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ITe(e),e._firestoreClient}function ITe(e){var t,n,i;const r=e._freezeSettings(),s=function(a,l,c,u){return new t9e(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,cW(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new UTe(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t){this._byteString=t}static fromBase64String(t){try{return new al(Ti.fromBase64String(t))}catch(n){throw new ve(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new al(Ti.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ve(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ni(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ve(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ve(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return rt(this._lat,t._lat)||rt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xTe=/^__.*__$/;class CTe{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Md(t,this.data,this.fieldMask,n,this.fieldTransforms):new hp(t,this.data,n,this.fieldTransforms)}}class hW{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Md(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function gW(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class OT{constructor(t,n,i,r,s,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new OT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.$u(t),r}Ku(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return M6(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(gW(this.Lu)&&xTe.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class ATe{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Uy(t)}ju(t,n,i,r=!1){return new OT({Lu:t,methodName:n,zu:i,path:Ni.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function MTe(e){const t=e._freezeSettings(),n=Uy(e._databaseId);return new ATe(e._databaseId,!!t.ignoreUndefinedProperties,n)}function kTe(e,t,n,i,r,s={}){const o=e.ju(s.merge||s.mergeFields?2:0,t,n,r);NT("Data must be an object, but it was:",o,i);const a=mW(i,o);let l,c;if(s.merge)l=new hs(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=iv(t,d,n);if(!o.contains(f))throw new ve(ie.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);UW(u,f)||u.push(f)}l=new hs(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new CTe(new fr(a),l,c)}class Ey extends RT{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ey}}function RTe(e,t,n,i){const r=e.ju(1,t,n);NT("Data must be an object, but it was:",r,i);const s=[],o=fr.empty();Cd(i,(l,c)=>{const u=PT(t,l,n);c=no(c);const d=r.Ku(u);if(c instanceof Ey)s.push(u);else{const f=vy(c,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new hs(s);return new hW(o,a,r.fieldTransforms)}function DTe(e,t,n,i,r,s){const o=e.ju(1,t,n),a=[iv(t,i,n)],l=[r];if(s.length%2!=0)throw new ve(ie.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(iv(t,s[f])),l.push(s[f+1]);const c=[],u=fr.empty();for(let f=a.length-1;f>=0;--f)if(!UW(c,a[f])){const h=a[f];let m=l[f];m=no(m);const p=o.Ku(h);if(m instanceof Ey)c.push(h);else{const y=vy(m,p);y!=null&&(c.push(h),u.set(h,y))}}const d=new hs(c);return new hW(u,d,o.fieldTransforms)}function vy(e,t){if(pW(e=no(e)))return NT("Unsupported field value:",t,e),mW(e,t);if(e instanceof RT)return function(i,r){if(!gW(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=vy(a,r.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=no(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return S9e(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=di.fromDate(i);return{timestampValue:S6(r.serializer,s)}}if(i instanceof di){const s=new di(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:S6(r.serializer,s)}}if(i instanceof DT)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof al)return{bytesValue:zY(r.serializer,i._byteString)};if(i instanceof ys){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gT(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof LT)return function(o,a){return{mapValue:{fields:{[bY]:{stringValue:yY},[E6]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return dT(a.serializer,c)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${CT(i)}`)}(e,t)}function mW(e,t){const n={};return fY(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cd(e,(i,r)=>{const s=vy(r,t.qu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function pW(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof di||e instanceof DT||e instanceof al||e instanceof ys||e instanceof RT||e instanceof LT)}function NT(e,t,n){if(!pW(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=CT(n);throw i==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+i)}}function iv(e,t,n){if((t=no(t))instanceof yy)return t._internalPath;if(typeof t=="string")return PT(e,t);throw M6("Field path arguments must be of type string or ",e,!1,void 0,n)}const LTe=new RegExp("[~\\*/\\[\\]]");function PT(e,t,n){if(t.search(LTe)>=0)throw M6(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new yy(...t.split("."))._internalPath}catch{throw M6(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function M6(e,t,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new ve(ie.INVALID_ARGUMENT,a+e+l)}function UW(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ys(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new OTe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(bW("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OTe extends k6{data(){return super.data()}}function bW(e,t){return typeof t=="string"?PT(e,t):t instanceof yy?t._internalPath:t._delegate._internalPath}class yW{convertValue(t,n="none"){switch(Nc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return wn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Oc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Ie()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Cd(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var n,i,r;const s=(r=(i=(n=t.fields)===null||n===void 0?void 0:n[E6].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>wn(o.doubleValue));return new LT(s)}convertGeoPoint(t){return new DT(wn(t.latitude),wn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=uy(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ym(t));default:return null}}convertTimestamp(t){const n=Lc(t);return new di(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Qt.fromString(t);Bt(jY(i));const r=new Em(i.get(1),i.get(3)),s=new xe(i.popFirst(5));return r.isEqual(n)||ol(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NTe(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class PTe extends yW{constructor(t){super(),this.firestore=t}convertBytes(t){return new al(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ys(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class FT extends k6{constructor(t,n,i,r,s,o){super(t,n,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new FTe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(bW("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class FTe extends FT{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BTe(e){e=A6(e,ys);const t=A6(e.firestore,kT);return vTe(fW(t),e._key).then(n=>zTe(t,e,n))}class vW extends yW{constructor(t){super(),this.firestore=t}convertBytes(t){return new al(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ys(this.firestore,null,n)}}function zTe(e,t,n){const i=n.docs.get(t._key),r=new vW(e);return new FT(e,r,t._key,i,new EW(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HTe={maxAttempts:5};function M1(e,t){if((e=no(e)).firestore!==t)throw new ve(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VTe{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=MTe(t)}get(t){const n=M1(t,this._firestore),i=new PTe(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Ie();const s=r[0];if(s.isFoundDocument())return new k6(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new k6(this._firestore,i,n._key,null,n.converter);throw Ie()})}set(t,n,i){const r=M1(t,this._firestore),s=NTe(r.converter,n,i),o=kTe(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,o),this}update(t,n,i,...r){const s=M1(t,this._firestore);let o;return o=typeof(n=no(n))=="string"||n instanceof yy?DTe(this._dataReader,"Transaction.update",s._key,n,i,r):RTe(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(t){const n=M1(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Te extends VTe{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=M1(t,this._firestore),i=new vW(this._firestore);return super.get(t).then(r=>new FT(this._firestore,i,n._key,r._document,new EW(!1,!1),n.converter))}}function GTe(e,t,n){e=A6(e,kT);const i=Object.assign(Object.assign({},HTe),n);return function(s){if(s.maxAttempts<1)throw new ve(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new pc;return s.asyncQueue.enqueueAndForget(async()=>{const c=await yTe(s);new pTe(s.asyncQueue,c,a,o,l).Iu()}),l.promise}(fW(e),r=>t(new $Te(e,r)),i)}(function(t,n=!0){(function(r){cg=r})(Qj),pm(new Ah("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new kT(new Fwe(i.getProvider("auth-internal")),new Hwe(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ve(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Em(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),gc(rD,sD,t),gc(rD,sD,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW="firebasestorage.googleapis.com",_W="storageBucket",XTe=2*60*1e3,jTe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends xd{constructor(t,n,i=0){super(e3(t),`Firebase Storage: ${n} (${e3(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$n.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return e3(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vn||(Vn={}));function e3(e){return"storage/"+e}function BT(){const e="An unknown error occurred, please check the error payload for server response.";return new $n(Vn.UNKNOWN,e)}function YTe(e){return new $n(Vn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function WTe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $n(Vn.UNAUTHENTICATED,e)}function KTe(){return new $n(Vn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ZTe(e){return new $n(Vn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function qTe(){return new $n(Vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QTe(){return new $n(Vn.CANCELED,"User canceled the upload/download.")}function JTe(e){return new $n(Vn.INVALID_URL,"Invalid URL '"+e+"'.")}function eSe(e){return new $n(Vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function tSe(){return new $n(Vn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_W+"' property when initializing the app?")}function nSe(){return new $n(Vn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function iSe(e){return new $n(Vn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rv(e){return new $n(Vn.INVALID_ARGUMENT,e)}function TW(){return new $n(Vn.APP_DELETED,"The Firebase app was deleted.")}function rSe(e){return new $n(Vn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function y0(e,t){return new $n(Vn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function e1(e){throw new $n(Vn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Pr.makeFromUrl(t,n)}catch{return new Pr(t,"")}if(i.path==="")return i;throw eSe(t)}static makeFromUrl(t,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${r}/o${f}`,"i"),m={bucket:1,path:3},p=n===wW?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",b=new RegExp(`^https?://${p}/${r}/${y}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:h,indices:m,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<v.length;w++){const S=v[w],k=S.regex.exec(t);if(k){const _=k[S.indices.bucket];let T=k[S.indices.path];T||(T=""),i=new Pr(_,T),S.postModify(i);break}}if(i==null)throw JTe(t);return i}}class sSe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oSe(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...y){c||(c=!0,t.apply(null,y))}function d(y){r=setTimeout(()=>{r=null,e(h,l())},y)}function f(){s&&clearTimeout(s)}function h(y,...b){if(c){f();return}if(y){f(),u.call(null,y,...b);return}if(l()||o){f(),u.call(null,y,...b);return}i<64&&(i*=2);let v;a===1?(a=2,v=0):v=(i+Math.random())*1e3,d(v)}let m=!1;function p(y){m||(m=!0,f(),!c&&(r!==null?(y||(a=2),clearTimeout(r),d(0)):y||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,p(!0)},n),p}function aSe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lSe(e){return e!==void 0}function cSe(e){return typeof e=="object"&&!Array.isArray(e)}function SW(e){return typeof e=="string"||e instanceof String}function JD(e){return zT()&&e instanceof Blob}function zT(){return typeof Blob<"u"}function eL(e,t,n,i){if(i<t)throw rv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw rv(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uSe(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function dSe(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Bu;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Bu||(Bu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fSe(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hSe{constructor(t,n,i,r,s,o,a,l,c,u,d,f=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,m)=>{this.resolve_=h,this.reject_=m,this.start_()})}start_(){const t=(i,r)=>{if(r){i(!1,new OU(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Bu.NO_ERROR,l=s.getStatus();if(!a||fSe(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Bu.ABORT;i(!1,new OU(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new OU(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());lSe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=BT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?TW():QTe();o(l)}else{const l=qTe();o(l)}};this.canceled_?n(!1,new OU(!1,null,!0)):this.backoffId_=oSe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&aSe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class OU{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function gSe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function mSe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function pSe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function USe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function bSe(e,t,n,i,r,s,o=!0){const a=dSe(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return pSe(c,t),gSe(c,n),mSe(c,s),USe(c,i),new hSe(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ySe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ESe(...e){const t=ySe();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(zT())return new Blob(e);throw new $n(Vn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vSe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wSe(e){if(typeof atob>"u")throw iSe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class t3{constructor(t,n){this.data=t,this.contentType=n||null}}function _Se(e,t){switch(e){case xo.RAW:return new t3(IW(t));case xo.BASE64:case xo.BASE64URL:return new t3(xW(e,t));case xo.DATA_URL:return new t3(SSe(t),ISe(t))}throw BT()}function IW(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=i,o=e.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function TSe(e){let t;try{t=decodeURIComponent(e)}catch{throw y0(xo.DATA_URL,"Malformed data URL.")}return IW(t)}function xW(e,t){switch(e){case xo.BASE64:{const r=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(r||s)throw y0(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case xo.BASE64URL:{const r=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(r||s)throw y0(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=wSe(t)}catch(r){throw r.message.includes("polyfill")?r:y0(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class CW{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw y0(xo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=xSe(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function SSe(e){const t=new CW(e);return t.base64?xW(xo.BASE64,t.rest):TSe(t.rest)}function ISe(e){return new CW(e).contentType}function xSe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t,n){let i=0,r="";JD(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(JD(this.data_)){const i=this.data_,r=vSe(i,t,n);return r===null?null:new Vl(r)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Vl(i,!0)}}static getBlob(...t){if(zT()){const n=t.map(i=>i instanceof Vl?i.data_:i);return new Vl(ESe.apply(null,n))}else{const n=t.map(o=>SW(o)?_Se(xo.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Vl(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CSe(e){let t;try{t=JSON.parse(e)}catch{return null}return cSe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ASe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function MSe(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function AW(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kSe(e,t){return t}class ji{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||kSe}}let NU=null;function RSe(e){return!SW(e)||e.length<2?e:AW(e)}function DSe(){if(NU)return NU;const e=[];e.push(new ji("bucket")),e.push(new ji("generation")),e.push(new ji("metageneration")),e.push(new ji("name","fullPath",!0));function t(s,o){return RSe(o)}const n=new ji("name");n.xform=t,e.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new ji("size");return r.xform=i,e.push(r),e.push(new ji("timeCreated")),e.push(new ji("updated")),e.push(new ji("md5Hash",null,!0)),e.push(new ji("cacheControl",null,!0)),e.push(new ji("contentDisposition",null,!0)),e.push(new ji("contentEncoding",null,!0)),e.push(new ji("contentLanguage",null,!0)),e.push(new ji("contentType",null,!0)),e.push(new ji("metadata","customMetadata",!0)),NU=e,NU}function LSe(e,t){function n(){const i=e.bucket,r=e.fullPath,s=new Pr(i,r);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function OSe(e,t,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,t[o.server])}return LSe(i,e),i}function NSe(e,t,n){const i=CSe(t);return i===null?null:OSe(e,i,n)}function PSe(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class FSe{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BSe(e){if(!e)throw BT()}function zSe(e,t){function n(i,r){const s=NSe(e,r,t);return BSe(s!==null),s}return n}function HSe(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=KTe():r=WTe():n.getStatus()===402?r=YTe(e.bucket):n.getStatus()===403?r=ZTe(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function VSe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function $Se(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=VSe(null,t)),i}function GSe(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let w=0;w<2;w++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=$Se(t,i,r),u=PSe(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Vl.getBlob(d,i,f);if(h===null)throw nSe();const m={name:c.fullPath},p=uSe(s,e.host,e._protocol),y="POST",b=e.maxUploadRetryTime,E=new FSe(p,y,zSe(e,n),b);return E.urlParams=m,E.headers=o,E.body=h.uploadData(),E.errorHandler=HSe(t),E}class XSe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bu.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bu.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bu.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw e1("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw e1("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw e1("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw e1("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw e1("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class jSe extends XSe{initXhr(){this.xhr_.responseType="text"}}function YSe(){return new jSe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t,n){this._service=t,n instanceof Pr?this._location=n:this._location=Pr.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new fd(t,n)}get root(){const t=new Pr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AW(this._location.path)}get storage(){return this._service}get parent(){const t=ASe(this._location.path);if(t===null)return null;const n=new Pr(this._location.bucket,t);return new fd(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw rSe(t)}}function WSe(e,t,n){e._throwIfRoot("uploadBytes");const i=GSe(e.storage,e._location,DSe(),new Vl(t,!0),n);return e.storage.makeRequestWithTokens(i,YSe).then(r=>({metadata:r,ref:e}))}function KSe(e,t){const n=MSe(e._location.path,t),i=new Pr(e._location.bucket,n);return new fd(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZSe(e){return/^[A-Za-z]+:\/\//.test(e)}function qSe(e,t){return new fd(e,t)}function MW(e,t){if(e instanceof HT){const n=e;if(n._bucket==null)throw tSe();const i=new fd(n,n._bucket);return t!=null?MW(i,t):i}else return t!==void 0?KSe(e,t):e}function QSe(e,t){if(t&&ZSe(t)){if(e instanceof HT)return qSe(e,t);throw rv("To use ref(service, url), the first argument must be a Storage instance.")}else return MW(e,t)}function tL(e,t){const n=t?.[_W];return n==null?null:Pr.makeFromBucketSpec(n,e)}function JSe(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:Xj(r,e.app.options.projectId))}class HT{constructor(t,n,i,r,s){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=wW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=XTe,this._maxUploadRetryTime=jTe,this._requests=new Set,r!=null?this._bucket=Pr.makeFromBucketSpec(r,this._host):this._bucket=tL(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Pr.makeFromBucketSpec(this._url,t):this._bucket=tL(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){eL("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){eL("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(qj(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new fd(this,t)}_makeRequest(t,n,i,r,s=!0){if(this._deleted)return new sSe(TW());{const o=bSe(t,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()}}const nL="@firebase/storage",iL="0.13.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kW="storage";function RW(e,t,n){return e=no(e),WSe(e,t,n)}function DW(e,t){return e=no(e),QSe(e,t)}function eIe(e=eY(),t){e=no(e);const i=Zj(e,kW).getImmediate({identifier:t}),r=$j("storage");return r&&tIe(i,...r),i}function tIe(e,t,n,i={}){JSe(e,t,n,i)}function nIe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new HT(n,i,r,t,Qj)}function iIe(){pm(new Ah(kW,nIe,"PUBLIC").setMultipleInstances(!0)),gc(nL,iL,""),gc(nL,iL,"esm2017")}iIe();let R6;try{R6=JSON.parse('{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}')}catch{console.warn('Error JSON parsing firebase config. Supplied value: {"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}'),R6={}}let n3=null,i3=null,r3=null;const LW=()=>(n3||(n3=Jj(R6)),n3),OW=()=>(i3||(i3=STe(LW())),i3),rIe=()=>(r3||(r3=eIe(LW())),r3),NW=async()=>rIe(),sIe=async(e,t)=>{const n=JSON.stringify(t),i=new TextEncoder().encode(n),{encryptedBuffer:r,iv:s}=await X5(e,i);return{ciphertext:r,iv:s}},sv=async(e,t)=>{const n=e.ciphertext.toUint8Array(),i=e.iv.toUint8Array(),r=await om(i,n,t),s=new TextDecoder("utf-8").decode(new Uint8Array(r));return JSON.parse(s)};class Ph{static cache=new WeakMap;static get=t=>Ph.cache.get(t);static set=(t,n)=>{Ph.cache.set(t,zl(n))}}const PW=(e,t)=>{if(e.socket&&e.roomId&&e.roomKey){const n=zl(t);return Ph.get(e.socket)===n}return!0},VT=async({prefix:e,files:t})=>{const n=await NW(),i=[],r=[];return await Promise.all(t.map(async({id:s,buffer:o})=>{try{const a=DW(n,`${e}/${s}`);await RW(a,o,{cacheControl:`public, max-age=${eve}`}),r.push(s)}catch{i.push(s)}})),{savedFiles:r,erroredFiles:i}},rL=async(e,t)=>{const n=zl(e),{ciphertext:i,iv:r}=await sIe(t,e);return{sceneVersion:n,ciphertext:al.fromUint8Array(new Uint8Array(i)),iv:al.fromUint8Array(r)}},oIe=async(e,t,n)=>{const{roomId:i,roomKey:r,socket:s}=e;if(!i||!r||!s||PW(e,t))return null;const o=OW(),a=dW(o,"scenes",i),l=await GTe(o,async u=>{const d=await u.get(a);if(!d.exists()){const y=await rL(t,r);return u.set(a,y),y}const f=d.data(),h=ql(ad(await sv(f,r),null)),m=ql(eT(t,h,n)),p=await rL(m,r);return u.update(a,p),p}),c=ql(ad(await sv(l,r),null));return Ph.set(s,c),c},aIe=async(e,t,n)=>{const i=OW(),r=dW(i,"scenes",e),s=await BTe(r);if(!s.exists())return null;const o=s.data(),a=ql(ad(await sv(o,t),null));return n&&Ph.set(n,a),a},FW=async(e,t,n)=>{const i=[],r=new Map;return await Promise.all([...new Set(n)].map(async s=>{try{const o=`https://firebasestorage.googleapis.com/v0/b/${R6.storageBucket}/o/${encodeURIComponent(e.replace(/^\//,""))}%2F${s}`,a=await fetch(`${o}?alt=media`);if(a.status<400){const l=await a.arrayBuffer(),{data:c,metadata:u}=await V$(new Uint8Array(l),{decryptionKey:t}),d=new TextDecoder().decode(c);i.push({mimeType:u.mimeType||Ue.binary,id:s,dataURL:d,created:u?.created||Date.now(),lastRetrieved:u?.created||Date.now()})}else r.set(s,!0)}catch(o){r.set(s,!0),console.error(o)}})),{loadedFiles:i,erroredFiles:r}},BW=e=>e.isDeleted?e.updated>Date.now()-J4e:!oc(e),ql=e=>e.filter(t=>BW(t)),lIe="https://json.excalidraw.com/api/v2/",cIe="https://json.excalidraw.com/api/v2/post/",uIe=async()=>{const e=new Uint8Array(tve);return window.crypto.getRandomValues(e),wF(e)},zW=/^#room=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/,sL=e=>{const t=new URL(e).hash;return zW.test(t)},dIe=e=>{const n=new URL(e).hash.match(zW);return n&&n[2].length!==22?(window.alert(M("alerts.invalidEncryptionKey")),null):n?{roomId:n[1],roomKey:n[2]}:null},fIe=async()=>{const e=await uIe(),t=await h_();if(!t)throw new Error("Couldn't generate room key");return{roomId:e,roomKey:t}},hIe=e=>`${window.location.origin}${window.location.pathname}#room=${e.roomId},${e.roomKey}`,gIe=async({buffer:e,decryptionKey:t})=>{let n;try{const s=e.slice(0,y2),o=e.slice(y2,e.byteLength);n=await om(new Uint8Array(s),o,t)}catch{const o=new Uint8Array(y2);n=await om(o,e,t)}const i=new window.TextDecoder("utf-8").decode(new Uint8Array(n)),r=JSON.parse(i);return{elements:r.elements||null,appState:r.appState||null}},mIe=async(e,t)=>{try{const n=await fetch(`${lIe}${e}`);if(!n.ok)return window.alert(M("alerts.importBackendFailed")),{};const i=await n.arrayBuffer();try{const{data:r}=await V$(new Uint8Array(i),{decryptionKey:t}),s=JSON.parse(new TextDecoder().decode(r));return{elements:s.elements||null,appState:s.appState||null}}catch(r){return console.warn("error when decoding shareLink data using the new format:",r),gIe({buffer:i,decryptionKey:t})}}catch(n){return window.alert(M("alerts.importBackendFailed")),console.error(n),{}}},oL=async(e,t,n)=>{let i;return e!=null&&t!=null?i=ld(await mIe(e,t),n?.appState,n?.elements,{repairBindings:!0,refreshDimensions:!1}):i=ld(n||null,null,null,{repairBindings:!0}),{elements:i.elements,appState:i.appState,files:i.files}},pIe=async(e,t,n)=>{const i=await h_("string"),r=await H$(new TextEncoder().encode(ag(e,t,n,"database")),{encryptionKey:i});try{const s=new Map;for(const c of e)Tn(c)&&n[c.fileId]&&s.set(c.fileId,n[c.fileId]);const o=await nT({files:s,encryptionKey:i,maxBytes:tT}),l=await(await fetch(cIe,{method:"POST",body:r.buffer})).json();if(l.id){const c=new URL(window.location.href);c.hash=`json=${l.id},${i}`;const u=c.toString();return await VT({prefix:`/files/shareLinks/${l.id}`,files:o}),{url:u,errorMessage:null}}else if(l.error_class==="RequestTooLargeError")return{url:null,errorMessage:M("alerts.couldNotCreateShareableLinkTooBig")};return{url:null,errorMessage:M("alerts.couldNotCreateShareableLink")}}catch(s){return console.error(s),{url:null,errorMessage:M("alerts.couldNotCreateShareableLink")}}};function UIe(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var i=function(){return indexedDB.databases().finally(n)};t=setInterval(i,100),i()}).finally(function(){return clearInterval(t)})}function kd(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function $T(e,t){const n=UIe().then(()=>{const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),kd(i)});return(i,r)=>n.then(s=>r(s.transaction(t,i).objectStore(t)))}let s3;function fg(){return s3||(s3=$T("keyval-store","keyval")),s3}function bIe(e,t=fg()){return t("readonly",n=>kd(n.get(e)))}function HW(e,t,n=fg()){return n("readwrite",i=>(i.put(t,e),kd(i.transaction)))}function yIe(e,t=fg()){return t("readwrite",n=>(e.forEach(i=>n.put(i[1],i[0])),kd(n.transaction)))}function EIe(e,t=fg()){return t("readonly",n=>Promise.all(e.map(i=>kd(n.get(i)))))}function vIe(e,t=fg()){return t("readwrite",n=>(n.delete(e),kd(n.transaction)))}function wIe(e,t){return e("readonly",n=>(n.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},kd(n.transaction)))}function _Ie(e=fg()){const t=[];return wIe(e,n=>t.push([n.key,n.value])).then(()=>t)}class TIe{locks=new Map;lock=t=>{this.locks.set(t,!0)};unlock=t=>(this.locks.delete(t),!this.isLocked());isLocked(t){return t?this.locks.has(t):!!this.locks.size}}const D6={[Un.VERSION_DATA_STATE]:-1,[Un.VERSION_FILES]:-1},aL=e=>JSON.parse(localStorage.getItem(e)||"-1")>D6[e],VW=e=>{const t=Date.now();try{localStorage.setItem(e,JSON.stringify(t)),D6[e]=t}catch(n){console.error("error while updating browser state verison",n)}},SIe=()=>{try{for(const e of Object.keys(D6))localStorage.setItem(e,JSON.stringify(-1)),D6[e]=-1}catch(e){console.error("error while resetting browser state verison",e)}},E0=$T("files-db","files-store");class IIe extends zj{clearObsoleteFiles=async t=>{await _Ie(E0).then(n=>{for(const[i,r]of n)(!r.lastRetrieved||Date.now()-r.lastRetrieved>24*3600*1e3)&&!t.currentFileIds.includes(i)&&vIe(i,E0)})}}const xIe=(e,t)=>{try{const n=GV(t);n.openSidebar?.name===ps.name&&n.openSidebar.tab===Ru&&(n.openSidebar=null),localStorage.setItem(Un.LOCAL_STORAGE_ELEMENTS,JSON.stringify(cz(e))),localStorage.setItem(Un.LOCAL_STORAGE_APP_STATE,JSON.stringify(n)),VW(Un.VERSION_DATA_STATE)}catch(n){console.error(n)}};class Wi{static _save=Ya(async(t,n,i,r)=>{xIe(t,n),await this.fileStorage.saveFiles({elements:t,files:i}),r()},Y4e);static save=(t,n,i,r)=>{this.isSavePaused()||this._save(t,n,i,r)};static flushSave=()=>{this._save.flush()};static locker=new TIe;static pauseSave=t=>{this.locker.lock(t)};static resumeSave=t=>{this.locker.unlock(t)};static isSavePaused=()=>document.hidden||this.locker.isLocked();static fileStorage=new IIe({getFiles(t){return EIe(t,E0).then(async n=>{const i=[],r=new Map,s=[];n.forEach((o,a)=>{const l=t[a];if(o){const c={...o,lastRetrieved:Date.now()};s.push([l,c]),i.push(c)}else r.set(l,!0)});try{yIe(s,E0)}catch(o){console.warn(o)}return{loadedFiles:i,erroredFiles:r}})},async saveFiles({addedFiles:t}){const n=new Map,i=new Map;return VW(Un.VERSION_FILES),await Promise.all([...t].map(async([r,s])=>{try{await HW(r,s,E0),n.set(r,s)}catch(o){console.error(o),i.set(r,s)}})),{savedFiles:n,erroredFiles:i}}})}class Ua{static idb_name=Un.IDB_LIBRARY;static key="libraryData";static store=$T(`${Ua.idb_name}-db`,`${Ua.idb_name}-store`);static async load(){return await bIe(Ua.key,Ua.store)||null}static save(t){return HW(Ua.key,t,Ua.store)}}class CIe{static load(){const t=localStorage.getItem(Un.__LEGACY_LOCAL_STORAGE_LIBRARY);if(t!=null){const n=JSON.parse(t);if(n)return{libraryItems:n}}return null}static clear(){localStorage.removeItem(Un.__LEGACY_LOCAL_STORAGE_LIBRARY)}}const ov=$t({message:null,nonce:0}),$W=({collabError:e})=>{const[t,n]=D.useState(!1),i=D.useRef(0);return D.useEffect(()=>(n(!0),i.current=window.setTimeout(()=>{n(!1)},1e3),()=>{window.clearTimeout(i.current)}),[e.message,e.nonce]),e.message?g(il,{label:e.message,long:!0,children:g("div",{className:he("collab-errors-button",{"collab-errors-button-shake":t}),children:_ue})}):null};$W.displayName="CollabError";class AIe{collab;socket=null;socketInitialized=!1;roomId=null;roomKey=null;broadcastedElementVersions=new Map;constructor(t){this.collab=t}open(t,n,i){return this.socket=t,this.roomId=n,this.roomKey=i,this.socket.on("init-room",()=>{this.socket&&(this.socket.emit("join-room",this.roomId),tt("share","room joined"))}),this.socket.on("new-user",async r=>{this.broadcastScene(Ki.INIT,this.collab.getSceneElementsIncludingDeleted(),!0)}),this.socket.on("room-user-change",r=>{this.collab.setCollaborators(r)}),t}close(){this.socket&&(this.queueFileUpload.flush(),this.socket.close(),this.socket=null,this.roomId=null,this.roomKey=null,this.socketInitialized=!1,this.broadcastedElementVersions=new Map)}isOpen(){return!!(this.socketInitialized&&this.socket&&this.roomId&&this.roomKey)}async _broadcastSocketData(t,n=!1,i){if(this.isOpen()){const r=JSON.stringify(t),s=new TextEncoder().encode(r),{encryptedBuffer:o,iv:a}=await X5(this.roomKey,s);this.socket?.emit(n?T2.SERVER_VOLATILE:T2.SERVER,i??this.roomId,o,a)}}queueFileUpload=So(async()=>{try{await this.collab.fileManager.saveFiles({elements:this.collab.excalidrawAPI.getSceneElementsIncludingDeleted(),files:this.collab.excalidrawAPI.getFiles()})}catch(i){i.name!=="AbortError"&&this.collab.excalidrawAPI.updateScene({appState:{errorMessage:i.message}})}let t=!1;const n=this.collab.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>this.collab.fileManager.shouldUpdateImageElementStatus(i)?(t=!0,Ee(i,{status:"saved"})):i);t&&this.collab.excalidrawAPI.updateScene({elements:n,captureUpdate:j.NEVER})},K4e);broadcastScene=async(t,n,i)=>{if(t===Ki.INIT&&!i)throw new Error("syncAll must be true when sending SCENE.INIT");const r=n.reduce((o,a)=>((i||!this.broadcastedElementVersions.has(a.id)||a.version>this.broadcastedElementVersions.get(a.id))&&BW(a)&&o.push(a),o),[]),s={type:t,payload:{elements:r}};for(const o of r)this.broadcastedElementVersions.set(o.id,o.version);this.queueFileUpload(),await this._broadcastSocketData(s)};broadcastIdleChange=t=>{if(this.socket?.id){const n={type:Ki.IDLE_STATUS,payload:{socketId:this.socket.id,userState:t,username:this.collab.state.username}};return this._broadcastSocketData(n,!0)}};broadcastMouseLocation=t=>{if(this.socket?.id){const n={type:Ki.MOUSE_LOCATION,payload:{socketId:this.socket.id,pointer:t.pointer,button:t.button||"up",selectedElementIds:this.collab.excalidrawAPI.getAppState().selectedElementIds,username:this.collab.state.username}};return this._broadcastSocketData(n,!0)}};broadcastVisibleSceneBounds=(t,n)=>{if(this.socket?.id){const i={type:Ki.USER_VISIBLE_SCENE_BOUNDS,payload:{socketId:this.socket.id,username:this.collab.state.username,sceneBounds:t.sceneBounds}};return this._broadcastSocketData(i,!0,n)}};broadcastUserFollowed=t=>{this.socket?.id&&this.socket.emit(T2.USER_FOLLOW_CHANGE,t)}}var MIe={};const GW=$t(null),av=$t(!1),XW=$t(!1),jW=$t(null);class kIe extends D.PureComponent{portal;fileManager;excalidrawAPI;activeIntervalId;idleTimeoutId;socketInitializationTimer;lastBroadcastedOrReceivedSceneVersion=-1;collaborators=new Map;constructor(t){super(t),this.state={errorMessage:null,dialogNotifiedErrors:{},username:Pj()||"",activeRoomLink:null},this.portal=new AIe(this),this.fileManager=new zj({getFiles:async n=>{const{roomId:i,roomKey:r}=this.portal;if(!i||!r)throw new Eh;return FW(`files/rooms/${i}`,r,n)},saveFiles:async({addedFiles:n})=>{const{roomId:i,roomKey:r}=this.portal;if(!i||!r)throw new Eh;const{savedFiles:s,erroredFiles:o}=await VT({prefix:`${Nj.collabFiles}/${i}`,files:await nT({files:n,encryptionKey:r,maxBytes:tT})});return{savedFiles:s.reduce((a,l)=>{const c=n.get(l);return c&&a.set(l,c),a},new Map),erroredFiles:o.reduce((a,l)=>{const c=n.get(l);return c&&a.set(l,c),a},new Map)}}}),this.excalidrawAPI=t.excalidrawAPI,this.activeIntervalId=null,this.idleTimeoutId=null}onUmmount=null;componentDidMount(){window.addEventListener(ee.BEFORE_UNLOAD,this.beforeUnload),window.addEventListener("online",this.onOfflineStatusToggle),window.addEventListener("offline",this.onOfflineStatusToggle),window.addEventListener(ee.UNLOAD,this.onUnload);const t=this.excalidrawAPI.onUserFollow(s=>{this.portal.socket&&this.portal.broadcastUserFollowed(s)}),n=Wh(this.relayVisibleSceneBounds),i=this.excalidrawAPI.onScrollChange(()=>n());this.onUmmount=()=>{t(),i()},this.onOfflineStatusToggle();const r={isCollaborating:this.isCollaborating,onPointerUpdate:this.onPointerUpdate,startCollaboration:this.startCollaboration,syncElements:this.syncElements,fetchImageFilesFromFirebase:this.fetchImageFilesFromFirebase,stopCollaboration:this.stopCollaboration,setUsername:this.setUsername,getUsername:this.getUsername,getActiveRoomLink:this.getActiveRoomLink,setCollabError:this.setErrorDialog};Al.set(GW,r)}onOfflineStatusToggle=()=>{Al.set(XW,!window.navigator.onLine)};componentWillUnmount(){window.removeEventListener("online",this.onOfflineStatusToggle),window.removeEventListener("offline",this.onOfflineStatusToggle),window.removeEventListener(ee.BEFORE_UNLOAD,this.beforeUnload),window.removeEventListener(ee.UNLOAD,this.onUnload),window.removeEventListener(ee.POINTER_MOVE,this.onPointerMove),window.removeEventListener(ee.VISIBILITY_CHANGE,this.onVisibilityChange),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.onUmmount?.()}isCollaborating=()=>Al.get(av);setIsCollaborating=t=>{Al.set(av,t)};onUnload=()=>{this.destroySocketClient({isUnload:!0})};beforeUnload=Zt(t=>{const n=ql(this.getSceneElementsIncludingDeleted());this.isCollaborating()&&(this.fileManager.shouldPreventUnload(n)||!PW(this.portal,n))&&(this.saveCollabRoomToFirebase(n),MIe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?Lw(t):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))});saveCollabRoomToFirebase=async t=>{try{const n=await oIe(this.portal,t,this.excalidrawAPI.getAppState());this.resetErrorIndicator(),this.isCollaborating()&&n&&this.handleRemoteSceneUpdate(this._reconcileElements(n))}catch(n){const i=/is longer than.*?bytes/.test(n.message)?M("errors.collabSaveFailed_sizeExceeded"):M("errors.collabSaveFailed");(!this.state.dialogNotifiedErrors[i]||!this.isCollaborating())&&(this.setErrorDialog(i),this.setState({dialogNotifiedErrors:{...this.state.dialogNotifiedErrors,[i]:!0}})),this.isCollaborating()&&this.setErrorIndicator(i),console.error(n)}};stopCollaboration=(t=!0)=>{if(this.queueBroadcastAllElements.cancel(),this.queueSaveToFirebase.cancel(),this.loadImageFiles.cancel(),this.resetErrorIndicator(!0),this.saveCollabRoomToFirebase(ql(this.excalidrawAPI.getSceneElementsIncludingDeleted())),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),!t)Wi.fileStorage.reset(),this.destroySocketClient();else if(window.confirm(M("alerts.collabStopOverridePrompt"))){SIe(),window.history.pushState({},Na,window.location.origin),this.destroySocketClient(),Wi.fileStorage.reset();const n=this.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>yt(i)&&i.status==="saved"?Ee(i,{status:"pending"}):i);this.excalidrawAPI.updateScene({elements:n,captureUpdate:j.NEVER})}};destroySocketClient=t=>{this.lastBroadcastedOrReceivedSceneVersion=-1,this.portal.close(),this.fileManager.reset(),t?.isUnload||(this.setIsCollaborating(!1),this.setActiveRoomLink(null),this.collaborators=new Map,this.excalidrawAPI.updateScene({collaborators:this.collaborators}),Wi.resumeSave("collaboration"))};fetchImageFilesFromFirebase=async t=>{const n=t.elements.filter(i=>Tn(i)&&!this.fileManager.isFileTracked(i.fileId)&&!i.isDeleted&&(t.forceFetchFiles?i.status!=="pending"||Date.now()-i.updated>1e4:i.status==="saved")).map(i=>i.fileId);return await this.fileManager.getFiles(n)};decryptPayload=async(t,n,i)=>{try{const r=await om(t,n,i),s=new TextDecoder("utf-8").decode(new Uint8Array(r));return JSON.parse(s)}catch(r){return window.alert(M("alerts.decryptFailed")),console.error(r),{type:Ki.INVALID_RESPONSE}}};fallbackInitializationHandler=null;startCollaboration=async t=>{if(this.state.username||ge(()=>import("./random-username.esm-__vdrxyo.js"),__vite__mapDeps([])).then(({getRandomUsername:a})=>{const l=a();this.setUsername(l)}),this.portal.socket)return null;let n,i;t?{roomId:n,roomKey:i}=t:({roomId:n,roomKey:i}=await fIe(),window.history.pushState({},Na,hIe({roomId:n,roomKey:i})));const r=c5();this.setIsCollaborating(!0),Wi.pauseSave("collaboration");const{default:s}=await ge(()=>import("./index-ChGp7972.js"),__vite__mapDeps([])),o=()=>{this.initializeRoom({roomLinkData:t,fetchScene:!0}).then(a=>{r.resolve(a)})};this.fallbackInitializationHandler=o;try{this.portal.socket=this.portal.open(s("https://oss-collab.excalidraw.com",{transports:["websocket","polling"]}),n,i),this.portal.socket.once("connect_error",o)}catch(a){return console.error(a),this.setErrorDialog(a.message),null}if(!t){const a=this.excalidrawAPI.getSceneElements().map(l=>yt(l)&&l.status==="saved"?Ee(l,{status:"pending"}):l);this.excalidrawAPI.updateScene({elements:a,captureUpdate:j.NEVER}),this.saveCollabRoomToFirebase(ql(a))}return this.socketInitializationTimer=window.setTimeout(o,W4e),this.portal.socket.on("client-broadcast",async(a,l)=>{if(!this.portal.roomKey)return;const c=await this.decryptPayload(l,a,this.portal.roomKey);switch(c.type){case Ki.INVALID_RESPONSE:return;case Ki.INIT:{if(!this.portal.socketInitialized){this.initializeRoom({fetchScene:!1});const u=c.payload.elements,d=this._reconcileElements(u);this.handleRemoteSceneUpdate(d),r.resolve({elements:d,scrollToContent:!0})}break}case Ki.UPDATE:this.handleRemoteSceneUpdate(this._reconcileElements(c.payload.elements));break;case Ki.MOUSE_LOCATION:{const{pointer:u,button:d,username:f,selectedElementIds:h}=c.payload,m=c.payload.socketId||c.payload.socketID;this.updateCollaborator(m,{pointer:u,button:d,selectedElementIds:h,username:f});break}case Ki.USER_VISIBLE_SCENE_BOUNDS:{const{sceneBounds:u,socketId:d}=c.payload,f=this.excalidrawAPI.getAppState();if(f.userToFollow?.socketId!==d){console.warn(`receiving remote client's (from ${d}) viewport bounds even though we're not subscribed to it!`);return}if(f.userToFollow&&f.followedBy.has(f.userToFollow.socketId))return;this.excalidrawAPI.updateScene({appState:ZV({appState:f,bounds:u,fitToViewport:!0,viewportZoomFactor:1}).appState});break}case Ki.IDLE_STATUS:{const{userState:u,socketId:d,username:f}=c.payload;this.updateCollaborator(d,{userState:u,username:f});break}default:Po(c,null)}}),this.portal.socket.on("first-in-room",async()=>{this.portal.socket&&this.portal.socket.off("first-in-room");const a=await this.initializeRoom({fetchScene:!0,roomLinkData:t});r.resolve(a)}),this.portal.socket.on(T2.USER_FOLLOW_ROOM_CHANGE,a=>{this.excalidrawAPI.updateScene({appState:{followedBy:new Set(a)}}),this.relayVisibleSceneBounds({force:!0})}),this.initializeIdleDetector(),this.setActiveRoomLink(window.location.href),r};initializeRoom=async({fetchScene:t,roomLinkData:n})=>{if(clearTimeout(this.socketInitializationTimer),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),t&&n&&this.portal.socket){this.excalidrawAPI.resetScene();try{const i=await aIe(n.roomId,n.roomKey,this.portal.socket);if(i)return this.setLastBroadcastedOrReceivedSceneVersion(zl(i)),{elements:i,scrollToContent:!0}}catch(i){console.error(i)}finally{this.portal.socketInitialized=!0}}else this.portal.socketInitialized=!0;return null};_reconcileElements=t=>{const n=this.getSceneElementsIncludingDeleted(),i=this.excalidrawAPI.getAppState(),r=ad(t,null),s=eT(n,r,i);return this.setLastBroadcastedOrReceivedSceneVersion(zl(s)),s};loadImageFiles=So(async()=>{const{loadedFiles:t,erroredFiles:n}=await this.fetchImageFilesFromFirebase({elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()});this.excalidrawAPI.addFiles(t),I1({excalidrawAPI:this.excalidrawAPI,erroredFiles:n,elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()})},Z4e);handleRemoteSceneUpdate=t=>{this.excalidrawAPI.updateScene({elements:t,captureUpdate:j.NEVER}),this.loadImageFiles()};onPointerMove=()=>{this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.idleTimeoutId=window.setTimeout(this.reportIdle,Jx),this.activeIntervalId||(this.activeIntervalId=window.setInterval(this.reportActive,eC))};onVisibilityChange=()=>{document.hidden?(this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.onIdleStateChange(mu.AWAY)):(this.idleTimeoutId=window.setTimeout(this.reportIdle,Jx),this.activeIntervalId=window.setInterval(this.reportActive,eC),this.onIdleStateChange(mu.ACTIVE))};reportIdle=()=>{this.onIdleStateChange(mu.IDLE),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null)};reportActive=()=>{this.onIdleStateChange(mu.ACTIVE)};initializeIdleDetector=()=>{document.addEventListener(ee.POINTER_MOVE,this.onPointerMove),document.addEventListener(ee.VISIBILITY_CHANGE,this.onVisibilityChange)};setCollaborators(t){const n=new Map;for(const i of t)n.set(i,Object.assign({},this.collaborators.get(i),{isCurrentUser:i===this.portal.socket?.id}));this.collaborators=n,this.excalidrawAPI.updateScene({collaborators:n})}updateCollaborator=(t,n)=>{const i=new Map(this.collaborators),r=Object.assign({},i.get(t),n,{isCurrentUser:t===this.portal.socket?.id});i.set(t,r),this.collaborators=i,this.excalidrawAPI.updateScene({collaborators:i})};setLastBroadcastedOrReceivedSceneVersion=t=>{this.lastBroadcastedOrReceivedSceneVersion=t};getLastBroadcastedOrReceivedSceneVersion=()=>this.lastBroadcastedOrReceivedSceneVersion;getSceneElementsIncludingDeleted=()=>this.excalidrawAPI.getSceneElementsIncludingDeleted();onPointerUpdate=So(t=>{t.pointersMap.size<2&&this.portal.socket&&this.portal.broadcastMouseLocation(t)},Q4e);relayVisibleSceneBounds=t=>{const n=this.excalidrawAPI.getAppState();this.portal.socket&&(n.followedBy.size>0||t?.force)&&this.portal.broadcastVisibleSceneBounds({sceneBounds:RB(n)},`follow@${this.portal.socket.id}`)};onIdleStateChange=t=>{this.portal.broadcastIdleChange(t)};broadcastElements=t=>{zl(t)>this.getLastBroadcastedOrReceivedSceneVersion()&&(this.portal.broadcastScene(Ki.UPDATE,t,!1),this.lastBroadcastedOrReceivedSceneVersion=zl(t),this.queueBroadcastAllElements())};syncElements=t=>{this.broadcastElements(t),this.queueSaveToFirebase()};queueBroadcastAllElements=So(()=>{this.portal.broadcastScene(Ki.UPDATE,this.excalidrawAPI.getSceneElementsIncludingDeleted(),!0);const t=this.getLastBroadcastedOrReceivedSceneVersion(),n=Math.max(t,zl(this.getSceneElementsIncludingDeleted()));this.setLastBroadcastedOrReceivedSceneVersion(n)},XR);queueSaveToFirebase=So(()=>{this.portal.socketInitialized&&this.saveCollabRoomToFirebase(ql(this.excalidrawAPI.getSceneElementsIncludingDeleted()))},XR,{leading:!1});setUsername=t=>{this.setState({username:t}),ive(t)};getUsername=()=>this.state.username;setActiveRoomLink=t=>{this.setState({activeRoomLink:t}),Al.set(jW,t)};getActiveRoomLink=()=>this.state.activeRoomLink;setErrorIndicator=t=>{Al.set(ov,{message:t,nonce:Date.now()})};resetErrorIndicator=(t=!1)=>{Al.set(ov,{message:null,nonce:0}),t&&this.setState({dialogNotifiedErrors:{}})};setErrorDialog=t=>{this.setState({errorMessage:t})};render(){const{errorMessage:t}=this.state;return g(de,{children:t!=null&&g(N_,{onClose:()=>this.setErrorDialog(null),children:t})})}}const RIe=(e,t,n,i)=>{e.save(),e.strokeStyle=i,e.beginPath(),e.moveTo(n[0][0]*t,n[0][1]*t),e.lineTo(n[1][0]*t,n[1][1]*t),e.stroke(),e.restore()},DIe=(e,t,[n,i,r,s],o)=>{e.save(),e.strokeStyle=o,e.beginPath(),e.moveTo(n[0]*t,n[1]*t),e.bezierCurveTo(i[0]*t,i[1]*t,r[0]*t,r[1]*t,s[0]*t,s[1]*t),e.stroke(),e.restore()},LIe=(e,t)=>{e.strokeStyle="#888",e.save(),e.beginPath(),e.moveTo(-10*t,-10*t),e.lineTo(10*t,10*t),e.moveTo(10*t,-10*t),e.lineTo(-10*t,10*t),e.stroke(),e.save()},lL=(e,t,n)=>{e.forEach(i=>{switch(!0){case mre(i.data):RIe(t,n.zoom.value,i.data,i.color);break;case lre(i.data):DIe(t,n.zoom.value,i.data,i.color);break;default:throw new Error(`Unknown element type ${JSON.stringify(i)}`)}})},OIe=(e,t,n,i)=>{const[r,s]=Y5(e,n);(t.height!==e.height||t.width!==e.width)&&i();const o=W5({canvas:e,scale:n,normalizedWidth:r,normalizedHeight:s,viewBackgroundColor:"transparent"});if(o.save(),o.translate(t.scrollX*t.zoom.value,t.scrollY*t.zoom.value),LIe(o,t.zoom.value),window.visualDebug?.currentFrame&&window.visualDebug?.data&&window.visualDebug.data.length>0){const[a]=NIe();lL(window.visualDebug.data[a],o,t)}else window.visualDebug?.data.forEach(a=>{lL(a,o,t)});window.visualDebug&&(window.visualDebug.data=window.visualDebug?.data.map(a=>a.filter(l=>l.permanent))??[])},NIe=()=>{const e=window.visualDebug?.currentFrame??0,t=window.visualDebug?.data.length??0;return t>0?[e%t,window.visualDebug?.currentFrame??0]:[0,0]},PIe=Wh((e,t,n,i)=>{OIe(e,t,n,i)},{trailing:!0}),YW=()=>Array.isArray(window.visualDebug?.data),FIe=({onChange:e})=>{const t=D.useCallback(()=>{(!window.visualDebug?.currentFrame||isNaN(window.visualDebug?.currentFrame??-1))&&(window.visualDebug.currentFrame=0),window.visualDebug.currentFrame+=1,e()},[e]),n=D.useCallback(()=>{(!window.visualDebug?.currentFrame||isNaN(window.visualDebug?.currentFrame??-1)||window.visualDebug?.currentFrame<1)&&(window.visualDebug.currentFrame=1),window.visualDebug.currentFrame-=1,e()},[e]),i=D.useCallback(()=>{window.visualDebug.currentFrame=void 0,e()},[e]),r=D.useCallback(()=>{window.visualDebug&&(window.visualDebug.currentFrame=void 0,window.visualDebug.data=[]),e()},[e]);return O(de,{children:[g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:r,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:Cc})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:n,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:g(i4,{flip:!0})})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:i,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:Sd})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-backward","aria-label":"Move backward",type:"button",onClick:t,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:g(i4,{})})})]})},BIe=({appState:e,scale:t,ref:n})=>{const{width:i,height:r}=e,s=D.useRef(null);return D.useImperativeHandle(n,()=>s.current,[s]),g("canvas",{style:{width:i,height:r,position:"absolute",zIndex:2,pointerEvents:"none"},width:i*t,height:r*t,ref:s,children:"Debug Canvas"})},zIe=()=>{const{t:e}=un();return g("a",{className:"encrypted-icon tooltip",href:"https://plus.excalidraw.com/blog/end-to-end-encryption",target:"_blank",rel:"noopener","aria-label":e("encrypted.link"),children:g(il,{label:e("encrypted.tooltip"),long:!0,children:Aue})})},HIe=()=>ud?g("a",{href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=signedInUserRedirectButton#excalidraw-redirect",target:"_blank",rel:"noopener",className:"plus-button",children:"Go to Excalidraw+"}):null,VIe=se.memo(({onChange:e})=>g(Cj,{children:O("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:[YW()&&g(FIe,{onChange:e}),ud?g(HIe,{}):g(zIe,{})]})}));function $Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sm(e){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sm(e)}function GIe(e,t){if(Sm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Sm(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function XIe(e){var t=GIe(e,"string");return Sm(t)=="symbol"?t:t+""}function jIe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,XIe(i.key),i)}}function YIe(e,t,n){return t&&jIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var WW=[],WIe=WW.forEach,KIe=WW.slice;function ZIe(e){return WIe.call(KIe.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var cL=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,qIe=function(t,n,i){var r=i||{};r.path=r.path||"/";var s=encodeURIComponent(n),o=t+"="+s;if(r.maxAge>0){var a=r.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!cL.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!cL.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var l=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},uL={create:function(t,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+i*60*1e3)),r&&(s.domain=r),document.cookie=qIe(t,encodeURIComponent(n),s)},read:function(t){for(var n=t+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var s=i[r];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null},remove:function(t){this.create(t,"",-1)}},QIe={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var i=uL.read(t.lookupCookie);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&uL.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},JIe={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=i.substring(1),s=r.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===t.lookupQuerystring&&(n=s[o].substring(a+1))}}}return n}},t1=null,dL=function(){if(t1!==null)return t1;try{t1=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{t1=!1}return t1},exe={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&dL()){var i=window.localStorage.getItem(t.lookupLocalStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&dL()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},n1=null,fL=function(){if(n1!==null)return n1;try{n1=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{n1=!1}return n1},txe={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&fL()){var i=window.sessionStorage.getItem(t.lookupSessionStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&fL()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},nxe={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)n.push(navigator.languages[i]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},ixe={name:"htmlTag",lookup:function(t){var n,i=t.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(n=i.getAttribute("lang")),n}},rxe={name:"path",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof i[t.lookupFromPathIndex]!="string")return;n=i[t.lookupFromPathIndex].replace("/","")}else n=i[0].replace("/","")}return n}},sxe={name:"subdomain",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);i instanceof Array&&(typeof t.lookupFromSubdomainIndex=="number"?n=i[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n=i[0].replace("http://","").replace("https://","").replace(".",""))}return n}};function oxe(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var KW=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$Ie(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return YIe(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=ZIe(i,this.options||{},oxe()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(QIe),this.addDetector(JIe),this.addDetector(exe),this.addDetector(txe),this.addDetector(nxe),this.addDetector(ixe),this.addDetector(rxe),this.addDetector(sxe)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var i=this;n||(n=this.options.order);var r=[];return n.forEach(function(s){if(i.detectors[s]){var o=i.detectors[s].lookup(i.options);o&&typeof o=="string"&&(o=[o]),o&&(r=r.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}},{key:"cacheUserLanguage",value:function(n,i){var r=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||i.forEach(function(s){r.detectors[s]&&r.detectors[s].cacheUserLanguage(n,r.options)}))}}]),e}();KW.type="languageDetector";const GT=new KW;GT.init({languageUtils:{}});const ZW=()=>{const e=GT.detect(),t=Array.isArray(e)?e[0]:e;return(t?w5.find(i=>i.code.startsWith(t))?.code:null)||Td.code},qW=$t(ZW()),axe=()=>{const[e,t]=yh(qW);return D.useEffect(()=>{GT.cacheUserLanguage(e)},[e]),[e,t]},lxe=({style:e})=>{const{t,langCode:n}=un(),i=x9(qW);return g("select",{className:"dropdown-select dropdown-select__language",onChange:({target:r})=>i(r.value),value:n,"aria-label":t("buttons.selectLanguage"),style:e,children:w5.map(r=>g("option",{value:r.code,children:r.label},r.code))})},cxe=se.memo(e=>O(ct,{children:[g(ct.DefaultItems.LoadScene,{}),g(ct.DefaultItems.SaveToActiveFile,{}),g(ct.DefaultItems.Export,{}),g(ct.DefaultItems.SaveAsImage,{}),g(ct.DefaultItems.EntrustDirectory,{}),e.isCollabEnabled&&g(ct.DefaultItems.LiveCollaborationTrigger,{isCollaborating:e.isCollaborating,onSelect:()=>e.onCollabDialogOpen()}),g(ct.DefaultItems.CommandPalette,{className:"highlighted"}),g(ct.DefaultItems.SearchMenu,{}),g(ct.DefaultItems.Help,{}),g(ct.DefaultItems.ClearCanvas,{}),g(ct.Separator,{}),g(ct.ItemLink,{icon:Q7,href:"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=hamburger",className:"",children:"Excalidraw+"}),g(ct.DefaultItems.Socials,{}),g(ct.ItemLink,{icon:SH,href:`https://app.excalidraw.com${ud?"":"/sign-up"}?utm_source=signin&utm_medium=app&utm_content=hamburger`,className:"highlighted",children:ud?"Sign in":"Sign up"}),Ow(),g(ct.Separator,{}),g(ct.DefaultItems.ToggleTheme,{allowSystemTheme:!0,theme:e.theme,onSelect:e.setTheme}),g(ct.ItemCustom,{children:g(lxe,{style:{width:"100%"}})}),g(ct.DefaultItems.ChangeCanvasBackground,{})]})),uxe=se.memo(e=>{const{t}=un();let n;return ud?n=t("welcomeScreen.app.center_heading_plus").split(/(Excalidraw\+)/).map((i,r)=>i==="Excalidraw+"?g("a",{style:{pointerEvents:ru.inheritFromUI},href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenSignedInUser",children:"Excalidraw+"},r):i):n=t("welcomeScreen.app.center_heading"),O(Yi,{children:[g(Yi.Hints.MenuHint,{children:t("welcomeScreen.app.menuHint")}),g(Yi.Hints.ToolbarHint,{}),g(Yi.Hints.HelpHint,{}),O(Yi.Center,{children:[g(Yi.Center.Logo,{}),g(Yi.Center.Heading,{children:n}),O(Yi.Center.Menu,{children:[g(Yi.Center.MenuItemLoadScene,{}),g(Yi.Center.MenuItemHelp,{}),e.isCollabEnabled&&g(Yi.Center.MenuItemLiveCollaborationTrigger,{onSelect:()=>e.onCollabDialogOpen()}),!ud&&g(Yi.Center.MenuItemLink,{href:"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenGuest",shortcut:null,icon:SH,children:"Sign up"})]})]})]})}),lv=async(e,t,n,i)=>{const r=await NW(),s=`${UF(12)}`,o=await h_(),a=await X5(o,ag(e,t,n,"database")),l=new Blob([a.iv,new Uint8Array(a.encryptedBuffer)],{type:Ue.binary}),c=DW(r,`/migrations/scenes/${s}`);await RW(c,l,{customMetadata:{data:JSON.stringify({version:2,name:i}),created:Date.now().toString()}});const u=new Map;for(const d of e)Tn(d)&&n[d.fileId]&&u.set(d.fileId,n[d.fileId]);if(u.size){const d=await nT({files:u,encryptionKey:o,maxBytes:tT});await VT({prefix:`/migrations/files/scenes/${s}`,files:d})}window.open(`https://app.excalidraw.com/import?excalidraw=${s},${o}`)},dxe=({elements:e,appState:t,files:n,name:i,onError:r,onSuccess:s})=>{const{t:o}=un();return O(P4,{color:"primary",children:[g("div",{className:"Card-icon",children:g(Mj,{style:{"--color-logo-icon":"#fff",width:"2.8rem",height:"2.8rem"}})}),g("h2",{children:"Excalidraw+"}),g("div",{className:"Card-details",children:o("exportDialog.excalidrawplus_description")}),g(Be,{className:"Card-button",type:"button",title:o("exportDialog.excalidrawplus_button"),"aria-label":o("exportDialog.excalidrawplus_button"),showAriaLabel:!0,onClick:async()=>{try{tt("export","eplus",`ui (${Gm()})`),await lv(e,t,n,i),s()}catch(a){console.error(a),a.name!=="AbortError"&&r(new Error(o("exportDialog.excalidrawplus_exportError")))}}})]})};class fxe extends se.Component{state={hasError:!1,sentryEventId:"",localStorage:""};render(){return this.state.hasError?this.errorSplash():this.props.children}componentDidCatch(t,n){const i={};for(const[r,s]of Object.entries({...localStorage}))try{i[r]=JSON.parse(s)}catch{i[r]=s}mw(r=>{r.setExtras(n);const s=yw(t);this.setState(o=>({hasError:!0,sentryEventId:s,localStorage:JSON.stringify(i)}))})}selectTextArea(t){t.target!==document.activeElement&&(t.preventDefault(),t.target.select())}async createGithubIssue(){let t="";try{const n=(await ge(()=>import("./bug-issue-template-BID_ABWq.js"),__vite__mapDeps([]))).default;t=encodeURIComponent(n(this.state.sentryEventId))}catch(n){console.error(n)}window.open(`https://github.com/excalidraw/excalidraw/issues/new?body=${t}`,"_blank","noopener noreferrer")}errorSplash(){return g("div",{className:"ErrorSplash excalidraw",children:O("div",{className:"ErrorSplash-messageContainer",children:[g("div",{className:"ErrorSplash-paragraph bigger align-center",children:g(mr,{i18nKey:"errorSplash.headingMain",button:t=>g("button",{onClick:()=>window.location.reload(),children:t})})}),O("div",{className:"ErrorSplash-paragraph align-center",children:[g(mr,{i18nKey:"errorSplash.clearCanvasMessage",button:t=>g("button",{onClick:()=>{try{localStorage.clear(),window.location.reload()}catch(n){console.error(n)}},children:t})}),g("br",{}),O("div",{className:"smaller",children:[g("span",{role:"img","aria-label":"warning",children:"⚠️"}),M("errorSplash.clearCanvasCaveat"),g("span",{role:"img","aria-hidden":"true",children:"⚠️"})]})]}),O("div",{children:[g("div",{className:"ErrorSplash-paragraph",children:M("errorSplash.trackedToSentry",{eventId:this.state.sentryEventId})}),g("div",{className:"ErrorSplash-paragraph",children:g(mr,{i18nKey:"errorSplash.openIssueMessage",button:t=>g("button",{onClick:()=>this.createGithubIssue(),children:t})})}),g("div",{className:"ErrorSplash-paragraph",children:O("div",{className:"ErrorSplash-details",children:[g("label",{children:M("errorSplash.sceneContent")}),g("textarea",{rows:5,onPointerDown:this.selectTextArea,readOnly:!0,value:this.state.localStorage})]})})]})]})})}}const QW=$t({isOpen:!1}),hxe=()=>{const e=window.navigator,t=/Apple/.test(e.vendor),n=e.appVersion.indexOf("Win")!==-1;return t?Tue:n?Iue:O9},gxe=({collabAPI:e,activeRoomLink:t,handleClose:n})=>{const{t:i}=un(),[,r]=D.useState(!1),s=D.useRef(0),o=D.useRef(null),a="share"in navigator,{onCopy:l,copyStatus:c}=P_(),u=async()=>{try{await Yc(t)}catch{e.setCollabError(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),o.current?.select()},d=async()=>{try{await navigator.share({title:i("roomDialog.shareTitle"),text:i("roomDialog.shareTitle"),url:t})}catch{}};return O(de,{children:[g("h3",{className:"ShareDialog__active__header",children:i("labels.liveCollaboration").replace(/\./g,"")}),g(Ih,{defaultValue:e.getUsername(),placeholder:"Your name",label:"Your name",onChange:e.setUsername,onKeyDown:f=>f.key===B.ENTER&&n()}),O("div",{className:"ShareDialog__active__linkRow",children:[g(Ih,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:t}),a&&g(Ks,{size:"large",variant:"icon",label:"Share",icon:hxe(),className:"ShareDialog__active__share",onClick:d}),g(Ks,{size:"large",label:i("buttons.copyLink"),icon:np,status:c,onClick:()=>{u(),l()}})]}),O("div",{className:"ShareDialog__active__description",children:[O("p",{children:[O("span",{role:"img","aria-hidden":"true",className:"ShareDialog__active__description__emoji",children:["🔒"," "]}),i("roomDialog.desc_privacy")]}),g("p",{children:i("roomDialog.desc_exitSession")})]}),g("div",{className:"ShareDialog__active__actions",children:g(Ks,{size:"large",variant:"outlined",color:"danger",label:i("roomDialog.button_stopSession"),icon:mde,onClick:()=>{tt("share","room closed"),e.stopCollaboration(),e.isCollaborating()||n()}})})]})},mxe=e=>{const{t}=un(),{collabAPI:n}=e,i=n?O(de,{children:[g("div",{className:"ShareDialog__picker__header",children:t("labels.liveCollaboration").replace(/\./g,"")}),O("div",{className:"ShareDialog__picker__description",children:[g("div",{style:{marginBottom:"1em"},children:t("roomDialog.desc_intro")}),t("roomDialog.desc_privacy")]}),g("div",{className:"ShareDialog__picker__button",children:g(Ks,{size:"large",label:t("roomDialog.button_startSession"),icon:gde,onClick:()=>{tt("share","room creation",`ui (${Gm()})`),n.startCollaboration(null)}})}),e.type==="share"&&g("div",{className:"ShareDialog__separator",children:g("span",{children:t("shareDialog.or")})})]}):null;return O(de,{children:[i,e.type==="share"&&O(de,{children:[g("div",{className:"ShareDialog__picker__header",children:t("exportDialog.link_title")}),g("div",{className:"ShareDialog__picker__description",children:t("exportDialog.link_details")}),g("div",{className:"ShareDialog__picker__button",children:g(Ks,{size:"large",label:t("exportDialog.link_button"),icon:jb,onClick:async()=>{await e.onExportToBackend(),e.handleClose()}})})]})]})},pxe=e=>{const t=j0(jW);return g(jr,{size:"small",onCloseRequest:e.handleClose,title:!1,children:g("div",{className:"ShareDialog",children:e.collabAPI&&t?g(gxe,{collabAPI:e.collabAPI,activeRoomLink:t,handleClose:e.handleClose}):g(mxe,{...e})})})},Uxe=e=>{const[t,n]=yh(QW),{openDialog:i}=hi();return D.useEffect(()=>{i&&n({isOpen:!1})},[i,n]),t.isOpen?g(pxe,{handleClose:()=>n({isOpen:!1}),collabAPI:e.collabAPI,onExportToBackend:e.onExportToBackend,type:t.type}):null},hL=()=>window.matchMedia?.("(prefers-color-scheme: dark)"),bxe=()=>{const[e,t]=D.useState(()=>localStorage.getItem(Un.LOCAL_STORAGE_THEME)||Te.LIGHT),[n,i]=D.useState(Te.LIGHT);return D.useEffect(()=>{const r=hL(),s=a=>{i(a.matches?Te.DARK:Te.LIGHT)};e==="system"&&r?.addEventListener("change",s);const o=a=>{!a[B.CTRL_OR_CMD]&&a.altKey&&a.shiftKey&&a.code===Ke.D&&(a.preventDefault(),a.stopImmediatePropagation(),t(n===Te.DARK?Te.LIGHT:Te.DARK))};return document.addEventListener(ee.KEYDOWN,o,{capture:!0}),()=>{r?.removeEventListener("change",s),document.removeEventListener(ee.KEYDOWN,o,{capture:!0})}},[e,n,t]),D.useLayoutEffect(()=>{localStorage.setItem(Un.LOCAL_STORAGE_THEME,e),i(e==="system"?hL()?.matches?Te.DARK:Te.LIGHT:e)},[e]),{editorTheme:n,appTheme:e,setAppTheme:t}},yxe=({excalidrawAPI:e})=>O(de,{children:[g($4e,{generate:async({frame:t,children:n})=>{const i=e.getAppState(),r=await Pye({elements:n,appState:{...i,exportBackground:!0,viewBackgroundColor:i.viewBackgroundColor},exportingFrame:t,files:e.getFiles(),mimeType:Ue.jpg}),s=await aG(r),o=qF(n),a=await fetch("https://oss-ai.excalidraw.com/v1/ai/diagram-to-code/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({texts:o,image:s,theme:i.theme})});if(!a.ok){const l=await a.text(),c=Hre(l);if(!c)throw new Error(l);if(c.statusCode===429)return{html:`<html>
                <body style="margin: 0; text-align: center">
                <div style="display: flex; align-items: center; justify-content: center; flex-direction: column; height: 100vh; padding: 0 60px">
                  <div style="color:red">Too many requests today,</br>please try again tomorrow!</div>
                  </br>
                  </br>
                  <div>You can also try <a href="https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=d2c" target="_blank" rel="noopener">Excalidraw+</a> to get more requests.</div>
                </div>
                </body>
                </html>`};throw new Error(c.message||l)}try{const{html:l}=await a.json();if(!l)throw new Error("Generation failed (invalid response)");return{html:l}}catch{throw new Error("Generation failed (invalid response)")}}}),g(_j,{onTextSubmit:async t=>{try{const n=await fetch("https://oss-ai.excalidraw.com/v1/ai/text-to-diagram/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prompt:t})}),i=n.headers.has("X-Ratelimit-Limit")?parseInt(n.headers.get("X-Ratelimit-Limit")||"0",10):void 0,r=n.headers.has("X-Ratelimit-Remaining")?parseInt(n.headers.get("X-Ratelimit-Remaining")||"0",10):void 0,s=await n.json();if(!n.ok){if(n.status===429)return{rateLimit:i,rateLimitRemaining:r,error:new Error("Too many requests today, please try again tomorrow!")};throw new Error(s.message||"Generation failed...")}const o=s.generatedResponse;if(!o)throw new Error("Generation failed...");return{generatedResponse:o,rateLimit:i,rateLimitRemaining:r}}catch{throw new Error("Request failed")}}})]}),Exe="REQUEST_SCENE",PU="https://app.excalidraw.com",vxe=async({rawElementsString:e,rawAppStateString:t})=>{if(!e||!t)throw new Vs("Elements or appstate is missing.");try{const n=JSON.parse(e);if(!n.length)throw new Vs("Scene is empty, nothing to export.");const i=JSON.parse(t),r=n.reduce((o,a)=>("fileId"in a&&a.fileId&&o.push(a.fileId),o),[]),s=await Wi.fileStorage.getFiles(r);return{type:"SCENE_DATA",elements:n,appState:i,files:s}}catch(n){throw n instanceof Vs?n:new Vs("Failed to parse scene data.")}},wxe=async({token:e,publicKey:t})=>{try{const[n,i,r]=e.split(".");if(!n||!i||!r)throw new Vs("Invalid JWT format");const s=pk(i),o=pk(r),a=`${n}.${i}`,l=Uint8Array.from(o,p=>p.charCodeAt(0)),c=t.replace(/-----\w+ PUBLIC KEY-----/g,""),u=Uint8Array.from(atob(c),p=>p.charCodeAt(0)),d=await crypto.subtle.importKey("spki",u,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["verify"]);if(!await crypto.subtle.verify("RSASSA-PKCS1-v1_5",d,l,new TextEncoder().encode(a)))throw new Error("Invalid JWT");const h=JSON.parse(s),m=Math.floor(Date.now()/1e3);if(h.exp&&h.exp<m)throw new Error("JWT has expired")}catch(n){throw console.error("Failed to verify JWT:",n),new Error(n instanceof Error?n.message:"Invalid JWT")}},_xe=()=>{const e=D.useRef(!1);return D.useLayoutEffect(()=>{const t=async n=>{if(n.origin!==PU)throw new Vs("Invalid origin");if(n.data.type===Exe){if(!n.data.jwt)throw new Vs("JWT is missing");try{try{await wxe({token:n.data.jwt,publicKey:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`})}catch(r){throw console.error(`Failed to verify JWT: ${r.message}`),new Vs("Failed to verify JWT")}const i=await vxe({rawAppStateString:localStorage.getItem(Un.LOCAL_STORAGE_APP_STATE),rawElementsString:localStorage.getItem(Un.LOCAL_STORAGE_ELEMENTS)});n.source.postMessage(i,{targetOrigin:PU})}catch(i){const r={type:"ERROR",message:i instanceof Vs?i.message:"Failed to export scene data"};n.source.postMessage(r,{targetOrigin:PU})}}};if(window.addEventListener("message",t),!e.current){e.current=!0;const n={type:"READY"};window.parent.postMessage(n,PU)}return()=>{window.removeEventListener("message",t)}},[]),null};var Txe={};Dj();window.EXCALIDRAW_THROTTLE_RENDER=!0;let lf=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),lf=e});let JW=!1;if(window.self!==window.top)try{const e=new URL(document.referrer),t=new URL(window.location.href);e.origin===t.origin&&(JW=!0)}catch{}const gL={title:M("overwriteConfirm.modal.shareableLink.title"),description:g(mr,{i18nKey:"overwriteConfirm.modal.shareableLink.description",bold:e=>g("strong",{children:e}),br:()=>g("br",{})}),actionLabel:M("overwriteConfirm.modal.shareableLink.button"),color:"danger"},cv=async e=>{const n=new URLSearchParams(window.location.search).get("id"),i=window.location.hash.match(/^#json=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/),r=window.location.hash.match(/^#url=(.*)$/),s=Fj();let o=await oL(null,null,s),a=dIe(window.location.href);const l=!!(n||i||a);if(l)if(!o.elements.length||a||await R4(gL))i&&(o=await oL(i[1],i[2],s)),o.scrollToContent=!0,a||window.history.replaceState({},Na,window.location.origin);else{if(document.hidden)return new Promise((c,u)=>{window.addEventListener("focus",()=>cv(e).then(c).catch(u),{once:!0})});a=null,window.history.replaceState({},Na,window.location.origin)}else if(r){window.history.replaceState({},Na,window.location.origin);const c=r[1];try{const u=await fetch(window.decodeURIComponent(c)),d=await y_(await u.blob(),null,null);if(!o.elements.length||await R4(gL))return{scene:d,isExternalScene:l}}catch{return{scene:{appState:{errorMessage:M("alerts.invalidSceneUrl")}},isExternalScene:l}}}if(a&&e.collabAPI){const{excalidrawAPI:c}=e,u=await e.collabAPI.startCollaboration(a);return{scene:{...u,appState:{...tG({...u?.appState,theme:s?.appState?.theme||u?.appState?.theme},c.getAppState()),isLoading:!1},elements:eT(u?.elements||[],c.getSceneElementsIncludingDeleted(),c.getAppState())},isExternalScene:!0,id:a.roomId,key:a.roomKey}}else if(o)return l&&i?{scene:o,isExternalScene:l,id:i[1],key:i[2]}:{scene:o,isExternalScene:!1};return{scene:null,isExternalScene:!1}},Sxe=()=>{const[e,t]=D.useState(""),n=Pre(),{editorTheme:i,appTheme:r,setAppTheme:s}=bxe(),[o,a]=axe(),l=D.useRef({promise:null});l.current.promise||(l.current.promise=c5());const c=D.useRef(null);D.useEffect(()=>{tt("load","frame",Gm()),setTimeout(()=>{tt("load","version",E7())},Fie)},[]);const[u,d]=MG(),[,f]=yh(QW),[h]=yh(GW),[m]=ave(av,()=>sL(window.location.href)),p=j0(ov);Gye({excalidrawAPI:u,adapter:Ua,migrationAdapter:CIe});const[,y]=D.useState(!1);D.useEffect(()=>{},[u]),D.useEffect(()=>{if(!u||!n&&!h)return;const C=(z,V=!1)=>{if(z.scene)if(h?.isCollaborating())z.scene.elements&&h.fetchImageFilesFromFirebase({elements:z.scene.elements,forceFetchFiles:!0}).then(({loadedFiles:$,erroredFiles:G})=>{u.addFiles($),I1({excalidrawAPI:u,erroredFiles:G,elements:u.getSceneElementsIncludingDeleted()})});else{const $=z.scene.elements?.reduce((G,J)=>Tn(J)?G.concat(J.fileId):G,[])||[];z.isExternalScene?FW(`${Nj.shareLinkFiles}/${z.id}`,z.key,$).then(({loadedFiles:G,erroredFiles:J})=>{u.addFiles(G),I1({excalidrawAPI:u,erroredFiles:J,elements:u.getSceneElementsIncludingDeleted()})}):V&&($.length&&Wi.fileStorage.getFiles($).then(({loadedFiles:G,erroredFiles:J})=>{G.length&&u.addFiles(G),I1({excalidrawAPI:u,erroredFiles:J,elements:u.getSceneElementsIncludingDeleted()})}),Wi.fileStorage.clearObsoleteFiles({currentFileIds:$}))}};cv({collabAPI:h,excalidrawAPI:u}).then(async z=>{C(z,!0),l.current.promise.resolve(z.scene)});const R=async z=>{z.preventDefault(),x4()||(h?.isCollaborating()&&!sL(window.location.href)&&h.stopCollaboration(!1),u.updateScene({appState:{isLoading:!0}}),cv({collabAPI:h,excalidrawAPI:u}).then($=>{C($),$.scene&&u.updateScene({...$.scene,...ld($.scene,null,null,{repairBindings:!0}),captureUpdate:j.IMMEDIATELY})}))},P=setTimeout(()=>document.title=Na,Pie),N=Ya(()=>{if(!document.hidden&&(h&&!h.isCollaborating()||n)){if(aL(Un.VERSION_DATA_STATE)){const z=Fj(),V=Pj();a(ZW()),u.updateScene({...z,captureUpdate:j.NEVER}),Ua.load().then($=>{$&&u.updateLibrary({libraryItems:$.libraryItems})}),h?.setUsername(V||"")}if(aL(Un.VERSION_FILES)){const z=u.getSceneElementsIncludingDeleted(),V=u.getFiles(),$=z?.reduce((G,J)=>Tn(J)&&!V[J.fileId]?G.concat(J.fileId):G,[])||[];$.length&&Wi.fileStorage.getFiles($).then(({loadedFiles:G,erroredFiles:J})=>{G.length&&u.addFiles(G),I1({excalidrawAPI:u,erroredFiles:J,elements:u.getSceneElementsIncludingDeleted()})})}}},q4e),K=()=>{Wi.flushSave()},H=z=>{(z.type===ee.BLUR||document.hidden)&&Wi.flushSave(),(z.type===ee.VISIBILITY_CHANGE||z.type===ee.FOCUS)&&N()};return window.addEventListener(ee.HASHCHANGE,R,!1),window.addEventListener(ee.UNLOAD,K,!1),window.addEventListener(ee.BLUR,H,!1),document.addEventListener(ee.VISIBILITY_CHANGE,H,!1),window.addEventListener(ee.FOCUS,H,!1),()=>{window.removeEventListener(ee.HASHCHANGE,R,!1),window.removeEventListener(ee.UNLOAD,K,!1),window.removeEventListener(ee.BLUR,H,!1),window.removeEventListener(ee.FOCUS,H,!1),document.removeEventListener(ee.VISIBILITY_CHANGE,H,!1),clearTimeout(P)}},[n,h,u,a]),D.useEffect(()=>{const C=R=>{Wi.flushSave(),u&&Wi.fileStorage.shouldPreventUnload(u.getSceneElements())&&(Txe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?Lw(R):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))};return window.addEventListener(ee.BEFORE_UNLOAD,C),()=>{window.removeEventListener(ee.BEFORE_UNLOAD,C)}},[u]);const b=(C,R,P)=>{h?.isCollaborating()&&h.syncElements(C),Wi.isSavePaused()||Wi.save(C,R,P,()=>{if(u){let N=!1;const K=u.getSceneElementsIncludingDeleted().map(H=>{if(Wi.fileStorage.shouldUpdateImageElementStatus(H)){const z=Ee(H,{status:"saved"});return z!==H&&(N=!0),z}return H});N&&u.updateScene({elements:K,captureUpdate:j.NEVER})}}),c.current&&u&&PIe(c.current,R,window.devicePixelRatio,()=>y(N=>!N))},[E,v]=D.useState(null),w=async(C,R,P)=>{if(C.length===0)throw new Error(M("alerts.cannotExportEmptyCanvas"));try{const{url:N,errorMessage:K}=await pIe(C,{...R,viewBackgroundColor:R.exportBackground?R.viewBackgroundColor:Xo().viewBackgroundColor},P);if(K)throw new Error(K);N&&v(N)}catch(N){if(N.name!=="AbortError"){const{width:K,height:H}=R;throw console.error(N,{width:K,height:H,devicePixelRatio:window.devicePixelRatio}),new Error(N.message)}}},S=(C,R)=>g(ove,{setToast:P=>u.setToast({message:P}),appState:R,elements:C}),k=j0(XW),_=D.useCallback(()=>f({isOpen:!0,type:"collaborationOnly"}),[f]);if(JW)return g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",height:"100%"},children:g("h1",{children:"I'm not a pretzel!"})});const T={label:"Excalidraw+",category:Qe.links,predicate:!0,icon:g("div",{style:{width:14},children:Q7}),keywords:["plus","cloud","server"],perform:()=>{window.open("https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}},A={label:"Sign up",category:Qe.links,predicate:!0,icon:g("div",{style:{width:14},children:Q7}),keywords:["excalidraw","plus","cloud","server","signin","login","signup"],perform:()=>{window.open("https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}};return g("div",{style:{height:"100%"},className:he("excalidraw-app",{"is-collaborating":m}),children:O(Oj,{excalidrawAPI:d,onChange:b,initialData:l.current.promise,isCollaborating:m,onPointerUpdate:h?.onPointerUpdate,UIOptions:{canvasActions:{toggleTheme:!0,export:{onExportToBackend:w,renderCustomUI:u?(C,R,P)=>g(dxe,{elements:C,appState:R,files:P,name:u.getName(),onError:N=>{u?.updateScene({appState:{errorMessage:N.message}})},onSuccess:()=>{u.updateScene({appState:{openDialog:null}})}}):void 0}}},langCode:o,renderCustomStats:S,detectScroll:!1,handleKeyboardGlobally:!0,autoFocus:!0,theme:i,renderTopRightUI:C=>C||!h||n?null:O("div",{className:"top-right-ui",children:[p.message&&g($W,{collabError:p}),g(Aj,{isCollaborating:m,onSelect:()=>f({isOpen:!0,type:"share"})})]}),onLinkOpen:(C,R)=>{C.link&&Hf(C.link)&&(R.preventDefault(),u?.scrollToContent(C.link,{animate:!0}))},children:[g(cxe,{onCollabDialogOpen:_,isCollaborating:m,isCollabEnabled:!n,theme:r,setTheme:C=>s(C),refresh:()=>y(C=>!C)}),g(uxe,{onCollabDialogOpen:_,isCollabEnabled:!n}),O(_u,{children:[g(_u.Actions.ExportToImage,{}),g(_u.Actions.SaveToDisk,{}),u&&g(_u.Action,{title:M("overwriteConfirm.action.excalidrawPlus.title"),actionLabel:M("overwriteConfirm.action.excalidrawPlus.button"),onClick:()=>{lv(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())},children:M("overwriteConfirm.action.excalidrawPlus.description")})]}),g(VIe,{onChange:()=>u?.refresh()}),u&&g(yxe,{excalidrawAPI:u}),g(Lj,{}),m&&k&&g("div",{className:"collab-offline-warning",children:M("alerts.collabOfflineWarning")}),E&&g(j4e,{link:E,onCloseRequest:()=>v(null),setErrorMessage:t}),u&&!n&&g(kIe,{excalidrawAPI:u}),g(Uxe,{collabAPI:h,onExportToBackend:async()=>{if(u)try{await w(u.getSceneElements(),u.getAppState(),u.getFiles())}catch(C){t(C.message)}}}),e&&g(N_,{onClose:()=>t(""),children:e}),g(Jk,{customCommandPaletteItems:[{label:M("labels.liveCollaboration"),category:Qe.app,keywords:["team","multiplayer","share","public","session","invite"],icon:N9,perform:()=>{f({isOpen:!0,type:"collaborationOnly"})}},{label:M("roomDialog.button_stopSession"),category:Qe.app,predicate:()=>!!h?.isCollaborating(),keywords:["stop","session","end","leave","close","exit","collaboration"],perform:()=>{h&&(h.stopCollaboration(),h.isCollaborating()||f({isOpen:!1}))}},{label:M("labels.share"),category:Qe.app,predicate:!0,icon:O9,keywords:["link","shareable","readonly","export","publish","snapshot","url","collaborate","invite"],perform:async()=>{f({isOpen:!0,type:"share"})}},{label:"GitHub",icon:D9,category:Qe.links,predicate:!0,keywords:["issues","bugs","requests","report","features","social","community"],perform:()=>{window.open("https://github.com/excalidraw/excalidraw","_blank","noopener noreferrer")}},{label:M("labels.followUs"),icon:gH,category:Qe.links,predicate:!0,keywords:["twitter","contact","social","community"],perform:()=>{window.open("https://x.com/excalidraw","_blank","noopener noreferrer")}},{label:M("labels.discordChat"),category:Qe.links,predicate:!0,icon:hH,keywords:["chat","talk","contact","bugs","requests","report","feedback","suggestions","social","community"],perform:()=>{window.open("https://discord.gg/UexuTaE","_blank","noopener noreferrer")}},{label:"YouTube",icon:IH,category:Qe.links,predicate:!0,keywords:["features","tutorials","howto","help","community"],perform:()=>{window.open("https://youtube.com/@excalidraw","_blank","noopener noreferrer")}},...ud?[{...A,label:"Sign in / Go to Excalidraw+"}]:[T,A],{label:M("overwriteConfirm.action.excalidrawPlus.button"),category:Qe.export,icon:Sue,predicate:!0,keywords:["plus","export","save","backup"],perform:()=>{u&&lv(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())}},{...Jk.defaultItems.toggleTheme,perform:()=>{s(i===Te.DARK?Te.LIGHT:Te.DARK)}},{label:M("labels.installPWA"),category:Qe.app,predicate:()=>!!lf,perform:()=>{lf&&(lf.prompt(),lf.userChoice.then(()=>{lf=null}))}}]}),YW()&&u&&g(BIe,{appState:u.getAppState(),scale:window.devicePixelRatio,ref:c})]})})},Ixe=()=>window.location.pathname==="/excalidraw-plus-export"?g(_xe,{}):g(fxe,{children:g(Gce,{store:Al,children:g(Sxe,{})})});window.__EXCALIDRAW_SHA__="";const xxe=document.getElementById("root"),Cxe=xQ.createRoot(xxe);MQ();Cxe.render(g(D.StrictMode,{children:g(Ixe,{})}));export{ge as _,_a as c,ll as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/subset-worker.chunk-CVR6pt27.js","assets/subset-shared.chunk-D3ioWSie.js","assets/pica-C72Tcsr8.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-Bifk4T3M.js.map
