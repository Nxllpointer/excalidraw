var U_=async function(r={}){var e,s,_=r,i=new Promise((a,o)=>{e=a,s=o}),m=typeof window=="object",u=typeof WorkerGlobalScope<"u",c=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(c){const{createRequire:a}=await import("./__vite-browser-external-9wXp6ZBx.js");var A=a(import.meta.url)}var k,Z,te="./this.program",Ce=(a,o)=>{throw o},Ae=import.meta.url,he="";if(c){var Re=A("fs"),k_=A("path");Ae.startsWith("file:")&&(he=k_.dirname(A("url").fileURLToPath(Ae))+"/"),Z=a=>(a=He(a)?new URL(a):a,Re.readFileSync(a)),k=async(a,o=!0)=>(a=He(a)?new URL(a):a,Re.readFileSync(a,o?void 0:"utf8")),process.argv.length>1&&(te=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),Ce=(a,o)=>{throw process.exitCode=a,o}}else if(m||u){try{he=new URL(".",Ae).href}catch{}u&&(Z=a=>{var o=new XMLHttpRequest;return o.open("GET",a,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),k=async a=>{if(He(a))return new Promise((d,l)=>{var f=new XMLHttpRequest;f.open("GET",a,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?d(f.response):l(f.status)},f.onerror=l,f.send(null)});var o=await fetch(a,{credentials:"same-origin"});if(o.ok)return o.arrayBuffer();throw new Error(o.status+" : "+o.url)}}var ve,Be,me,N,re,Ye,__,t_=console.log.bind(console),ce=console.error.bind(console),Ve=!1,n_=!1,He=a=>a.startsWith("file://");function s_(){var a=Be.buffer;_.HEAPU8=me=new Uint8Array(a),_.HEAP32=N=new Int32Array(a),_.HEAPU32=re=new Uint32Array(a),_.HEAPF32=new Float32Array(a),__=new Float64Array(a),Ye=new BigInt64Array(a),new BigUint64Array(a)}var Ke,le=0,Pe=null;function A_(){return _.locateFile?(a="mupdf-wasm.wasm",_.locateFile?_.locateFile(a,he):he+a):new URL("/excalidraw/assets/mupdf-wasm-DEasibZd.wasm",import.meta.url).href;var a}async function v_(a){if(!ve)try{var o=await k(a);return new Uint8Array(o)}catch{}return function(d){if(d==Ke&&ve)return new Uint8Array(ve);if(Z)return Z(d);throw"both async and sync fetching of the wasm failed"}(a)}async function P_(a,o){try{var d=await v_(a);return await WebAssembly.instantiate(d,o)}catch(l){ce(`failed to asynchronously prepare wasm: ${l}`),function(f){_.onAbort?.(f),ce(f="Aborted("+f+")"),Ve=!0,f+=". Build with -sASSERTIONS for more info.",n_&&M_();var w=new WebAssembly.RuntimeError(f);throw s(w),w}(l)}}class F_{name="ExitStatus";constructor(o){this.message=`Program terminated with exit(${o})`,this.status=o}}var r_=a=>{for(;a.length>0;)a.shift()(_)},a_=[],I_=a=>a_.push(a),i_=[],S_=a=>i_.push(a),o_=!0,p_=new TextDecoder,d_=(a,o)=>{if(!a)return"";for(var d=a+o,l=a;!(l>=d)&&me[l];)++l;return p_.decode(me.subarray(a,l))},O_=a=>a<-9007199254740992||a>9007199254740992?NaN:Number(a),ge=(a,o,d)=>((l,f,w,h)=>{if(!(h>0))return 0;for(var T=w,J=w+h-1,be=0;be<l.length;++be){var D=l.charCodeAt(be);if(D>=55296&&D<=57343&&(D=65536+((1023&D)<<10)|1023&l.charCodeAt(++be)),D<=127){if(w>=J)break;f[w++]=D}else if(D<=2047){if(w+1>=J)break;f[w++]=192|D>>6,f[w++]=128|63&D}else if(D<=65535){if(w+2>=J)break;f[w++]=224|D>>12,f[w++]=128|D>>6&63,f[w++]=128|63&D}else{if(w+3>=J)break;f[w++]=240|D>>18,f[w++]=128|D>>12&63,f[w++]=128|D>>6&63,f[w++]=128|63&D}}return f[w]=0,w-T})(a,me,o,d),m_=()=>Date.now(),We=[],l_=(a,o,d)=>{var l=((f,w)=>{var h;for(We.length=0;h=me[f++];){var T=h!=105;w+=(T&=h!=112)&&w%8?4:0,We.push(h==112?re[w>>2]:h==106?Ye[w>>3]:h==105?N[w>>2]:__[w>>3]),w+=T?8:4}return We})(o,d);return B_[a](...l)},D_=a=>{var o=(a-Be.buffer.byteLength+65535)/65536|0;try{return Be.grow(o),s_(),1}catch{}},Xe={},Fe=()=>{if(!Fe.strings){var a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:te||"./this.program"};for(var o in Xe)Xe[o]===void 0?delete a[o]:a[o]=Xe[o];var d=[];for(var o in a)d.push(`${o}=${a[o]}`);Fe.strings=d}return Fe.strings},f_=a=>{for(var o=0,d=0;d<a.length;++d){var l=a.charCodeAt(d);l<=127?o++:l<=2047?o+=2:l>=55296&&l<=57343?(o+=4,++d):o+=3}return o},L_=a=>{o_||(_.onExit?.(a),Ve=!0),Ce(a,new F_(a))},N_=(a,o)=>{L_(a)},C_=[null,[],[]],R_=(a,o)=>{var d=C_[a];o===0||o===10?((a===1?t_:ce)(((l,f=0,w=NaN)=>{for(var h=f+w,T=f;l[T]&&!(T>=h);)++T;return p_.decode(l.buffer?l.subarray(f,T):new Uint8Array(l.slice(f,T)))})(d)),d.length=0):d.push(o)};_.noExitRuntime&&(o_=_.noExitRuntime),_.print&&(t_=_.print),_.printErr&&(ce=_.printErr),_.wasmBinary&&(ve=_.wasmBinary),_.arguments&&_.arguments,_.thisProgram&&(te=_.thisProgram),_.UTF8ToString=d_,_.stringToUTF8=ge,_.lengthBytesUTF8=f_;var B_={6015984:()=>{throw"TRYLATER"},6016006:()=>{throw"ABORT"},6016025:a=>{throw new Error(d_(a))},6016064:()=>{throw new Error("Cannot create MuPDF context!")},6016117:(a,o,d,l,f,w,h)=>{globalThis.$libmupdf_text_walk.begin_span(a,o,d,l,f,w,h)},6016191:(a,o,d,l,f,w,h,T)=>{globalThis.$libmupdf_text_walk.show_glyph(a,o,d,l,f,w,h,T)},6016269:a=>{globalThis.$libmupdf_text_walk.end_span(a)},6016317:(a,o,d,l)=>globalThis.$libmupdf_load_font_file(a,o,d,l),6016380:(a,o,d,l)=>globalThis.$libmupdf_stm_read(a,o,d,l),6016438:a=>{globalThis.$libmupdf_stm_close(a)},6016478:(a,o,d,l)=>globalThis.$libmupdf_stm_seek(a,o,d,l),6016536:(a,o,d)=>{globalThis.$libmupdf_path_walk.moveto(a,o,d)},6016590:(a,o,d)=>{globalThis.$libmupdf_path_walk.lineto(a,o,d)},6016644:(a,o,d,l,f,w,h)=>{globalThis.$libmupdf_path_walk.curveto(a,o,d,l,f,w,h)},6016715:a=>{globalThis.$libmupdf_path_walk.closepath(a)},6016764:a=>{globalThis.$libmupdf_device.close_device(a)},6016813:a=>{globalThis.$libmupdf_device.drop_device(a)},6016861:(a,o,d,l,f,w,h,T)=>{globalThis.$libmupdf_device.fill_path(a,o,d,l,f,w,h,T)},6016935:(a,o,d,l,f,w,h,T)=>{globalThis.$libmupdf_device.stroke_path(a,o,d,l,f,w,h,T)},6017011:(a,o,d,l)=>{globalThis.$libmupdf_device.clip_path(a,o,d,l)},6017069:(a,o,d,l)=>{globalThis.$libmupdf_device.clip_stroke_path(a,o,d,l)},6017134:(a,o,d,l,f,w,h)=>{globalThis.$libmupdf_device.fill_text(a,o,d,l,f,w,h)},6017204:(a,o,d,l,f,w,h,T)=>{globalThis.$libmupdf_device.stroke_text(a,o,d,l,f,w,h,T)},6017280:(a,o,d)=>{globalThis.$libmupdf_device.clip_text(a,o,d)},6017334:(a,o,d,l)=>{globalThis.$libmupdf_device.clip_stroke_text(a,o,d,l)},6017399:(a,o,d)=>{globalThis.$libmupdf_device.ignore_text(a,o,d)},6017455:(a,o,d,l)=>{globalThis.$libmupdf_device.fill_shade(a,o,d,l)},6017514:(a,o,d,l)=>{globalThis.$libmupdf_device.fill_image(a,o,d,l)},6017573:(a,o,d,l,f,w,h)=>{globalThis.$libmupdf_device.fill_image_mask(a,o,d,l,f,w,h)},6017649:(a,o,d)=>{globalThis.$libmupdf_device.clip_image_mask(a,o,d)},6017709:a=>{globalThis.$libmupdf_device.pop_clip(a)},6017754:(a,o,d,l,f,w)=>{globalThis.$libmupdf_device.begin_mask(a,o,d,l,f,w)},6017821:(a,o)=>{globalThis.$libmupdf_device.end_mask(a,o)},6017870:(a,o,d,l,f,w,h)=>{globalThis.$libmupdf_device.begin_group(a,o,d,l,f,w,h)},6017942:a=>{globalThis.$libmupdf_device.end_group(a)},6017988:(a,o,d,l,f,w,h)=>globalThis.$libmupdf_device.begin_tile(a,o,d,l,f,w,h),6018066:a=>{globalThis.$libmupdf_device.end_tile(a)},6018111:(a,o)=>{globalThis.$libmupdf_device.begin_layer(a,o)},6018163:a=>{globalThis.$libmupdf_device.end_layer(a)}},H_={g:function(a,o,d){return 0},u:function(a,o){},t:function(a,o,d){return 0},f:function(a,o,d,l){},s:a=>{},e:(a,o,d)=>{},m:function(a,o){a=O_(a);var d=new Date(1e3*a);N[o>>2]=d.getUTCSeconds(),N[o+4>>2]=d.getUTCMinutes(),N[o+8>>2]=d.getUTCHours(),N[o+12>>2]=d.getUTCDate(),N[o+16>>2]=d.getUTCMonth(),N[o+20>>2]=d.getUTCFullYear()-1900,N[o+24>>2]=d.getUTCDay();var l=Date.UTC(d.getUTCFullYear(),0,1,0,0,0,0),f=(d.getTime()-l)/864e5|0;N[o+28>>2]=f},l:function(a){var o=(()=>{var d=Date.UTC(N[a+20>>2]+1900,N[a+16>>2],N[a+12>>2],N[a+8>>2],N[a+4>>2],N[a>>2],0),l=new Date(d);N[a+24>>2]=l.getUTCDay();var f=Date.UTC(l.getUTCFullYear(),0,1,0,0,0,0),w=(l.getTime()-f)/864e5|0;return N[a+28>>2]=w,l.getTime()/1e3})();return BigInt(o)},k:(a,o,d,l)=>{var f=new Date().getFullYear(),w=new Date(f,0,1),h=new Date(f,6,1),T=w.getTimezoneOffset(),J=h.getTimezoneOffset(),be=Math.max(T,J);re[a>>2]=60*be,N[o>>2]=+(T!=J);var D=h_=>{var j_=h_>=0?"-":"+",c_=Math.abs(h_);return`UTC${j_}${String(Math.floor(c_/60)).padStart(2,"0")}${String(c_%60).padStart(2,"0")}`},w_=D(T),u_=D(J);J<T?(ge(w_,d,17),ge(u_,l,17)):(ge(w_,l,17),ge(u_,d,17))},r:function(a,o,d){if(!((l=a)>=0&&l<=3))return 28;var l,f;f=a===0?m_():performance.now();var w=Math.round(1e3*f*1e3);return Ye[d>>3]=BigInt(w),0},a:(a,o,d)=>l_(a,o,d),j:(a,o,d)=>l_(a,o,d),i:m_,h:a=>{var o,d,l=me.length,f=2147483648;if((a>>>=0)>f)return!1;for(var w=1;w<=4;w*=2){var h=l*(1+.2/w);h=Math.min(h,a+100663296);var T=Math.min(f,(o=Math.max(a,h),d=65536,Math.ceil(o/d)*d));if(D_(T))return!0}return!1},q:(a,o)=>{var d=0,l=0;for(var f of Fe()){var w=o+d;re[a+l>>2]=w,d+=ge(f,w,1/0)+1,l+=4}return 0},p:(a,o)=>{var d=Fe();re[a>>2]=d.length;var l=0;for(var f of d)l+=f_(f)+1;return re[o>>2]=l,0},b:N_,d:a=>52,o:(a,o,d,l)=>52,n:function(a,o,d,l){return 70},c:(a,o,d,l)=>{for(var f=0,w=0;w<d;w++){var h=re[o>>2],T=re[o+4>>2];o+=8;for(var J=0;J<T;J++)R_(a,me[h+J]);f+=T}return re[l>>2]=f,0}},n=await async function(){function a(l,f){return n=l.exports,Be=n.v,s_(),function(){if(le--,_.monitorRunDependencies?.(le),le==0&&Pe){var w=Pe;Pe=null,w()}}(),n}le++,_.monitorRunDependencies?.(le);var o={a:H_};if(_.instantiateWasm)return new Promise((l,f)=>{_.instantiateWasm(o,(w,h)=>{l(a(w))})});Ke??=A_();try{var d=function(l){return a(l.instance)}(await async function(l,f,w){if(!l&&typeof WebAssembly.instantiateStreaming=="function"&&!He(f)&&!c)try{var h=fetch(f,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(h,w)}catch(T){ce(`wasm streaming compile failed: ${T}`),ce("falling back to ArrayBuffer instantiation")}return P_(f,w)}(ve,Ke,o));return d}catch(l){return s(l),Promise.reject(l)}}(),M_=(n.w,_._wasm_init_context=n.x,_._wasm_malloc=n.y,_._wasm_free=n.z,_._wasm_enable_icc=n.A,_._wasm_disable_icc=n.B,_._wasm_set_user_css=n.C,_._wasm_Memento_checkAllMemory=n.D,_._wasm_Memento_listBlocks=n.E,_._wasm_keep_buffer=n.F,_._wasm_drop_buffer=n.G,_._wasm_keep_stream=n.H,_._wasm_drop_stream=n.I,_._wasm_keep_colorspace=n.J,_._wasm_drop_colorspace=n.K,_._wasm_keep_pixmap=n.L,_._wasm_drop_pixmap=n.M,_._wasm_keep_font=n.N,_._wasm_drop_font=n.O,_._wasm_keep_stroke_state=n.P,_._wasm_drop_stroke_state=n.Q,_._wasm_keep_image=n.R,_._wasm_drop_image=n.S,_._wasm_keep_shade=n.T,_._wasm_drop_shade=n.U,_._wasm_keep_path=n.V,_._wasm_drop_path=n.W,_._wasm_keep_text=n.X,_._wasm_drop_text=n.Y,_._wasm_keep_device=n.Z,_._wasm_drop_device=n._,_._wasm_keep_display_list=n.$,_._wasm_drop_display_list=n.aa,_._wasm_drop_stext_page=n.ba,_._wasm_drop_document_writer=n.ca,_._wasm_drop_outline_iterator=n.da,_._wasm_keep_document=n.ea,_._wasm_drop_document=n.fa,_._wasm_keep_page=n.ga,_._wasm_drop_page=n.ha,_._wasm_keep_link=n.ia,_._wasm_drop_link=n.ja,_._wasm_keep_outline=n.ka,_._wasm_drop_outline=n.la,_._wasm_pdf_keep_annot=n.ma,_._wasm_pdf_drop_annot=n.na,_._wasm_pdf_keep_obj=n.oa,_._wasm_pdf_drop_obj=n.pa,_._wasm_pdf_keep_graft_map=n.qa,_._wasm_pdf_drop_graft_map=n.ra,_._wasm_buffer_get_data=n.sa,_._wasm_buffer_get_len=n.ta,_._wasm_colorspace_get_type=n.ua,_._wasm_colorspace_get_n=n.va,_._wasm_colorspace_get_name=n.wa,_._wasm_pixmap_get_w=n.xa,_._wasm_pixmap_get_h=n.ya,_._wasm_pixmap_get_x=n.za,_._wasm_pixmap_get_y=n.Aa,_._wasm_pixmap_get_n=n.Ba,_._wasm_pixmap_get_stride=n.Ca,_._wasm_pixmap_get_alpha=n.Da,_._wasm_pixmap_get_xres=n.Ea,_._wasm_pixmap_get_yres=n.Fa,_._wasm_pixmap_get_colorspace=n.Ga,_._wasm_pixmap_get_samples=n.Ha,_._wasm_pixmap_set_xres=n.Ia,_._wasm_pixmap_set_yres=n.Ja,_._wasm_font_get_name=n.Ka,_._wasm_stroke_state_get_start_cap=n.La,_._wasm_stroke_state_set_start_cap=n.Ma,_._wasm_stroke_state_get_dash_cap=n.Na,_._wasm_stroke_state_set_dash_cap=n.Oa,_._wasm_stroke_state_get_end_cap=n.Pa,_._wasm_stroke_state_set_end_cap=n.Qa,_._wasm_stroke_state_get_linejoin=n.Ra,_._wasm_stroke_state_set_linejoin=n.Sa,_._wasm_stroke_state_get_linewidth=n.Ta,_._wasm_stroke_state_set_linewidth=n.Ua,_._wasm_stroke_state_get_miterlimit=n.Va,_._wasm_stroke_state_set_miterlimit=n.Wa,_._wasm_stroke_state_get_dash_phase=n.Xa,_._wasm_stroke_state_set_dash_phase=n.Ya,_._wasm_stroke_state_get_dash_len=n.Za,_._wasm_image_get_w=n._a,_._wasm_image_get_h=n.$a,_._wasm_image_get_n=n.ab,_._wasm_image_get_bpc=n.bb,_._wasm_image_get_xres=n.cb,_._wasm_image_get_yres=n.db,_._wasm_image_get_imagemask=n.eb,_._wasm_image_get_colorspace=n.fb,_._wasm_image_get_mask=n.gb,_._wasm_outline_get_title=n.hb,_._wasm_outline_get_uri=n.ib,_._wasm_outline_get_next=n.jb,_._wasm_outline_get_down=n.kb,_._wasm_outline_get_is_open=n.lb,_._wasm_outline_item_get_title=n.mb,_._wasm_outline_item_get_uri=n.nb,_._wasm_outline_item_get_is_open=n.ob,_._wasm_link_get_rect=n.pb,_._wasm_link_get_uri=n.qb,_._wasm_link_get_next=n.rb,_._wasm_stext_page_get_mediabox=n.sb,_._wasm_stext_page_get_first_block=n.tb,_._wasm_stext_block_get_next=n.ub,_._wasm_stext_block_get_type=n.vb,_._wasm_stext_block_get_bbox=n.wb,_._wasm_stext_block_get_first_line=n.xb,_._wasm_stext_block_get_transform=n.yb,_._wasm_stext_block_get_image=n.zb,_._wasm_stext_line_get_next=n.Ab,_._wasm_stext_line_get_wmode=n.Bb,_._wasm_stext_line_get_dir=n.Cb,_._wasm_stext_line_get_bbox=n.Db,_._wasm_stext_line_get_first_char=n.Eb,_._wasm_stext_char_get_next=n.Fb,_._wasm_stext_char_get_c=n.Gb,_._wasm_stext_char_get_origin=n.Hb,_._wasm_stext_char_get_quad=n.Ib,_._wasm_stext_char_get_size=n.Jb,_._wasm_stext_char_get_font=n.Kb,_._wasm_stext_char_get_argb=n.Lb,_._wasm_link_dest_get_chapter=n.Mb,_._wasm_link_dest_get_page=n.Nb,_._wasm_link_dest_get_type=n.Ob,_._wasm_link_dest_get_x=n.Pb,_._wasm_link_dest_get_y=n.Qb,_._wasm_link_dest_get_w=n.Rb,_._wasm_link_dest_get_h=n.Sb,_._wasm_link_dest_get_zoom=n.Tb,_._wasm_pdf_filespec_params_get_filename=n.Ub,_._wasm_pdf_filespec_params_get_mimetype=n.Vb,_._wasm_pdf_filespec_params_get_size=n.Wb,_._wasm_pdf_filespec_params_get_created=n.Xb,_._wasm_pdf_filespec_params_get_modified=n.Yb,_._wasm_pdf_page_get_obj=n.Zb,_._wasm_new_buffer=n._b,_._wasm_new_buffer_from_data=n.$b,_._wasm_append_string=n.ac,_._wasm_append_byte=n.bc,_._wasm_append_buffer=n.cc,_._wasm_slice_buffer=n.dc,_._wasm_string_from_buffer=n.ec,_._wasm_device_gray=n.fc,_._wasm_device_rgb=n.gc,_._wasm_device_bgr=n.hc,_._wasm_device_cmyk=n.ic,_._wasm_device_lab=n.jc,_._wasm_new_icc_colorspace=n.kc,_._wasm_new_stroke_state=n.lc,_._wasm_stroke_state_get_dash_item=n.mc,_._wasm_stroke_state_set_dash_item=n.nc,_._wasm_new_base14_font=n.oc,_._wasm_new_cjk_font=n.pc,_._wasm_new_font_from_buffer=n.qc,_._wasm_encode_character=n.rc,_._wasm_advance_glyph=n.sc,_._wasm_font_is_monospaced=n.tc,_._wasm_font_is_serif=n.uc,_._wasm_font_is_bold=n.vc,_._wasm_font_is_italic=n.wc,_._wasm_new_image_from_pixmap=n.xc,_._wasm_new_image_from_buffer=n.yc,_._wasm_get_pixmap_from_image=n.zc,_._wasm_new_pixmap_from_page=n.Ac,_._wasm_new_pixmap_from_page_contents=n.Bc,_._wasm_pdf_new_pixmap_from_page_with_usage=n.Cc,_._wasm_pdf_new_pixmap_from_page_contents_with_usage=n.Dc,_._wasm_new_pixmap_with_bbox=n.Ec,_._wasm_clear_pixmap=n.Fc,_._wasm_clear_pixmap_with_value=n.Gc,_._wasm_invert_pixmap=n.Hc,_._wasm_invert_pixmap_luminance=n.Ic,_._wasm_gamma_pixmap=n.Jc,_._wasm_tint_pixmap=n.Kc,_._wasm_new_buffer_from_pixmap_as_png=n.Lc,_._wasm_new_buffer_from_pixmap_as_pam=n.Mc,_._wasm_new_buffer_from_pixmap_as_psd=n.Nc,_._wasm_new_buffer_from_pixmap_as_jpeg=n.Oc,_._wasm_convert_pixmap=n.Pc,_._wasm_warp_pixmap=n.Qc,_._wasm_bound_shade=n.Rc,_._wasm_new_display_list=n.Sc,_._wasm_bound_display_list=n.Tc,_._wasm_run_display_list=n.Uc,_._wasm_new_pixmap_from_display_list=n.Vc,_._wasm_new_stext_page_from_display_list=n.Wc,_._wasm_search_display_list=n.Xc,_._wasm_new_path=n.Yc,_._wasm_moveto=n.Zc,_._wasm_lineto=n._c,_._wasm_curveto=n.$c,_._wasm_curvetov=n.ad,_._wasm_curvetoy=n.bd,_._wasm_closepath=n.cd,_._wasm_rectto=n.dd,_._wasm_transform_path=n.ed,_._wasm_bound_path=n.fd,_._wasm_new_text=n.gd,_._wasm_bound_text=n.hd,_._wasm_show_glyph=n.id,_._wasm_show_string=n.jd,_._wasm_new_draw_device=n.kd,_._wasm_new_display_list_device=n.ld,_._wasm_close_device=n.md,_._wasm_fill_path=n.nd,_._wasm_stroke_path=n.od,_._wasm_clip_path=n.pd,_._wasm_clip_stroke_path=n.qd,_._wasm_fill_text=n.rd,_._wasm_stroke_text=n.sd,_._wasm_clip_text=n.td,_._wasm_clip_stroke_text=n.ud,_._wasm_ignore_text=n.vd,_._wasm_fill_shade=n.wd,_._wasm_fill_image=n.xd,_._wasm_fill_image_mask=n.yd,_._wasm_clip_image_mask=n.zd,_._wasm_pop_clip=n.Ad,_._wasm_begin_mask=n.Bd,_._wasm_end_mask=n.Cd,_._wasm_begin_group=n.Dd,_._wasm_end_group=n.Ed,_._wasm_begin_tile=n.Fd,_._wasm_end_tile=n.Gd,_._wasm_begin_layer=n.Hd,_._wasm_end_layer=n.Id,_._wasm_new_document_writer_with_buffer=n.Jd,_._wasm_begin_page=n.Kd,_._wasm_end_page=n.Ld,_._wasm_close_document_writer=n.Md,_._wasm_print_stext_page_as_json=n.Nd,_._wasm_search_stext_page=n.Od,_._wasm_snap_selection=n.Pd,_._wasm_copy_selection=n.Qd,_._wasm_highlight_selection=n.Rd,_._wasm_print_stext_page_as_html=n.Sd,_._wasm_print_stext_page_as_text=n.Td,_._wasm_open_document_with_buffer=n.Ud,_._wasm_open_document_with_stream=n.Vd,_._wasm_format_link_uri=n.Wd,_._wasm_needs_password=n.Xd,_._wasm_authenticate_password=n.Yd,_._wasm_has_permission=n.Zd,_._wasm_count_pages=n._d,_._wasm_load_page=n.$d,_._wasm_lookup_metadata=n.ae,_._wasm_set_metadata=n.be,_._wasm_resolve_link=n.ce,_._wasm_resolve_link_dest=n.de,_._wasm_load_outline=n.ee,_._wasm_outline_get_page=n.fe,_._wasm_layout_document=n.ge,_._wasm_is_document_reflowable=n.he,_._wasm_link_set_rect=n.ie,_._wasm_link_set_uri=n.je,_._wasm_bound_page=n.ke,_._wasm_load_links=n.le,_._wasm_create_link=n.me,_._wasm_delete_link=n.ne,_._wasm_run_page=n.oe,_._wasm_run_page_contents=n.pe,_._wasm_run_page_annots=n.qe,_._wasm_run_page_widgets=n.re,_._wasm_new_stext_page_from_page=n.se,_._wasm_new_display_list_from_page=n.te,_._wasm_new_display_list_from_page_contents=n.ue,_._wasm_page_label=n.ve,_._wasm_search_page=n.we,_._wasm_new_outline_iterator=n.xe,_._wasm_outline_iterator_next=n.ye,_._wasm_outline_iterator_prev=n.ze,_._wasm_outline_iterator_up=n.Ae,_._wasm_outline_iterator_down=n.Be,_._wasm_outline_iterator_delete=n.Ce,_._wasm_outline_iterator_item=n.De,_._wasm_outline_iterator_insert=n.Ee,_._wasm_outline_iterator_update=n.Fe,_._wasm_pdf_document_from_fz_document=n.Ge,_._wasm_pdf_page_from_fz_page=n.He,_._wasm_pdf_create_document=n.Ie,_._wasm_pdf_version=n.Je,_._wasm_pdf_was_repaired=n.Ke,_._wasm_pdf_has_unsaved_changes=n.Le,_._wasm_pdf_can_be_saved_incrementally=n.Me,_._wasm_pdf_count_versions=n.Ne,_._wasm_pdf_count_unsaved_versions=n.Oe,_._wasm_pdf_validate_change_history=n.Pe,_._wasm_pdf_enable_journal=n.Qe,_._wasm_pdf_undoredo_state_position=n.Re,_._wasm_pdf_undoredo_state_count=n.Se,_._wasm_pdf_undoredo_step=n.Te,_._wasm_pdf_begin_operation=n.Ue,_._wasm_pdf_begin_implicit_operation=n.Ve,_._wasm_pdf_end_operation=n.We,_._wasm_pdf_abandon_operation=n.Xe,_._wasm_pdf_undo=n.Ye,_._wasm_pdf_redo=n.Ze,_._wasm_pdf_can_undo=n._e,_._wasm_pdf_can_redo=n.$e,_._wasm_pdf_document_language=n.af,_._wasm_pdf_set_document_language=n.bf,_._wasm_pdf_trailer=n.cf,_._wasm_pdf_xref_len=n.df,_._wasm_pdf_lookup_page_obj=n.ef,_._wasm_pdf_add_object=n.ff,_._wasm_pdf_create_object=n.gf,_._wasm_pdf_delete_object=n.hf,_._wasm_pdf_add_stream=n.jf,_._wasm_pdf_add_simple_font=n.kf,_._wasm_pdf_add_cjk_font=n.lf,_._wasm_pdf_add_cid_font=n.mf,_._wasm_pdf_add_image=n.nf,_._wasm_pdf_load_image=n.of,_._wasm_pdf_add_page=n.pf,_._wasm_pdf_insert_page=n.qf,_._wasm_pdf_delete_page=n.rf,_._wasm_pdf_set_page_labels=n.sf,_._wasm_pdf_delete_page_labels=n.tf,_._wasm_pdf_is_embedded_file=n.uf,_._wasm_pdf_get_filespec_params=n.vf,_._wasm_pdf_add_embedded_file=n.wf,_._wasm_pdf_load_embedded_file_contents=n.xf,_._wasm_pdf_write_document_buffer=n.yf,_._wasm_pdf_js_supported=n.zf,_._wasm_pdf_enable_js=n.Af,_._wasm_pdf_disable_js=n.Bf,_._wasm_pdf_rearrange_pages=n.Cf,_._wasm_pdf_subset_fonts=n.Df,_._wasm_pdf_bake_document=n.Ef,_._wasm_pdf_count_layers=n.Ff,_._wasm_pdf_layer_name=n.Gf,_._wasm_pdf_layer_is_enabled=n.Hf,_._wasm_pdf_enable_layer=n.If,_._wasm_pdf_page_transform=n.Jf,_._wasm_pdf_set_page_box=n.Kf,_._wasm_pdf_first_annot=n.Lf,_._wasm_pdf_next_annot=n.Mf,_._wasm_pdf_first_widget=n.Nf,_._wasm_pdf_next_widget=n.Of,_._wasm_pdf_create_annot=n.Pf,_._wasm_pdf_delete_annot=n.Qf,_._wasm_pdf_update_page=n.Rf,_._wasm_pdf_redact_page=n.Sf,_._wasm_pdf_new_graft_map=n.Tf,_._wasm_pdf_graft_mapped_object=n.Uf,_._wasm_pdf_graft_object=n.Vf,_._wasm_pdf_graft_mapped_page=n.Wf,_._wasm_pdf_graft_page=n.Xf,_._wasm_pdf_bound_annot=n.Yf,_._wasm_pdf_run_annot=n.Zf,_._wasm_pdf_new_pixmap_from_annot=n._f,_._wasm_pdf_new_display_list_from_annot=n.$f,_._wasm_pdf_update_annot=n.ag,_._wasm_pdf_annot_obj=n.bg,_._wasm_pdf_annot_type=n.cg,_._wasm_pdf_annot_flags=n.dg,_._wasm_pdf_set_annot_flags=n.eg,_._wasm_pdf_annot_contents=n.fg,_._wasm_pdf_set_annot_contents=n.gg,_._wasm_pdf_annot_author=n.hg,_._wasm_pdf_set_annot_author=n.ig,_._wasm_pdf_annot_creation_date=n.jg,_._wasm_pdf_set_annot_creation_date=n.kg,_._wasm_pdf_annot_modification_date=n.lg,_._wasm_pdf_set_annot_modification_date=n.mg,_._wasm_pdf_annot_border_width=n.ng,_._wasm_pdf_set_annot_border_width=n.og,_._wasm_pdf_annot_border_style=n.pg,_._wasm_pdf_set_annot_border_style=n.qg,_._wasm_pdf_annot_border_effect=n.rg,_._wasm_pdf_set_annot_border_effect=n.sg,_._wasm_pdf_annot_border_effect_intensity=n.tg,_._wasm_pdf_set_annot_border_effect_intensity=n.ug,_._wasm_pdf_annot_opacity=n.vg,_._wasm_pdf_set_annot_opacity=n.wg,_._wasm_pdf_annot_filespec=n.xg,_._wasm_pdf_set_annot_filespec=n.yg,_._wasm_pdf_annot_quadding=n.zg,_._wasm_pdf_set_annot_quadding=n.Ag,_._wasm_pdf_annot_is_open=n.Bg,_._wasm_pdf_set_annot_is_open=n.Cg,_._wasm_pdf_annot_hidden_for_editing=n.Dg,_._wasm_pdf_set_annot_hidden_for_editing=n.Eg,_._wasm_pdf_annot_icon_name=n.Fg,_._wasm_pdf_set_annot_icon_name=n.Gg,_._wasm_pdf_annot_intent=n.Hg,_._wasm_pdf_set_annot_intent=n.Ig,_._wasm_pdf_annot_callout_style=n.Jg,_._wasm_pdf_set_annot_callout_style=n.Kg,_._wasm_pdf_annot_line_leader=n.Lg,_._wasm_pdf_set_annot_line_leader=n.Mg,_._wasm_pdf_annot_line_leader_extension=n.Ng,_._wasm_pdf_set_annot_line_leader_extension=n.Og,_._wasm_pdf_annot_line_leader_offset=n.Pg,_._wasm_pdf_set_annot_line_leader_offset=n.Qg,_._wasm_pdf_annot_line_caption=n.Rg,_._wasm_pdf_set_annot_line_caption=n.Sg,_._wasm_pdf_annot_rich_defaults=n.Tg,_._wasm_pdf_set_annot_rich_defaults=n.Ug,_._wasm_pdf_annot_callout_point=n.Vg,_._wasm_pdf_annot_line_caption_offset=n.Wg,_._wasm_pdf_annot_rect=n.Xg,_._wasm_pdf_annot_popup=n.Yg,_._wasm_pdf_annot_quad_point_count=n.Zg,_._wasm_pdf_annot_quad_point=n._g,_._wasm_pdf_annot_vertex_count=n.$g,_._wasm_pdf_annot_vertex=n.ah,_._wasm_pdf_annot_ink_list_count=n.bh,_._wasm_pdf_annot_ink_list_stroke_count=n.ch,_._wasm_pdf_annot_ink_list_stroke_vertex=n.dh,_._wasm_pdf_annot_rich_contents=n.eh,_._wasm_pdf_annot_border_dash_count=n.fh,_._wasm_pdf_annot_border_dash_item=n.gh,_._wasm_pdf_annot_has_rect=n.hh,_._wasm_pdf_annot_has_ink_list=n.ih,_._wasm_pdf_annot_has_quad_points=n.jh,_._wasm_pdf_annot_has_vertices=n.kh,_._wasm_pdf_annot_has_line=n.lh,_._wasm_pdf_annot_has_interior_color=n.mh,_._wasm_pdf_annot_has_line_ending_styles=n.nh,_._wasm_pdf_annot_has_border=n.oh,_._wasm_pdf_annot_has_border_effect=n.ph,_._wasm_pdf_annot_has_icon_name=n.qh,_._wasm_pdf_annot_has_open=n.rh,_._wasm_pdf_annot_has_author=n.sh,_._wasm_pdf_annot_has_filespec=n.th,_._wasm_pdf_annot_has_callout=n.uh,_._wasm_pdf_annot_has_rich_contents=n.vh,_._wasm_pdf_annot_language=n.wh,_._wasm_pdf_set_annot_language=n.xh,_._wasm_pdf_set_annot_popup=n.yh,_._wasm_pdf_set_annot_rect=n.zh,_._wasm_pdf_clear_annot_quad_points=n.Ah,_._wasm_pdf_clear_annot_vertices=n.Bh,_._wasm_pdf_clear_annot_ink_list=n.Ch,_._wasm_pdf_clear_annot_border_dash=n.Dh,_._wasm_pdf_add_annot_quad_point=n.Eh,_._wasm_pdf_add_annot_vertex=n.Fh,_._wasm_pdf_add_annot_ink_list_stroke=n.Gh,_._wasm_pdf_add_annot_ink_list_stroke_vertex=n.Hh,_._wasm_pdf_add_annot_border_dash_item=n.Ih,_._wasm_pdf_annot_line_ending_styles_start=n.Jh,_._wasm_pdf_annot_line_1=n.Kh,_._wasm_pdf_annot_line_2=n.Lh,_._wasm_pdf_set_annot_line=n.Mh,_._wasm_pdf_set_annot_callout_point=n.Nh,_._wasm_pdf_annot_callout_line=n.Oh,_._wasm_pdf_set_annot_callout_line=n.Ph,_._wasm_pdf_set_annot_line_caption_offset=n.Qh,_._wasm_pdf_annot_line_ending_styles_end=n.Rh,_._wasm_pdf_set_annot_line_ending_styles=n.Sh,_._wasm_pdf_annot_color=n.Th,_._wasm_pdf_annot_interior_color=n.Uh,_._wasm_pdf_set_annot_color=n.Vh,_._wasm_pdf_set_annot_interior_color=n.Wh,_._wasm_pdf_set_annot_default_appearance=n.Xh,_._wasm_pdf_annot_default_appearance_font=n.Yh,_._wasm_pdf_annot_default_appearance_size=n.Zh,_._wasm_pdf_annot_default_appearance_color=n._h,_._wasm_pdf_set_annot_rich_contents=n.$h,_._wasm_pdf_set_annot_stamp_image=n.ai,_._wasm_pdf_set_annot_appearance_from_display_list=n.bi,_._wasm_pdf_set_annot_appearance=n.ci,_._wasm_pdf_apply_redaction=n.di,_._wasm_pdf_reset_form=n.ei,_._wasm_pdf_annot_field_type=n.fi,_._wasm_pdf_annot_field_flags=n.gi,_._wasm_pdf_annot_field_label=n.hi,_._wasm_pdf_annot_field_value=n.ii,_._wasm_pdf_load_field_name=n.ji,_._wasm_pdf_annot_text_widget_max_len=n.ki,_._wasm_pdf_set_annot_text_field_value=n.li,_._wasm_pdf_set_annot_choice_field_value=n.mi,_._wasm_pdf_annot_choice_field_option_count=n.ni,_._wasm_pdf_annot_choice_field_option=n.oi,_._wasm_pdf_toggle_widget=n.pi,_._wasm_pdf_is_indirect=n.qi,_._wasm_pdf_is_bool=n.ri,_._wasm_pdf_is_int=n.si,_._wasm_pdf_is_real=n.ti,_._wasm_pdf_is_number=n.ui,_._wasm_pdf_is_name=n.vi,_._wasm_pdf_is_string=n.wi,_._wasm_pdf_is_array=n.xi,_._wasm_pdf_is_dict=n.yi,_._wasm_pdf_is_stream=n.zi,_._wasm_pdf_to_num=n.Ai,_._wasm_pdf_to_bool=n.Bi,_._wasm_pdf_to_real=n.Ci,_._wasm_pdf_to_name=n.Di,_._wasm_pdf_to_text_string=n.Ei,_._wasm_pdf_new_indirect=n.Fi,_._wasm_pdf_new_array=n.Gi,_._wasm_pdf_new_dict=n.Hi,_._wasm_pdf_new_bool=n.Ii,_._wasm_pdf_new_int=n.Ji,_._wasm_pdf_new_real=n.Ki,_._wasm_pdf_new_name=n.Li,_._wasm_pdf_new_text_string=n.Mi,_._wasm_pdf_new_string=n.Ni,_._wasm_pdf_resolve_indirect=n.Oi,_._wasm_pdf_array_len=n.Pi,_._wasm_pdf_array_get=n.Qi,_._wasm_pdf_dict_get=n.Ri,_._wasm_pdf_dict_len=n.Si,_._wasm_pdf_dict_get_key=n.Ti,_._wasm_pdf_dict_get_val=n.Ui,_._wasm_pdf_dict_get_inheritable=n.Vi,_._wasm_pdf_dict_gets=n.Wi,_._wasm_pdf_dict_gets_inheritable=n.Xi,_._wasm_pdf_dict_put=n.Yi,_._wasm_pdf_dict_puts=n.Zi,_._wasm_pdf_dict_del=n._i,_._wasm_pdf_dict_dels=n.$i,_._wasm_pdf_array_put=n.aj,_._wasm_pdf_array_push=n.bj,_._wasm_pdf_array_delete=n.cj,_._wasm_pdf_sprint_obj=n.dj,_._wasm_pdf_load_stream=n.ej,_._wasm_pdf_load_raw_stream=n.fj,_._wasm_pdf_update_object=n.gj,_._wasm_pdf_update_stream=n.hj,_._wasm_pdf_to_string=n.ij,_._wasm_new_stream=n.jj,_._wasm_walk_path=n.kj,_._wasm_walk_text=n.lj,_._wasm_new_js_device=n.mj,n.nj);return function(){if(_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.shift()()}(),function a(){function o(){_.calledRun=!0,Ve||(n_=!0,n.w(),e(_),_.onRuntimeInitialized?.(),function(){if(_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;)I_(_.postRun.shift());r_(a_)}())}le>0?Pe=a:(function(){if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)S_(_.preRun.shift());r_(i_)}(),le>0?Pe=a:_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),o()},1)):o())}(),i},Y=null;typeof process<"u"&&process.versions&&process.versions.node&&(Y=await import("./__vite-browser-external-9wXp6ZBx.js"));const t=await U_(globalThis.$libmupdf_wasm_Module);t._wasm_init_context();function z(r){return t._wasm_malloc(r)}function ue(r){t._wasm_free(r)}const Q_={identity:[1,0,0,1,0,0],scale(r,e){return[r,0,0,e,0,0]},translate(r,e){return[1,0,0,1,r,e]},rotate(r){for(;r<0;)r+=360;for(;r>=360;)r-=360;let e=Math.sin(r*Math.PI/180),s=Math.cos(r*Math.PI/180);return[s,e,-e,s,0,0]},invert(r){E(r);let e=r[0]*r[3]-r[1]*r[2];if(e>-1e-23&&e<1e-23)return r;let s=1/e,_=r[3]*s,i=-r[1]*s,m=-r[2]*s,u=r[0]*s,c=-r[4]*_-r[5]*m,A=-r[4]*i-r[5]*u;return[_,i,m,u,c,A]},concat(r,e){return E(r),E(e),[r[0]*e[0]+r[1]*e[2],r[0]*e[1]+r[1]*e[3],r[2]*e[0]+r[3]*e[2],r[2]*e[1]+r[3]*e[3],r[4]*e[0]+r[5]*e[2]+e[4],r[4]*e[1]+r[5]*e[3]+e[5]]}},g_=z(4),M=z(4*6)>>2,ne=z(4*8)>>2,fe=z(4*6)>>2,R=z(4*4)>>2,ae=z(4*8)>>2,Me=[0,0];function p(r,e){if(typeof e=="string"&&typeof r!==e)throw new TypeError("expected "+e);if(typeof e=="function"&&!(r instanceof e))throw new TypeError("expected "+e.name)}function je(r){if(!Array.isArray(r)||r.length!==2)throw new TypeError("expected point")}function j(r){if(!Array.isArray(r)||r.length!==4)throw new TypeError("expected rectangle")}function E(r){if(!Array.isArray(r)||r.length!==6)throw new TypeError("expected matrix")}function b_(r){if(!Array.isArray(r)||r.length!==8)throw new TypeError("expected quad")}function ye(r){if(!Array.isArray(r)||r.length!==1&&r.length!==3&&r.length!==4)throw new TypeError("expected color array")}function qe(r){if(!Array.isArray(r)||r.length!==0&&r.length!==1&&r.length!==3&&r.length!==4)throw new TypeError("expected color array")}function W(r){if(r instanceof q)return r.pointer;if(r instanceof ArrayBuffer||r instanceof Uint8Array)return new q(r).pointer;if(typeof r=="string")return new q(r).pointer;throw new TypeError("expected buffer")}function B(r,e){if(typeof r=="number"&&r>=0&&r<e.length)return r;if(typeof r=="string"){let s=e.indexOf(r);if(s>=0)return s}throw new TypeError(`invalid enum value ("${r}"; expected ${e.join(", ")})`)}function $_(r){var e=t.lengthBytesUTF8(r)+1,s=z(e);return t.stringToUTF8(r,s,e),s}function ze(r,e){return Me[e]&&(ue(Me[e]),Me[e]=0),Me[e]=$_(r)}function g(r){return ze(r,0)}function Je(r){return ze(r,1)}function De(r){return typeof r=="string"?ze(r,0):0}function $e(r){return typeof r=="string"?ze(r,1):0}function ie(r){return t.HEAPF32[M+0]=r[0],t.HEAPF32[M+1]=r[1],M<<2}function Ie(r){return t.HEAPF32[M+2]=r[0],t.HEAPF32[M+3]=r[1],M+2<<2}function G_(r){return t.HEAPF32[M+4]=r[0],t.HEAPF32[M+5]=r[1],M+4<<2}function G(r){return t.HEAPF32[ne+0]=r[0],t.HEAPF32[ne+1]=r[1],t.HEAPF32[ne+2]=r[2],t.HEAPF32[ne+3]=r[3],ne<<2}function z_(r){return t.HEAPF32[ne+4]=r[0],t.HEAPF32[ne+5]=r[1],t.HEAPF32[ne+6]=r[2],t.HEAPF32[ne+7]=r[3],ne+4<<2}function x(r){return t.HEAPF32[fe+0]=r[0],t.HEAPF32[fe+1]=r[1],t.HEAPF32[fe+2]=r[2],t.HEAPF32[fe+3]=r[3],t.HEAPF32[fe+4]=r[4],t.HEAPF32[fe+5]=r[5],fe<<2}function y_(r){return t.HEAPF32[ae+0]=r[0],t.HEAPF32[ae+1]=r[1],t.HEAPF32[ae+2]=r[2],t.HEAPF32[ae+3]=r[3],t.HEAPF32[ae+4]=r[4],t.HEAPF32[ae+5]=r[5],t.HEAPF32[ae+6]=r[6],t.HEAPF32[ae+7]=r[7],ae<<2}function K(r){if(typeof r<"u")switch(r.length){case 0:break;case 1:t.HEAPF32[R+0]=r[0];break;case 3:t.HEAPF32[R+0]=r[0],t.HEAPF32[R+1]=r[1],t.HEAPF32[R+2]=r[2];break;case 4:t.HEAPF32[R+0]=r[0],t.HEAPF32[R+1]=r[1],t.HEAPF32[R+2]=r[2],t.HEAPF32[R+3]=r[3];break}return R<<2}function J_(r){if(r===1)return[t.HEAPF32[R]];if(r===3)return[t.HEAPF32[R+0],t.HEAPF32[R+1],t.HEAPF32[R+2]];if(r===4)return[t.HEAPF32[R+0],t.HEAPF32[R+1],t.HEAPF32[R+2],t.HEAPF32[R+3]];throw new TypeError("invalid number of components for Color: "+r)}function Qe(r){return r===0?[]:J_(r)}function Ee(r,e){let s=e>>2,_=[];for(let i=0;i<r;++i)_.push(t.HEAPF32[s+i]);return _}function E_(r){return r===0?null:t.UTF8ToString(r)}function v(r){return t.UTF8ToString(r)}function we(r){let e=t.UTF8ToString(r);return ue(r),e}function V(r){let e=r>>2;return[t.HEAPF32[e+0],t.HEAPF32[e+1]]}function U(r){let e=r>>2;return[t.HEAPF32[e+0],t.HEAPF32[e+1],t.HEAPF32[e+2],t.HEAPF32[e+3]]}function C(r){let e=r>>2;return[t.HEAPF32[e+0],t.HEAPF32[e+1],t.HEAPF32[e+2],t.HEAPF32[e+3],t.HEAPF32[e+4],t.HEAPF32[e+5]]}function Se(r){let e=r>>2;return[t.HEAPF32[e+0],t.HEAPF32[e+1],t.HEAPF32[e+2],t.HEAPF32[e+3],t.HEAPF32[e+4],t.HEAPF32[e+5],t.HEAPF32[e+6],t.HEAPF32[e+7]]}function Ue(r){let e=t._wasm_buffer_get_data(r),s=t._wasm_buffer_get_len(r);return t.HEAPU8.slice(e,e+s)}function Y_(r){var e=r>>16&255,s=r>>8&255,_=r&255;return[e/255,s/255,_/255]}function Ze(r,e,s,_=500){p(s,"string");let i=0,m=0;try{i=z(32*_),m=z(4*_);let u=r(e,g(s),m,i,_),c=[];if(u>0){let A=[];for(let k=0;k<u;++k){let Z=t.HEAP32[(m>>2)+k],te=Se(i+k*32);k>0&&Z&&(c.push(A),A=[]),A.push(te)}c.push(A)}return c}finally{ue(m),ue(i)}}class O{constructor(e){if(typeof e!="number")throw new Error("invalid pointer: "+typeof e);if(e!==0){let s=this.constructor;s._finalizer||(s._finalizer=new FinalizationRegistry(s._drop)),s._finalizer.register(this,e,this)}this.pointer=e}destroy(){if(this.pointer!==0){let e=this.constructor;e._finalizer.unregister(this),e._drop(this.pointer)}this.pointer=0}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}toString(){return`[${this.constructor.name} ${this.pointer}]`}valueOf(){throw new Error("cannot convert Userdata to Javascript value")}}class q extends O{constructor(e){if(typeof e>"u")super(t._wasm_new_buffer(1024));else if(typeof e=="number")super(e);else if(typeof e=="string"){let s=t.lengthBytesUTF8(e),_=z(s+1);t.stringToUTF8(e,_,s+1),super(t._wasm_new_buffer_from_data(_,s))}else if(e instanceof ArrayBuffer||e instanceof Uint8Array){let s=e.byteLength,_=z(s);t.HEAPU8.set(new Uint8Array(e),_),super(t._wasm_new_buffer_from_data(_,s))}}get length(){return this.getLength()}set length(e){throw new TypeError("buffer length is read-only")}getLength(){return t._wasm_buffer_get_len(this.pointer)}readByte(e){let s=t._wasm_buffer_get_data(this.pointer);return t.HEAPU8[s+e]}write(e){t._wasm_append_string(this.pointer,g(e))}writeByte(e){t._wasm_append_byte(this.pointer,e)}writeLine(e){this.write(e),this.writeByte(10)}writeBuffer(e){t._wasm_append_buffer(this.pointer,W(e))}asUint8Array(){let e=t._wasm_buffer_get_data(this.pointer),s=t._wasm_buffer_get_len(this.pointer);return t.HEAPU8.subarray(e,e+s)}slice(e,s){return typeof s>"u"&&(s=this.getLength()),new q(t._wasm_slice_buffer(this.pointer,e,s))}asString(){return v(t._wasm_string_from_buffer(this.pointer))}save(e){if(Y)Y.writeFileSync(e,this.asUint8Array());else throw new Error("missing 'fs' module")}}q._drop=t._wasm_drop_buffer;class b extends O{constructor(e,s){if(typeof e=="number")super(e);else{if(typeof e=="string")if(Y)e=Y.readFileSync(e);else throw new Error("missing 'fs' module");super(t._wasm_new_icc_colorspace(De(s),W(e)))}}getName(){return v(t._wasm_colorspace_get_name(this.pointer))}getType(){return b.COLORSPACE_TYPES[t._wasm_colorspace_get_type(this.pointer)]||"None"}getNumberOfComponents(){return t._wasm_colorspace_get_n(this.pointer)}isGray(){return this.getType()==="Gray"}isRGB(){return this.getType()==="RGB"}isCMYK(){return this.getType()==="CMYK"}isIndexed(){return this.getType()==="Indexed"}isLab(){return this.getType()==="Lab"}isDeviceN(){return this.getType()==="Separation"}isSubtractive(){return this.getType()==="CMYK"||this.getType()==="Separation"}toString(){return"[ColorSpace "+this.getName()+"]"}}b._drop=t._wasm_drop_colorspace;b.COLORSPACE_TYPES=["None","Gray","RGB","BGR","CMYK","Lab","Indexed","Separation"];b.DeviceGray=new b(t._wasm_device_gray());b.DeviceRGB=new b(t._wasm_device_rgb());b.DeviceBGR=new b(t._wasm_device_bgr());b.DeviceCMYK=new b(t._wasm_device_cmyk());b.Lab=new b(t._wasm_device_lab());class I extends O{constructor(e,s,_=0){let i=0;if(typeof e=="number")i=t._wasm_keep_font(e);else{if(typeof s=="string")if(Y)s=Y.readFileSync(s);else throw new Error("missing 'fs' module");s?i=t._wasm_new_font_from_buffer(g(e),W(s),_):e==="zh-Hant"?i=t._wasm_new_cjk_font(I.ADOBE_CNS):e==="zh-Hans"?i=t._wasm_new_cjk_font(I.ADOBE_GB):e==="ja"?i=t._wasm_new_cjk_font(I.ADOBE_JAPAN):e==="ko"?i=t._wasm_new_cjk_font(I.ADOBE_KOREA):i=t._wasm_new_base14_font(g(e))}super(i)}getName(){return v(t._wasm_font_get_name(this.pointer))}encodeCharacter(e){return typeof e=="string"&&(e=e.charCodeAt(0)),t._wasm_encode_character(this.pointer,e)}advanceGlyph(e,s=0){return t._wasm_advance_glyph(this.pointer,e,s)}isMono(){return!!t._wasm_font_is_monospaced(this.pointer)}isSerif(){return!!t._wasm_font_is_serif(this.pointer)}isBold(){return!!t._wasm_font_is_bold(this.pointer)}isItalic(){return!!t._wasm_font_is_italic(this.pointer)}}I._drop=t._wasm_drop_font;I.SIMPLE_ENCODING=["Latin","Greek","Cyrillic"];I.ADOBE_CNS=0;I.ADOBE_GB=1;I.ADOBE_JAPAN=2;I.ADOBE_KOREA=3;I.CJK_ORDERING_BY_LANG={"Adobe-CNS1":0,"Adobe-GB1":1,"Adobe-Japan1":2,"Adobe-Korea1":3,"zh-Hant":0,"zh-TW":0,"zh-HK":0,"zh-Hans":1,"zh-CN":1,ja:2,ko:3};class Q extends O{constructor(e,s){let _=0;if(typeof e=="number")_=t._wasm_keep_image(e);else if(e instanceof se)_=t._wasm_new_image_from_pixmap(e.pointer,s?s.pointer:0);else{if(typeof e=="string")if(Y)e=Y.readFileSync(e);else throw new Error("missing 'fs' module");_=t._wasm_new_image_from_buffer(W(e))}super(_)}getWidth(){return t._wasm_image_get_w(this.pointer)}getHeight(){return t._wasm_image_get_h(this.pointer)}getNumberOfComponents(){return t._wasm_image_get_n(this.pointer)}getBitsPerComponent(){return t._wasm_image_get_bpc(this.pointer)}getXResolution(){return t._wasm_image_get_xres(this.pointer)}getYResolution(){return t._wasm_image_get_yres(this.pointer)}getImageMask(){return!!t._wasm_image_get_imagemask(this.pointer)}getColorSpace(){let e=t._wasm_image_get_colorspace(this.pointer);return e?new b(t._wasm_keep_colorspace(e)):null}getMask(){let e=t._wasm_image_get_mask(this.pointer);return e?new Q(t._wasm_keep_image(e)):null}toPixmap(){return new se(t._wasm_get_pixmap_from_image(this.pointer))}}Q._drop=t._wasm_drop_image;class H extends O{constructor(e){if(typeof e=="number")return super(e),this;super(t._wasm_new_stroke_state(e?.dashes?.length??0));let s=B(e.lineCap,H.LINE_CAP),_=B(e.lineJoin,H.LINE_JOIN);if(t._wasm_stroke_state_set_start_cap(this.pointer,s),t._wasm_stroke_state_set_dash_cap(this.pointer,s),t._wasm_stroke_state_set_end_cap(this.pointer,s),t._wasm_stroke_state_set_linejoin(this.pointer,_),t._wasm_stroke_state_set_linewidth(this.pointer,e.lineWidth),t._wasm_stroke_state_set_miterlimit(this.pointer,e.miterLimit),t._wasm_stroke_state_set_dash_phase(this.pointer,e.dashPhase??0),e.dashes)for(let i=0;i<e.dashes.length;++i)t._wasm_stroke_state_set_dash_item(this.pointer,i,e.dashes[i]??0)}getLineCap(){return t._wasm_stroke_state_get_start_cap(this.pointer)}getLineJoin(){return t._wasm_stroke_state_get_linejoin(this.pointer)}getLineWidth(){return t._wasm_stroke_state_get_linewidth(this.pointer)}getMiterLimit(){return t._wasm_stroke_state_get_miterlimit(this.pointer)}getDashPhase(){return t._wasm_stroke_state_get_dash_phase(this.pointer)}getDashes(){var e=t._wasm_stroke_state_get_dash_len(this.pointer);if(e>0){var s=[];for(let _=0;_<e;++_)s[_]=t._wasm_stroke_state_get_dash_item(this.pointer,_);return s}return null}}H._drop=t._wasm_drop_stroke_state;H.LINE_CAP=["Butt","Round","Square","Triangle"];H.LINE_JOIN=["Miter","Round","Bevel","MiterXPS"];class oe extends O{constructor(e){typeof e=="number"?super(e):super(t._wasm_new_path())}getBounds(e,s){return e!==null&&p(e,H),E(s),U(t._wasm_bound_path(this.pointer,e?.pointer,x(s)))}moveTo(e,s){p(e,"number"),p(s,"number"),t._wasm_moveto(this.pointer,e,s)}lineTo(e,s){p(e,"number"),p(s,"number"),t._wasm_lineto(this.pointer,e,s)}curveTo(e,s,_,i,m,u){p(e,"number"),p(s,"number"),p(_,"number"),p(i,"number"),p(m,"number"),p(u,"number"),t._wasm_curveto(this.pointer,e,s,_,i,m,u)}curveToV(e,s,_,i){p(e,"number"),p(s,"number"),p(_,"number"),p(i,"number"),t._wasm_curvetov(this.pointer,e,s,_,i)}curveToY(e,s,_,i){p(e,"number"),p(s,"number"),p(_,"number"),p(i,"number"),t._wasm_curvetoy(this.pointer,e,s,_,i)}closePath(){t._wasm_closepath(this.pointer)}rect(e,s,_,i){p(e,"number"),p(s,"number"),p(_,"number"),p(i,"number"),t._wasm_rectto(this.pointer,e,s,_,i)}transform(e){E(e),t._wasm_transform_path(this.pointer,x(e))}walk(e){let s=X_++;Te.set(s,e),t._wasm_walk_path(this.pointer,s),Te.delete(s)}}oe._drop=t._wasm_drop_path;class ee extends O{constructor(e){typeof e=="number"?super(e):super(t._wasm_new_text())}getBounds(e,s){return e!==null&&p(e,H),E(s),U(t._wasm_bound_text(this.pointer,e?.pointer,x(s)))}showGlyph(e,s,_,i,m=0){p(e,I),E(s),p(_,"number"),p(i,"number"),t._wasm_show_glyph(this.pointer,e.pointer,x(s),_,i,m)}showString(e,s,_,i=0){return p(e,I),E(s),p(_,"string"),C(t._wasm_show_string(this.pointer,e.pointer,x(s),g(_),i))}walk(e){let s=q_++;Oe.set(s,e),t._wasm_walk_text(this.pointer,s),Oe.delete(s)}}ee._drop=t._wasm_drop_text;class Ge extends O{constructor(e){let s=0;typeof e=="number"?s=e:(j(e),s=t._wasm_new_display_list(G(e))),super(s)}getBounds(){return U(t._wasm_bound_display_list(this.pointer))}toPixmap(e,s,_=!1){return E(e),p(s,b),new se(t._wasm_new_pixmap_from_display_list(this.pointer,x(e),s.pointer,_))}toStructuredText(e=""){return p(e,"string"),new pe(t._wasm_new_stext_page_from_display_list(this.pointer,g(e)))}run(e,s){p(e,X),E(s),t._wasm_run_display_list(this.pointer,e.pointer,x(s))}search(e,s=500){return Ze(t._wasm_search_display_list,this.pointer,e,s)}}Ge._drop=t._wasm_drop_display_list;class se extends O{constructor(e,s,_=!1){typeof e=="number"&&super(e),e instanceof b&&(j(s),super(t._wasm_new_pixmap_with_bbox(e.pointer,G(s),_))),e===null&&(j(s),super(t._wasm_new_pixmap_with_bbox(0,G(s),_)))}getBounds(){let e=t._wasm_pixmap_get_x(this.pointer),s=t._wasm_pixmap_get_y(this.pointer),_=t._wasm_pixmap_get_w(this.pointer),i=t._wasm_pixmap_get_h(this.pointer);return[e,s,e+_,s+i]}clear(e){typeof e>"u"?t._wasm_clear_pixmap(this.pointer):t._wasm_clear_pixmap_with_value(this.pointer,e)}getWidth(){return t._wasm_pixmap_get_w(this.pointer)}getHeight(){return t._wasm_pixmap_get_h(this.pointer)}getX(){return t._wasm_pixmap_get_x(this.pointer)}getY(){return t._wasm_pixmap_get_y(this.pointer)}getStride(){return t._wasm_pixmap_get_stride(this.pointer)}getNumberOfComponents(){return t._wasm_pixmap_get_n(this.pointer)}getAlpha(){return t._wasm_pixmap_get_alpha(this.pointer)}getXResolution(){return t._wasm_pixmap_get_xres(this.pointer)}getYResolution(){return t._wasm_pixmap_get_yres(this.pointer)}setResolution(e,s){t._wasm_pixmap_set_xres(this.pointer,e),t._wasm_pixmap_set_yres(this.pointer,s)}getColorSpace(){let e=t._wasm_pixmap_get_colorspace(this.pointer);return e?new b(t._wasm_keep_colorspace(e)):null}getPixels(){let e=t._wasm_pixmap_get_stride(this.pointer),s=t._wasm_pixmap_get_h(this.pointer),_=t._wasm_pixmap_get_samples(this.pointer);return new Uint8ClampedArray(t.HEAPU8.buffer,_,e*s)}asPNG(){let e=t._wasm_new_buffer_from_pixmap_as_png(this.pointer);try{return Ue(e)}finally{t._wasm_drop_buffer(e)}}asPSD(){let e=t._wasm_new_buffer_from_pixmap_as_psd(this.pointer);try{return Ue(e)}finally{t._wasm_drop_buffer(e)}}asPAM(){let e=t._wasm_new_buffer_from_pixmap_as_pam(this.pointer);try{return Ue(e)}finally{t._wasm_drop_buffer(e)}}asJPEG(e,s=!1){let _=t._wasm_new_buffer_from_pixmap_as_jpeg(this.pointer,e,s);try{return Ue(_)}finally{t._wasm_drop_buffer(_)}}invert(){t._wasm_invert_pixmap(this.pointer)}invertLuminance(){t._wasm_invert_pixmap_luminance(this.pointer)}gamma(e){t._wasm_gamma_pixmap(this.pointer,e)}tint(e,s){let _=0,i=16777215;typeof e=="number"?_=e:e instanceof Array&&e.length===3&&(_=e[0]*255<<16|e[1]*255<<8|e[2]*255),typeof s=="number"?i=s:s instanceof Array&&s.length===3&&(s=s[0]*255<<16|s[1]*255<<8|s[2]*255),t._wasm_tint_pixmap(this.pointer,_,i)}convertToColorSpace(e,s=!1){return p(e,b),p(s,"boolean"),new se(t._wasm_convert_pixmap(this.pointer,e.pointer,s))}warp(e,s,_){let i=e.flat();return b_(i),p(s,"number"),p(_,"number"),new se(t._wasm_warp_pixmap(this.pointer,y_(i),s,_))}}se._drop=t._wasm_drop_pixmap;class e_ extends O{getBounds(){return U(t._wasm_bound_shade(this.pointer))}}e_._drop=t._wasm_drop_shade;class pe extends O{walk(e){let s=t._wasm_stext_page_get_first_block(this.pointer);for(;s;){let _=t._wasm_stext_block_get_type(s),i=U(t._wasm_stext_block_get_bbox(s));if(_===1){if(e.onImageBlock){let m=C(t._wasm_stext_block_get_transform(s)),u=new Q(t._wasm_stext_block_get_image(s));e.onImageBlock(i,m,u)}}else{e.beginTextBlock&&e.beginTextBlock(i);let m=t._wasm_stext_block_get_first_line(s);for(;m;){let u=U(t._wasm_stext_line_get_bbox(m)),c=t._wasm_stext_line_get_wmode(m),A=V(t._wasm_stext_line_get_dir(m));if(e.beginLine&&e.beginLine(u,c,A),e.onChar){let k=t._wasm_stext_line_get_first_char(m);for(;k;){let Z=String.fromCharCode(t._wasm_stext_char_get_c(k)),te=V(t._wasm_stext_char_get_origin(k)),Ce=new I(t._wasm_stext_char_get_font(k)),Ae=t._wasm_stext_char_get_size(k),he=Se(t._wasm_stext_char_get_quad(k)),Re=Y_(t._wasm_stext_char_get_argb(k));e.onChar(Z,te,Ce,Ae,he,Re),k=t._wasm_stext_char_get_next(k)}}e.endLine&&e.endLine(),m=t._wasm_stext_line_get_next(m)}e.endTextBlock&&e.endTextBlock()}s=t._wasm_stext_block_get_next(s)}}asJSON(e=1){return we(t._wasm_print_stext_page_as_json(this.pointer,e))}asHTML(e){return we(t._wasm_print_stext_page_as_html(this.pointer,e))}asText(){return we(t._wasm_print_stext_page_as_text(this.pointer))}snap(e,s,_){let i=B(_,pe.SELECT_MODE);return Se(t._wasm_snap_selection(this.pointer,ie(e),Ie(s),i))}copy(e,s){return we(t._wasm_copy_selection(this.pointer,ie(e),Ie(s)))}highlight(e,s,_=100){let i=0,m=[];try{i=z(32*_);let u=t._wasm_highlight_selection(this.pointer,ie(e),Ie(s),i,_);for(let c=0;c<u;++c)m.push(Se(i+c*32))}finally{ue(i)}return m}search(e,s=500){return Ze(t._wasm_search_stext_page,this.pointer,e,s)}}pe._drop=t._wasm_drop_stext_page;pe.SELECT_MODE=["chars","words","lines"];pe.SELECT_CHARS="chars";pe.SELECT_WORDS="words";pe.SELECT_LINES="lines";class X extends O{constructor(e){if(typeof e=="number")super(e);else{let s=W_++;P.set(s,e),super(t._wasm_new_js_device(s))}}fillPath(e,s,_,i,m,u){p(e,oe),E(_),p(i,b),ye(m),t._wasm_fill_path(this.pointer,e.pointer,s,x(_),i.pointer,K(m),u)}strokePath(e,s,_,i,m,u){p(e,oe),p(s,H),E(_),p(i,b),ye(m),t._wasm_stroke_path(this.pointer,e.pointer,s.pointer,x(_),i.pointer,K(m),u)}clipPath(e,s,_){p(e,oe),E(_),t._wasm_clip_path(this.pointer,e.pointer,s,x(_))}clipStrokePath(e,s,_){p(e,oe),p(s,H),E(_),t._wasm_clip_stroke_path(this.pointer,e.pointer,s.pointer,x(_))}fillText(e,s,_,i,m){p(e,ee),E(s),p(_,b),ye(i),t._wasm_fill_text(this.pointer,e.pointer,x(s),_.pointer,K(i),m)}strokeText(e,s,_,i,m,u){p(e,ee),p(s,H),E(_),p(i,b),ye(m),t._wasm_stroke_text(this.pointer,e.pointer,s.pointer,x(_),i.pointer,K(m),u)}clipText(e,s){p(e,ee),E(s),t._wasm_clip_text(this.pointer,e.pointer,x(s))}clipStrokeText(e,s,_){p(e,ee),p(s,H),E(_),t._wasm_clip_stroke_text(this.pointer,e.pointer,s.pointer,x(_))}ignoreText(e,s){p(e,ee),E(s),t._wasm_ignore_text(this.pointer,e.pointer,x(s))}fillShade(e,s,_){p(e,e_),E(s),t._wasm_fill_shade(this.pointer,e.pointer,x(s),_)}fillImage(e,s,_){p(e,Q),E(s),t._wasm_fill_image(this.pointer,e.pointer,x(s),_)}fillImageMask(e,s,_,i,m){p(e,Q),E(s),p(_,b),ye(i),t._wasm_fill_image_mask(this.pointer,e.pointer,x(s),_.pointer,K(i),m)}clipImageMask(e,s){p(e,Q),E(s),t._wasm_clip_image_mask(this.pointer,e.pointer,x(s))}popClip(){t._wasm_pop_clip(this.pointer)}beginMask(e,s,_,i){j(e),p(_,b),ye(i),t._wasm_begin_mask(this.pointer,G(e),s,_.pointer,K(i))}endMask(){t._wasm_end_mask(this.pointer)}beginGroup(e,s,_,i,m,u){j(e),p(s,b);let c=B(m,X.BLEND_MODES);t._wasm_begin_group(this.pointer,G(e),s.pointer,_,i,c,u)}endGroup(){t._wasm_end_group(this.pointer)}beginTile(e,s,_,i,m,u){return j(e),j(s),E(m),t._wasm_begin_tile(this.pointer,G(e),z_(s),_,i,x(m),u)}endTile(){t._wasm_end_tile(this.pointer)}beginLayer(e){t._wasm_begin_layer(this.pointer,g(e))}endLayer(){t._wasm_end_layer(this.pointer)}close(){t._wasm_close_device(this.pointer)}}X._drop=t._wasm_drop_device;X.BLEND_MODES=["Normal","Multiply","Screen","Overlay","Darken","Lighten","ColorDodge","ColorBurn","HardLight","SoftLight","Difference","Exclusion","Hue","Saturation","Color","Luminosity"];class V_ extends O{constructor(e,s,_){super(t._wasm_new_document_writer_with_buffer(W(e),g(s),Je(_)))}beginPage(e){return j(e),new X(t._wasm_begin_page(this.pointer,G(e)))}endPage(){t._wasm_end_page(this.pointer)}close(){t._wasm_close_document_writer(this.pointer)}}V_._drop=t._wasm_drop_document_writer;class L extends O{static openDocument(e,s){let _=0;if(typeof e=="string")if(s=e,Y)e=Y.readFileSync(e);else throw new Error("missing 'fs' module");else typeof s>"u"&&(s="application/pdf");if(p(s,"string"),(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=new q(e)),e instanceof q)_=t._wasm_open_document_with_buffer(g(s),e.pointer);else if(e instanceof T_)_=t._wasm_open_document_with_stream(g(s),e.pointer);else throw new Error("not a Buffer or Stream");let i=t._wasm_pdf_document_from_fz_document(_);return i?new $(i):new L(_)}formatLinkURI(e){return we(t._wasm_format_link_uri(this.pointer,e.chapter|0,e.page|0,B(e.type,L.LINK_DEST),+e.x,+e.y,+e.width,+e.height,+e.zoom))}asPDF(){return this instanceof $?this:null}isPDF(){return this instanceof $}needsPassword(){return!!t._wasm_needs_password(this.pointer)}authenticatePassword(e){return t._wasm_authenticate_password(this.pointer,g(e))}hasPermission(e){let s=L.PERMISSION[e];return!!t._wasm_has_permission(this.pointer,s)}getMetaData(e){let s=t._wasm_lookup_metadata(this.pointer,g(e));if(s)return v(s)}setMetaData(e,s){t._wasm_set_metadata(this.pointer,g(e),Je(s))}countPages(){return t._wasm_count_pages(this.pointer)}isReflowable(){t._wasm_is_document_reflowable(this.pointer)}layout(e,s,_){t._wasm_layout_document(this.pointer,e,s,_)}loadPage(e){let s=t._wasm_load_page(this.pointer,e);if(this instanceof $){let _=t._wasm_pdf_page_from_fz_page(s);if(_)return new _e(this,_)}return new de(s)}loadOutline(){let e=this.pointer;function s(i){let m=[];for(;i;){let u=t._wasm_outline_get_title(i),c=t._wasm_outline_get_uri(i),A=t._wasm_outline_get_is_open(i),k={title:u?v(u):void 0,uri:c?v(c):void 0,open:!!A},Z=t._wasm_outline_get_page(e,i);Z>=0&&(k.page=Z);let te=t._wasm_outline_get_down(i);te&&(k.down=s(te)),m.push(k),i=t._wasm_outline_get_next(i)}return m}let _=t._wasm_load_outline(e);return _?s(_):null}resolveLink(e){return e instanceof ke?t._wasm_resolve_link(this.pointer,t._wasm_link_get_uri(e.pointer)):t._wasm_resolve_link(this.pointer,g(e))}resolveLinkDestination(e){let s;return e instanceof ke?s=t._wasm_resolve_link_dest(this.pointer,t._wasm_link_get_uri(e.pointer)):s=t._wasm_resolve_link_dest(this.pointer,g(e)),{type:L.LINK_DEST[t._wasm_link_dest_get_type(s)],chapter:t._wasm_link_dest_get_chapter(s),page:t._wasm_link_dest_get_page(s),x:t._wasm_link_dest_get_x(s),y:t._wasm_link_dest_get_y(s),width:t._wasm_link_dest_get_w(s),height:t._wasm_link_dest_get_h(s),zoom:t._wasm_link_dest_get_zoom(s)}}outlineIterator(){return new Ne(t._wasm_new_outline_iterator(this.pointer))}}L._drop=t._wasm_drop_document;L.META_FORMAT="format";L.META_ENCRYPTION="encryption";L.META_INFO_AUTHOR="info:Author";L.META_INFO_TITLE="info:Title";L.META_INFO_SUBJECT="info:Subject";L.META_INFO_KEYWORDS="info:Keywords";L.META_INFO_CREATOR="info:Creator";L.META_INFO_PRODUCER="info:Producer";L.META_INFO_CREATIONDATE="info:CreationDate";L.META_INFO_MODIFICATIONDATE="info:ModDate";L.PERMISSION={print:112,copy:99,edit:101,annotate:110,form:102,accessibility:121,assemble:97,"print-hq":104};L.LINK_DEST=["Fit","FitB","FitH","FitBH","FitV","FitBV","FitR","XYZ"];class Ne extends O{item(){let e=t._wasm_outline_iterator_item(this.pointer);if(e){let s=t._wasm_outline_item_get_title(e),_=t._wasm_outline_item_get_uri(e),i=t._wasm_outline_item_get_is_open(e);return{title:s?v(s):void 0,uri:_?v(_):void 0,open:!!i}}return null}next(){return t._wasm_outline_iterator_next(this.pointer)}prev(){return t._wasm_outline_iterator_prev(this.pointer)}up(){return t._wasm_outline_iterator_up(this.pointer)}down(){return t._wasm_outline_iterator_down(this.pointer)}delete(){return t._wasm_outline_iterator_delete(this.pointer)}insert(e){return t._wasm_outline_iterator_insert(this.pointer,De(e.title),$e(e.uri),e.open)}update(e){t._wasm_outline_iterator_update(this.pointer,De(e.title),$e(e.uri),e.open)}}Ne._drop=t._wasm_drop_outline_iterator;Ne.RESULT_DID_NOT_MOVE=-1;Ne.RESULT_AT_ITEM=0;Ne.RESULT_AT_EMPTY=1;class ke extends O{getBounds(){return U(t._wasm_link_get_rect(this.pointer))}setBounds(e){j(e),t._wasm_link_set_rect(this.pointer,G(e))}getURI(){return v(t._wasm_link_get_uri(this.pointer))}setURI(e){p(e,"string"),t._wasm_link_set_uri(this.pointer,g(e))}isExternal(){return/^\w[\w+-.]*:/.test(this.getURI())}}ke._drop=t._wasm_drop_link;class de extends O{isPDF(){return this instanceof _e}getBounds(e="CropBox"){let s=B(e,de.BOXES);return U(t._wasm_bound_page(this.pointer,s))}getLabel(){return v(t._wasm_page_label(this.pointer))}run(e,s){p(e,X),E(s),t._wasm_run_page(this.pointer,e.pointer,x(s))}runPageContents(e,s){p(e,X),E(s),t._wasm_run_page_contents(this.pointer,e.pointer,x(s))}runPageAnnots(e,s){p(e,X),E(s),t._wasm_run_page_annots(this.pointer,e.pointer,x(s))}runPageWidgets(e,s){p(e,X),E(s),t._wasm_run_page_widgets(this.pointer,e.pointer,x(s))}toPixmap(e,s,_=!1,i=!0){p(s,b),E(e);let m;return i?m=t._wasm_new_pixmap_from_page(this.pointer,x(e),s.pointer,_):m=t._wasm_new_pixmap_from_page_contents(this.pointer,x(e),s.pointer,_),new se(m)}toDisplayList(e=!0){let s;return e?s=t._wasm_new_display_list_from_page(this.pointer):s=t._wasm_new_display_list_from_page_contents(this.pointer),new Ge(s)}toStructuredText(e=""){return p(e,"string"),new pe(t._wasm_new_stext_page_from_page(this.pointer,g(e)))}getLinks(){let e=[],s=t._wasm_load_links(this.pointer);for(;s;)e.push(new ke(t._wasm_keep_link(s))),s=t._wasm_link_get_next(s);return e}createLink(e,s){return j(e),new ke(t._wasm_create_link(this.pointer,G(e),g(s)))}deleteLink(e){p(e,ke),t._wasm_delete_link(this.pointer,e.pointer)}search(e,s=500){return Ze(t._wasm_search_page,this.pointer,e,s)}}de._drop=t._wasm_drop_page;de.BOXES=["MediaBox","CropBox","BleedBox","TrimBox","ArtBox"];class $ extends L{constructor(e){if(typeof e>"u")super(t._wasm_pdf_create_document());else if(typeof e=="number")super(e);else if(e instanceof $)super(e.pointer),t._wasm_keep_document(this.pointer);else{let s=L.openDocument(e,"application/pdf");if(s instanceof $)return s;throw new Error("not a PDF document")}}loadPage(e){return super.loadPage(e)}_fromPDFObjectNew(e){return e===0?F.Null:new F(this,e)}_fromPDFObjectKeep(e){return e===0?F.Null:new F(this,t._wasm_pdf_keep_obj(e))}_toPDFObject(e){if(e instanceof F)return e;if(e==null)return this.newNull();if(typeof e=="string")return e.startsWith("(")&&e.endsWith(")")?this.newString(e.slice(1,-1)):this.newName(e);if(typeof e=="number")return e===(e|0)?this.newInteger(e):this.newReal(e);if(typeof e=="boolean")return this.newBoolean(e);if(e instanceof Array){let s=this.newArray();for(let _ of e)s.push(_);return s}if(e instanceof Object){let s=this.newDictionary();for(let _ in e)s.put(_,e[_]);return s}throw new TypeError("cannot convert value to PDFObject")}_PDFOBJ(e){return this._toPDFObject(e).pointer}getVersion(){return t._wasm_pdf_version(this.pointer)}getLanguage(){return E_(t._wasm_pdf_document_language(this.pointer))}setLanguage(e){t._wasm_pdf_set_document_language(this.pointer,g(e))}countObjects(){return t._wasm_pdf_xref_len(this.pointer)}getTrailer(){return new F(this,t._wasm_pdf_trailer(this.pointer))}createObject(){let e=t._wasm_pdf_create_object(this.pointer);return this._fromPDFObjectNew(t._wasm_pdf_new_indirect(this.pointer,e))}newNull(){return F.Null}newBoolean(e){return this._fromPDFObjectNew(t._wasm_pdf_new_bool(e))}newInteger(e){return this._fromPDFObjectNew(t._wasm_pdf_new_int(e))}newReal(e){return this._fromPDFObjectNew(t._wasm_pdf_new_real(e))}newName(e){return this._fromPDFObjectNew(t._wasm_pdf_new_name(g(e)))}newString(e){return this._fromPDFObjectNew(t._wasm_pdf_new_text_string(g(e)))}newByteString(e){e instanceof Array&&(e=Uint8Array.from(e)),p(e,Uint8Array);let s=e.byteLength,_=z(s);t.HEAPU8.set(e,_);try{return this._fromPDFObjectNew(t._wasm_pdf_new_string(_,s))}finally{ue(_)}}newIndirect(e){return this._fromPDFObjectNew(t._wasm_pdf_new_indirect(this.pointer,e))}newArray(){return this._fromPDFObjectNew(t._wasm_pdf_new_array(this.pointer))}newDictionary(){return this._fromPDFObjectNew(t._wasm_pdf_new_dict(this.pointer))}deleteObject(e){e instanceof F?e=e.asIndirect():p(e,"number"),t._wasm_pdf_delete_object(this.pointer,e)}addObject(e){return this._fromPDFObjectNew(t._wasm_pdf_add_object(this.pointer,this._PDFOBJ(e)))}addStream(e,s){return this._fromPDFObjectNew(t._wasm_pdf_add_stream(this.pointer,W(e),this._PDFOBJ(s),0))}addRawStream(e,s){return this._fromPDFObjectNew(t._wasm_pdf_add_stream(this.pointer,W(e),this._PDFOBJ(s),1))}newGraftMap(){return new x_(this,t._wasm_pdf_new_graft_map(this.pointer))}graftObject(e){return p(e,F),this._fromPDFObjectNew(t._wasm_pdf_graft_object(this.pointer,e.pointer))}graftPage(e,s,_){p(e,"number"),p(s,$),p(_,"number"),t._wasm_pdf_graft_page(this.pointer,e,s.pointer,_)}addSimpleFont(e,s="Latin"){p(e,I);var _=B(s,I.SIMPLE_ENCODING);return this._fromPDFObjectNew(t._wasm_pdf_add_simple_font(this.pointer,e.pointer,_))}addCJKFont(e,s,_=0,i=!0){return p(e,I),typeof s=="string"&&(s=I.CJK_ORDERING_BY_LANG[s]),this._fromPDFObjectNew(t._wasm_pdf_add_cjk_font(this.pointer,e.pointer,s,_,i))}addFont(e){return p(e,I),this._fromPDFObjectNew(t._wasm_pdf_add_cid_font(this.pointer,e.pointer))}addImage(e){return p(e,Q),this._fromPDFObjectNew(t._wasm_pdf_add_image(this.pointer,e.pointer))}loadImage(e){return p(e,F),new Q(t._wasm_pdf_load_image(this.pointer,e.pointer))}findPage(e){return p(e,"number"),this._fromPDFObjectKeep(t._wasm_pdf_lookup_page_obj(this.pointer,e))}addPage(e,s,_,i){return j(e),p(s,"number"),this._fromPDFObjectNew(t._wasm_pdf_add_page(this.pointer,G(e),s,this._PDFOBJ(_),W(i)))}insertPage(e,s){p(e,"number"),t._wasm_pdf_insert_page(this.pointer,e,this._PDFOBJ(s))}deletePage(e){p(e,"number"),t._wasm_pdf_delete_page(this.pointer,e)}isEmbeddedFile(e){return p(e,F),!!t._wasm_pdf_is_embedded_file(e.pointer)}addEmbeddedFile(e,s,_,i,m,u=!1){return p(e,"string"),p(s,"string"),p(i,Date),p(m,Date),p(u,"boolean"),this._fromPDFObjectNew(t._wasm_pdf_add_embedded_file(this.pointer,g(e),Je(s),W(_),i.getTime()/1e3|0,m.getTime()/1e3|0,u))}getFilespecParams(e){p(e,F);let s=t._wasm_pdf_get_filespec_params(e.pointer);return{filename:v(t._wasm_pdf_filespec_params_get_filename(s)),mimetype:v(t._wasm_pdf_filespec_params_get_mimetype(s)),size:t._wasm_pdf_filespec_params_get_filename(s),creationDate:new Date(t._wasm_pdf_filespec_params_get_created(s)*1e3),modificationDate:new Date(t._wasm_pdf_filespec_params_get_modified(s)*1e3)}}getEmbeddedFileContents(e){p(e,F);let s=t._wasm_pdf_load_embedded_file_contents(e.pointer);return s?new q(s):null}getEmbeddedFiles(){function e(s,_){var i,m;if(_.isDictionary()){var u=_.get("Names");if(u)for(i=0,m=u.length;i<m;i+=2)s[u.get(i+0).asString()]=u.get(i+1);var c=_.get("Kids");if(c)for(i=0,m=c.length;i<m;i+=1)e(s,c.get(i))}return s}return e({},this.getTrailer().get("Root","Names","EmbeddedFiles"))}loadNameTree(e){function s(m,u){var c=u.get("Kids");if(c&&c.isArray())for(var A=0;A<c.length;A+=1)s(m,c.get(A));var k=u.get("Names");if(k&&k.isArray())for(var A=0;A<k.length;A+=2)m[k.get(A).asString()]=k.get(A+1)}var _=this.getTrailer().get("Root").get("Names").get(e),i={};return _.isDictionary()&&s(i,_),i}insertEmbeddedFile(e,s){var _=this.getEmbeddedFiles();_[e]=s,this._rewriteEmbeddedFiles(_)}deleteEmbeddedFile(e){var s=this.getEmbeddedFiles();delete s[e],this._rewriteEmbeddedFiles(s)}_rewriteEmbeddedFiles(e){var s=Object.keys(e);s.sort();var _=this.getTrailer().get("Root"),i=_.get("Names");i.isDictionary()||(i=_.put("Names",this.newDictionary()));var m=i.put("EmbeddedFiles",this.newDictionary()),u=m.put("Names",this.newArray());for(var c of s)u.push(this.newString(c)),u.push(e[c])}saveToBuffer(e=""){var s;return typeof e=="object"?s=Object.entries(e).map(_=>{var i=_[0],m=_[1];return m===!0?i+"=yes":m===!1?i+"=no":i+"="+String(m).replaceAll(",",":")}).join(","):s=e,new q(t._wasm_pdf_write_document_buffer(this.pointer,g(s)))}save(e,s=""){if(Y)Y.writeFileSync(e,this.saveToBuffer(s).asUint8Array());else throw new Error("missing 'fs' module")}setPageLabels(e,s="D",_="",i=1){t._wasm_pdf_set_page_labels(this.pointer,e,s.charCodeAt(0),g(_),i)}deletePageLabels(e){t._wasm_pdf_delete_page_labels(this.pointer,e)}wasRepaired(){return!!t._wasm_pdf_was_repaired(this.pointer)}hasUnsavedChanges(){return!!t._wasm_pdf_has_unsaved_changes(this.pointer)}countVersions(){return t._wasm_pdf_count_versions(this.pointer)}countUnsavedVersions(){return t._wasm_pdf_count_unsaved_versions(this.pointer)}validateChangeHistory(){return t._wasm_pdf_validate_change_history(this.pointer)}canBeSavedIncrementally(){return!!t._wasm_pdf_can_be_saved_incrementally(this.pointer)}enableJournal(){t._wasm_pdf_enable_journal(this.pointer)}getJournal(){let e=t._wasm_pdf_undoredo_state_position(this.pointer),s=t._wasm_pdf_undoredo_state_count(this.pointer),_=[];for(let i=0;i<s;++i)_.push(v(t._wasm_pdf_undoredo_step(this.pointer,i)));return{position:e,steps:_}}beginOperation(e){t._wasm_pdf_begin_operation(this.pointer,g(e))}beginImplicitOperation(){t._wasm_pdf_begin_implicit_operation(this.pointer)}endOperation(){t._wasm_pdf_end_operation(this.pointer)}abandonOperation(){t._wasm_pdf_abandon_operation(this.pointer)}canUndo(){return!!t._wasm_pdf_can_undo(this.pointer)}canRedo(){return!!t._wasm_pdf_can_redo(this.pointer)}undo(){t._wasm_pdf_undo(this.pointer)}redo(){t._wasm_pdf_redo(this.pointer)}isJSSupported(){return!!t._wasm_pdf_js_supported(this.pointer)}enableJS(){t._wasm_pdf_enable_js(this.pointer)}disableJS(){t._wasm_pdf_disable_js(this.pointer)}setJSEventListener(e){throw"TODO"}rearrangePages(e){let s=e.length,_=z(s<<2);for(let i=0;i<s;++i)t.HEAPU32[(_>>2)+i]=e[i]||0;try{t._wasm_pdf_rearrange_pages(this.pointer,s,_)}finally{ue(_)}}subsetFonts(){t._wasm_pdf_subset_fonts(this.pointer)}bake(e=!0,s=!0){t._wasm_pdf_bake_document(this.pointer,e,s)}countLayers(){return t._wasm_pdf_count_layers(this.pointer)}isLayerVisible(e){return!!t._wasm_pdf_layer_is_enabled(this.pointer,e)}setLayerVisible(e,s){t._wasm_pdf_enable_layer(this.pointer,e,Number(s))}getLayerName(e){return v(t._wasm_pdf_layer_name(this.pointer,e))}resetForm(e,s){t._wasm_pdf_reset_form(this.pointer,this._PDFOBJ(e),Number(s))}}$.PAGE_LABEL_NONE="\0";$.PAGE_LABEL_DECIMAL="D";$.PAGE_LABEL_ROMAN_UC="R";$.PAGE_LABEL_ROMAN_LC="r";$.PAGE_LABEL_ALPHA_UC="A";$.PAGE_LABEL_ALPHA_LC="a";class _e extends de{constructor(e,s){super(s),this._doc=e,this._annots=null,this._widgets=null}getObject(){return this._doc._fromPDFObjectKeep(t._wasm_pdf_page_get_obj(this.pointer))}getTransform(){return C(t._wasm_pdf_page_transform(this.pointer))}setPageBox(e,s){let _=B(e,de.BOXES);j(s),t._wasm_pdf_set_page_box(this.pointer,_,G(s))}toPixmap(e,s,_=!1,i=!0,m="View",u="CropBox"){E(e),p(s,b);let c=B(u,de.BOXES),A;return i?A=t._wasm_pdf_new_pixmap_from_page_with_usage(this.pointer,x(e),s.pointer,_,g(m),c):A=t._wasm_pdf_new_pixmap_from_page_contents_with_usage(this.pointer,x(e),s.pointer,_,g(m),c),new se(A)}getWidgets(){if(!this._widgets){this._widgets=[];let e=t._wasm_pdf_first_widget(this.pointer);for(;e;)this._widgets.push(new S(this._doc,t._wasm_pdf_keep_annot(e))),e=t._wasm_pdf_next_widget(e)}return this._widgets}getAnnotations(){if(!this._annots){this._annots=[];let e=t._wasm_pdf_first_annot(this.pointer);for(;e;)this._annots.push(new y(this._doc,t._wasm_pdf_keep_annot(e))),e=t._wasm_pdf_next_annot(e)}return this._annots}createAnnotation(e){let s=B(e,y.ANNOT_TYPES),_=new y(this._doc,t._wasm_pdf_create_annot(this.pointer,s));return this._annots&&this._annots.push(_),_}deleteAnnotation(e){if(p(e,y),t._wasm_pdf_delete_annot(this.pointer,e.pointer),this._annots){let s=this._annots.indexOf(e);s>=0&&this._annots.splice(s,1)}}applyRedactions(e=!0,s=2,_=1,i=0){t._wasm_pdf_redact_page(this.pointer,Number(e),s,_,i)}update(){return!!t._wasm_pdf_update_page(this.pointer)}}_e.REDACT_IMAGE_NONE=0;_e.REDACT_IMAGE_REMOVE=1;_e.REDACT_IMAGE_PIXELS=2;_e.REDACT_IMAGE_UNLESS_INVISIBLE=3;_e.REDACT_LINE_ART_NONE=0;_e.REDACT_LINE_ART_REMOVE_IF_COVERED=1;_e.REDACT_LINE_ART_REMOVE_IF_TOUCHED=2;_e.REDACT_TEXT_REMOVE=0;_e.REDACT_TEXT_NONE=1;class F extends O{constructor(e,s){super(t._wasm_pdf_keep_obj(s)),this._doc=e}isNull(){return this===F.Null}isIndirect(){return!!t._wasm_pdf_is_indirect(this.pointer)}isBoolean(){return!!t._wasm_pdf_is_bool(this.pointer)}isInteger(){return!!t._wasm_pdf_is_int(this.pointer)}isReal(){return!!t._wasm_pdf_is_real(this.pointer)}isNumber(){return!!t._wasm_pdf_is_number(this.pointer)}isName(){return!!t._wasm_pdf_is_name(this.pointer)}isString(){return!!t._wasm_pdf_is_string(this.pointer)}isArray(){return!!t._wasm_pdf_is_array(this.pointer)}isDictionary(){return!!t._wasm_pdf_is_dict(this.pointer)}isStream(){return!!t._wasm_pdf_is_stream(this.pointer)}asIndirect(){return t._wasm_pdf_to_num(this.pointer)}asBoolean(){return!!t._wasm_pdf_to_bool(this.pointer)}asNumber(){return t._wasm_pdf_to_real(this.pointer)}asName(){return v(t._wasm_pdf_to_name(this.pointer))}asString(){return v(t._wasm_pdf_to_text_string(this.pointer))}asByteString(){let e=t._wasm_pdf_to_string(this.pointer,g_),s=t.HEAPU32[g_>>2];return t.HEAPU8.slice(e,e+s)}readStream(){return new q(t._wasm_pdf_load_stream(this.pointer))}readRawStream(){return new q(t._wasm_pdf_load_raw_stream(this.pointer))}writeObject(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeObject on an indirect reference");t._wasm_pdf_update_object(this._doc.pointer,this.asIndirect(),this._doc._PDFOBJ(e))}writeStream(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeStream on an indirect reference");t._wasm_pdf_update_stream(this._doc.pointer,this.pointer,W(e),0)}writeRawStream(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeRawStream on an indirect reference");t._wasm_pdf_update_stream(this._doc.pointer,this.pointer,W(e),1)}resolve(){return this._doc._fromPDFObjectKeep(t._wasm_pdf_resolve_indirect(this.pointer))}get length(){return t._wasm_pdf_array_len(this.pointer)}set length(e){throw new TypeError("object length is read-only")}_get(e){let s=this.pointer;for(let _ of e)if(typeof _=="number"?s=t._wasm_pdf_array_get(s,_):_ instanceof F?s=t._wasm_pdf_dict_get(s,_.pointer):s=t._wasm_pdf_dict_gets(s,g(_)),s===0)break;return s}get(...e){return this._doc._fromPDFObjectKeep(this._get(e))}getInheritable(e){return e instanceof F?this._doc._fromPDFObjectKeep(t._wasm_pdf_dict_get_inheritable(this.pointer,e.pointer)):this._doc._fromPDFObjectKeep(t._wasm_pdf_dict_gets_inheritable(this.pointer,g(e)))}put(e,s){return s=this._doc._toPDFObject(s),typeof e=="number"?t._wasm_pdf_array_put(this.pointer,e,s.pointer):e instanceof F?t._wasm_pdf_dict_put(this.pointer,e.pointer,s.pointer):t._wasm_pdf_dict_puts(this.pointer,g(e),s.pointer),s}push(e){return e=this._doc._toPDFObject(e),t._wasm_pdf_array_push(this.pointer,e.pointer),e}delete(e){typeof e=="number"?t._wasm_pdf_array_delete(this.pointer,e):e instanceof F?t._wasm_pdf_dict_del(this.pointer,e.pointer):t._wasm_pdf_dict_dels(this.pointer,g(e))}valueOf(){return this.isNull()?null:this.isBoolean()?this.asBoolean():this.isNumber()?this.asNumber():this.isName()?this.asName():this.isString()?this.asString():this.isIndirect()?`${this.asIndirect()} 0 R`:this}toString(e=!0,s=!0){return we(t._wasm_pdf_sprint_obj(this.pointer,e,s))}forEach(e){if(this.isArray()){let s=this.length;for(let _=0;_<s;++_)e(this.get(_),_,this)}else if(this.isDictionary()){let s=t._wasm_pdf_dict_len(this.pointer);for(let _=0;_<s;++_){let i=this._doc._fromPDFObjectKeep(t._wasm_pdf_dict_get_key(this.pointer,_)),m=this._doc._fromPDFObjectKeep(t._wasm_pdf_dict_get_val(this.pointer,_));e(m,i.asName(),this)}}}asJS(e){if(this.isIndirect()){let s=this.asIndirect();return e?s in e?e[s]:(e[s]=F.Null,e[s]=this.resolve().asJS(e)):`${s} 0 R`}if(this.isArray()){let s=[];return this.forEach(_=>{s.push(_.asJS(e))}),s}if(this.isDictionary()){let s={};return this.forEach((_,i)=>{s[i]=_.asJS(e)}),s}return this.valueOf()}}F._drop=t._wasm_pdf_drop_obj;F.Null=new F(null,0);class x_ extends O{constructor(e,s){super(s),this._doc=e}graftObject(e){return p(e,F),this._doc._fromPDFObjectNew(t._wasm_pdf_graft_mapped_object(this.pointer,e.pointer))}graftPage(e,s,_){p(e,"number"),p(s,$),p(_,"number"),t._wasm_pdf_graft_mapped_page(this.pointer,e,s.pointer,_)}}x_._drop=t._wasm_pdf_drop_graft_map;class y extends O{constructor(e,s){super(s),this._doc=e}getObject(){return this._doc._fromPDFObjectKeep(t._wasm_pdf_annot_obj(this.pointer))}getBounds(){return U(t._wasm_pdf_bound_annot(this.pointer))}run(e,s){p(e,X),E(s),t._wasm_pdf_run_annot(this.pointer,e.pointer,x(s))}toPixmap(e,s,_=!1){return E(e),p(s,b),new se(t._wasm_pdf_new_pixmap_from_annot(this.pointer,x(e),s.pointer,_))}toDisplayList(){return new Ge(t._wasm_pdf_new_display_list_from_annot(this.pointer))}update(){return!!t._wasm_pdf_update_annot(this.pointer)}getType(){let e=t._wasm_pdf_annot_type(this.pointer);return y.ANNOT_TYPES[e]||"Text"}getLanguage(){return E_(t._wasm_pdf_annot_language(this.pointer))}setLanguage(e){t._wasm_pdf_set_annot_language(this.pointer,g(e))}getFlags(){return t._wasm_pdf_annot_flags(this.pointer)}setFlags(e){return t._wasm_pdf_set_annot_flags(this.pointer,e)}getContents(){return v(t._wasm_pdf_annot_contents(this.pointer))}setContents(e){t._wasm_pdf_set_annot_contents(this.pointer,g(e))}getAuthor(){return v(t._wasm_pdf_annot_author(this.pointer))}setAuthor(e){t._wasm_pdf_set_annot_author(this.pointer,g(e))}getCreationDate(){return new Date(t._wasm_pdf_annot_creation_date(this.pointer)*1e3)}setCreationDate(e){p(e,Date),t._wasm_pdf_set_annot_creation_date(this.pointer,e.getTime()/1e3)}getModificationDate(){return new Date(t._wasm_pdf_annot_modification_date(this.pointer)*1e3)}setModificationDate(e){p(e,Date),t._wasm_pdf_set_annot_modification_date(this.pointer,e.getTime()/1e3)}hasRect(){return!!t._wasm_pdf_annot_has_rect(this.pointer)}hasInkList(){return!!t._wasm_pdf_annot_has_ink_list(this.pointer)}hasQuadPoints(){return!!t._wasm_pdf_annot_has_quad_points(this.pointer)}hasVertices(){return!!t._wasm_pdf_annot_has_vertices(this.pointer)}hasLine(){return!!t._wasm_pdf_annot_has_line(this.pointer)}hasInteriorColor(){return!!t._wasm_pdf_annot_has_interior_color(this.pointer)}hasLineEndingStyles(){return!!t._wasm_pdf_annot_has_line_ending_styles(this.pointer)}hasBorder(){return!!t._wasm_pdf_annot_has_border(this.pointer)}hasBorderEffect(){return!!t._wasm_pdf_annot_has_border_effect(this.pointer)}hasIcon(){return!!t._wasm_pdf_annot_has_icon_name(this.pointer)}hasOpen(){return!!t._wasm_pdf_annot_has_open(this.pointer)}hasAuthor(){return!!t._wasm_pdf_annot_has_author(this.pointer)}hasFilespec(){return!!t._wasm_pdf_annot_has_filespec(this.pointer)}hasCallout(){return!!t._wasm_pdf_annot_has_callout(this.pointer)}hasRichContents(){return!!t._wasm_pdf_annot_has_rich_contents(this.pointer)}getRect(){return U(t._wasm_pdf_annot_rect(this.pointer))}setRect(e){j(e),t._wasm_pdf_set_annot_rect(this.pointer,G(e))}getPopup(){return U(t._wasm_pdf_annot_popup(this.pointer))}setPopup(e){j(e),t._wasm_pdf_set_annot_popup(this.pointer,G(e))}getIsOpen(){return!!t._wasm_pdf_annot_is_open(this.pointer)}setIsOpen(e){p(e,"boolean"),t._wasm_pdf_set_annot_is_open(this.pointer,e)}getHiddenForEditing(){return!!t._wasm_pdf_annot_hidden_for_editing(this.pointer)}setHiddenForEditing(e){p(e,"boolean"),t._wasm_pdf_set_annot_hidden_for_editing(this.pointer,e)}getIcon(){return v(t._wasm_pdf_annot_icon_name(this.pointer))}setIcon(e){p(e,"string"),t._wasm_pdf_set_annot_icon_name(this.pointer,g(e))}getOpacity(){return t._wasm_pdf_annot_opacity(this.pointer)}setOpacity(e){p(e,"number"),t._wasm_pdf_set_annot_opacity(this.pointer,e)}getQuadding(){return t._wasm_pdf_annot_quadding(this.pointer)}setQuadding(e){p(e,"number"),t._wasm_pdf_set_annot_quadding(this.pointer,e)}getLine(){let e=V(t._wasm_pdf_annot_line_1(this.pointer)),s=V(t._wasm_pdf_annot_line_2(this.pointer));return[e,s]}setLine(e,s){je(e),je(s),t._wasm_pdf_set_annot_line(this.pointer,ie(e),Ie(s))}getLineEndingStyles(){let e=t._wasm_pdf_annot_line_ending_styles_start(this.pointer),s=t._wasm_pdf_annot_line_ending_styles_end(this.pointer);return{start:y.LINE_ENDING[e]||"None",end:y.LINE_ENDING[s]||"None"}}setLineEndingStyles(e,s){let _=B(e,y.LINE_ENDING),i=B(s,y.LINE_ENDING);t._wasm_pdf_set_annot_line_ending_styles(this.pointer,_,i)}getLineCaption(){return t._wasm_pdf_annot_line_caption(this.pointer)}setLineCaption(e){return t._wasm_pdf_set_annot_line_caption(this.pointer,e)}getLineCaptionOffset(){return V(t._wasm_pdf_annot_line_caption_offset(this.pointer))}setLineCaptionOffset(e){return t._wasm_pdf_set_annot_line_caption_offset(this.pointer,ie(e))}getLineLeader(){return t._wasm_pdf_annot_line_leader(this.pointer)}getLineLeaderExtension(){return t._wasm_pdf_annot_line_leader_extension(this.pointer)}getLineLeaderOffset(){return t._wasm_pdf_annot_line_leader_offset(this.pointer)}setLineLeader(e){return t._wasm_pdf_set_annot_line_leader(this.pointer,e)}setLineLeaderExtension(e){return t._wasm_pdf_set_annot_line_leader_extension(this.pointer,e)}setLineLeaderOffset(e){return t._wasm_pdf_set_annot_line_leader_offset(this.pointer,e)}getCalloutStyle(){let e=t._wasm_pdf_annot_callout_style(this.pointer);return y.LINE_ENDING[e]||"None"}setCalloutStyle(e){let s=B(e,y.LINE_ENDING);t._wasm_pdf_set_annot_callout_style(this.pointer,s)}getCalloutLine(){let e=t._wasm_pdf_annot_callout_line(this.pointer,M<<2);return e==3?[V(M+0<<2),V(M+1<<2),V(M+2<<2)]:e==2?[V(M+0<<2),V(M+1<<2)]:null}setCalloutLine(e){let s=e[0]||[0,0],_=e[1]||[0,0],i=e[2]||[0,0];t._wasm_pdf_set_annot_callout_line(this.pointer,e.length,ie(s),Ie(_),G_(i))}getCalloutPoint(){let e=this.getCalloutLine();if(e)return e[0]}setCalloutPoint(e){t._wasm_pdf_set_annot_callout_point(this.pointer,ie(e))}getColor(){return Qe(t._wasm_pdf_annot_color(this.pointer,K()))}getInteriorColor(){return Qe(t._wasm_pdf_annot_interior_color(this.pointer,K()))}setColor(e){qe(e),t._wasm_pdf_set_annot_color(this.pointer,e.length,K(e))}setInteriorColor(e){qe(e),t._wasm_pdf_set_annot_interior_color(this.pointer,e.length,K(e))}getBorderWidth(){return t._wasm_pdf_annot_border_width(this.pointer)}setBorderWidth(e){return p(e,"number"),t._wasm_pdf_set_annot_border_width(this.pointer,e)}getBorderStyle(){return y.BORDER_STYLE[t._wasm_pdf_annot_border_style(this.pointer)]||"Solid"}setBorderStyle(e){let s=B(e,y.BORDER_STYLE);return t._wasm_pdf_set_annot_border_style(this.pointer,s)}getBorderEffect(){return y.BORDER_EFFECT[t._wasm_pdf_annot_border_effect(this.pointer)]||"None"}setBorderEffect(e){let s=B(e,y.BORDER_EFFECT);return t._wasm_pdf_set_annot_border_effect(this.pointer,s)}getBorderEffectIntensity(){return t._wasm_pdf_annot_border_effect_intensity(this.pointer)}setBorderEffectIntensity(e){return p(e,"number"),t._wasm_pdf_set_annot_border_effect_intensity(this.pointer,e)}getBorderDashCount(){return t._wasm_pdf_annot_border_dash_count(this.pointer)}getBorderDashItem(e){return t._wasm_pdf_annot_border_dash_item(this.pointer,e)}clearBorderDash(){t._wasm_pdf_clear_annot_border_dash(this.pointer)}addBorderDashItem(e){return p(e,"number"),t._wasm_pdf_add_annot_border_dash_item(this.pointer,e)}getBorderDashPattern(){let e=this.getBorderDashCount(),s=new Array(e);for(let _=0;_<e;++_)s[_]=this.getBorderDashItem(_);return s}setBorderDashPattern(e){this.clearBorderDash();for(let s of e)this.addBorderDashItem(s)}getIntent(){return y.INTENT[t._wasm_pdf_annot_intent(this.pointer)]||null}setIntent(e){let s=B(e,y.INTENT);return t._wasm_pdf_set_annot_intent(this.pointer,s)}setDefaultAppearance(e,s,_){p(e,"string"),p(s,"number"),qe(_),t._wasm_pdf_set_annot_default_appearance(this.pointer,g(e),s,_.length,K(_))}getDefaultAppearance(){let e=v(t._wasm_pdf_annot_default_appearance_font(this.pointer)),s=t._wasm_pdf_annot_default_appearance_size(this.pointer),_=Qe(t._wasm_pdf_annot_default_appearance_color(this.pointer,K()));return{font:e,size:s,color:_}}getFileSpec(){return this._doc._fromPDFObjectKeep(t._wasm_pdf_annot_filespec(this.pointer))}setFileSpec(e){return t._wasm_pdf_set_annot_filespec(this.pointer,this._doc._PDFOBJ(e))}getQuadPoints(){let e=t._wasm_pdf_annot_quad_point_count(this.pointer),s=[];for(let _=0;_<e;++_)s.push(Se(t._wasm_pdf_annot_quad_point(this.pointer,_)));return s}clearQuadPoints(){t._wasm_pdf_clear_annot_quad_points(this.pointer)}addQuadPoint(e){b_(e),t._wasm_pdf_add_annot_quad_point(this.pointer,y_(e))}setQuadPoints(e){this.clearQuadPoints();for(let s of e)this.addQuadPoint(s)}getVertices(){let e=t._wasm_pdf_annot_vertex_count(this.pointer),s=new Array(e);for(let _=0;_<e;++_)s[_]=V(t._wasm_pdf_annot_vertex(this.pointer,_));return s}clearVertices(){t._wasm_pdf_clear_annot_vertices(this.pointer)}addVertex(e){je(e),t._wasm_pdf_add_annot_vertex(this.pointer,ie(e))}setVertices(e){this.clearVertices();for(let s of e)this.addVertex(s)}getInkList(){let e=t._wasm_pdf_annot_ink_list_count(this.pointer),s=[];for(let _=0;_<e;++_){let i=t._wasm_pdf_annot_ink_list_stroke_count(this.pointer,_),m=new Array(i);for(let u=0;u<i;++u)m[u]=V(t._wasm_pdf_annot_ink_list_stroke_vertex(this.pointer,_,u));s.push(m)}return s}clearInkList(){t._wasm_pdf_clear_annot_ink_list(this.pointer)}addInkListStroke(){t._wasm_pdf_add_annot_ink_list_stroke(this.pointer)}addInkListStrokeVertex(e){je(e),t._wasm_pdf_add_annot_ink_list_stroke_vertex(this.pointer,ie(e))}setInkList(e){this.clearInkList();for(let s of e){this.addInkListStroke();for(let _ of s)this.addInkListStrokeVertex(_)}}getRichContents(){return v(t._wasm_pdf_annot_rich_contents(this.pointer))}setRichContents(e,s){p(e,"string"),p(s,"string"),t._wasm_pdf_set_annot_rich_contents(this.pointer,g(e),Je(s))}getRichDefaults(){return v(t._wasm_pdf_annot_rich_defaults(this.pointer))}setRichDefaults(e){p(e,"string"),t._wasm_pdf_set_annot_rich_defaults(this.pointer,g(e))}setStampImage(e){t._wasm_pdf_set_annot_stamp_image(this.pointer,e.pointer)}setAppearanceFromDisplayList(e,s,_,i){E(_),p(i,Ge),t._wasm_pdf_set_annot_appearance_from_display_list(this.pointer,De(e),$e(s),x(_),i.pointer)}setAppearance(e,s,_,i,m,u){E(_),j(i),t._wasm_pdf_set_annot_appearance(this.pointer,De(e),$e(s),x(_),G(i),this._doc._PDFOBJ(m),W(u))}applyRedaction(e=1,s=2,_=1,i=0){t._wasm_pdf_apply_redaction(this.pointer,e,s,_,i)}}y._drop=t._wasm_pdf_drop_annot;y.ANNOT_TYPES=["Text","Link","FreeText","Line","Square","Circle","Polygon","PolyLine","Highlight","Underline","Squiggly","StrikeOut","Redact","Stamp","Caret","Ink","Popup","FileAttachment","Sound","Movie","RichMedia","Widget","Screen","PrinterMark","TrapNet","Watermark","3D","Projection"];y.LINE_ENDING=["None","Square","Circle","Diamond","OpenArrow","ClosedArrow","Butt","ROpenArrow","RClosedArrow","Slash"];y.BORDER_STYLE=["Solid","Dashed","Beveled","Inset","Underline"];y.BORDER_EFFECT=["None","Cloudy"];y.INTENT=[null,"FreeTextCallout","FreeTextTypeWriter","LineArrow","LineDimension","PloyLine","PolygonCloud","PolygonDimension","StampImage","StampSnapshot"];y.IS_INVISIBLE=1;y.IS_HIDDEN=2;y.IS_PRINT=4;y.IS_NO_ZOOM=8;y.IS_NO_ROTATE=16;y.IS_NO_VIEW=32;y.IS_READ_ONLY=64;y.IS_LOCKED=128;y.IS_TOGGLE_NO_VIEW=256;y.IS_LOCKED_CONTENTS=512;class S extends y{getFieldType(){return S.WIDGET_TYPES[t._wasm_pdf_annot_field_type(this.pointer)]||"button"}isButton(){let e=this.getFieldType();return e==="button"||e==="checkbox"||e==="radiobutton"}isPushButton(){return this.getFieldType()==="button"}isCheckbox(){return this.getFieldType()==="checkbox"}isRadioButton(){return this.getFieldType()==="radiobutton"}isText(){return this.getFieldType()==="text"}isChoice(){let e=this.getFieldType();return e==="combobox"||e==="listbox"}isListBox(){return this.getFieldType()==="listbox"}isComboBox(){return this.getFieldType()==="combobox"}getFieldFlags(){return t._wasm_pdf_annot_field_flags(this.pointer)}isMultiline(){return(this.getFieldFlags()&S.TX_FIELD_IS_MULTILINE)!==0}isPassword(){return(this.getFieldFlags()&S.TX_FIELD_IS_PASSWORD)!==0}isComb(){return(this.getFieldFlags()&S.TX_FIELD_IS_COMB)!==0}isReadOnly(){return(this.getFieldFlags()&S.FIELD_IS_READ_ONLY)!==0}getLabel(){return v(t._wasm_pdf_annot_field_label(this.pointer))}getName(){return we(t._wasm_pdf_load_field_name(this.pointer))}getValue(){return v(t._wasm_pdf_annot_field_value(this.pointer))}setTextValue(e){return t._wasm_pdf_set_annot_text_field_value(this.pointer,g(e))}getMaxLen(){return t._wasm_pdf_annot_text_widget_max_len(this.pointer)}setChoiceValue(e){return t._wasm_pdf_set_annot_choice_field_value(this.pointer,g(e))}getOptions(e=!1){let s=[],_=t._wasm_pdf_annot_choice_field_option_count(this.pointer);for(let i=0;i<_;++i)s.push(v(t._wasm_pdf_annot_choice_field_option(this.pointer,e,i)));return s}toggle(){return t._wasm_pdf_toggle_widget(this.pointer)}}S.WIDGET_TYPES=["widget","button","checkbox","combobox","listbox","radiobutton","signature","text"];S.FIELD_IS_READ_ONLY=1;S.FIELD_IS_REQUIRED=2;S.FIELD_IS_NO_EXPORT=4;S.TX_FIELD_IS_MULTILINE=4096;S.TX_FIELD_IS_PASSWORD=8192;S.TX_FIELD_IS_COMB=1<<24;S.BTN_FIELD_IS_NO_TOGGLE_TO_OFF=16384;S.BTN_FIELD_IS_RADIO=32768;S.BTN_FIELD_IS_PUSHBUTTON=65536;S.CH_FIELD_IS_COMBO=1<<17;S.CH_FIELD_IS_EDIT=1<<18;S.CH_FIELD_IS_SORT=1<<19;S.CH_FIELD_IS_MULTI_SELECT=1<<21;var K_=0,Le=new Map;globalThis.$libmupdf_stm_close=function(r){let e=Le.get(r);if(e){e.close(),Le.delete(r);return}throw new Error("invalid file handle")};globalThis.$libmupdf_stm_seek=function(r,e,s,_){let i=Le.get(r);if(i){if(_===0)return s;if(_===1)return e+s;if(_===2){let m=i.fileSize();return m<0?-1:m+s}throw new Error("invalid whence argument")}throw new Error("invalid file handle")};globalThis.$libmupdf_stm_read=function(r,e,s,_){let i=Le.get(r);if(i)return i.read(t.HEAPU8,s,_,e);throw new Error("invalid file handle")};class T_ extends O{constructor(e){let s=K_++;Le.set(s,e),super(t._wasm_new_stream(s))}}T_._drop=t._wasm_drop_stream;globalThis.$libmupdf_load_font_file=function(r,e,s,_){return 0};var W_=0,P=new Map,X_=0,Te=new Map,q_=0,Oe=new Map;globalThis.$libmupdf_path_walk={moveto(r,e,s){Te.get(r)?.moveTo?.(e,s)},lineto(r,e,s){Te.get(r)?.lineTo?.(e,s)},curveto(r,e,s,_,i,m,u){Te.get(r)?.curveTo?.(e,s,_,i,m,u)},closepath(r){Te.get(r)?.closePath?.()}};var xe=null;globalThis.$libmupdf_text_walk={begin_span(r,e,s,_,i,m,u){e!==xe?.pointer&&(xe=new I(e)),Oe.get(r)?.beginSpan?.(xe,C(s),_,i,m,v(u))},end_span(r){Oe.get(r)?.endSpan?.()},show_glyph(r,e,s,_,i,m,u){e!==xe?.pointer&&(xe=new I(e)),Oe.get(r)?.showGlyph?.(xe,C(s),_,i,m,u)}};globalThis.$libmupdf_device={drop_device(r){P.get(r)?.drop?.(),P.delete(r)},close_device(r){P.get(r)?.close?.()},fill_path(r,e,s,_,i,m,u,c){P.get(r)?.fillPath?.(new oe(e),!!s,C(_),new b(i),Ee(m,u),c)},clip_path(r,e,s,_){P.get(r)?.clipPath?.(new oe(e),!!s,C(_))},stroke_path(r,e,s,_,i,m,u,c){P.get(r)?.strokePath?.(new oe(e),new H(s),C(_),new b(i),Ee(m,u),c)},clip_stroke_path(r,e,s,_){P.get(r)?.clipStrokePath?.(new oe(e),new H(s),C(_))},fill_text(r,e,s,_,i,m,u){P.get(r)?.fillText?.(new ee(e),C(s),new b(_),Ee(i,m),u)},stroke_text(r,e,s,_,i,m,u,c){P.get(r)?.strokeText?.(new ee(e),new H(s),C(_),new b(i),Ee(m,u),c)},clip_text(r,e,s){P.get(r)?.clipText?.(new ee(e),C(s))},clip_stroke_text(r,e,s,_){P.get(r)?.clipStrokeText?.(new ee(e),new H(s),C(_))},ignore_text(r,e,s){P.get(r)?.ignoreText?.(new ee(e),C(s))},fill_shade(r,e,s,_){P.get(r)?.fillShade?.(new e_(e),C(s),_)},fill_image(r,e,s,_){P.get(r)?.fillImage?.(new Q(e),C(s),_)},fill_image_mask(r,e,s,_,i,m,u){P.get(r)?.fillImageMask?.(new Q(e),C(s),new b(_),Ee(i,m),u)},clip_image_mask(r,e,s){P.get(r)?.clipImageMask?.(new Q(e),C(s))},pop_clip(r){P.get(r)?.popClip?.()},begin_mask(r,e,s,_,i,m){P.get(r)?.beginMask?.(U(e),!!s,new b(_),Ee(i,m))},begin_group(r,e,s,_,i,m,u){P.get(r)?.beginGroup?.(U(e),new b(s),!!_,!!i,X.BLEND_MODES[m],u)},begin_tile(r,e,s,_,i,m,u){return P.get(r)?.beginTile?.(U(e),U(s),_,i,C(m),u)||0},begin_layer(r,e){P.get(r)?.beginLayer?.(v(e))},end_mask(r){P.get(r)?.endMask?.()},end_group(r){P.get(r)?.endGroup?.()},end_tile(r){P.get(r)?.endTile?.()},end_layer(r){P.get(r)?.endLayer?.()}};export{q as Buffer,b as ColorSpace,X as Device,Ge as DisplayList,L as Document,V_ as DocumentWriter,I as Font,Q as Image,ke as Link,Q_ as Matrix,Ne as OutlineIterator,y as PDFAnnotation,$ as PDFDocument,x_ as PDFGraftMap,F as PDFObject,_e as PDFPage,S as PDFWidget,de as Page,oe as Path,se as Pixmap,e_ as Shade,T_ as Stream,H as StrokeState,pe as StructuredText,ee as Text};
//# sourceMappingURL=mupdf-DDgQjQ_4.js.map
